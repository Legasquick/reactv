function EE(r,e){for(var i=0;i<e.length;i++){const o=e[i];if(typeof o!="string"&&!Array.isArray(o)){for(const f in o)if(f!=="default"&&!(f in r)){const m=Object.getOwnPropertyDescriptor(o,f);m&&Object.defineProperty(r,f,m.get?m:{enumerable:!0,get:()=>o[f]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))o(f);new MutationObserver(f=>{for(const m of f)if(m.type==="childList")for(const x of m.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&o(x)}).observe(document,{childList:!0,subtree:!0});function i(f){const m={};return f.integrity&&(m.integrity=f.integrity),f.referrerPolicy&&(m.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?m.credentials="include":f.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function o(f){if(f.ep)return;f.ep=!0;const m=i(f);fetch(f.href,m)}})();var hf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bc(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var s0={exports:{}},ic={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _2;function vE(){if(_2)return ic;_2=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(o,f,m){var x=null;if(m!==void 0&&(x=""+m),f.key!==void 0&&(x=""+f.key),"key"in f){m={};for(var v in f)v!=="key"&&(m[v]=f[v])}else m=f;return f=m.ref,{$$typeof:r,type:o,key:x,ref:f!==void 0?f:null,props:m}}return ic.Fragment=e,ic.jsx=i,ic.jsxs=i,ic}var w2;function CE(){return w2||(w2=1,s0.exports=vE()),s0.exports}var A=CE(),r0={exports:{}},ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b2;function AE(){if(b2)return ot;b2=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),x=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),D=Symbol.iterator;function P(W){return W===null||typeof W!="object"?null:(W=D&&W[D]||W["@@iterator"],typeof W=="function"?W:null)}var G={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},H=Object.assign,ye={};function te(W,fe,Re){this.props=W,this.context=fe,this.refs=ye,this.updater=Re||G}te.prototype.isReactComponent={},te.prototype.setState=function(W,fe){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,fe,"setState")},te.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function $(){}$.prototype=te.prototype;function F(W,fe,Re){this.props=W,this.context=fe,this.refs=ye,this.updater=Re||G}var q=F.prototype=new $;q.constructor=F,H(q,te.prototype),q.isPureReactComponent=!0;var Z=Array.isArray;function U(){}var k={H:null,A:null,T:null,S:null},Y=Object.prototype.hasOwnProperty;function Q(W,fe,Re){var De=Re.ref;return{$$typeof:r,type:W,key:fe,ref:De!==void 0?De:null,props:Re}}function Ee(W,fe){return Q(W.type,fe,W.props)}function we(W){return typeof W=="object"&&W!==null&&W.$$typeof===r}function ne(W){var fe={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(Re){return fe[Re]})}var ge=/\/+/g;function Ie(W,fe){return typeof W=="object"&&W!==null&&W.key!=null?ne(""+W.key):fe.toString(36)}function oe(W){switch(W.status){case"fulfilled":return W.value;case"rejected":throw W.reason;default:switch(typeof W.status=="string"?W.then(U,U):(W.status="pending",W.then(function(fe){W.status==="pending"&&(W.status="fulfilled",W.value=fe)},function(fe){W.status==="pending"&&(W.status="rejected",W.reason=fe)})),W.status){case"fulfilled":return W.value;case"rejected":throw W.reason}}throw W}function ee(W,fe,Re,De,Je){var Ae=typeof W;(Ae==="undefined"||Ae==="boolean")&&(W=null);var nt=!1;if(W===null)nt=!0;else switch(Ae){case"bigint":case"string":case"number":nt=!0;break;case"object":switch(W.$$typeof){case r:case e:nt=!0;break;case T:return nt=W._init,ee(nt(W._payload),fe,Re,De,Je)}}if(nt)return Je=Je(W),nt=De===""?"."+Ie(W,0):De,Z(Je)?(Re="",nt!=null&&(Re=nt.replace(ge,"$&/")+"/"),ee(Je,fe,Re,"",function(On){return On})):Je!=null&&(we(Je)&&(Je=Ee(Je,Re+(Je.key==null||W&&W.key===Je.key?"":(""+Je.key).replace(ge,"$&/")+"/")+nt)),fe.push(Je)),1;nt=0;var it=De===""?".":De+":";if(Z(W))for(var wt=0;wt<W.length;wt++)De=W[wt],Ae=it+Ie(De,wt),nt+=ee(De,fe,Re,Ae,Je);else if(wt=P(W),typeof wt=="function")for(W=wt.call(W),wt=0;!(De=W.next()).done;)De=De.value,Ae=it+Ie(De,wt++),nt+=ee(De,fe,Re,Ae,Je);else if(Ae==="object"){if(typeof W.then=="function")return ee(oe(W),fe,Re,De,Je);throw fe=String(W),Error("Objects are not valid as a React child (found: "+(fe==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":fe)+"). If you meant to render a collection of children, use an array instead.")}return nt}function me(W,fe,Re){if(W==null)return W;var De=[],Je=0;return ee(W,De,"","",function(Ae){return fe.call(Re,Ae,Je++)}),De}function Ge(W){if(W._status===-1){var fe=W._result;fe=fe(),fe.then(function(Re){(W._status===0||W._status===-1)&&(W._status=1,W._result=Re)},function(Re){(W._status===0||W._status===-1)&&(W._status=2,W._result=Re)}),W._status===-1&&(W._status=0,W._result=fe)}if(W._status===1)return W._result.default;throw W._result}var rt=typeof reportError=="function"?reportError:function(W){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var fe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof W=="object"&&W!==null&&typeof W.message=="string"?String(W.message):String(W),error:W});if(!window.dispatchEvent(fe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",W);return}console.error(W)},lt={map:me,forEach:function(W,fe,Re){me(W,function(){fe.apply(this,arguments)},Re)},count:function(W){var fe=0;return me(W,function(){fe++}),fe},toArray:function(W){return me(W,function(fe){return fe})||[]},only:function(W){if(!we(W))throw Error("React.Children.only expected to receive a single React element child.");return W}};return ot.Activity=N,ot.Children=lt,ot.Component=te,ot.Fragment=i,ot.Profiler=f,ot.PureComponent=F,ot.StrictMode=o,ot.Suspense=E,ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,ot.__COMPILER_RUNTIME={__proto__:null,c:function(W){return k.H.useMemoCache(W)}},ot.cache=function(W){return function(){return W.apply(null,arguments)}},ot.cacheSignal=function(){return null},ot.cloneElement=function(W,fe,Re){if(W==null)throw Error("The argument must be a React element, but you passed "+W+".");var De=H({},W.props),Je=W.key;if(fe!=null)for(Ae in fe.key!==void 0&&(Je=""+fe.key),fe)!Y.call(fe,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&fe.ref===void 0||(De[Ae]=fe[Ae]);var Ae=arguments.length-2;if(Ae===1)De.children=Re;else if(1<Ae){for(var nt=Array(Ae),it=0;it<Ae;it++)nt[it]=arguments[it+2];De.children=nt}return Q(W.type,Je,De)},ot.createContext=function(W){return W={$$typeof:x,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null},W.Provider=W,W.Consumer={$$typeof:m,_context:W},W},ot.createElement=function(W,fe,Re){var De,Je={},Ae=null;if(fe!=null)for(De in fe.key!==void 0&&(Ae=""+fe.key),fe)Y.call(fe,De)&&De!=="key"&&De!=="__self"&&De!=="__source"&&(Je[De]=fe[De]);var nt=arguments.length-2;if(nt===1)Je.children=Re;else if(1<nt){for(var it=Array(nt),wt=0;wt<nt;wt++)it[wt]=arguments[wt+2];Je.children=it}if(W&&W.defaultProps)for(De in nt=W.defaultProps,nt)Je[De]===void 0&&(Je[De]=nt[De]);return Q(W,Ae,Je)},ot.createRef=function(){return{current:null}},ot.forwardRef=function(W){return{$$typeof:v,render:W}},ot.isValidElement=we,ot.lazy=function(W){return{$$typeof:T,_payload:{_status:-1,_result:W},_init:Ge}},ot.memo=function(W,fe){return{$$typeof:w,type:W,compare:fe===void 0?null:fe}},ot.startTransition=function(W){var fe=k.T,Re={};k.T=Re;try{var De=W(),Je=k.S;Je!==null&&Je(Re,De),typeof De=="object"&&De!==null&&typeof De.then=="function"&&De.then(U,rt)}catch(Ae){rt(Ae)}finally{fe!==null&&Re.types!==null&&(fe.types=Re.types),k.T=fe}},ot.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},ot.use=function(W){return k.H.use(W)},ot.useActionState=function(W,fe,Re){return k.H.useActionState(W,fe,Re)},ot.useCallback=function(W,fe){return k.H.useCallback(W,fe)},ot.useContext=function(W){return k.H.useContext(W)},ot.useDebugValue=function(){},ot.useDeferredValue=function(W,fe){return k.H.useDeferredValue(W,fe)},ot.useEffect=function(W,fe){return k.H.useEffect(W,fe)},ot.useEffectEvent=function(W){return k.H.useEffectEvent(W)},ot.useId=function(){return k.H.useId()},ot.useImperativeHandle=function(W,fe,Re){return k.H.useImperativeHandle(W,fe,Re)},ot.useInsertionEffect=function(W,fe){return k.H.useInsertionEffect(W,fe)},ot.useLayoutEffect=function(W,fe){return k.H.useLayoutEffect(W,fe)},ot.useMemo=function(W,fe){return k.H.useMemo(W,fe)},ot.useOptimistic=function(W,fe){return k.H.useOptimistic(W,fe)},ot.useReducer=function(W,fe,Re){return k.H.useReducer(W,fe,Re)},ot.useRef=function(W){return k.H.useRef(W)},ot.useState=function(W){return k.H.useState(W)},ot.useSyncExternalStore=function(W,fe,Re){return k.H.useSyncExternalStore(W,fe,Re)},ot.useTransition=function(){return k.H.useTransition()},ot.version="19.2.0",ot}var E2;function b1(){return E2||(E2=1,r0.exports=AE()),r0.exports}var Pe=b1();const SE=Bc(Pe);var a0={exports:{}},sc={},o0={exports:{}},l0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v2;function TE(){return v2||(v2=1,(function(r){function e(ee,me){var Ge=ee.length;ee.push(me);e:for(;0<Ge;){var rt=Ge-1>>>1,lt=ee[rt];if(0<f(lt,me))ee[rt]=me,ee[Ge]=lt,Ge=rt;else break e}}function i(ee){return ee.length===0?null:ee[0]}function o(ee){if(ee.length===0)return null;var me=ee[0],Ge=ee.pop();if(Ge!==me){ee[0]=Ge;e:for(var rt=0,lt=ee.length,W=lt>>>1;rt<W;){var fe=2*(rt+1)-1,Re=ee[fe],De=fe+1,Je=ee[De];if(0>f(Re,Ge))De<lt&&0>f(Je,Re)?(ee[rt]=Je,ee[De]=Ge,rt=De):(ee[rt]=Re,ee[fe]=Ge,rt=fe);else if(De<lt&&0>f(Je,Ge))ee[rt]=Je,ee[De]=Ge,rt=De;else break e}}return me}function f(ee,me){var Ge=ee.sortIndex-me.sortIndex;return Ge!==0?Ge:ee.id-me.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;r.unstable_now=function(){return m.now()}}else{var x=Date,v=x.now();r.unstable_now=function(){return x.now()-v}}var E=[],w=[],T=1,N=null,D=3,P=!1,G=!1,H=!1,ye=!1,te=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function q(ee){for(var me=i(w);me!==null;){if(me.callback===null)o(w);else if(me.startTime<=ee)o(w),me.sortIndex=me.expirationTime,e(E,me);else break;me=i(w)}}function Z(ee){if(H=!1,q(ee),!G)if(i(E)!==null)G=!0,U||(U=!0,ne());else{var me=i(w);me!==null&&oe(Z,me.startTime-ee)}}var U=!1,k=-1,Y=5,Q=-1;function Ee(){return ye?!0:!(r.unstable_now()-Q<Y)}function we(){if(ye=!1,U){var ee=r.unstable_now();Q=ee;var me=!0;try{e:{G=!1,H&&(H=!1,$(k),k=-1),P=!0;var Ge=D;try{t:{for(q(ee),N=i(E);N!==null&&!(N.expirationTime>ee&&Ee());){var rt=N.callback;if(typeof rt=="function"){N.callback=null,D=N.priorityLevel;var lt=rt(N.expirationTime<=ee);if(ee=r.unstable_now(),typeof lt=="function"){N.callback=lt,q(ee),me=!0;break t}N===i(E)&&o(E),q(ee)}else o(E);N=i(E)}if(N!==null)me=!0;else{var W=i(w);W!==null&&oe(Z,W.startTime-ee),me=!1}}break e}finally{N=null,D=Ge,P=!1}me=void 0}}finally{me?ne():U=!1}}}var ne;if(typeof F=="function")ne=function(){F(we)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Ie=ge.port2;ge.port1.onmessage=we,ne=function(){Ie.postMessage(null)}}else ne=function(){te(we,0)};function oe(ee,me){k=te(function(){ee(r.unstable_now())},me)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(ee){ee.callback=null},r.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<ee?Math.floor(1e3/ee):5},r.unstable_getCurrentPriorityLevel=function(){return D},r.unstable_next=function(ee){switch(D){case 1:case 2:case 3:var me=3;break;default:me=D}var Ge=D;D=me;try{return ee()}finally{D=Ge}},r.unstable_requestPaint=function(){ye=!0},r.unstable_runWithPriority=function(ee,me){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var Ge=D;D=ee;try{return me()}finally{D=Ge}},r.unstable_scheduleCallback=function(ee,me,Ge){var rt=r.unstable_now();switch(typeof Ge=="object"&&Ge!==null?(Ge=Ge.delay,Ge=typeof Ge=="number"&&0<Ge?rt+Ge:rt):Ge=rt,ee){case 1:var lt=-1;break;case 2:lt=250;break;case 5:lt=1073741823;break;case 4:lt=1e4;break;default:lt=5e3}return lt=Ge+lt,ee={id:T++,callback:me,priorityLevel:ee,startTime:Ge,expirationTime:lt,sortIndex:-1},Ge>rt?(ee.sortIndex=Ge,e(w,ee),i(E)===null&&ee===i(w)&&(H?($(k),k=-1):H=!0,oe(Z,Ge-rt))):(ee.sortIndex=lt,e(E,ee),G||P||(G=!0,U||(U=!0,ne()))),ee},r.unstable_shouldYield=Ee,r.unstable_wrapCallback=function(ee){var me=D;return function(){var Ge=D;D=me;try{return ee.apply(this,arguments)}finally{D=Ge}}}})(l0)),l0}var C2;function NE(){return C2||(C2=1,o0.exports=TE()),o0.exports}var c0={exports:{}},Jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A2;function IE(){if(A2)return Jn;A2=1;var r=b1();function e(E){var w="https://react.dev/errors/"+E;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var T=2;T<arguments.length;T++)w+="&args[]="+encodeURIComponent(arguments[T])}return"Minified React error #"+E+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},f=Symbol.for("react.portal");function m(E,w,T){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:N==null?null:""+N,children:E,containerInfo:w,implementation:T}}var x=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function v(E,w){if(E==="font")return"";if(typeof w=="string")return w==="use-credentials"?w:""}return Jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Jn.createPortal=function(E,w){var T=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)throw Error(e(299));return m(E,w,null,T)},Jn.flushSync=function(E){var w=x.T,T=o.p;try{if(x.T=null,o.p=2,E)return E()}finally{x.T=w,o.p=T,o.d.f()}},Jn.preconnect=function(E,w){typeof E=="string"&&(w?(w=w.crossOrigin,w=typeof w=="string"?w==="use-credentials"?w:"":void 0):w=null,o.d.C(E,w))},Jn.prefetchDNS=function(E){typeof E=="string"&&o.d.D(E)},Jn.preinit=function(E,w){if(typeof E=="string"&&w&&typeof w.as=="string"){var T=w.as,N=v(T,w.crossOrigin),D=typeof w.integrity=="string"?w.integrity:void 0,P=typeof w.fetchPriority=="string"?w.fetchPriority:void 0;T==="style"?o.d.S(E,typeof w.precedence=="string"?w.precedence:void 0,{crossOrigin:N,integrity:D,fetchPriority:P}):T==="script"&&o.d.X(E,{crossOrigin:N,integrity:D,fetchPriority:P,nonce:typeof w.nonce=="string"?w.nonce:void 0})}},Jn.preinitModule=function(E,w){if(typeof E=="string")if(typeof w=="object"&&w!==null){if(w.as==null||w.as==="script"){var T=v(w.as,w.crossOrigin);o.d.M(E,{crossOrigin:T,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0})}}else w==null&&o.d.M(E)},Jn.preload=function(E,w){if(typeof E=="string"&&typeof w=="object"&&w!==null&&typeof w.as=="string"){var T=w.as,N=v(T,w.crossOrigin);o.d.L(E,T,{crossOrigin:N,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0,type:typeof w.type=="string"?w.type:void 0,fetchPriority:typeof w.fetchPriority=="string"?w.fetchPriority:void 0,referrerPolicy:typeof w.referrerPolicy=="string"?w.referrerPolicy:void 0,imageSrcSet:typeof w.imageSrcSet=="string"?w.imageSrcSet:void 0,imageSizes:typeof w.imageSizes=="string"?w.imageSizes:void 0,media:typeof w.media=="string"?w.media:void 0})}},Jn.preloadModule=function(E,w){if(typeof E=="string")if(w){var T=v(w.as,w.crossOrigin);o.d.m(E,{as:typeof w.as=="string"&&w.as!=="script"?w.as:void 0,crossOrigin:T,integrity:typeof w.integrity=="string"?w.integrity:void 0})}else o.d.m(E)},Jn.requestFormReset=function(E){o.d.r(E)},Jn.unstable_batchedUpdates=function(E,w){return E(w)},Jn.useFormState=function(E,w,T){return x.H.useFormState(E,w,T)},Jn.useFormStatus=function(){return x.H.useHostTransitionStatus()},Jn.version="19.2.0",Jn}var S2;function RE(){if(S2)return c0.exports;S2=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),c0.exports=IE(),c0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T2;function OE(){if(T2)return sc;T2=1;var r=NE(),e=b1(),i=RE();function o(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var s=t,c=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(c=s.return),t=s.return;while(t)}return s.tag===3?c:null}function x(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function v(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function E(t){if(m(t)!==t)throw Error(o(188))}function w(t){var s=t.alternate;if(!s){if(s=m(t),s===null)throw Error(o(188));return s!==t?null:t}for(var c=t,d=s;;){var y=c.return;if(y===null)break;var b=y.alternate;if(b===null){if(d=y.return,d!==null){c=d;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===c)return E(y),t;if(b===d)return E(y),s;b=b.sibling}throw Error(o(188))}if(c.return!==d.return)c=y,d=b;else{for(var I=!1,L=y.child;L;){if(L===c){I=!0,c=y,d=b;break}if(L===d){I=!0,d=y,c=b;break}L=L.sibling}if(!I){for(L=b.child;L;){if(L===c){I=!0,c=b,d=y;break}if(L===d){I=!0,d=b,c=y;break}L=L.sibling}if(!I)throw Error(o(189))}}if(c.alternate!==d)throw Error(o(190))}if(c.tag!==3)throw Error(o(188));return c.stateNode.current===c?t:s}function T(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=T(t),s!==null)return s;t=t.sibling}return null}var N=Object.assign,D=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),G=Symbol.for("react.portal"),H=Symbol.for("react.fragment"),ye=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),F=Symbol.for("react.context"),q=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),Ee=Symbol.for("react.memo_cache_sentinel"),we=Symbol.iterator;function ne(t){return t===null||typeof t!="object"?null:(t=we&&t[we]||t["@@iterator"],typeof t=="function"?t:null)}var ge=Symbol.for("react.client.reference");function Ie(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===ge?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case H:return"Fragment";case te:return"Profiler";case ye:return"StrictMode";case Z:return"Suspense";case U:return"SuspenseList";case Q:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case G:return"Portal";case F:return t.displayName||"Context";case $:return(t._context.displayName||"Context")+".Consumer";case q:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k:return s=t.displayName||null,s!==null?s:Ie(t.type)||"Memo";case Y:s=t._payload,t=t._init;try{return Ie(t(s))}catch{}}return null}var oe=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ge={pending:!1,data:null,method:null,action:null},rt=[],lt=-1;function W(t){return{current:t}}function fe(t){0>lt||(t.current=rt[lt],rt[lt]=null,lt--)}function Re(t,s){lt++,rt[lt]=t.current,t.current=s}var De=W(null),Je=W(null),Ae=W(null),nt=W(null);function it(t,s){switch(Re(Ae,s),Re(Je,t),Re(De,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?Hp(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=Hp(s),t=Vp(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}fe(De),Re(De,t)}function wt(){fe(De),fe(Je),fe(Ae)}function On(t){t.memoizedState!==null&&Re(nt,t);var s=De.current,c=Vp(s,t.type);s!==c&&(Re(Je,t),Re(De,c))}function _n(t){Je.current===t&&(fe(De),fe(Je)),nt.current===t&&(fe(nt),$l._currentValue=Ge)}var ui,pe;function Ne(t){if(ui===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);ui=s&&s[1]||"",pe=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ui+t+pe}var Le=!1;function Ye(t,s){if(!t||Le)return"";Le=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(s){var _e=function(){throw Error()};if(Object.defineProperty(_e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(_e,[])}catch(he){var le=he}Reflect.construct(t,[],_e)}else{try{_e.call()}catch(he){le=he}t.call(_e.prototype)}}else{try{throw Error()}catch(he){le=he}(_e=t())&&typeof _e.catch=="function"&&_e.catch(function(){})}}catch(he){if(he&&le&&typeof he.stack=="string")return[he.stack,le.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=d.DetermineComponentFrameRoot(),I=b[0],L=b[1];if(I&&L){var z=I.split(`
`),ae=L.split(`
`);for(y=d=0;d<z.length&&!z[d].includes("DetermineComponentFrameRoot");)d++;for(;y<ae.length&&!ae[y].includes("DetermineComponentFrameRoot");)y++;if(d===z.length||y===ae.length)for(d=z.length-1,y=ae.length-1;1<=d&&0<=y&&z[d]!==ae[y];)y--;for(;1<=d&&0<=y;d--,y--)if(z[d]!==ae[y]){if(d!==1||y!==1)do if(d--,y--,0>y||z[d]!==ae[y]){var de=`
`+z[d].replace(" at new "," at ");return t.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",t.displayName)),de}while(1<=d&&0<=y);break}}}finally{Le=!1,Error.prepareStackTrace=c}return(c=t?t.displayName||t.name:"")?Ne(c):""}function Fe(t,s){switch(t.tag){case 26:case 27:case 5:return Ne(t.type);case 16:return Ne("Lazy");case 13:return t.child!==s&&s!==null?Ne("Suspense Fallback"):Ne("Suspense");case 19:return Ne("SuspenseList");case 0:case 15:return Ye(t.type,!1);case 11:return Ye(t.type.render,!1);case 1:return Ye(t.type,!0);case 31:return Ne("Activity");default:return""}}function Me(t){try{var s="",c=null;do s+=Fe(t,c),c=t,t=t.return;while(t);return s}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var ke=Object.prototype.hasOwnProperty,Ht=r.unstable_scheduleCallback,Be=r.unstable_cancelCallback,zi=r.unstable_shouldYield,fi=r.unstable_requestPaint,Wt=r.unstable_now,pa=r.unstable_getCurrentPriorityLevel,hi=r.unstable_ImmediatePriority,fl=r.unstable_UserBlockingPriority,Si=r.unstable_NormalPriority,qn=r.unstable_LowPriority,hl=r.unstable_IdlePriority,so=r.log,ch=r.unstable_setDisableYieldValue,en=null,Te=null;function Vt(t){if(typeof so=="function"&&ch(t),Te&&typeof Te.setStrictMode=="function")try{Te.setStrictMode(en,t)}catch{}}var ut=Math.clz32?Math.clz32:dl,cn=Math.log,xa=Math.LN2;function dl(t){return t>>>=0,t===0?32:31-(cn(t)/xa|0)|0}var ya=256,bt=262144,Hi=4194304;function _s(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function _a(t,s,c){var d=t.pendingLanes;if(d===0)return 0;var y=0,b=t.suspendedLanes,I=t.pingedLanes;t=t.warmLanes;var L=d&134217727;return L!==0?(d=L&~b,d!==0?y=_s(d):(I&=L,I!==0?y=_s(I):c||(c=L&~t,c!==0&&(y=_s(c))))):(L=d&~b,L!==0?y=_s(L):I!==0?y=_s(I):c||(c=d&~t,c!==0&&(y=_s(c)))),y===0?0:s!==0&&s!==y&&(s&b)===0&&(b=y&-y,c=s&-s,b>=c||b===32&&(c&4194048)!==0)?s:y}function Xn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function gl(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dn(){var t=Hi;return Hi<<=1,(Hi&62914560)===0&&(Hi=4194304),t}function ws(t){for(var s=[],c=0;31>c;c++)s.push(t);return s}function bs(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Vi(t,s,c,d,y,b){var I=t.pendingLanes;t.pendingLanes=c,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=c,t.entangledLanes&=c,t.errorRecoveryDisabledLanes&=c,t.shellSuspendCounter=0;var L=t.entanglements,z=t.expirationTimes,ae=t.hiddenUpdates;for(c=I&~c;0<c;){var de=31-ut(c),_e=1<<de;L[de]=0,z[de]=-1;var le=ae[de];if(le!==null)for(ae[de]=null,de=0;de<le.length;de++){var he=le[de];he!==null&&(he.lane&=-536870913)}c&=~_e}d!==0&&Wc(t,d,0),b!==0&&y===0&&t.tag!==0&&(t.suspendedLanes|=b&~(I&~s))}function Wc(t,s,c){t.pendingLanes|=s,t.suspendedLanes&=~s;var d=31-ut(s);t.entangledLanes|=s,t.entanglements[d]=t.entanglements[d]|1073741824|c&261930}function Es(t,s){var c=t.entangledLanes|=s;for(t=t.entanglements;c;){var d=31-ut(c),y=1<<d;y&s|t[d]&s&&(t[d]|=s),c&=~y}}function ro(t,s){var c=s&-s;return c=(c&42)!==0?1:Fn(c),(c&(t.suspendedLanes|s))!==0?0:c}function Fn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ns(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ei(){var t=me.p;return t!==0?t:(t=window.event,t===void 0?32:h2(t.type))}function je(t,s){var c=me.p;try{return me.p=t,s()}finally{me.p=c}}var ti=Math.random().toString(36).slice(2),wn="__reactFiber$"+ti,Ut="__reactProps$"+ti,Ti="__reactContainer$"+ti,mr="__reactEvents$"+ti,ao="__reactListeners$"+ti,Gi="__reactHandles$"+ti,Kc="__reactResources$"+ti,wa="__reactMarker$"+ti;function di(t){delete t[wn],delete t[Ut],delete t[mr],delete t[ao],delete t[Gi]}function hn(t){var s=t[wn];if(s)return s;for(var c=t.parentNode;c;){if(s=c[Ti]||c[wn]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(t=Zp(t);t!==null;){if(c=t[wn])return c;t=Zp(t)}return s}t=c,c=t.parentNode}return null}function Mt(t){if(t=t[wn]||t[Ti]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function pr(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(o(33))}function ni(t){var s=t[Kc];return s||(s=t[Kc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function dn(t){t[wa]=!0}var be=new Set,Zc={};function Bt(t,s){Ni(t,s),Ni(t+"Capture",s)}function Ni(t,s){for(Zc[t]=s,t=0;t<s.length;t++)be.add(s[t])}var uh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nt={},Tt={};function pt(t){return ke.call(Tt,t)?!0:ke.call(Nt,t)?!1:uh.test(t)?Tt[t]=!0:(Nt[t]=!0,!1)}function xr(t,s,c){if(pt(s))if(c===null)t.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var d=s.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+c)}}function yr(t,s,c){if(c===null)t.removeAttribute(s);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+c)}}function Ii(t,s,c,d){if(d===null)t.removeAttribute(c);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(c);return}t.setAttributeNS(s,c,""+d)}}function It(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function is(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function fh(t,s,c){var d=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var y=d.get,b=d.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return y.call(this)},set:function(I){c=""+I,b.call(this,I)}}),Object.defineProperty(t,s,{enumerable:d.enumerable}),{getValue:function(){return c},setValue:function(I){c=""+I},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function nn(t){if(!t._valueTracker){var s=is(t)?"checked":"value";t._valueTracker=fh(t,s,""+t[s])}}function ss(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var c=s.getValue(),d="";return t&&(d=is(t)?t.checked?"true":"false":t.value),t=d,t!==c?(s.setValue(t),!0):!1}function oo(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var _r=/[\n"\\]/g;function gt(t){return t.replace(_r,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function An(t,s,c,d,y,b,I,L){t.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?t.type=I:t.removeAttribute("type"),s!=null?I==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+It(s)):t.value!==""+It(s)&&(t.value=""+It(s)):I!=="submit"&&I!=="reset"||t.removeAttribute("value"),s!=null?B(t,I,It(s)):c!=null?B(t,I,It(c)):d!=null&&t.removeAttribute("value"),y==null&&b!=null&&(t.defaultChecked=!!b),y!=null&&(t.checked=y&&typeof y!="function"&&typeof y!="symbol"),L!=null&&typeof L!="function"&&typeof L!="symbol"&&typeof L!="boolean"?t.name=""+It(L):t.removeAttribute("name")}function se(t,s,c,d,y,b,I,L){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(t.type=b),s!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||s!=null)){nn(t);return}c=c!=null?""+It(c):"",s=s!=null?""+It(s):c,L||s===t.value||(t.value=s),t.defaultValue=s}d=d??y,d=typeof d!="function"&&typeof d!="symbol"&&!!d,t.checked=L?t.checked:!!d,t.defaultChecked=!!d,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(t.name=I),nn(t)}function B(t,s,c){s==="number"&&oo(t.ownerDocument)===t||t.defaultValue===""+c||(t.defaultValue=""+c)}function He(t,s,c,d){if(t=t.options,s){s={};for(var y=0;y<c.length;y++)s["$"+c[y]]=!0;for(c=0;c<t.length;c++)y=s.hasOwnProperty("$"+t[c].value),t[c].selected!==y&&(t[c].selected=y),y&&d&&(t[c].defaultSelected=!0)}else{for(c=""+It(c),s=null,y=0;y<t.length;y++){if(t[y].value===c){t[y].selected=!0,d&&(t[y].defaultSelected=!0);return}s!==null||t[y].disabled||(s=t[y])}s!==null&&(s.selected=!0)}}function bn(t,s,c){if(s!=null&&(s=""+It(s),s!==t.value&&(t.value=s),c==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=c!=null?""+It(c):""}function ii(t,s,c,d){if(s==null){if(d!=null){if(c!=null)throw Error(o(92));if(oe(d)){if(1<d.length)throw Error(o(93));d=d[0]}c=d}c==null&&(c=""),s=c}c=It(s),t.defaultValue=c,d=t.textContent,d===c&&d!==""&&d!==null&&(t.value=d),nn(t)}function wr(t,s){if(s){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=s;return}}t.textContent=s}var ml=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function si(t,s,c){var d=s.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?d?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":d?t.setProperty(s,c):typeof c!="number"||c===0||ml.has(s)?s==="float"?t.cssFloat=c:t[s]=(""+c).trim():t[s]=c+"px"}function Xe(t,s,c){if(s!=null&&typeof s!="object")throw Error(o(62));if(t=t.style,c!=null){for(var d in c)!c.hasOwnProperty(d)||s!=null&&s.hasOwnProperty(d)||(d.indexOf("--")===0?t.setProperty(d,""):d==="float"?t.cssFloat="":t[d]="");for(var y in s)d=s[y],s.hasOwnProperty(y)&&c[y]!==d&&si(t,y,d)}else for(var b in s)s.hasOwnProperty(b)&&si(t,b,s[b])}function Kt(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hh=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function br(t){return hh.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function gi(){}var ba=null;function pl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var sn=null,qi=null;function rs(t){var s=Mt(t);if(s&&(t=s.stateNode)){var c=t[Ut]||null;e:switch(t=s.stateNode,s.type){case"input":if(An(t,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),s=c.name,c.type==="radio"&&s!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+gt(""+s)+'"][type="radio"]'),s=0;s<c.length;s++){var d=c[s];if(d!==t&&d.form===t.form){var y=d[Ut]||null;if(!y)throw Error(o(90));An(d,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<c.length;s++)d=c[s],d.form===t.form&&ss(d)}break e;case"textarea":bn(t,c.value,c.defaultValue);break e;case"select":s=c.value,s!=null&&He(t,!!c.multiple,s,!1)}}}var Ke=!1;function Jc(t,s,c){if(Ke)return t(s,c);Ke=!0;try{var d=t(s);return d}finally{if(Ke=!1,(sn!==null||qi!==null)&&(Vu(),sn&&(s=sn,t=qi,qi=sn=null,rs(s),t)))for(s=0;s<t.length;s++)rs(t[s])}}function st(t,s){var c=t.stateNode;if(c===null)return null;var d=c[Ut]||null;if(d===null)return null;c=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(t=t.type,d=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!d;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(o(231,s,typeof c));return c}var Zt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xl=!1;if(Zt)try{var ks={};Object.defineProperty(ks,"passive",{get:function(){xl=!0}}),window.addEventListener("test",ks,ks),window.removeEventListener("test",ks,ks)}catch{xl=!1}var as=null,os=null,lo=null;function Er(){if(lo)return lo;var t,s=os,c=s.length,d,y="value"in as?as.value:as.textContent,b=y.length;for(t=0;t<c&&s[t]===y[t];t++);var I=c-t;for(d=1;d<=I&&s[c-d]===y[b-d];d++);return lo=y.slice(t,1<d?1-d:void 0)}function vs(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Cs(){return!0}function yl(){return!1}function Sn(t){function s(c,d,y,b,I){this._reactName=c,this._targetInst=y,this.type=d,this.nativeEvent=b,this.target=I,this.currentTarget=null;for(var L in t)t.hasOwnProperty(L)&&(c=t[L],this[L]=c?c(b):b[L]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Cs:yl,this.isPropagationStopped=yl,this}return N(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Cs)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Cs)},persist:function(){},isPersistent:Cs}),s}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mn=Sn(Ri),vr=N({},Ri,{view:0,detail:0}),$c=Sn(vr),co,_l,Ea,uo=N({},vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:va,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ea&&(Ea&&t.type==="mousemove"?(co=t.screenX-Ea.screenX,_l=t.screenY-Ea.screenY):_l=co=0,Ea=t),co)},movementY:function(t){return"movementY"in t?t.movementY:_l}}),Lt=Sn(uo),eu=N({},uo,{dataTransfer:0}),fo=Sn(eu),As=N({},vr,{relatedTarget:0}),wl=Sn(As),ue=N({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),ft=Sn(ue),Ln=N({},Ri,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ho=Sn(Ln),tu=N({},Ri,{data:0}),nu=Sn(tu),dh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=bl[t])?!!s[t]:!1}function va(){return En}var un=N({},vr,{key:function(t){if(t.key){var s=dh[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=vs(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gh[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:va,charCode:function(t){return t.type==="keypress"?vs(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vs(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),go=Sn(un),Bs=N({},uo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pt=Sn(Bs),Ze=N({},vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:va}),mh=Sn(Ze),Qt=N({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ps=Sn(Qt),Cr=N({},uo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ph=Sn(Cr),Xi=N({},Ri,{newState:0,oldState:0}),El=Sn(Xi),iu=[9,13,27,32],Ca=Zt&&"CompositionEvent"in window,Ar=null;Zt&&"documentMode"in document&&(Ar=document.documentMode);var su=Zt&&"TextEvent"in window&&!Ar,ru=Zt&&(!Ca||Ar&&8<Ar&&11>=Ar),js=" ",mo=!1;function au(t,s){switch(t){case"keyup":return iu.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sr(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Tr=!1;function Ss(t,s){switch(t){case"compositionend":return Sr(s);case"keypress":return s.which!==32?null:(mo=!0,js);case"textInput":return t=s.data,t===js&&mo?null:t;default:return null}}function po(t,s){if(Tr)return t==="compositionend"||!Ca&&au(t,s)?(t=Er(),lo=os=as=null,Tr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ru&&s.locale!=="ko"?null:s.data;default:return null}}var mi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vl(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!mi[t.type]:s==="textarea"}function Oi(t,s,c,d){sn?qi?qi.push(d):qi=[d]:sn=d,s=Zu(s,"onChange"),0<s.length&&(c=new Mn("onChange","change",null,c,d),t.push({event:c,listeners:s}))}var Aa=null,Us=null;function xh(t){Bp(t,0)}function Sa(t){var s=pr(t);if(ss(s))return t}function Di(t,s){if(t==="change")return s}var ou=!1;if(Zt){var Ta;if(Zt){var Fs="oninput"in document;if(!Fs){var Et=document.createElement("div");Et.setAttribute("oninput","return;"),Fs=typeof Et.oninput=="function"}Ta=Fs}else Ta=!1;ou=Ta&&(!document.documentMode||9<document.documentMode)}function Na(){Aa&&(Aa.detachEvent("onpropertychange",R),Us=Aa=null)}function R(t){if(t.propertyName==="value"&&Sa(Us)){var s=[];Oi(s,Us,t,pl(t)),Jc(xh,s)}}function n(t,s,c){t==="focusin"?(Na(),Aa=s,Us=c,Aa.attachEvent("onpropertychange",R)):t==="focusout"&&Na()}function a(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sa(Us)}function l(t,s){if(t==="click")return Sa(s)}function u(t,s){if(t==="input"||t==="change")return Sa(s)}function h(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var g=typeof Object.is=="function"?Object.is:h;function p(t,s){if(g(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var c=Object.keys(t),d=Object.keys(s);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var y=c[d];if(!ke.call(s,y)||!g(t[y],s[y]))return!1}return!0}function _(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function C(t,s){var c=_(t);t=0;for(var d;c;){if(c.nodeType===3){if(d=t+c.textContent.length,t<=s&&d>=s)return{node:c,offset:s-t};t=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=_(c)}}function S(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?S(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function O(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=oo(t.document);s instanceof t.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)t=s.contentWindow;else break;s=oo(t.document)}return s}function M(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var j=Zt&&"documentMode"in document&&11>=document.documentMode,V=null,X=null,ie=null,ce=!1;function Se(t,s,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;ce||V==null||V!==oo(d)||(d=V,"selectionStart"in d&&M(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),ie&&p(ie,d)||(ie=d,d=Zu(X,"onSelect"),0<d.length&&(s=new Mn("onSelect","select",null,s,c),t.push({event:s,listeners:d}),s.target=V)))}function Ce(t,s){var c={};return c[t.toLowerCase()]=s.toLowerCase(),c["Webkit"+t]="webkit"+s,c["Moz"+t]="moz"+s,c}var ve={animationend:Ce("Animation","AnimationEnd"),animationiteration:Ce("Animation","AnimationIteration"),animationstart:Ce("Animation","AnimationStart"),transitionrun:Ce("Transition","TransitionRun"),transitionstart:Ce("Transition","TransitionStart"),transitioncancel:Ce("Transition","TransitionCancel"),transitionend:Ce("Transition","TransitionEnd")},dt={},at={};Zt&&(at=document.createElement("div").style,"AnimationEvent"in window||(delete ve.animationend.animation,delete ve.animationiteration.animation,delete ve.animationstart.animation),"TransitionEvent"in window||delete ve.transitionend.transition);function gn(t){if(dt[t])return dt[t];if(!ve[t])return t;var s=ve[t],c;for(c in s)if(s.hasOwnProperty(c)&&c in at)return dt[t]=s[c];return t}var pi=gn("animationend"),Yn=gn("animationiteration"),jt=gn("animationstart"),kn=gn("transitionrun"),ri=gn("transitionstart"),Nr=gn("transitioncancel"),zs=gn("transitionend"),lu=new Map,Cl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Cl.push("scrollEnd");function ls(t,s){lu.set(t,s),Bt(s,[t])}var cu=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Yi=[],xo=0,yh=0;function uu(){for(var t=xo,s=yh=xo=0;s<t;){var c=Yi[s];Yi[s++]=null;var d=Yi[s];Yi[s++]=null;var y=Yi[s];Yi[s++]=null;var b=Yi[s];if(Yi[s++]=null,d!==null&&y!==null){var I=d.pending;I===null?y.next=y:(y.next=I.next,I.next=y),d.pending=y}b!==0&&xg(c,y,b)}}function fu(t,s,c,d){Yi[xo++]=t,Yi[xo++]=s,Yi[xo++]=c,Yi[xo++]=d,yh|=d,t.lanes|=d,t=t.alternate,t!==null&&(t.lanes|=d)}function _h(t,s,c,d){return fu(t,s,c,d),hu(t)}function Ia(t,s){return fu(t,null,null,s),hu(t)}function xg(t,s,c){t.lanes|=c;var d=t.alternate;d!==null&&(d.lanes|=c);for(var y=!1,b=t.return;b!==null;)b.childLanes|=c,d=b.alternate,d!==null&&(d.childLanes|=c),b.tag===22&&(t=b.stateNode,t===null||t._visibility&1||(y=!0)),t=b,b=b.return;return t.tag===3?(b=t.stateNode,y&&s!==null&&(y=31-ut(c),t=b.hiddenUpdates,d=t[y],d===null?t[y]=[s]:d.push(s),s.lane=c|536870912),b):null}function hu(t){if(50<Xl)throw Xl=0,Nd=null,Error(o(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var yo={};function rb(t,s,c,d){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(t,s,c,d){return new rb(t,s,c,d)}function wh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Hs(t,s){var c=t.alternate;return c===null?(c=Mi(t.tag,s,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=s,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&65011712,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,s=t.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c.refCleanup=t.refCleanup,c}function yg(t,s){t.flags&=65011714;var c=t.alternate;return c===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=c.childLanes,t.lanes=c.lanes,t.child=c.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=c.memoizedProps,t.memoizedState=c.memoizedState,t.updateQueue=c.updateQueue,t.type=c.type,s=c.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function du(t,s,c,d,y,b){var I=0;if(d=t,typeof t=="function")wh(t)&&(I=1);else if(typeof t=="string")I=uE(t,c,De.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Q:return t=Mi(31,c,s,y),t.elementType=Q,t.lanes=b,t;case H:return Ra(c.children,y,b,s);case ye:I=8,y|=24;break;case te:return t=Mi(12,c,s,y|2),t.elementType=te,t.lanes=b,t;case Z:return t=Mi(13,c,s,y),t.elementType=Z,t.lanes=b,t;case U:return t=Mi(19,c,s,y),t.elementType=U,t.lanes=b,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case F:I=10;break e;case $:I=9;break e;case q:I=11;break e;case k:I=14;break e;case Y:I=16,d=null;break e}I=29,c=Error(o(130,t===null?"null":typeof t,"")),d=null}return s=Mi(I,c,s,y),s.elementType=t,s.type=d,s.lanes=b,s}function Ra(t,s,c,d){return t=Mi(7,t,d,s),t.lanes=c,t}function bh(t,s,c){return t=Mi(6,t,null,s),t.lanes=c,t}function _g(t){var s=Mi(18,null,null,0);return s.stateNode=t,s}function Eh(t,s,c){return s=Mi(4,t.children!==null?t.children:[],t.key,s),s.lanes=c,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var wg=new WeakMap;function Wi(t,s){if(typeof t=="object"&&t!==null){var c=wg.get(t);return c!==void 0?c:(s={value:t,source:s,stack:Me(s)},wg.set(t,s),s)}return{value:t,source:s,stack:Me(s)}}var _o=[],wo=0,gu=null,Al=0,Ki=[],Zi=0,Ir=null,Ts=1,Ns="";function Vs(t,s){_o[wo++]=Al,_o[wo++]=gu,gu=t,Al=s}function bg(t,s,c){Ki[Zi++]=Ts,Ki[Zi++]=Ns,Ki[Zi++]=Ir,Ir=t;var d=Ts;t=Ns;var y=32-ut(d)-1;d&=~(1<<y),c+=1;var b=32-ut(s)+y;if(30<b){var I=y-y%5;b=(d&(1<<I)-1).toString(32),d>>=I,y-=I,Ts=1<<32-ut(s)+y|c<<y|d,Ns=b+t}else Ts=1<<b|c<<y|d,Ns=t}function vh(t){t.return!==null&&(Vs(t,1),bg(t,1,0))}function Ch(t){for(;t===gu;)gu=_o[--wo],_o[wo]=null,Al=_o[--wo],_o[wo]=null;for(;t===Ir;)Ir=Ki[--Zi],Ki[Zi]=null,Ns=Ki[--Zi],Ki[Zi]=null,Ts=Ki[--Zi],Ki[Zi]=null}function Eg(t,s){Ki[Zi++]=Ts,Ki[Zi++]=Ns,Ki[Zi++]=Ir,Ts=s.id,Ns=s.overflow,Ir=t}var Wn=null,rn=null,St=!1,Rr=null,Qi=!1,Ah=Error(o(519));function Or(t){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sl(Wi(s,t)),Ah}function vg(t){var s=t.stateNode,c=t.type,d=t.memoizedProps;switch(s[wn]=t,s[Ut]=d,c){case"dialog":yt("cancel",s),yt("close",s);break;case"iframe":case"object":case"embed":yt("load",s);break;case"video":case"audio":for(c=0;c<Wl.length;c++)yt(Wl[c],s);break;case"source":yt("error",s);break;case"img":case"image":case"link":yt("error",s),yt("load",s);break;case"details":yt("toggle",s);break;case"input":yt("invalid",s),se(s,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":yt("invalid",s);break;case"textarea":yt("invalid",s),ii(s,d.value,d.defaultValue,d.children)}c=d.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||s.textContent===""+c||d.suppressHydrationWarning===!0||Fp(s.textContent,c)?(d.popover!=null&&(yt("beforetoggle",s),yt("toggle",s)),d.onScroll!=null&&yt("scroll",s),d.onScrollEnd!=null&&yt("scrollend",s),d.onClick!=null&&(s.onclick=gi),s=!0):s=!1,s||Or(t,!0)}function Cg(t){for(Wn=t.return;Wn;)switch(Wn.tag){case 5:case 31:case 13:Qi=!1;return;case 27:case 3:Qi=!0;return;default:Wn=Wn.return}}function bo(t){if(t!==Wn)return!1;if(!St)return Cg(t),St=!0,!1;var s=t.tag,c;if((c=s!==3&&s!==27)&&((c=s===5)&&(c=t.type,c=!(c!=="form"&&c!=="button")||Vd(t.type,t.memoizedProps)),c=!c),c&&rn&&Or(t),Cg(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));rn=Kp(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));rn=Kp(t)}else s===27?(s=rn,qr(t.type)?(t=Wd,Wd=null,rn=t):rn=s):rn=Wn?$i(t.stateNode.nextSibling):null;return!0}function Oa(){rn=Wn=null,St=!1}function Sh(){var t=Rr;return t!==null&&(wi===null?wi=t:wi.push.apply(wi,t),Rr=null),t}function Sl(t){Rr===null?Rr=[t]:Rr.push(t)}var Th=W(null),Da=null,Gs=null;function Dr(t,s,c){Re(Th,s._currentValue),s._currentValue=c}function qs(t){t._currentValue=Th.current,fe(Th)}function Nh(t,s,c){for(;t!==null;){var d=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),t===c)break;t=t.return}}function Ih(t,s,c,d){var y=t.child;for(y!==null&&(y.return=t);y!==null;){var b=y.dependencies;if(b!==null){var I=y.child;b=b.firstContext;e:for(;b!==null;){var L=b;b=y;for(var z=0;z<s.length;z++)if(L.context===s[z]){b.lanes|=c,L=b.alternate,L!==null&&(L.lanes|=c),Nh(b.return,c,t),d||(I=null);break e}b=L.next}}else if(y.tag===18){if(I=y.return,I===null)throw Error(o(341));I.lanes|=c,b=I.alternate,b!==null&&(b.lanes|=c),Nh(I,c,t),I=null}else I=y.child;if(I!==null)I.return=y;else for(I=y;I!==null;){if(I===t){I=null;break}if(y=I.sibling,y!==null){y.return=I.return,I=y;break}I=I.return}y=I}}function Eo(t,s,c,d){t=null;for(var y=s,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var I=y.alternate;if(I===null)throw Error(o(387));if(I=I.memoizedProps,I!==null){var L=y.type;g(y.pendingProps.value,I.value)||(t!==null?t.push(L):t=[L])}}else if(y===nt.current){if(I=y.alternate,I===null)throw Error(o(387));I.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(t!==null?t.push($l):t=[$l])}y=y.return}t!==null&&Ih(s,t,c,d),s.flags|=262144}function mu(t){for(t=t.firstContext;t!==null;){if(!g(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Ma(t){Da=t,Gs=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Kn(t){return Ag(Da,t)}function pu(t,s){return Da===null&&Ma(t),Ag(t,s)}function Ag(t,s){var c=s._currentValue;if(s={context:s,memoizedValue:c,next:null},Gs===null){if(t===null)throw Error(o(308));Gs=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else Gs=Gs.next=s;return c}var ab=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(c,d){t.push(d)}};this.abort=function(){s.aborted=!0,t.forEach(function(c){return c()})}},ob=r.unstable_scheduleCallback,lb=r.unstable_NormalPriority,Tn={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rh(){return{controller:new ab,data:new Map,refCount:0}}function Tl(t){t.refCount--,t.refCount===0&&ob(lb,function(){t.controller.abort()})}var Nl=null,Oh=0,vo=0,Co=null;function cb(t,s){if(Nl===null){var c=Nl=[];Oh=0,vo=Ld(),Co={status:"pending",value:void 0,then:function(d){c.push(d)}}}return Oh++,s.then(Sg,Sg),s}function Sg(){if(--Oh===0&&Nl!==null){Co!==null&&(Co.status="fulfilled");var t=Nl;Nl=null,vo=0,Co=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function ub(t,s){var c=[],d={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return t.then(function(){d.status="fulfilled",d.value=s;for(var y=0;y<c.length;y++)(0,c[y])(s)},function(y){for(d.status="rejected",d.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),d}var Tg=ee.S;ee.S=function(t,s){up=Wt(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&cb(t,s),Tg!==null&&Tg(t,s)};var La=W(null);function Dh(){var t=La.current;return t!==null?t:Jt.pooledCache}function xu(t,s){s===null?Re(La,La.current):Re(La,s.pool)}function Ng(){var t=Dh();return t===null?null:{parent:Tn._currentValue,pool:t}}var Ao=Error(o(460)),Mh=Error(o(474)),yu=Error(o(542)),_u={then:function(){}};function Ig(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Rg(t,s,c){switch(c=t[c],c===void 0?t.push(s):c!==s&&(s.then(gi,gi),s=c),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Dg(t),t;default:if(typeof s.status=="string")s.then(gi,gi);else{if(t=Jt,t!==null&&100<t.shellSuspendCounter)throw Error(o(482));t=s,t.status="pending",t.then(function(d){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=d}},function(d){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=d}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Dg(t),t}throw Ba=s,Ao}}function ka(t){try{var s=t._init;return s(t._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ba=c,Ao):c}}var Ba=null;function Og(){if(Ba===null)throw Error(o(459));var t=Ba;return Ba=null,t}function Dg(t){if(t===Ao||t===yu)throw Error(o(483))}var So=null,Il=0;function wu(t){var s=Il;return Il+=1,So===null&&(So=[]),Rg(So,t,s)}function Rl(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function bu(t,s){throw s.$$typeof===D?Error(o(525)):(t=Object.prototype.toString.call(s),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function Mg(t){function s(J,K){if(t){var re=J.deletions;re===null?(J.deletions=[K],J.flags|=16):re.push(K)}}function c(J,K){if(!t)return null;for(;K!==null;)s(J,K),K=K.sibling;return null}function d(J){for(var K=new Map;J!==null;)J.key!==null?K.set(J.key,J):K.set(J.index,J),J=J.sibling;return K}function y(J,K){return J=Hs(J,K),J.index=0,J.sibling=null,J}function b(J,K,re){return J.index=re,t?(re=J.alternate,re!==null?(re=re.index,re<K?(J.flags|=67108866,K):re):(J.flags|=67108866,K)):(J.flags|=1048576,K)}function I(J){return t&&J.alternate===null&&(J.flags|=67108866),J}function L(J,K,re,xe){return K===null||K.tag!==6?(K=bh(re,J.mode,xe),K.return=J,K):(K=y(K,re),K.return=J,K)}function z(J,K,re,xe){var We=re.type;return We===H?de(J,K,re.props.children,xe,re.key):K!==null&&(K.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===Y&&ka(We)===K.type)?(K=y(K,re.props),Rl(K,re),K.return=J,K):(K=du(re.type,re.key,re.props,null,J.mode,xe),Rl(K,re),K.return=J,K)}function ae(J,K,re,xe){return K===null||K.tag!==4||K.stateNode.containerInfo!==re.containerInfo||K.stateNode.implementation!==re.implementation?(K=Eh(re,J.mode,xe),K.return=J,K):(K=y(K,re.children||[]),K.return=J,K)}function de(J,K,re,xe,We){return K===null||K.tag!==7?(K=Ra(re,J.mode,xe,We),K.return=J,K):(K=y(K,re),K.return=J,K)}function _e(J,K,re){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=bh(""+K,J.mode,re),K.return=J,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case P:return re=du(K.type,K.key,K.props,null,J.mode,re),Rl(re,K),re.return=J,re;case G:return K=Eh(K,J.mode,re),K.return=J,K;case Y:return K=ka(K),_e(J,K,re)}if(oe(K)||ne(K))return K=Ra(K,J.mode,re,null),K.return=J,K;if(typeof K.then=="function")return _e(J,wu(K),re);if(K.$$typeof===F)return _e(J,pu(J,K),re);bu(J,K)}return null}function le(J,K,re,xe){var We=K!==null?K.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return We!==null?null:L(J,K,""+re,xe);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case P:return re.key===We?z(J,K,re,xe):null;case G:return re.key===We?ae(J,K,re,xe):null;case Y:return re=ka(re),le(J,K,re,xe)}if(oe(re)||ne(re))return We!==null?null:de(J,K,re,xe,null);if(typeof re.then=="function")return le(J,K,wu(re),xe);if(re.$$typeof===F)return le(J,K,pu(J,re),xe);bu(J,re)}return null}function he(J,K,re,xe,We){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return J=J.get(re)||null,L(K,J,""+xe,We);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case P:return J=J.get(xe.key===null?re:xe.key)||null,z(K,J,xe,We);case G:return J=J.get(xe.key===null?re:xe.key)||null,ae(K,J,xe,We);case Y:return xe=ka(xe),he(J,K,re,xe,We)}if(oe(xe)||ne(xe))return J=J.get(re)||null,de(K,J,xe,We,null);if(typeof xe.then=="function")return he(J,K,re,wu(xe),We);if(xe.$$typeof===F)return he(J,K,re,pu(K,xe),We);bu(K,xe)}return null}function ze(J,K,re,xe){for(var We=null,Rt=null,qe=K,ht=K=0,Ct=null;qe!==null&&ht<re.length;ht++){qe.index>ht?(Ct=qe,qe=null):Ct=qe.sibling;var Ot=le(J,qe,re[ht],xe);if(Ot===null){qe===null&&(qe=Ct);break}t&&qe&&Ot.alternate===null&&s(J,qe),K=b(Ot,K,ht),Rt===null?We=Ot:Rt.sibling=Ot,Rt=Ot,qe=Ct}if(ht===re.length)return c(J,qe),St&&Vs(J,ht),We;if(qe===null){for(;ht<re.length;ht++)qe=_e(J,re[ht],xe),qe!==null&&(K=b(qe,K,ht),Rt===null?We=qe:Rt.sibling=qe,Rt=qe);return St&&Vs(J,ht),We}for(qe=d(qe);ht<re.length;ht++)Ct=he(qe,J,ht,re[ht],xe),Ct!==null&&(t&&Ct.alternate!==null&&qe.delete(Ct.key===null?ht:Ct.key),K=b(Ct,K,ht),Rt===null?We=Ct:Rt.sibling=Ct,Rt=Ct);return t&&qe.forEach(function(Zr){return s(J,Zr)}),St&&Vs(J,ht),We}function $e(J,K,re,xe){if(re==null)throw Error(o(151));for(var We=null,Rt=null,qe=K,ht=K=0,Ct=null,Ot=re.next();qe!==null&&!Ot.done;ht++,Ot=re.next()){qe.index>ht?(Ct=qe,qe=null):Ct=qe.sibling;var Zr=le(J,qe,Ot.value,xe);if(Zr===null){qe===null&&(qe=Ct);break}t&&qe&&Zr.alternate===null&&s(J,qe),K=b(Zr,K,ht),Rt===null?We=Zr:Rt.sibling=Zr,Rt=Zr,qe=Ct}if(Ot.done)return c(J,qe),St&&Vs(J,ht),We;if(qe===null){for(;!Ot.done;ht++,Ot=re.next())Ot=_e(J,Ot.value,xe),Ot!==null&&(K=b(Ot,K,ht),Rt===null?We=Ot:Rt.sibling=Ot,Rt=Ot);return St&&Vs(J,ht),We}for(qe=d(qe);!Ot.done;ht++,Ot=re.next())Ot=he(qe,J,ht,Ot.value,xe),Ot!==null&&(t&&Ot.alternate!==null&&qe.delete(Ot.key===null?ht:Ot.key),K=b(Ot,K,ht),Rt===null?We=Ot:Rt.sibling=Ot,Rt=Ot);return t&&qe.forEach(function(bE){return s(J,bE)}),St&&Vs(J,ht),We}function Xt(J,K,re,xe){if(typeof re=="object"&&re!==null&&re.type===H&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case P:e:{for(var We=re.key;K!==null;){if(K.key===We){if(We=re.type,We===H){if(K.tag===7){c(J,K.sibling),xe=y(K,re.props.children),xe.return=J,J=xe;break e}}else if(K.elementType===We||typeof We=="object"&&We!==null&&We.$$typeof===Y&&ka(We)===K.type){c(J,K.sibling),xe=y(K,re.props),Rl(xe,re),xe.return=J,J=xe;break e}c(J,K);break}else s(J,K);K=K.sibling}re.type===H?(xe=Ra(re.props.children,J.mode,xe,re.key),xe.return=J,J=xe):(xe=du(re.type,re.key,re.props,null,J.mode,xe),Rl(xe,re),xe.return=J,J=xe)}return I(J);case G:e:{for(We=re.key;K!==null;){if(K.key===We)if(K.tag===4&&K.stateNode.containerInfo===re.containerInfo&&K.stateNode.implementation===re.implementation){c(J,K.sibling),xe=y(K,re.children||[]),xe.return=J,J=xe;break e}else{c(J,K);break}else s(J,K);K=K.sibling}xe=Eh(re,J.mode,xe),xe.return=J,J=xe}return I(J);case Y:return re=ka(re),Xt(J,K,re,xe)}if(oe(re))return ze(J,K,re,xe);if(ne(re)){if(We=ne(re),typeof We!="function")throw Error(o(150));return re=We.call(re),$e(J,K,re,xe)}if(typeof re.then=="function")return Xt(J,K,wu(re),xe);if(re.$$typeof===F)return Xt(J,K,pu(J,re),xe);bu(J,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,K!==null&&K.tag===6?(c(J,K.sibling),xe=y(K,re),xe.return=J,J=xe):(c(J,K),xe=bh(re,J.mode,xe),xe.return=J,J=xe),I(J)):c(J,K)}return function(J,K,re,xe){try{Il=0;var We=Xt(J,K,re,xe);return So=null,We}catch(qe){if(qe===Ao||qe===yu)throw qe;var Rt=Mi(29,qe,null,J.mode);return Rt.lanes=xe,Rt.return=J,Rt}finally{}}}var Pa=Mg(!0),Lg=Mg(!1),Mr=!1;function Lh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Lr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function kr(t,s,c){var d=t.updateQueue;if(d===null)return null;if(d=d.shared,(kt&2)!==0){var y=d.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),d.pending=s,s=hu(t),xg(t,null,c),s}return fu(t,d,s,c),hu(t)}function Ol(t,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194048)!==0)){var d=s.lanes;d&=t.pendingLanes,c|=d,s.lanes=c,Es(t,c)}}function Bh(t,s){var c=t.updateQueue,d=t.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var y=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var I={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?y=b=I:b=b.next=I,c=c.next}while(c!==null);b===null?y=b=s:b=b.next=s}else y=b=s;c={baseState:d.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:d.shared,callbacks:d.callbacks},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=s:t.next=s,c.lastBaseUpdate=s}var Ph=!1;function Dl(){if(Ph){var t=Co;if(t!==null)throw t}}function Ml(t,s,c,d){Ph=!1;var y=t.updateQueue;Mr=!1;var b=y.firstBaseUpdate,I=y.lastBaseUpdate,L=y.shared.pending;if(L!==null){y.shared.pending=null;var z=L,ae=z.next;z.next=null,I===null?b=ae:I.next=ae,I=z;var de=t.alternate;de!==null&&(de=de.updateQueue,L=de.lastBaseUpdate,L!==I&&(L===null?de.firstBaseUpdate=ae:L.next=ae,de.lastBaseUpdate=z))}if(b!==null){var _e=y.baseState;I=0,de=ae=z=null,L=b;do{var le=L.lane&-536870913,he=le!==L.lane;if(he?(vt&le)===le:(d&le)===le){le!==0&&le===vo&&(Ph=!0),de!==null&&(de=de.next={lane:0,tag:L.tag,payload:L.payload,callback:null,next:null});e:{var ze=t,$e=L;le=s;var Xt=c;switch($e.tag){case 1:if(ze=$e.payload,typeof ze=="function"){_e=ze.call(Xt,_e,le);break e}_e=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=$e.payload,le=typeof ze=="function"?ze.call(Xt,_e,le):ze,le==null)break e;_e=N({},_e,le);break e;case 2:Mr=!0}}le=L.callback,le!==null&&(t.flags|=64,he&&(t.flags|=8192),he=y.callbacks,he===null?y.callbacks=[le]:he.push(le))}else he={lane:le,tag:L.tag,payload:L.payload,callback:L.callback,next:null},de===null?(ae=de=he,z=_e):de=de.next=he,I|=le;if(L=L.next,L===null){if(L=y.shared.pending,L===null)break;he=L,L=he.next,he.next=null,y.lastBaseUpdate=he,y.shared.pending=null}}while(!0);de===null&&(z=_e),y.baseState=z,y.firstBaseUpdate=ae,y.lastBaseUpdate=de,b===null&&(y.shared.lanes=0),Fr|=I,t.lanes=I,t.memoizedState=_e}}function kg(t,s){if(typeof t!="function")throw Error(o(191,t));t.call(s)}function Bg(t,s){var c=t.callbacks;if(c!==null)for(t.callbacks=null,t=0;t<c.length;t++)kg(c[t],s)}var To=W(null),Eu=W(0);function Pg(t,s){t=er,Re(Eu,t),Re(To,s),er=t|s.baseLanes}function jh(){Re(Eu,er),Re(To,To.current)}function Uh(){er=Eu.current,fe(To),fe(Eu)}var Li=W(null),Ji=null;function Br(t){var s=t.alternate;Re(vn,vn.current&1),Re(Li,t),Ji===null&&(s===null||To.current!==null||s.memoizedState!==null)&&(Ji=t)}function Fh(t){Re(vn,vn.current),Re(Li,t),Ji===null&&(Ji=t)}function jg(t){t.tag===22?(Re(vn,vn.current),Re(Li,t),Ji===null&&(Ji=t)):Pr()}function Pr(){Re(vn,vn.current),Re(Li,Li.current)}function ki(t){fe(Li),Ji===t&&(Ji=null),fe(vn)}var vn=W(0);function vu(t){for(var s=t;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Xd(c)||Yd(c)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Xs=0,ct=null,Gt=null,Nn=null,Cu=!1,No=!1,ja=!1,Au=0,Ll=0,Io=null,fb=0;function mn(){throw Error(o(321))}function zh(t,s){if(s===null)return!1;for(var c=0;c<s.length&&c<t.length;c++)if(!g(t[c],s[c]))return!1;return!0}function Hh(t,s,c,d,y,b){return Xs=b,ct=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ee.H=t===null||t.memoizedState===null?bm:id,ja=!1,b=c(d,y),ja=!1,No&&(b=Fg(s,c,d,y)),Ug(t),b}function Ug(t){ee.H=Pl;var s=Gt!==null&&Gt.next!==null;if(Xs=0,Nn=Gt=ct=null,Cu=!1,Ll=0,Io=null,s)throw Error(o(300));t===null||In||(t=t.dependencies,t!==null&&mu(t)&&(In=!0))}function Fg(t,s,c,d){ct=t;var y=0;do{if(No&&(Io=null),Ll=0,No=!1,25<=y)throw Error(o(301));if(y+=1,Nn=Gt=null,t.updateQueue!=null){var b=t.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}ee.H=Em,b=s(c,d)}while(No);return b}function hb(){var t=ee.H,s=t.useState()[0];return s=typeof s.then=="function"?kl(s):s,t=t.useState()[0],(Gt!==null?Gt.memoizedState:null)!==t&&(ct.flags|=1024),s}function Vh(){var t=Au!==0;return Au=0,t}function Gh(t,s,c){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~c}function qh(t){if(Cu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}Cu=!1}Xs=0,Nn=Gt=ct=null,No=!1,Ll=Au=0,Io=null}function ai(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nn===null?ct.memoizedState=Nn=t:Nn=Nn.next=t,Nn}function Cn(){if(Gt===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=Gt.next;var s=Nn===null?ct.memoizedState:Nn.next;if(s!==null)Nn=s,Gt=t;else{if(t===null)throw ct.alternate===null?Error(o(467)):Error(o(310));Gt=t,t={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},Nn===null?ct.memoizedState=Nn=t:Nn=Nn.next=t}return Nn}function Su(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function kl(t){var s=Ll;return Ll+=1,Io===null&&(Io=[]),t=Rg(Io,t,s),s=ct,(Nn===null?s.memoizedState:Nn.next)===null&&(s=s.alternate,ee.H=s===null||s.memoizedState===null?bm:id),t}function Tu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return kl(t);if(t.$$typeof===F)return Kn(t)}throw Error(o(438,String(t)))}function Xh(t){var s=null,c=ct.updateQueue;if(c!==null&&(s=c.memoCache),s==null){var d=ct.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(s={data:d.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),c===null&&(c=Su(),ct.updateQueue=c),c.memoCache=s,c=s.data[s.index],c===void 0)for(c=s.data[s.index]=Array(t),d=0;d<t;d++)c[d]=Ee;return s.index++,c}function Ys(t,s){return typeof s=="function"?s(t):s}function Nu(t){var s=Cn();return Yh(s,Gt,t)}function Yh(t,s,c){var d=t.queue;if(d===null)throw Error(o(311));d.lastRenderedReducer=c;var y=t.baseQueue,b=d.pending;if(b!==null){if(y!==null){var I=y.next;y.next=b.next,b.next=I}s.baseQueue=y=b,d.pending=null}if(b=t.baseState,y===null)t.memoizedState=b;else{s=y.next;var L=I=null,z=null,ae=s,de=!1;do{var _e=ae.lane&-536870913;if(_e!==ae.lane?(vt&_e)===_e:(Xs&_e)===_e){var le=ae.revertLane;if(le===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),_e===vo&&(de=!0);else if((Xs&le)===le){ae=ae.next,le===vo&&(de=!0);continue}else _e={lane:0,revertLane:ae.revertLane,gesture:null,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},z===null?(L=z=_e,I=b):z=z.next=_e,ct.lanes|=le,Fr|=le;_e=ae.action,ja&&c(b,_e),b=ae.hasEagerState?ae.eagerState:c(b,_e)}else le={lane:_e,revertLane:ae.revertLane,gesture:ae.gesture,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null},z===null?(L=z=le,I=b):z=z.next=le,ct.lanes|=_e,Fr|=_e;ae=ae.next}while(ae!==null&&ae!==s);if(z===null?I=b:z.next=L,!g(b,t.memoizedState)&&(In=!0,de&&(c=Co,c!==null)))throw c;t.memoizedState=b,t.baseState=I,t.baseQueue=z,d.lastRenderedState=b}return y===null&&(d.lanes=0),[t.memoizedState,d.dispatch]}function Wh(t){var s=Cn(),c=s.queue;if(c===null)throw Error(o(311));c.lastRenderedReducer=t;var d=c.dispatch,y=c.pending,b=s.memoizedState;if(y!==null){c.pending=null;var I=y=y.next;do b=t(b,I.action),I=I.next;while(I!==y);g(b,s.memoizedState)||(In=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),c.lastRenderedState=b}return[b,d]}function zg(t,s,c){var d=ct,y=Cn(),b=St;if(b){if(c===void 0)throw Error(o(407));c=c()}else c=s();var I=!g((Gt||y).memoizedState,c);if(I&&(y.memoizedState=c,In=!0),y=y.queue,Qh(Gg.bind(null,d,y,t),[t]),y.getSnapshot!==s||I||Nn!==null&&Nn.memoizedState.tag&1){if(d.flags|=2048,Ro(9,{destroy:void 0},Vg.bind(null,d,y,c,s),null),Jt===null)throw Error(o(349));b||(Xs&127)!==0||Hg(d,s,c)}return c}function Hg(t,s,c){t.flags|=16384,t={getSnapshot:s,value:c},s=ct.updateQueue,s===null?(s=Su(),ct.updateQueue=s,s.stores=[t]):(c=s.stores,c===null?s.stores=[t]:c.push(t))}function Vg(t,s,c,d){s.value=c,s.getSnapshot=d,qg(s)&&Xg(t)}function Gg(t,s,c){return c(function(){qg(s)&&Xg(t)})}function qg(t){var s=t.getSnapshot;t=t.value;try{var c=s();return!g(t,c)}catch{return!0}}function Xg(t){var s=Ia(t,2);s!==null&&bi(s,t,2)}function Kh(t){var s=ai();if(typeof t=="function"){var c=t;if(t=c(),ja){Vt(!0);try{c()}finally{Vt(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:t},s}function Yg(t,s,c,d){return t.baseState=c,Yh(t,Gt,typeof d=="function"?d:Ys)}function db(t,s,c,d,y){if(Ou(t))throw Error(o(485));if(t=s.action,t!==null){var b={payload:y,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){b.listeners.push(I)}};ee.T!==null?c(!0):b.isTransition=!1,d(b),c=s.pending,c===null?(b.next=s.pending=b,Wg(s,b)):(b.next=c.next,s.pending=c.next=b)}}function Wg(t,s){var c=s.action,d=s.payload,y=t.state;if(s.isTransition){var b=ee.T,I={};ee.T=I;try{var L=c(y,d),z=ee.S;z!==null&&z(I,L),Kg(t,s,L)}catch(ae){Zh(t,s,ae)}finally{b!==null&&I.types!==null&&(b.types=I.types),ee.T=b}}else try{b=c(y,d),Kg(t,s,b)}catch(ae){Zh(t,s,ae)}}function Kg(t,s,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(d){Zg(t,s,d)},function(d){return Zh(t,s,d)}):Zg(t,s,c)}function Zg(t,s,c){s.status="fulfilled",s.value=c,Qg(s),t.state=c,s=t.pending,s!==null&&(c=s.next,c===s?t.pending=null:(c=c.next,s.next=c,Wg(t,c)))}function Zh(t,s,c){var d=t.pending;if(t.pending=null,d!==null){d=d.next;do s.status="rejected",s.reason=c,Qg(s),s=s.next;while(s!==d)}t.action=null}function Qg(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function Jg(t,s){return s}function $g(t,s){if(St){var c=Jt.formState;if(c!==null){e:{var d=ct;if(St){if(rn){t:{for(var y=rn,b=Qi;y.nodeType!==8;){if(!b){y=null;break t}if(y=$i(y.nextSibling),y===null){y=null;break t}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){rn=$i(y.nextSibling),d=y.data==="F!";break e}}Or(d)}d=!1}d&&(s=c[0])}}return c=ai(),c.memoizedState=c.baseState=s,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Jg,lastRenderedState:s},c.queue=d,c=ym.bind(null,ct,d),d.dispatch=c,d=Kh(!1),b=nd.bind(null,ct,!1,d.queue),d=ai(),y={state:s,dispatch:null,action:t,pending:null},d.queue=y,c=db.bind(null,ct,y,b,c),y.dispatch=c,d.memoizedState=t,[s,c,!1]}function em(t){var s=Cn();return tm(s,Gt,t)}function tm(t,s,c){if(s=Yh(t,s,Jg)[0],t=Nu(Ys)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var d=kl(s)}catch(I){throw I===Ao?yu:I}else d=s;s=Cn();var y=s.queue,b=y.dispatch;return c!==s.memoizedState&&(ct.flags|=2048,Ro(9,{destroy:void 0},gb.bind(null,y,c),null)),[d,b,t]}function gb(t,s){t.action=s}function nm(t){var s=Cn(),c=Gt;if(c!==null)return tm(s,c,t);Cn(),s=s.memoizedState,c=Cn();var d=c.queue.dispatch;return c.memoizedState=t,[s,d,!1]}function Ro(t,s,c,d){return t={tag:t,create:c,deps:d,inst:s,next:null},s=ct.updateQueue,s===null&&(s=Su(),ct.updateQueue=s),c=s.lastEffect,c===null?s.lastEffect=t.next=t:(d=c.next,c.next=t,t.next=d,s.lastEffect=t),t}function im(){return Cn().memoizedState}function Iu(t,s,c,d){var y=ai();ct.flags|=t,y.memoizedState=Ro(1|s,{destroy:void 0},c,d===void 0?null:d)}function Ru(t,s,c,d){var y=Cn();d=d===void 0?null:d;var b=y.memoizedState.inst;Gt!==null&&d!==null&&zh(d,Gt.memoizedState.deps)?y.memoizedState=Ro(s,b,c,d):(ct.flags|=t,y.memoizedState=Ro(1|s,b,c,d))}function sm(t,s){Iu(8390656,8,t,s)}function Qh(t,s){Ru(2048,8,t,s)}function mb(t){ct.flags|=4;var s=ct.updateQueue;if(s===null)s=Su(),ct.updateQueue=s,s.events=[t];else{var c=s.events;c===null?s.events=[t]:c.push(t)}}function rm(t){var s=Cn().memoizedState;return mb({ref:s,nextImpl:t}),function(){if((kt&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function am(t,s){return Ru(4,2,t,s)}function om(t,s){return Ru(4,4,t,s)}function lm(t,s){if(typeof s=="function"){t=t();var c=s(t);return function(){typeof c=="function"?c():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function cm(t,s,c){c=c!=null?c.concat([t]):null,Ru(4,4,lm.bind(null,s,t),c)}function Jh(){}function um(t,s){var c=Cn();s=s===void 0?null:s;var d=c.memoizedState;return s!==null&&zh(s,d[1])?d[0]:(c.memoizedState=[t,s],t)}function fm(t,s){var c=Cn();s=s===void 0?null:s;var d=c.memoizedState;if(s!==null&&zh(s,d[1]))return d[0];if(d=t(),ja){Vt(!0);try{t()}finally{Vt(!1)}}return c.memoizedState=[d,s],d}function $h(t,s,c){return c===void 0||(Xs&1073741824)!==0&&(vt&261930)===0?t.memoizedState=s:(t.memoizedState=c,t=hp(),ct.lanes|=t,Fr|=t,c)}function hm(t,s,c,d){return g(c,s)?c:To.current!==null?(t=$h(t,c,d),g(t,s)||(In=!0),t):(Xs&42)===0||(Xs&1073741824)!==0&&(vt&261930)===0?(In=!0,t.memoizedState=c):(t=hp(),ct.lanes|=t,Fr|=t,s)}function dm(t,s,c,d,y){var b=me.p;me.p=b!==0&&8>b?b:8;var I=ee.T,L={};ee.T=L,nd(t,!1,s,c);try{var z=y(),ae=ee.S;if(ae!==null&&ae(L,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var de=ub(z,d);Bl(t,s,de,ji(t))}else Bl(t,s,d,ji(t))}catch(_e){Bl(t,s,{then:function(){},status:"rejected",reason:_e},ji())}finally{me.p=b,I!==null&&L.types!==null&&(I.types=L.types),ee.T=I}}function pb(){}function ed(t,s,c,d){if(t.tag!==5)throw Error(o(476));var y=gm(t).queue;dm(t,y,s,Ge,c===null?pb:function(){return mm(t),c(d)})}function gm(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:Ge,baseState:Ge,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:Ge},next:null};var c={};return s.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:c},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function mm(t){var s=gm(t);s.next===null&&(s=t.alternate.memoizedState),Bl(t,s.next.queue,{},ji())}function td(){return Kn($l)}function pm(){return Cn().memoizedState}function xm(){return Cn().memoizedState}function xb(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var c=ji();t=Lr(c);var d=kr(s,t,c);d!==null&&(bi(d,s,c),Ol(d,s,c)),s={cache:Rh()},t.payload=s;return}s=s.return}}function yb(t,s,c){var d=ji();c={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Ou(t)?_m(s,c):(c=_h(t,s,c,d),c!==null&&(bi(c,t,d),wm(c,s,d)))}function ym(t,s,c){var d=ji();Bl(t,s,c,d)}function Bl(t,s,c,d){var y={lane:d,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ou(t))_m(s,y);else{var b=t.alternate;if(t.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var I=s.lastRenderedState,L=b(I,c);if(y.hasEagerState=!0,y.eagerState=L,g(L,I))return fu(t,s,y,0),Jt===null&&uu(),!1}catch{}finally{}if(c=_h(t,s,y,d),c!==null)return bi(c,t,d),wm(c,s,d),!0}return!1}function nd(t,s,c,d){if(d={lane:2,revertLane:Ld(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Ou(t)){if(s)throw Error(o(479))}else s=_h(t,c,d,2),s!==null&&bi(s,t,2)}function Ou(t){var s=t.alternate;return t===ct||s!==null&&s===ct}function _m(t,s){No=Cu=!0;var c=t.pending;c===null?s.next=s:(s.next=c.next,c.next=s),t.pending=s}function wm(t,s,c){if((c&4194048)!==0){var d=s.lanes;d&=t.pendingLanes,c|=d,s.lanes=c,Es(t,c)}}var Pl={readContext:Kn,use:Tu,useCallback:mn,useContext:mn,useEffect:mn,useImperativeHandle:mn,useLayoutEffect:mn,useInsertionEffect:mn,useMemo:mn,useReducer:mn,useRef:mn,useState:mn,useDebugValue:mn,useDeferredValue:mn,useTransition:mn,useSyncExternalStore:mn,useId:mn,useHostTransitionStatus:mn,useFormState:mn,useActionState:mn,useOptimistic:mn,useMemoCache:mn,useCacheRefresh:mn};Pl.useEffectEvent=mn;var bm={readContext:Kn,use:Tu,useCallback:function(t,s){return ai().memoizedState=[t,s===void 0?null:s],t},useContext:Kn,useEffect:sm,useImperativeHandle:function(t,s,c){c=c!=null?c.concat([t]):null,Iu(4194308,4,lm.bind(null,s,t),c)},useLayoutEffect:function(t,s){return Iu(4194308,4,t,s)},useInsertionEffect:function(t,s){Iu(4,2,t,s)},useMemo:function(t,s){var c=ai();s=s===void 0?null:s;var d=t();if(ja){Vt(!0);try{t()}finally{Vt(!1)}}return c.memoizedState=[d,s],d},useReducer:function(t,s,c){var d=ai();if(c!==void 0){var y=c(s);if(ja){Vt(!0);try{c(s)}finally{Vt(!1)}}}else y=s;return d.memoizedState=d.baseState=y,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:y},d.queue=t,t=t.dispatch=yb.bind(null,ct,t),[d.memoizedState,t]},useRef:function(t){var s=ai();return t={current:t},s.memoizedState=t},useState:function(t){t=Kh(t);var s=t.queue,c=ym.bind(null,ct,s);return s.dispatch=c,[t.memoizedState,c]},useDebugValue:Jh,useDeferredValue:function(t,s){var c=ai();return $h(c,t,s)},useTransition:function(){var t=Kh(!1);return t=dm.bind(null,ct,t.queue,!0,!1),ai().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,c){var d=ct,y=ai();if(St){if(c===void 0)throw Error(o(407));c=c()}else{if(c=s(),Jt===null)throw Error(o(349));(vt&127)!==0||Hg(d,s,c)}y.memoizedState=c;var b={value:c,getSnapshot:s};return y.queue=b,sm(Gg.bind(null,d,b,t),[t]),d.flags|=2048,Ro(9,{destroy:void 0},Vg.bind(null,d,b,c,s),null),c},useId:function(){var t=ai(),s=Jt.identifierPrefix;if(St){var c=Ns,d=Ts;c=(d&~(1<<32-ut(d)-1)).toString(32)+c,s="_"+s+"R_"+c,c=Au++,0<c&&(s+="H"+c.toString(32)),s+="_"}else c=fb++,s="_"+s+"r_"+c.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:td,useFormState:$g,useActionState:$g,useOptimistic:function(t){var s=ai();s.memoizedState=s.baseState=t;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=c,s=nd.bind(null,ct,!0,c),c.dispatch=s,[t,s]},useMemoCache:Xh,useCacheRefresh:function(){return ai().memoizedState=xb.bind(null,ct)},useEffectEvent:function(t){var s=ai(),c={impl:t};return s.memoizedState=c,function(){if((kt&2)!==0)throw Error(o(440));return c.impl.apply(void 0,arguments)}}},id={readContext:Kn,use:Tu,useCallback:um,useContext:Kn,useEffect:Qh,useImperativeHandle:cm,useInsertionEffect:am,useLayoutEffect:om,useMemo:fm,useReducer:Nu,useRef:im,useState:function(){return Nu(Ys)},useDebugValue:Jh,useDeferredValue:function(t,s){var c=Cn();return hm(c,Gt.memoizedState,t,s)},useTransition:function(){var t=Nu(Ys)[0],s=Cn().memoizedState;return[typeof t=="boolean"?t:kl(t),s]},useSyncExternalStore:zg,useId:pm,useHostTransitionStatus:td,useFormState:em,useActionState:em,useOptimistic:function(t,s){var c=Cn();return Yg(c,Gt,t,s)},useMemoCache:Xh,useCacheRefresh:xm};id.useEffectEvent=rm;var Em={readContext:Kn,use:Tu,useCallback:um,useContext:Kn,useEffect:Qh,useImperativeHandle:cm,useInsertionEffect:am,useLayoutEffect:om,useMemo:fm,useReducer:Wh,useRef:im,useState:function(){return Wh(Ys)},useDebugValue:Jh,useDeferredValue:function(t,s){var c=Cn();return Gt===null?$h(c,t,s):hm(c,Gt.memoizedState,t,s)},useTransition:function(){var t=Wh(Ys)[0],s=Cn().memoizedState;return[typeof t=="boolean"?t:kl(t),s]},useSyncExternalStore:zg,useId:pm,useHostTransitionStatus:td,useFormState:nm,useActionState:nm,useOptimistic:function(t,s){var c=Cn();return Gt!==null?Yg(c,Gt,t,s):(c.baseState=t,[t,c.queue.dispatch])},useMemoCache:Xh,useCacheRefresh:xm};Em.useEffectEvent=rm;function sd(t,s,c,d){s=t.memoizedState,c=c(d,s),c=c==null?s:N({},s,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var rd={enqueueSetState:function(t,s,c){t=t._reactInternals;var d=ji(),y=Lr(d);y.payload=s,c!=null&&(y.callback=c),s=kr(t,y,d),s!==null&&(bi(s,t,d),Ol(s,t,d))},enqueueReplaceState:function(t,s,c){t=t._reactInternals;var d=ji(),y=Lr(d);y.tag=1,y.payload=s,c!=null&&(y.callback=c),s=kr(t,y,d),s!==null&&(bi(s,t,d),Ol(s,t,d))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var c=ji(),d=Lr(c);d.tag=2,s!=null&&(d.callback=s),s=kr(t,d,c),s!==null&&(bi(s,t,c),Ol(s,t,c))}};function vm(t,s,c,d,y,b,I){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(d,b,I):s.prototype&&s.prototype.isPureReactComponent?!p(c,d)||!p(y,b):!0}function Cm(t,s,c,d){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,d),s.state!==t&&rd.enqueueReplaceState(s,s.state,null)}function Ua(t,s){var c=s;if("ref"in s){c={};for(var d in s)d!=="ref"&&(c[d]=s[d])}if(t=t.defaultProps){c===s&&(c=N({},c));for(var y in t)c[y]===void 0&&(c[y]=t[y])}return c}function Am(t){cu(t)}function Sm(t){console.error(t)}function Tm(t){cu(t)}function Du(t,s){try{var c=t.onUncaughtError;c(s.value,{componentStack:s.stack})}catch(d){setTimeout(function(){throw d})}}function Nm(t,s,c){try{var d=t.onCaughtError;d(c.value,{componentStack:c.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function ad(t,s,c){return c=Lr(c),c.tag=3,c.payload={element:null},c.callback=function(){Du(t,s)},c}function Im(t){return t=Lr(t),t.tag=3,t}function Rm(t,s,c,d){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var b=d.value;t.payload=function(){return y(b)},t.callback=function(){Nm(s,c,d)}}var I=c.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(t.callback=function(){Nm(s,c,d),typeof y!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var L=d.stack;this.componentDidCatch(d.value,{componentStack:L!==null?L:""})})}function _b(t,s,c,d,y){if(c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(s=c.alternate,s!==null&&Eo(s,c,y,!0),c=Li.current,c!==null){switch(c.tag){case 31:case 13:return Ji===null?Gu():c.alternate===null&&pn===0&&(pn=3),c.flags&=-257,c.flags|=65536,c.lanes=y,d===_u?c.flags|=16384:(s=c.updateQueue,s===null?c.updateQueue=new Set([d]):s.add(d),Od(t,d,y)),!1;case 22:return c.flags|=65536,d===_u?c.flags|=16384:(s=c.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([d])},c.updateQueue=s):(c=s.retryQueue,c===null?s.retryQueue=new Set([d]):c.add(d)),Od(t,d,y)),!1}throw Error(o(435,c.tag))}return Od(t,d,y),Gu(),!1}if(St)return s=Li.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,d!==Ah&&(t=Error(o(422),{cause:d}),Sl(Wi(t,c)))):(d!==Ah&&(s=Error(o(423),{cause:d}),Sl(Wi(s,c))),t=t.current.alternate,t.flags|=65536,y&=-y,t.lanes|=y,d=Wi(d,c),y=ad(t.stateNode,d,y),Bh(t,y),pn!==4&&(pn=2)),!1;var b=Error(o(520),{cause:d});if(b=Wi(b,c),ql===null?ql=[b]:ql.push(b),pn!==4&&(pn=2),s===null)return!0;d=Wi(d,c),c=s;do{switch(c.tag){case 3:return c.flags|=65536,t=y&-y,c.lanes|=t,t=ad(c.stateNode,d,t),Bh(c,t),!1;case 1:if(s=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(zr===null||!zr.has(b))))return c.flags|=65536,y&=-y,c.lanes|=y,y=Im(y),Rm(y,t,c,d),Bh(c,y),!1}c=c.return}while(c!==null);return!1}var od=Error(o(461)),In=!1;function Zn(t,s,c,d){s.child=t===null?Lg(s,null,c,d):Pa(s,t.child,c,d)}function Om(t,s,c,d,y){c=c.render;var b=s.ref;if("ref"in d){var I={};for(var L in d)L!=="ref"&&(I[L]=d[L])}else I=d;return Ma(s),d=Hh(t,s,c,I,b,y),L=Vh(),t!==null&&!In?(Gh(t,s,y),Ws(t,s,y)):(St&&L&&vh(s),s.flags|=1,Zn(t,s,d,y),s.child)}function Dm(t,s,c,d,y){if(t===null){var b=c.type;return typeof b=="function"&&!wh(b)&&b.defaultProps===void 0&&c.compare===null?(s.tag=15,s.type=b,Mm(t,s,b,d,y)):(t=du(c.type,null,d,s,s.mode,y),t.ref=s.ref,t.return=s,s.child=t)}if(b=t.child,!md(t,y)){var I=b.memoizedProps;if(c=c.compare,c=c!==null?c:p,c(I,d)&&t.ref===s.ref)return Ws(t,s,y)}return s.flags|=1,t=Hs(b,d),t.ref=s.ref,t.return=s,s.child=t}function Mm(t,s,c,d,y){if(t!==null){var b=t.memoizedProps;if(p(b,d)&&t.ref===s.ref)if(In=!1,s.pendingProps=d=b,md(t,y))(t.flags&131072)!==0&&(In=!0);else return s.lanes=t.lanes,Ws(t,s,y)}return ld(t,s,c,d,y)}function Lm(t,s,c,d){var y=d.children,b=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((s.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,t!==null){for(d=s.child=t.child,y=0;d!==null;)y=y|d.lanes|d.childLanes,d=d.sibling;d=y&~b}else d=0,s.child=null;return km(t,s,b,c,d)}if((c&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&xu(s,b!==null?b.cachePool:null),b!==null?Pg(s,b):jh(),jg(s);else return d=s.lanes=536870912,km(t,s,b!==null?b.baseLanes|c:c,c,d)}else b!==null?(xu(s,b.cachePool),Pg(s,b),Pr(),s.memoizedState=null):(t!==null&&xu(s,null),jh(),Pr());return Zn(t,s,y,c),s.child}function jl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function km(t,s,c,d,y){var b=Dh();return b=b===null?null:{parent:Tn._currentValue,pool:b},s.memoizedState={baseLanes:c,cachePool:b},t!==null&&xu(s,null),jh(),jg(s),t!==null&&Eo(t,s,d,!0),s.childLanes=y,null}function Mu(t,s){return s=ku({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function Bm(t,s,c){return Pa(s,t.child,null,c),t=Mu(s,s.pendingProps),t.flags|=2,ki(s),s.memoizedState=null,t}function wb(t,s,c){var d=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(St){if(d.mode==="hidden")return t=Mu(s,d),s.lanes=536870912,jl(null,t);if(Fh(s),(t=rn)?(t=Wp(t,Qi),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Ir!==null?{id:Ts,overflow:Ns}:null,retryLane:536870912,hydrationErrors:null},c=_g(t),c.return=s,s.child=c,Wn=s,rn=null)):t=null,t===null)throw Or(s);return s.lanes=536870912,null}return Mu(s,d)}var b=t.memoizedState;if(b!==null){var I=b.dehydrated;if(Fh(s),y)if(s.flags&256)s.flags&=-257,s=Bm(t,s,c);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(o(558));else if(In||Eo(t,s,c,!1),y=(c&t.childLanes)!==0,In||y){if(d=Jt,d!==null&&(I=ro(d,c),I!==0&&I!==b.retryLane))throw b.retryLane=I,Ia(t,I),bi(d,t,I),od;Gu(),s=Bm(t,s,c)}else t=b.treeContext,rn=$i(I.nextSibling),Wn=s,St=!0,Rr=null,Qi=!1,t!==null&&Eg(s,t),s=Mu(s,d),s.flags|=4096;return s}return t=Hs(t.child,{mode:d.mode,children:d.children}),t.ref=s.ref,s.child=t,t.return=s,t}function Lu(t,s){var c=s.ref;if(c===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(o(284));(t===null||t.ref!==c)&&(s.flags|=4194816)}}function ld(t,s,c,d,y){return Ma(s),c=Hh(t,s,c,d,void 0,y),d=Vh(),t!==null&&!In?(Gh(t,s,y),Ws(t,s,y)):(St&&d&&vh(s),s.flags|=1,Zn(t,s,c,y),s.child)}function Pm(t,s,c,d,y,b){return Ma(s),s.updateQueue=null,c=Fg(s,d,c,y),Ug(t),d=Vh(),t!==null&&!In?(Gh(t,s,b),Ws(t,s,b)):(St&&d&&vh(s),s.flags|=1,Zn(t,s,c,b),s.child)}function jm(t,s,c,d,y){if(Ma(s),s.stateNode===null){var b=yo,I=c.contextType;typeof I=="object"&&I!==null&&(b=Kn(I)),b=new c(d,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=rd,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=d,b.state=s.memoizedState,b.refs={},Lh(s),I=c.contextType,b.context=typeof I=="object"&&I!==null?Kn(I):yo,b.state=s.memoizedState,I=c.getDerivedStateFromProps,typeof I=="function"&&(sd(s,c,I,d),b.state=s.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(I=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),I!==b.state&&rd.enqueueReplaceState(b,b.state,null),Ml(s,d,b,y),Dl(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),d=!0}else if(t===null){b=s.stateNode;var L=s.memoizedProps,z=Ua(c,L);b.props=z;var ae=b.context,de=c.contextType;I=yo,typeof de=="object"&&de!==null&&(I=Kn(de));var _e=c.getDerivedStateFromProps;de=typeof _e=="function"||typeof b.getSnapshotBeforeUpdate=="function",L=s.pendingProps!==L,de||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(L||ae!==I)&&Cm(s,b,d,I),Mr=!1;var le=s.memoizedState;b.state=le,Ml(s,d,b,y),Dl(),ae=s.memoizedState,L||le!==ae||Mr?(typeof _e=="function"&&(sd(s,c,_e,d),ae=s.memoizedState),(z=Mr||vm(s,c,z,d,le,ae,I))?(de||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=ae),b.props=d,b.state=ae,b.context=I,d=z):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{b=s.stateNode,kh(t,s),I=s.memoizedProps,de=Ua(c,I),b.props=de,_e=s.pendingProps,le=b.context,ae=c.contextType,z=yo,typeof ae=="object"&&ae!==null&&(z=Kn(ae)),L=c.getDerivedStateFromProps,(ae=typeof L=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(I!==_e||le!==z)&&Cm(s,b,d,z),Mr=!1,le=s.memoizedState,b.state=le,Ml(s,d,b,y),Dl();var he=s.memoizedState;I!==_e||le!==he||Mr||t!==null&&t.dependencies!==null&&mu(t.dependencies)?(typeof L=="function"&&(sd(s,c,L,d),he=s.memoizedState),(de=Mr||vm(s,c,de,d,le,he,z)||t!==null&&t.dependencies!==null&&mu(t.dependencies))?(ae||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(d,he,z),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(d,he,z)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||I===t.memoizedProps&&le===t.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||I===t.memoizedProps&&le===t.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=he),b.props=d,b.state=he,b.context=z,d=de):(typeof b.componentDidUpdate!="function"||I===t.memoizedProps&&le===t.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||I===t.memoizedProps&&le===t.memoizedState||(s.flags|=1024),d=!1)}return b=d,Lu(t,s),d=(s.flags&128)!==0,b||d?(b=s.stateNode,c=d&&typeof c.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,t!==null&&d?(s.child=Pa(s,t.child,null,y),s.child=Pa(s,null,c,y)):Zn(t,s,c,y),s.memoizedState=b.state,t=s.child):t=Ws(t,s,y),t}function Um(t,s,c,d){return Oa(),s.flags|=256,Zn(t,s,c,d),s.child}var cd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ud(t){return{baseLanes:t,cachePool:Ng()}}function fd(t,s,c){return t=t!==null?t.childLanes&~c:0,s&&(t|=Pi),t}function Fm(t,s,c){var d=s.pendingProps,y=!1,b=(s.flags&128)!==0,I;if((I=b)||(I=t!==null&&t.memoizedState===null?!1:(vn.current&2)!==0),I&&(y=!0,s.flags&=-129),I=(s.flags&32)!==0,s.flags&=-33,t===null){if(St){if(y?Br(s):Pr(),(t=rn)?(t=Wp(t,Qi),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Ir!==null?{id:Ts,overflow:Ns}:null,retryLane:536870912,hydrationErrors:null},c=_g(t),c.return=s,s.child=c,Wn=s,rn=null)):t=null,t===null)throw Or(s);return Yd(t)?s.lanes=32:s.lanes=536870912,null}var L=d.children;return d=d.fallback,y?(Pr(),y=s.mode,L=ku({mode:"hidden",children:L},y),d=Ra(d,y,c,null),L.return=s,d.return=s,L.sibling=d,s.child=L,d=s.child,d.memoizedState=ud(c),d.childLanes=fd(t,I,c),s.memoizedState=cd,jl(null,d)):(Br(s),hd(s,L))}var z=t.memoizedState;if(z!==null&&(L=z.dehydrated,L!==null)){if(b)s.flags&256?(Br(s),s.flags&=-257,s=dd(t,s,c)):s.memoizedState!==null?(Pr(),s.child=t.child,s.flags|=128,s=null):(Pr(),L=d.fallback,y=s.mode,d=ku({mode:"visible",children:d.children},y),L=Ra(L,y,c,null),L.flags|=2,d.return=s,L.return=s,d.sibling=L,s.child=d,Pa(s,t.child,null,c),d=s.child,d.memoizedState=ud(c),d.childLanes=fd(t,I,c),s.memoizedState=cd,s=jl(null,d));else if(Br(s),Yd(L)){if(I=L.nextSibling&&L.nextSibling.dataset,I)var ae=I.dgst;I=ae,d=Error(o(419)),d.stack="",d.digest=I,Sl({value:d,source:null,stack:null}),s=dd(t,s,c)}else if(In||Eo(t,s,c,!1),I=(c&t.childLanes)!==0,In||I){if(I=Jt,I!==null&&(d=ro(I,c),d!==0&&d!==z.retryLane))throw z.retryLane=d,Ia(t,d),bi(I,t,d),od;Xd(L)||Gu(),s=dd(t,s,c)}else Xd(L)?(s.flags|=192,s.child=t.child,s=null):(t=z.treeContext,rn=$i(L.nextSibling),Wn=s,St=!0,Rr=null,Qi=!1,t!==null&&Eg(s,t),s=hd(s,d.children),s.flags|=4096);return s}return y?(Pr(),L=d.fallback,y=s.mode,z=t.child,ae=z.sibling,d=Hs(z,{mode:"hidden",children:d.children}),d.subtreeFlags=z.subtreeFlags&65011712,ae!==null?L=Hs(ae,L):(L=Ra(L,y,c,null),L.flags|=2),L.return=s,d.return=s,d.sibling=L,s.child=d,jl(null,d),d=s.child,L=t.child.memoizedState,L===null?L=ud(c):(y=L.cachePool,y!==null?(z=Tn._currentValue,y=y.parent!==z?{parent:z,pool:z}:y):y=Ng(),L={baseLanes:L.baseLanes|c,cachePool:y}),d.memoizedState=L,d.childLanes=fd(t,I,c),s.memoizedState=cd,jl(t.child,d)):(Br(s),c=t.child,t=c.sibling,c=Hs(c,{mode:"visible",children:d.children}),c.return=s,c.sibling=null,t!==null&&(I=s.deletions,I===null?(s.deletions=[t],s.flags|=16):I.push(t)),s.child=c,s.memoizedState=null,c)}function hd(t,s){return s=ku({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function ku(t,s){return t=Mi(22,t,null,s),t.lanes=0,t}function dd(t,s,c){return Pa(s,t.child,null,c),t=hd(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function zm(t,s,c){t.lanes|=s;var d=t.alternate;d!==null&&(d.lanes|=s),Nh(t.return,s,c)}function gd(t,s,c,d,y,b){var I=t.memoizedState;I===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:y,treeForkCount:b}:(I.isBackwards=s,I.rendering=null,I.renderingStartTime=0,I.last=d,I.tail=c,I.tailMode=y,I.treeForkCount=b)}function Hm(t,s,c){var d=s.pendingProps,y=d.revealOrder,b=d.tail;d=d.children;var I=vn.current,L=(I&2)!==0;if(L?(I=I&1|2,s.flags|=128):I&=1,Re(vn,I),Zn(t,s,d,c),d=St?Al:0,!L&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zm(t,c,s);else if(t.tag===19)zm(t,c,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(y){case"forwards":for(c=s.child,y=null;c!==null;)t=c.alternate,t!==null&&vu(t)===null&&(y=c),c=c.sibling;c=y,c===null?(y=s.child,s.child=null):(y=c.sibling,c.sibling=null),gd(s,!1,y,c,b,d);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=s.child,s.child=null;y!==null;){if(t=y.alternate,t!==null&&vu(t)===null){s.child=y;break}t=y.sibling,y.sibling=c,c=y,y=t}gd(s,!0,c,null,b,d);break;case"together":gd(s,!1,null,null,void 0,d);break;default:s.memoizedState=null}return s.child}function Ws(t,s,c){if(t!==null&&(s.dependencies=t.dependencies),Fr|=s.lanes,(c&s.childLanes)===0)if(t!==null){if(Eo(t,s,c,!1),(c&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(o(153));if(s.child!==null){for(t=s.child,c=Hs(t,t.pendingProps),s.child=c,c.return=s;t.sibling!==null;)t=t.sibling,c=c.sibling=Hs(t,t.pendingProps),c.return=s;c.sibling=null}return s.child}function md(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&mu(t)))}function bb(t,s,c){switch(s.tag){case 3:it(s,s.stateNode.containerInfo),Dr(s,Tn,t.memoizedState.cache),Oa();break;case 27:case 5:On(s);break;case 4:it(s,s.stateNode.containerInfo);break;case 10:Dr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Fh(s),null;break;case 13:var d=s.memoizedState;if(d!==null)return d.dehydrated!==null?(Br(s),s.flags|=128,null):(c&s.child.childLanes)!==0?Fm(t,s,c):(Br(s),t=Ws(t,s,c),t!==null?t.sibling:null);Br(s);break;case 19:var y=(t.flags&128)!==0;if(d=(c&s.childLanes)!==0,d||(Eo(t,s,c,!1),d=(c&s.childLanes)!==0),y){if(d)return Hm(t,s,c);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Re(vn,vn.current),d)break;return null;case 22:return s.lanes=0,Lm(t,s,c,s.pendingProps);case 24:Dr(s,Tn,t.memoizedState.cache)}return Ws(t,s,c)}function Vm(t,s,c){if(t!==null)if(t.memoizedProps!==s.pendingProps)In=!0;else{if(!md(t,c)&&(s.flags&128)===0)return In=!1,bb(t,s,c);In=(t.flags&131072)!==0}else In=!1,St&&(s.flags&1048576)!==0&&bg(s,Al,s.index);switch(s.lanes=0,s.tag){case 16:e:{var d=s.pendingProps;if(t=ka(s.elementType),s.type=t,typeof t=="function")wh(t)?(d=Ua(t,d),s.tag=1,s=jm(null,s,t,d,c)):(s.tag=0,s=ld(null,s,t,d,c));else{if(t!=null){var y=t.$$typeof;if(y===q){s.tag=11,s=Om(null,s,t,d,c);break e}else if(y===k){s.tag=14,s=Dm(null,s,t,d,c);break e}}throw s=Ie(t)||t,Error(o(306,s,""))}}return s;case 0:return ld(t,s,s.type,s.pendingProps,c);case 1:return d=s.type,y=Ua(d,s.pendingProps),jm(t,s,d,y,c);case 3:e:{if(it(s,s.stateNode.containerInfo),t===null)throw Error(o(387));d=s.pendingProps;var b=s.memoizedState;y=b.element,kh(t,s),Ml(s,d,null,c);var I=s.memoizedState;if(d=I.cache,Dr(s,Tn,d),d!==b.cache&&Ih(s,[Tn],c,!0),Dl(),d=I.element,b.isDehydrated)if(b={element:d,isDehydrated:!1,cache:I.cache},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){s=Um(t,s,d,c);break e}else if(d!==y){y=Wi(Error(o(424)),s),Sl(y),s=Um(t,s,d,c);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(rn=$i(t.firstChild),Wn=s,St=!0,Rr=null,Qi=!0,c=Lg(s,null,d,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Oa(),d===y){s=Ws(t,s,c);break e}Zn(t,s,d,c)}s=s.child}return s;case 26:return Lu(t,s),t===null?(c=e2(s.type,null,s.pendingProps,null))?s.memoizedState=c:St||(c=s.type,t=s.pendingProps,d=Qu(Ae.current).createElement(c),d[wn]=s,d[Ut]=t,Qn(d,c,t),dn(d),s.stateNode=d):s.memoizedState=e2(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return On(s),t===null&&St&&(d=s.stateNode=Qp(s.type,s.pendingProps,Ae.current),Wn=s,Qi=!0,y=rn,qr(s.type)?(Wd=y,rn=$i(d.firstChild)):rn=y),Zn(t,s,s.pendingProps.children,c),Lu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&St&&((y=d=rn)&&(d=Qb(d,s.type,s.pendingProps,Qi),d!==null?(s.stateNode=d,Wn=s,rn=$i(d.firstChild),Qi=!1,y=!0):y=!1),y||Or(s)),On(s),y=s.type,b=s.pendingProps,I=t!==null?t.memoizedProps:null,d=b.children,Vd(y,b)?d=null:I!==null&&Vd(y,I)&&(s.flags|=32),s.memoizedState!==null&&(y=Hh(t,s,hb,null,null,c),$l._currentValue=y),Lu(t,s),Zn(t,s,d,c),s.child;case 6:return t===null&&St&&((t=c=rn)&&(c=Jb(c,s.pendingProps,Qi),c!==null?(s.stateNode=c,Wn=s,rn=null,t=!0):t=!1),t||Or(s)),null;case 13:return Fm(t,s,c);case 4:return it(s,s.stateNode.containerInfo),d=s.pendingProps,t===null?s.child=Pa(s,null,d,c):Zn(t,s,d,c),s.child;case 11:return Om(t,s,s.type,s.pendingProps,c);case 7:return Zn(t,s,s.pendingProps,c),s.child;case 8:return Zn(t,s,s.pendingProps.children,c),s.child;case 12:return Zn(t,s,s.pendingProps.children,c),s.child;case 10:return d=s.pendingProps,Dr(s,s.type,d.value),Zn(t,s,d.children,c),s.child;case 9:return y=s.type._context,d=s.pendingProps.children,Ma(s),y=Kn(y),d=d(y),s.flags|=1,Zn(t,s,d,c),s.child;case 14:return Dm(t,s,s.type,s.pendingProps,c);case 15:return Mm(t,s,s.type,s.pendingProps,c);case 19:return Hm(t,s,c);case 31:return wb(t,s,c);case 22:return Lm(t,s,c,s.pendingProps);case 24:return Ma(s),d=Kn(Tn),t===null?(y=Dh(),y===null&&(y=Jt,b=Rh(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=c),y=b),s.memoizedState={parent:d,cache:y},Lh(s),Dr(s,Tn,y)):((t.lanes&c)!==0&&(kh(t,s),Ml(s,null,null,c),Dl()),y=t.memoizedState,b=s.memoizedState,y.parent!==d?(y={parent:d,cache:d},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Dr(s,Tn,d)):(d=b.cache,Dr(s,Tn,d),d!==y.cache&&Ih(s,[Tn],c,!0))),Zn(t,s,s.pendingProps.children,c),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Ks(t){t.flags|=4}function pd(t,s,c,d,y){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(y&335544128)===y)if(t.stateNode.complete)t.flags|=8192;else if(pp())t.flags|=8192;else throw Ba=_u,Mh}else t.flags&=-16777217}function Gm(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!r2(s))if(pp())t.flags|=8192;else throw Ba=_u,Mh}function Bu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?Dn():536870912,t.lanes|=s,Lo|=s)}function Ul(t,s){if(!St)switch(t.tailMode){case"hidden":s=t.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:d.sibling=null}}function an(t){var s=t.alternate!==null&&t.alternate.child===t.child,c=0,d=0;if(s)for(var y=t.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags&65011712,d|=y.flags&65011712,y.return=t,y=y.sibling;else for(y=t.child;y!==null;)c|=y.lanes|y.childLanes,d|=y.subtreeFlags,d|=y.flags,y.return=t,y=y.sibling;return t.subtreeFlags|=d,t.childLanes=c,s}function Eb(t,s,c){var d=s.pendingProps;switch(Ch(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return an(s),null;case 1:return an(s),null;case 3:return c=s.stateNode,d=null,t!==null&&(d=t.memoizedState.cache),s.memoizedState.cache!==d&&(s.flags|=2048),qs(Tn),wt(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(t===null||t.child===null)&&(bo(s)?Ks(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Sh())),an(s),null;case 26:var y=s.type,b=s.memoizedState;return t===null?(Ks(s),b!==null?(an(s),Gm(s,b)):(an(s),pd(s,y,null,d,c))):b?b!==t.memoizedState?(Ks(s),an(s),Gm(s,b)):(an(s),s.flags&=-16777217):(t=t.memoizedProps,t!==d&&Ks(s),an(s),pd(s,y,t,d,c)),null;case 27:if(_n(s),c=Ae.current,y=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==d&&Ks(s);else{if(!d){if(s.stateNode===null)throw Error(o(166));return an(s),null}t=De.current,bo(s)?vg(s):(t=Qp(y,d,c),s.stateNode=t,Ks(s))}return an(s),null;case 5:if(_n(s),y=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==d&&Ks(s);else{if(!d){if(s.stateNode===null)throw Error(o(166));return an(s),null}if(b=De.current,bo(s))vg(s);else{var I=Qu(Ae.current);switch(b){case 1:b=I.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=I.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=I.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=I.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=I.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof d.is=="string"?I.createElement("select",{is:d.is}):I.createElement("select"),d.multiple?b.multiple=!0:d.size&&(b.size=d.size);break;default:b=typeof d.is=="string"?I.createElement(y,{is:d.is}):I.createElement(y)}}b[wn]=s,b[Ut]=d;e:for(I=s.child;I!==null;){if(I.tag===5||I.tag===6)b.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===s)break e;for(;I.sibling===null;){if(I.return===null||I.return===s)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}s.stateNode=b;e:switch(Qn(b,y,d),y){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Ks(s)}}return an(s),pd(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,c),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==d&&Ks(s);else{if(typeof d!="string"&&s.stateNode===null)throw Error(o(166));if(t=Ae.current,bo(s)){if(t=s.stateNode,c=s.memoizedProps,d=null,y=Wn,y!==null)switch(y.tag){case 27:case 5:d=y.memoizedProps}t[wn]=s,t=!!(t.nodeValue===c||d!==null&&d.suppressHydrationWarning===!0||Fp(t.nodeValue,c)),t||Or(s,!0)}else t=Qu(t).createTextNode(d),t[wn]=s,s.stateNode=t}return an(s),null;case 31:if(c=s.memoizedState,t===null||t.memoizedState!==null){if(d=bo(s),c!==null){if(t===null){if(!d)throw Error(o(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(557));t[wn]=s}else Oa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;an(s),t=!1}else c=Sh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=c),t=!0;if(!t)return s.flags&256?(ki(s),s):(ki(s),null);if((s.flags&128)!==0)throw Error(o(558))}return an(s),null;case 13:if(d=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(y=bo(s),d!==null&&d.dehydrated!==null){if(t===null){if(!y)throw Error(o(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(o(317));y[wn]=s}else Oa(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;an(s),y=!1}else y=Sh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(ki(s),s):(ki(s),null)}return ki(s),(s.flags&128)!==0?(s.lanes=c,s):(c=d!==null,t=t!==null&&t.memoizedState!==null,c&&(d=s.child,y=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(y=d.alternate.memoizedState.cachePool.pool),b=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(b=d.memoizedState.cachePool.pool),b!==y&&(d.flags|=2048)),c!==t&&c&&(s.child.flags|=8192),Bu(s,s.updateQueue),an(s),null);case 4:return wt(),t===null&&jd(s.stateNode.containerInfo),an(s),null;case 10:return qs(s.type),an(s),null;case 19:if(fe(vn),d=s.memoizedState,d===null)return an(s),null;if(y=(s.flags&128)!==0,b=d.rendering,b===null)if(y)Ul(d,!1);else{if(pn!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(b=vu(t),b!==null){for(s.flags|=128,Ul(d,!1),t=b.updateQueue,s.updateQueue=t,Bu(s,t),s.subtreeFlags=0,t=c,c=s.child;c!==null;)yg(c,t),c=c.sibling;return Re(vn,vn.current&1|2),St&&Vs(s,d.treeForkCount),s.child}t=t.sibling}d.tail!==null&&Wt()>zu&&(s.flags|=128,y=!0,Ul(d,!1),s.lanes=4194304)}else{if(!y)if(t=vu(b),t!==null){if(s.flags|=128,y=!0,t=t.updateQueue,s.updateQueue=t,Bu(s,t),Ul(d,!0),d.tail===null&&d.tailMode==="hidden"&&!b.alternate&&!St)return an(s),null}else 2*Wt()-d.renderingStartTime>zu&&c!==536870912&&(s.flags|=128,y=!0,Ul(d,!1),s.lanes=4194304);d.isBackwards?(b.sibling=s.child,s.child=b):(t=d.last,t!==null?t.sibling=b:s.child=b,d.last=b)}return d.tail!==null?(t=d.tail,d.rendering=t,d.tail=t.sibling,d.renderingStartTime=Wt(),t.sibling=null,c=vn.current,Re(vn,y?c&1|2:c&1),St&&Vs(s,d.treeForkCount),t):(an(s),null);case 22:case 23:return ki(s),Uh(),d=s.memoizedState!==null,t!==null?t.memoizedState!==null!==d&&(s.flags|=8192):d&&(s.flags|=8192),d?(c&536870912)!==0&&(s.flags&128)===0&&(an(s),s.subtreeFlags&6&&(s.flags|=8192)):an(s),c=s.updateQueue,c!==null&&Bu(s,c.retryQueue),c=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),d=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(d=s.memoizedState.cachePool.pool),d!==c&&(s.flags|=2048),t!==null&&fe(La),null;case 24:return c=null,t!==null&&(c=t.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),qs(Tn),an(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function vb(t,s){switch(Ch(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return qs(Tn),wt(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return _n(s),null;case 31:if(s.memoizedState!==null){if(ki(s),s.alternate===null)throw Error(o(340));Oa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(ki(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Oa()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return fe(vn),null;case 4:return wt(),null;case 10:return qs(s.type),null;case 22:case 23:return ki(s),Uh(),t!==null&&fe(La),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return qs(Tn),null;case 25:return null;default:return null}}function qm(t,s){switch(Ch(s),s.tag){case 3:qs(Tn),wt();break;case 26:case 27:case 5:_n(s);break;case 4:wt();break;case 31:s.memoizedState!==null&&ki(s);break;case 13:ki(s);break;case 19:fe(vn);break;case 10:qs(s.type);break;case 22:case 23:ki(s),Uh(),t!==null&&fe(La);break;case 24:qs(Tn)}}function Fl(t,s){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var y=d.next;c=y;do{if((c.tag&t)===t){d=void 0;var b=c.create,I=c.inst;d=b(),I.destroy=d}c=c.next}while(c!==y)}}catch(L){zt(s,s.return,L)}}function jr(t,s,c){try{var d=s.updateQueue,y=d!==null?d.lastEffect:null;if(y!==null){var b=y.next;d=b;do{if((d.tag&t)===t){var I=d.inst,L=I.destroy;if(L!==void 0){I.destroy=void 0,y=s;var z=c,ae=L;try{ae()}catch(de){zt(y,z,de)}}}d=d.next}while(d!==b)}}catch(de){zt(s,s.return,de)}}function Xm(t){var s=t.updateQueue;if(s!==null){var c=t.stateNode;try{Bg(s,c)}catch(d){zt(t,t.return,d)}}}function Ym(t,s,c){c.props=Ua(t.type,t.memoizedProps),c.state=t.memoizedState;try{c.componentWillUnmount()}catch(d){zt(t,s,d)}}function zl(t,s){try{var c=t.ref;if(c!==null){switch(t.tag){case 26:case 27:case 5:var d=t.stateNode;break;case 30:d=t.stateNode;break;default:d=t.stateNode}typeof c=="function"?t.refCleanup=c(d):c.current=d}}catch(y){zt(t,s,y)}}function Is(t,s){var c=t.ref,d=t.refCleanup;if(c!==null)if(typeof d=="function")try{d()}catch(y){zt(t,s,y)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){zt(t,s,y)}else c.current=null}function Wm(t){var s=t.type,c=t.memoizedProps,d=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":c.autoFocus&&d.focus();break e;case"img":c.src?d.src=c.src:c.srcSet&&(d.srcset=c.srcSet)}}catch(y){zt(t,t.return,y)}}function xd(t,s,c){try{var d=t.stateNode;qb(d,t.type,c,s),d[Ut]=s}catch(y){zt(t,t.return,y)}}function Km(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&qr(t.type)||t.tag===4}function yd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Km(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&qr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _d(t,s,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,s?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(t,s):(s=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,s.appendChild(t),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=gi));else if(d!==4&&(d===27&&qr(t.type)&&(c=t.stateNode,s=null),t=t.child,t!==null))for(_d(t,s,c),t=t.sibling;t!==null;)_d(t,s,c),t=t.sibling}function Pu(t,s,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,s?c.insertBefore(t,s):c.appendChild(t);else if(d!==4&&(d===27&&qr(t.type)&&(c=t.stateNode),t=t.child,t!==null))for(Pu(t,s,c),t=t.sibling;t!==null;)Pu(t,s,c),t=t.sibling}function Zm(t){var s=t.stateNode,c=t.memoizedProps;try{for(var d=t.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);Qn(s,d,c),s[wn]=t,s[Ut]=c}catch(b){zt(t,t.return,b)}}var Zs=!1,Rn=!1,wd=!1,Qm=typeof WeakSet=="function"?WeakSet:Set,zn=null;function Cb(t,s){if(t=t.containerInfo,zd=rf,t=O(t),M(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var y=d.anchorOffset,b=d.focusNode;d=d.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var I=0,L=-1,z=-1,ae=0,de=0,_e=t,le=null;t:for(;;){for(var he;_e!==c||y!==0&&_e.nodeType!==3||(L=I+y),_e!==b||d!==0&&_e.nodeType!==3||(z=I+d),_e.nodeType===3&&(I+=_e.nodeValue.length),(he=_e.firstChild)!==null;)le=_e,_e=he;for(;;){if(_e===t)break t;if(le===c&&++ae===y&&(L=I),le===b&&++de===d&&(z=I),(he=_e.nextSibling)!==null)break;_e=le,le=_e.parentNode}_e=he}c=L===-1||z===-1?null:{start:L,end:z}}else c=null}c=c||{start:0,end:0}}else c=null;for(Hd={focusedElem:t,selectionRange:c},rf=!1,zn=s;zn!==null;)if(s=zn,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,zn=t;else for(;zn!==null;){switch(s=zn,b=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(c=0;c<t.length;c++)y=t[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&b!==null){t=void 0,c=s,y=b.memoizedProps,b=b.memoizedState,d=c.stateNode;try{var ze=Ua(c.type,y);t=d.getSnapshotBeforeUpdate(ze,b),d.__reactInternalSnapshotBeforeUpdate=t}catch($e){zt(c,c.return,$e)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,c=t.nodeType,c===9)qd(t);else if(c===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":qd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(o(163))}if(t=s.sibling,t!==null){t.return=s.return,zn=t;break}zn=s.return}}function Jm(t,s,c){var d=c.flags;switch(c.tag){case 0:case 11:case 15:Js(t,c),d&4&&Fl(5,c);break;case 1:if(Js(t,c),d&4)if(t=c.stateNode,s===null)try{t.componentDidMount()}catch(I){zt(c,c.return,I)}else{var y=Ua(c.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(y,s,t.__reactInternalSnapshotBeforeUpdate)}catch(I){zt(c,c.return,I)}}d&64&&Xm(c),d&512&&zl(c,c.return);break;case 3:if(Js(t,c),d&64&&(t=c.updateQueue,t!==null)){if(s=null,c.child!==null)switch(c.child.tag){case 27:case 5:s=c.child.stateNode;break;case 1:s=c.child.stateNode}try{Bg(t,s)}catch(I){zt(c,c.return,I)}}break;case 27:s===null&&d&4&&Zm(c);case 26:case 5:Js(t,c),s===null&&d&4&&Wm(c),d&512&&zl(c,c.return);break;case 12:Js(t,c);break;case 31:Js(t,c),d&4&&tp(t,c);break;case 13:Js(t,c),d&4&&np(t,c),d&64&&(t=c.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(c=Mb.bind(null,c),$b(t,c))));break;case 22:if(d=c.memoizedState!==null||Zs,!d){s=s!==null&&s.memoizedState!==null||Rn,y=Zs;var b=Rn;Zs=d,(Rn=s)&&!b?$s(t,c,(c.subtreeFlags&8772)!==0):Js(t,c),Zs=y,Rn=b}break;case 30:break;default:Js(t,c)}}function $m(t){var s=t.alternate;s!==null&&(t.alternate=null,$m(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&di(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var fn=null,xi=!1;function Qs(t,s,c){for(c=c.child;c!==null;)ep(t,s,c),c=c.sibling}function ep(t,s,c){if(Te&&typeof Te.onCommitFiberUnmount=="function")try{Te.onCommitFiberUnmount(en,c)}catch{}switch(c.tag){case 26:Rn||Is(c,s),Qs(t,s,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Rn||Is(c,s);var d=fn,y=xi;qr(c.type)&&(fn=c.stateNode,xi=!1),Qs(t,s,c),Zl(c.stateNode),fn=d,xi=y;break;case 5:Rn||Is(c,s);case 6:if(d=fn,y=xi,fn=null,Qs(t,s,c),fn=d,xi=y,fn!==null)if(xi)try{(fn.nodeType===9?fn.body:fn.nodeName==="HTML"?fn.ownerDocument.body:fn).removeChild(c.stateNode)}catch(b){zt(c,s,b)}else try{fn.removeChild(c.stateNode)}catch(b){zt(c,s,b)}break;case 18:fn!==null&&(xi?(t=fn,Xp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,c.stateNode),Ho(t)):Xp(fn,c.stateNode));break;case 4:d=fn,y=xi,fn=c.stateNode.containerInfo,xi=!0,Qs(t,s,c),fn=d,xi=y;break;case 0:case 11:case 14:case 15:jr(2,c,s),Rn||jr(4,c,s),Qs(t,s,c);break;case 1:Rn||(Is(c,s),d=c.stateNode,typeof d.componentWillUnmount=="function"&&Ym(c,s,d)),Qs(t,s,c);break;case 21:Qs(t,s,c);break;case 22:Rn=(d=Rn)||c.memoizedState!==null,Qs(t,s,c),Rn=d;break;default:Qs(t,s,c)}}function tp(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ho(t)}catch(c){zt(s,s.return,c)}}}function np(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ho(t)}catch(c){zt(s,s.return,c)}}function Ab(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new Qm),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new Qm),s;default:throw Error(o(435,t.tag))}}function ju(t,s){var c=Ab(t);s.forEach(function(d){if(!c.has(d)){c.add(d);var y=Lb.bind(null,t,d);d.then(y,y)}})}function yi(t,s){var c=s.deletions;if(c!==null)for(var d=0;d<c.length;d++){var y=c[d],b=t,I=s,L=I;e:for(;L!==null;){switch(L.tag){case 27:if(qr(L.type)){fn=L.stateNode,xi=!1;break e}break;case 5:fn=L.stateNode,xi=!1;break e;case 3:case 4:fn=L.stateNode.containerInfo,xi=!0;break e}L=L.return}if(fn===null)throw Error(o(160));ep(b,I,y),fn=null,xi=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)ip(s,t),s=s.sibling}var cs=null;function ip(t,s){var c=t.alternate,d=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:yi(s,t),_i(t),d&4&&(jr(3,t,t.return),Fl(3,t),jr(5,t,t.return));break;case 1:yi(s,t),_i(t),d&512&&(Rn||c===null||Is(c,c.return)),d&64&&Zs&&(t=t.updateQueue,t!==null&&(d=t.callbacks,d!==null&&(c=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=c===null?d:c.concat(d))));break;case 26:var y=cs;if(yi(s,t),_i(t),d&512&&(Rn||c===null||Is(c,c.return)),d&4){var b=c!==null?c.memoizedState:null;if(d=t.memoizedState,c===null)if(d===null)if(t.stateNode===null){e:{d=t.type,c=t.memoizedProps,y=y.ownerDocument||y;t:switch(d){case"title":b=y.getElementsByTagName("title")[0],(!b||b[wa]||b[wn]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(d),y.head.insertBefore(b,y.querySelector("head > title"))),Qn(b,d,c),b[wn]=t,dn(b),d=b;break e;case"link":var I=i2("link","href",y).get(d+(c.href||""));if(I){for(var L=0;L<I.length;L++)if(b=I[L],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){I.splice(L,1);break t}}b=y.createElement(d),Qn(b,d,c),y.head.appendChild(b);break;case"meta":if(I=i2("meta","content",y).get(d+(c.content||""))){for(L=0;L<I.length;L++)if(b=I[L],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){I.splice(L,1);break t}}b=y.createElement(d),Qn(b,d,c),y.head.appendChild(b);break;default:throw Error(o(468,d))}b[wn]=t,dn(b),d=b}t.stateNode=d}else s2(y,t.type,t.stateNode);else t.stateNode=n2(y,d,t.memoizedProps);else b!==d?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,d===null?s2(y,t.type,t.stateNode):n2(y,d,t.memoizedProps)):d===null&&t.stateNode!==null&&xd(t,t.memoizedProps,c.memoizedProps)}break;case 27:yi(s,t),_i(t),d&512&&(Rn||c===null||Is(c,c.return)),c!==null&&d&4&&xd(t,t.memoizedProps,c.memoizedProps);break;case 5:if(yi(s,t),_i(t),d&512&&(Rn||c===null||Is(c,c.return)),t.flags&32){y=t.stateNode;try{wr(y,"")}catch(ze){zt(t,t.return,ze)}}d&4&&t.stateNode!=null&&(y=t.memoizedProps,xd(t,y,c!==null?c.memoizedProps:y)),d&1024&&(wd=!0);break;case 6:if(yi(s,t),_i(t),d&4){if(t.stateNode===null)throw Error(o(162));d=t.memoizedProps,c=t.stateNode;try{c.nodeValue=d}catch(ze){zt(t,t.return,ze)}}break;case 3:if(ef=null,y=cs,cs=Ju(s.containerInfo),yi(s,t),cs=y,_i(t),d&4&&c!==null&&c.memoizedState.isDehydrated)try{Ho(s.containerInfo)}catch(ze){zt(t,t.return,ze)}wd&&(wd=!1,sp(t));break;case 4:d=cs,cs=Ju(t.stateNode.containerInfo),yi(s,t),_i(t),cs=d;break;case 12:yi(s,t),_i(t);break;case 31:yi(s,t),_i(t),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,ju(t,d)));break;case 13:yi(s,t),_i(t),t.child.flags&8192&&t.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Fu=Wt()),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,ju(t,d)));break;case 22:y=t.memoizedState!==null;var z=c!==null&&c.memoizedState!==null,ae=Zs,de=Rn;if(Zs=ae||y,Rn=de||z,yi(s,t),Rn=de,Zs=ae,_i(t),d&8192)e:for(s=t.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(c===null||z||Zs||Rn||Fa(t)),c=null,s=t;;){if(s.tag===5||s.tag===26){if(c===null){z=c=s;try{if(b=z.stateNode,y)I=b.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{L=z.stateNode;var _e=z.memoizedProps.style,le=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;L.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(ze){zt(z,z.return,ze)}}}else if(s.tag===6){if(c===null){z=s;try{z.stateNode.nodeValue=y?"":z.memoizedProps}catch(ze){zt(z,z.return,ze)}}}else if(s.tag===18){if(c===null){z=s;try{var he=z.stateNode;y?Yp(he,!0):Yp(z.stateNode,!1)}catch(ze){zt(z,z.return,ze)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;c===s&&(c=null),s=s.return}c===s&&(c=null),s.sibling.return=s.return,s=s.sibling}d&4&&(d=t.updateQueue,d!==null&&(c=d.retryQueue,c!==null&&(d.retryQueue=null,ju(t,c))));break;case 19:yi(s,t),_i(t),d&4&&(d=t.updateQueue,d!==null&&(t.updateQueue=null,ju(t,d)));break;case 30:break;case 21:break;default:yi(s,t),_i(t)}}function _i(t){var s=t.flags;if(s&2){try{for(var c,d=t.return;d!==null;){if(Km(d)){c=d;break}d=d.return}if(c==null)throw Error(o(160));switch(c.tag){case 27:var y=c.stateNode,b=yd(t);Pu(t,b,y);break;case 5:var I=c.stateNode;c.flags&32&&(wr(I,""),c.flags&=-33);var L=yd(t);Pu(t,L,I);break;case 3:case 4:var z=c.stateNode.containerInfo,ae=yd(t);_d(t,ae,z);break;default:throw Error(o(161))}}catch(de){zt(t,t.return,de)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function sp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;sp(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function Js(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Jm(t,s.alternate,s),s=s.sibling}function Fa(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:jr(4,s,s.return),Fa(s);break;case 1:Is(s,s.return);var c=s.stateNode;typeof c.componentWillUnmount=="function"&&Ym(s,s.return,c),Fa(s);break;case 27:Zl(s.stateNode);case 26:case 5:Is(s,s.return),Fa(s);break;case 22:s.memoizedState===null&&Fa(s);break;case 30:Fa(s);break;default:Fa(s)}t=t.sibling}}function $s(t,s,c){for(c=c&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var d=s.alternate,y=t,b=s,I=b.flags;switch(b.tag){case 0:case 11:case 15:$s(y,b,c),Fl(4,b);break;case 1:if($s(y,b,c),d=b,y=d.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(ae){zt(d,d.return,ae)}if(d=b,y=d.updateQueue,y!==null){var L=d.stateNode;try{var z=y.shared.hiddenCallbacks;if(z!==null)for(y.shared.hiddenCallbacks=null,y=0;y<z.length;y++)kg(z[y],L)}catch(ae){zt(d,d.return,ae)}}c&&I&64&&Xm(b),zl(b,b.return);break;case 27:Zm(b);case 26:case 5:$s(y,b,c),c&&d===null&&I&4&&Wm(b),zl(b,b.return);break;case 12:$s(y,b,c);break;case 31:$s(y,b,c),c&&I&4&&tp(y,b);break;case 13:$s(y,b,c),c&&I&4&&np(y,b);break;case 22:b.memoizedState===null&&$s(y,b,c),zl(b,b.return);break;case 30:break;default:$s(y,b,c)}s=s.sibling}}function bd(t,s){var c=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(c=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==c&&(t!=null&&t.refCount++,c!=null&&Tl(c))}function Ed(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Tl(t))}function us(t,s,c,d){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)rp(t,s,c,d),s=s.sibling}function rp(t,s,c,d){var y=s.flags;switch(s.tag){case 0:case 11:case 15:us(t,s,c,d),y&2048&&Fl(9,s);break;case 1:us(t,s,c,d);break;case 3:us(t,s,c,d),y&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&Tl(t)));break;case 12:if(y&2048){us(t,s,c,d),t=s.stateNode;try{var b=s.memoizedProps,I=b.id,L=b.onPostCommit;typeof L=="function"&&L(I,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(z){zt(s,s.return,z)}}else us(t,s,c,d);break;case 31:us(t,s,c,d);break;case 13:us(t,s,c,d);break;case 23:break;case 22:b=s.stateNode,I=s.alternate,s.memoizedState!==null?b._visibility&2?us(t,s,c,d):Hl(t,s):b._visibility&2?us(t,s,c,d):(b._visibility|=2,Oo(t,s,c,d,(s.subtreeFlags&10256)!==0||!1)),y&2048&&bd(I,s);break;case 24:us(t,s,c,d),y&2048&&Ed(s.alternate,s);break;default:us(t,s,c,d)}}function Oo(t,s,c,d,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var b=t,I=s,L=c,z=d,ae=I.flags;switch(I.tag){case 0:case 11:case 15:Oo(b,I,L,z,y),Fl(8,I);break;case 23:break;case 22:var de=I.stateNode;I.memoizedState!==null?de._visibility&2?Oo(b,I,L,z,y):Hl(b,I):(de._visibility|=2,Oo(b,I,L,z,y)),y&&ae&2048&&bd(I.alternate,I);break;case 24:Oo(b,I,L,z,y),y&&ae&2048&&Ed(I.alternate,I);break;default:Oo(b,I,L,z,y)}s=s.sibling}}function Hl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var c=t,d=s,y=d.flags;switch(d.tag){case 22:Hl(c,d),y&2048&&bd(d.alternate,d);break;case 24:Hl(c,d),y&2048&&Ed(d.alternate,d);break;default:Hl(c,d)}s=s.sibling}}var Vl=8192;function Do(t,s,c){if(t.subtreeFlags&Vl)for(t=t.child;t!==null;)ap(t,s,c),t=t.sibling}function ap(t,s,c){switch(t.tag){case 26:Do(t,s,c),t.flags&Vl&&t.memoizedState!==null&&fE(c,cs,t.memoizedState,t.memoizedProps);break;case 5:Do(t,s,c);break;case 3:case 4:var d=cs;cs=Ju(t.stateNode.containerInfo),Do(t,s,c),cs=d;break;case 22:t.memoizedState===null&&(d=t.alternate,d!==null&&d.memoizedState!==null?(d=Vl,Vl=16777216,Do(t,s,c),Vl=d):Do(t,s,c));break;default:Do(t,s,c)}}function op(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function Gl(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];zn=d,cp(d,t)}op(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)lp(t),t=t.sibling}function lp(t){switch(t.tag){case 0:case 11:case 15:Gl(t),t.flags&2048&&jr(9,t,t.return);break;case 3:Gl(t);break;case 12:Gl(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,Uu(t)):Gl(t);break;default:Gl(t)}}function Uu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var c=0;c<s.length;c++){var d=s[c];zn=d,cp(d,t)}op(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:jr(8,s,s.return),Uu(s);break;case 22:c=s.stateNode,c._visibility&2&&(c._visibility&=-3,Uu(s));break;default:Uu(s)}t=t.sibling}}function cp(t,s){for(;zn!==null;){var c=zn;switch(c.tag){case 0:case 11:case 15:jr(8,c,s);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var d=c.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Tl(c.memoizedState.cache)}if(d=c.child,d!==null)d.return=c,zn=d;else e:for(c=t;zn!==null;){d=zn;var y=d.sibling,b=d.return;if($m(d),d===c){zn=null;break e}if(y!==null){y.return=b,zn=y;break e}zn=b}}}var Sb={getCacheForType:function(t){var s=Kn(Tn),c=s.data.get(t);return c===void 0&&(c=t(),s.data.set(t,c)),c},cacheSignal:function(){return Kn(Tn).controller.signal}},Tb=typeof WeakMap=="function"?WeakMap:Map,kt=0,Jt=null,xt=null,vt=0,Ft=0,Bi=null,Ur=!1,Mo=!1,vd=!1,er=0,pn=0,Fr=0,za=0,Cd=0,Pi=0,Lo=0,ql=null,wi=null,Ad=!1,Fu=0,up=0,zu=1/0,Hu=null,zr=null,Bn=0,Hr=null,ko=null,tr=0,Sd=0,Td=null,fp=null,Xl=0,Nd=null;function ji(){return(kt&2)!==0&&vt!==0?vt&-vt:ee.T!==null?Ld():ei()}function hp(){if(Pi===0)if((vt&536870912)===0||St){var t=bt;bt<<=1,(bt&3932160)===0&&(bt=262144),Pi=t}else Pi=536870912;return t=Li.current,t!==null&&(t.flags|=32),Pi}function bi(t,s,c){(t===Jt&&(Ft===2||Ft===9)||t.cancelPendingCommit!==null)&&(Bo(t,0),Vr(t,vt,Pi,!1)),bs(t,c),((kt&2)===0||t!==Jt)&&(t===Jt&&((kt&2)===0&&(za|=c),pn===4&&Vr(t,vt,Pi,!1)),Rs(t))}function dp(t,s,c){if((kt&6)!==0)throw Error(o(327));var d=!c&&(s&127)===0&&(s&t.expiredLanes)===0||Xn(t,s),y=d?Rb(t,s):Rd(t,s,!0),b=d;do{if(y===0){Mo&&!d&&Vr(t,s,0,!1);break}else{if(c=t.current.alternate,b&&!Nb(c)){y=Rd(t,s,!1),b=!1;continue}if(y===2){if(b=s,t.errorRecoveryDisabledLanes&b)var I=0;else I=t.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){s=I;e:{var L=t;y=ql;var z=L.current.memoizedState.isDehydrated;if(z&&(Bo(L,I).flags|=256),I=Rd(L,I,!1),I!==2){if(vd&&!z){L.errorRecoveryDisabledLanes|=b,za|=b,y=4;break e}b=wi,wi=y,b!==null&&(wi===null?wi=b:wi.push.apply(wi,b))}y=I}if(b=!1,y!==2)continue}}if(y===1){Bo(t,0),Vr(t,s,0,!0);break}e:{switch(d=t,b=y,b){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Vr(d,s,Pi,!Ur);break e;case 2:wi=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(y=Fu+300-Wt(),10<y)){if(Vr(d,s,Pi,!Ur),_a(d,0,!0)!==0)break e;tr=s,d.timeoutHandle=Gp(gp.bind(null,d,c,wi,Hu,Ad,s,Pi,za,Lo,Ur,b,"Throttled",-0,0),y);break e}gp(d,c,wi,Hu,Ad,s,Pi,za,Lo,Ur,b,null,-0,0)}}break}while(!0);Rs(t)}function gp(t,s,c,d,y,b,I,L,z,ae,de,_e,le,he){if(t.timeoutHandle=-1,_e=s.subtreeFlags,_e&8192||(_e&16785408)===16785408){_e={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:gi},ap(s,b,_e);var ze=(b&62914560)===b?Fu-Wt():(b&4194048)===b?up-Wt():0;if(ze=hE(_e,ze),ze!==null){tr=b,t.cancelPendingCommit=ze(Ep.bind(null,t,s,b,c,d,y,I,L,z,de,_e,null,le,he)),Vr(t,b,I,!ae);return}}Ep(t,s,b,c,d,y,I,L,z)}function Nb(t){for(var s=t;;){var c=s.tag;if((c===0||c===11||c===15)&&s.flags&16384&&(c=s.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var d=0;d<c.length;d++){var y=c[d],b=y.getSnapshot;y=y.value;try{if(!g(b(),y))return!1}catch{return!1}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Vr(t,s,c,d){s&=~Cd,s&=~za,t.suspendedLanes|=s,t.pingedLanes&=~s,d&&(t.warmLanes|=s),d=t.expirationTimes;for(var y=s;0<y;){var b=31-ut(y),I=1<<b;d[b]=-1,y&=~I}c!==0&&Wc(t,c,s)}function Vu(){return(kt&6)===0?(Yl(0),!1):!0}function Id(){if(xt!==null){if(Ft===0)var t=xt.return;else t=xt,Gs=Da=null,qh(t),So=null,Il=0,t=xt;for(;t!==null;)qm(t.alternate,t),t=t.return;xt=null}}function Bo(t,s){var c=t.timeoutHandle;c!==-1&&(t.timeoutHandle=-1,Wb(c)),c=t.cancelPendingCommit,c!==null&&(t.cancelPendingCommit=null,c()),tr=0,Id(),Jt=t,xt=c=Hs(t.current,null),vt=s,Ft=0,Bi=null,Ur=!1,Mo=Xn(t,s),vd=!1,Lo=Pi=Cd=za=Fr=pn=0,wi=ql=null,Ad=!1,(s&8)!==0&&(s|=s&32);var d=t.entangledLanes;if(d!==0)for(t=t.entanglements,d&=s;0<d;){var y=31-ut(d),b=1<<y;s|=t[y],d&=~b}return er=s,uu(),c}function mp(t,s){ct=null,ee.H=Pl,s===Ao||s===yu?(s=Og(),Ft=3):s===Mh?(s=Og(),Ft=4):Ft=s===od?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Bi=s,xt===null&&(pn=1,Du(t,Wi(s,t.current)))}function pp(){var t=Li.current;return t===null?!0:(vt&4194048)===vt?Ji===null:(vt&62914560)===vt||(vt&536870912)!==0?t===Ji:!1}function xp(){var t=ee.H;return ee.H=Pl,t===null?Pl:t}function yp(){var t=ee.A;return ee.A=Sb,t}function Gu(){pn=4,Ur||(vt&4194048)!==vt&&Li.current!==null||(Mo=!0),(Fr&134217727)===0&&(za&134217727)===0||Jt===null||Vr(Jt,vt,Pi,!1)}function Rd(t,s,c){var d=kt;kt|=2;var y=xp(),b=yp();(Jt!==t||vt!==s)&&(Hu=null,Bo(t,s)),s=!1;var I=pn;e:do try{if(Ft!==0&&xt!==null){var L=xt,z=Bi;switch(Ft){case 8:Id(),I=6;break e;case 3:case 2:case 9:case 6:Li.current===null&&(s=!0);var ae=Ft;if(Ft=0,Bi=null,Po(t,L,z,ae),c&&Mo){I=0;break e}break;default:ae=Ft,Ft=0,Bi=null,Po(t,L,z,ae)}}Ib(),I=pn;break}catch(de){mp(t,de)}while(!0);return s&&t.shellSuspendCounter++,Gs=Da=null,kt=d,ee.H=y,ee.A=b,xt===null&&(Jt=null,vt=0,uu()),I}function Ib(){for(;xt!==null;)_p(xt)}function Rb(t,s){var c=kt;kt|=2;var d=xp(),y=yp();Jt!==t||vt!==s?(Hu=null,zu=Wt()+500,Bo(t,s)):Mo=Xn(t,s);e:do try{if(Ft!==0&&xt!==null){s=xt;var b=Bi;t:switch(Ft){case 1:Ft=0,Bi=null,Po(t,s,b,1);break;case 2:case 9:if(Ig(b)){Ft=0,Bi=null,wp(s);break}s=function(){Ft!==2&&Ft!==9||Jt!==t||(Ft=7),Rs(t)},b.then(s,s);break e;case 3:Ft=7;break e;case 4:Ft=5;break e;case 7:Ig(b)?(Ft=0,Bi=null,wp(s)):(Ft=0,Bi=null,Po(t,s,b,7));break;case 5:var I=null;switch(xt.tag){case 26:I=xt.memoizedState;case 5:case 27:var L=xt;if(I?r2(I):L.stateNode.complete){Ft=0,Bi=null;var z=L.sibling;if(z!==null)xt=z;else{var ae=L.return;ae!==null?(xt=ae,qu(ae)):xt=null}break t}}Ft=0,Bi=null,Po(t,s,b,5);break;case 6:Ft=0,Bi=null,Po(t,s,b,6);break;case 8:Id(),pn=6;break e;default:throw Error(o(462))}}Ob();break}catch(de){mp(t,de)}while(!0);return Gs=Da=null,ee.H=d,ee.A=y,kt=c,xt!==null?0:(Jt=null,vt=0,uu(),pn)}function Ob(){for(;xt!==null&&!zi();)_p(xt)}function _p(t){var s=Vm(t.alternate,t,er);t.memoizedProps=t.pendingProps,s===null?qu(t):xt=s}function wp(t){var s=t,c=s.alternate;switch(s.tag){case 15:case 0:s=Pm(c,s,s.pendingProps,s.type,void 0,vt);break;case 11:s=Pm(c,s,s.pendingProps,s.type.render,s.ref,vt);break;case 5:qh(s);default:qm(c,s),s=xt=yg(s,er),s=Vm(c,s,er)}t.memoizedProps=t.pendingProps,s===null?qu(t):xt=s}function Po(t,s,c,d){Gs=Da=null,qh(s),So=null,Il=0;var y=s.return;try{if(_b(t,y,s,c,vt)){pn=1,Du(t,Wi(c,t.current)),xt=null;return}}catch(b){if(y!==null)throw xt=y,b;pn=1,Du(t,Wi(c,t.current)),xt=null;return}s.flags&32768?(St||d===1?t=!0:Mo||(vt&536870912)!==0?t=!1:(Ur=t=!0,(d===2||d===9||d===3||d===6)&&(d=Li.current,d!==null&&d.tag===13&&(d.flags|=16384))),bp(s,t)):qu(s)}function qu(t){var s=t;do{if((s.flags&32768)!==0){bp(s,Ur);return}t=s.return;var c=Eb(s.alternate,s,er);if(c!==null){xt=c;return}if(s=s.sibling,s!==null){xt=s;return}xt=s=t}while(s!==null);pn===0&&(pn=5)}function bp(t,s){do{var c=vb(t.alternate,t);if(c!==null){c.flags&=32767,xt=c;return}if(c=t.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!s&&(t=t.sibling,t!==null)){xt=t;return}xt=t=c}while(t!==null);pn=6,xt=null}function Ep(t,s,c,d,y,b,I,L,z){t.cancelPendingCommit=null;do Xu();while(Bn!==0);if((kt&6)!==0)throw Error(o(327));if(s!==null){if(s===t.current)throw Error(o(177));if(b=s.lanes|s.childLanes,b|=yh,Vi(t,c,b,I,L,z),t===Jt&&(xt=Jt=null,vt=0),ko=s,Hr=t,tr=c,Sd=b,Td=y,fp=d,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,kb(Si,function(){return Tp(),null})):(t.callbackNode=null,t.callbackPriority=0),d=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||d){d=ee.T,ee.T=null,y=me.p,me.p=2,I=kt,kt|=4;try{Cb(t,s,c)}finally{kt=I,me.p=y,ee.T=d}}Bn=1,vp(),Cp(),Ap()}}function vp(){if(Bn===1){Bn=0;var t=Hr,s=ko,c=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||c){c=ee.T,ee.T=null;var d=me.p;me.p=2;var y=kt;kt|=4;try{ip(s,t);var b=Hd,I=O(t.containerInfo),L=b.focusedElem,z=b.selectionRange;if(I!==L&&L&&L.ownerDocument&&S(L.ownerDocument.documentElement,L)){if(z!==null&&M(L)){var ae=z.start,de=z.end;if(de===void 0&&(de=ae),"selectionStart"in L)L.selectionStart=ae,L.selectionEnd=Math.min(de,L.value.length);else{var _e=L.ownerDocument||document,le=_e&&_e.defaultView||window;if(le.getSelection){var he=le.getSelection(),ze=L.textContent.length,$e=Math.min(z.start,ze),Xt=z.end===void 0?$e:Math.min(z.end,ze);!he.extend&&$e>Xt&&(I=Xt,Xt=$e,$e=I);var J=C(L,$e),K=C(L,Xt);if(J&&K&&(he.rangeCount!==1||he.anchorNode!==J.node||he.anchorOffset!==J.offset||he.focusNode!==K.node||he.focusOffset!==K.offset)){var re=_e.createRange();re.setStart(J.node,J.offset),he.removeAllRanges(),$e>Xt?(he.addRange(re),he.extend(K.node,K.offset)):(re.setEnd(K.node,K.offset),he.addRange(re))}}}}for(_e=[],he=L;he=he.parentNode;)he.nodeType===1&&_e.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof L.focus=="function"&&L.focus(),L=0;L<_e.length;L++){var xe=_e[L];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}rf=!!zd,Hd=zd=null}finally{kt=y,me.p=d,ee.T=c}}t.current=s,Bn=2}}function Cp(){if(Bn===2){Bn=0;var t=Hr,s=ko,c=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||c){c=ee.T,ee.T=null;var d=me.p;me.p=2;var y=kt;kt|=4;try{Jm(t,s.alternate,s)}finally{kt=y,me.p=d,ee.T=c}}Bn=3}}function Ap(){if(Bn===4||Bn===3){Bn=0,fi();var t=Hr,s=ko,c=tr,d=fp;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Bn=5:(Bn=0,ko=Hr=null,Sp(t,t.pendingLanes));var y=t.pendingLanes;if(y===0&&(zr=null),ns(c),s=s.stateNode,Te&&typeof Te.onCommitFiberRoot=="function")try{Te.onCommitFiberRoot(en,s,void 0,(s.current.flags&128)===128)}catch{}if(d!==null){s=ee.T,y=me.p,me.p=2,ee.T=null;try{for(var b=t.onRecoverableError,I=0;I<d.length;I++){var L=d[I];b(L.value,{componentStack:L.stack})}}finally{ee.T=s,me.p=y}}(tr&3)!==0&&Xu(),Rs(t),y=t.pendingLanes,(c&261930)!==0&&(y&42)!==0?t===Nd?Xl++:(Xl=0,Nd=t):Xl=0,Yl(0)}}function Sp(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,Tl(s)))}function Xu(){return vp(),Cp(),Ap(),Tp()}function Tp(){if(Bn!==5)return!1;var t=Hr,s=Sd;Sd=0;var c=ns(tr),d=ee.T,y=me.p;try{me.p=32>c?32:c,ee.T=null,c=Td,Td=null;var b=Hr,I=tr;if(Bn=0,ko=Hr=null,tr=0,(kt&6)!==0)throw Error(o(331));var L=kt;if(kt|=4,lp(b.current),rp(b,b.current,I,c),kt=L,Yl(0,!1),Te&&typeof Te.onPostCommitFiberRoot=="function")try{Te.onPostCommitFiberRoot(en,b)}catch{}return!0}finally{me.p=y,ee.T=d,Sp(t,s)}}function Np(t,s,c){s=Wi(c,s),s=ad(t.stateNode,s,2),t=kr(t,s,2),t!==null&&(bs(t,2),Rs(t))}function zt(t,s,c){if(t.tag===3)Np(t,t,c);else for(;s!==null;){if(s.tag===3){Np(s,t,c);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(zr===null||!zr.has(d))){t=Wi(c,t),c=Im(2),d=kr(s,c,2),d!==null&&(Rm(c,d,s,t),bs(d,2),Rs(d));break}}s=s.return}}function Od(t,s,c){var d=t.pingCache;if(d===null){d=t.pingCache=new Tb;var y=new Set;d.set(s,y)}else y=d.get(s),y===void 0&&(y=new Set,d.set(s,y));y.has(c)||(vd=!0,y.add(c),t=Db.bind(null,t,s,c),s.then(t,t))}function Db(t,s,c){var d=t.pingCache;d!==null&&d.delete(s),t.pingedLanes|=t.suspendedLanes&c,t.warmLanes&=~c,Jt===t&&(vt&c)===c&&(pn===4||pn===3&&(vt&62914560)===vt&&300>Wt()-Fu?(kt&2)===0&&Bo(t,0):Cd|=c,Lo===vt&&(Lo=0)),Rs(t)}function Ip(t,s){s===0&&(s=Dn()),t=Ia(t,s),t!==null&&(bs(t,s),Rs(t))}function Mb(t){var s=t.memoizedState,c=0;s!==null&&(c=s.retryLane),Ip(t,c)}function Lb(t,s){var c=0;switch(t.tag){case 31:case 13:var d=t.stateNode,y=t.memoizedState;y!==null&&(c=y.retryLane);break;case 19:d=t.stateNode;break;case 22:d=t.stateNode._retryCache;break;default:throw Error(o(314))}d!==null&&d.delete(s),Ip(t,c)}function kb(t,s){return Ht(t,s)}var Yu=null,jo=null,Dd=!1,Wu=!1,Md=!1,Gr=0;function Rs(t){t!==jo&&t.next===null&&(jo===null?Yu=jo=t:jo=jo.next=t),Wu=!0,Dd||(Dd=!0,Pb())}function Yl(t,s){if(!Md&&Wu){Md=!0;do for(var c=!1,d=Yu;d!==null;){if(t!==0){var y=d.pendingLanes;if(y===0)var b=0;else{var I=d.suspendedLanes,L=d.pingedLanes;b=(1<<31-ut(42|t)+1)-1,b&=y&~(I&~L),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,Mp(d,b))}else b=vt,b=_a(d,d===Jt?b:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(b&3)===0||Xn(d,b)||(c=!0,Mp(d,b));d=d.next}while(c);Md=!1}}function Bb(){Rp()}function Rp(){Wu=Dd=!1;var t=0;Gr!==0&&Yb()&&(t=Gr);for(var s=Wt(),c=null,d=Yu;d!==null;){var y=d.next,b=Op(d,s);b===0?(d.next=null,c===null?Yu=y:c.next=y,y===null&&(jo=c)):(c=d,(t!==0||(b&3)!==0)&&(Wu=!0)),d=y}Bn!==0&&Bn!==5||Yl(t),Gr!==0&&(Gr=0)}function Op(t,s){for(var c=t.suspendedLanes,d=t.pingedLanes,y=t.expirationTimes,b=t.pendingLanes&-62914561;0<b;){var I=31-ut(b),L=1<<I,z=y[I];z===-1?((L&c)===0||(L&d)!==0)&&(y[I]=gl(L,s)):z<=s&&(t.expiredLanes|=L),b&=~L}if(s=Jt,c=vt,c=_a(t,t===s?c:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),d=t.callbackNode,c===0||t===s&&(Ft===2||Ft===9)||t.cancelPendingCommit!==null)return d!==null&&d!==null&&Be(d),t.callbackNode=null,t.callbackPriority=0;if((c&3)===0||Xn(t,c)){if(s=c&-c,s===t.callbackPriority)return s;switch(d!==null&&Be(d),ns(c)){case 2:case 8:c=fl;break;case 32:c=Si;break;case 268435456:c=hl;break;default:c=Si}return d=Dp.bind(null,t),c=Ht(c,d),t.callbackPriority=s,t.callbackNode=c,s}return d!==null&&d!==null&&Be(d),t.callbackPriority=2,t.callbackNode=null,2}function Dp(t,s){if(Bn!==0&&Bn!==5)return t.callbackNode=null,t.callbackPriority=0,null;var c=t.callbackNode;if(Xu()&&t.callbackNode!==c)return null;var d=vt;return d=_a(t,t===Jt?d:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),d===0?null:(dp(t,d,s),Op(t,Wt()),t.callbackNode!=null&&t.callbackNode===c?Dp.bind(null,t):null)}function Mp(t,s){if(Xu())return null;dp(t,s,!0)}function Pb(){Kb(function(){(kt&6)!==0?Ht(hi,Bb):Rp()})}function Ld(){if(Gr===0){var t=vo;t===0&&(t=ya,ya<<=1,(ya&261888)===0&&(ya=256)),Gr=t}return Gr}function Lp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:br(""+t)}function kp(t,s){var c=s.ownerDocument.createElement("input");return c.name=s.name,c.value=s.value,t.id&&c.setAttribute("form",t.id),s.parentNode.insertBefore(c,s),t=new FormData(t),c.parentNode.removeChild(c),t}function jb(t,s,c,d,y){if(s==="submit"&&c&&c.stateNode===y){var b=Lp((y[Ut]||null).action),I=d.submitter;I&&(s=(s=I[Ut]||null)?Lp(s.formAction):I.getAttribute("formAction"),s!==null&&(b=s,I=null));var L=new Mn("action","action",null,d,y);t.push({event:L,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(Gr!==0){var z=I?kp(y,I):new FormData(y);ed(c,{pending:!0,data:z,method:y.method,action:b},null,z)}}else typeof b=="function"&&(L.preventDefault(),z=I?kp(y,I):new FormData(y),ed(c,{pending:!0,data:z,method:y.method,action:b},b,z))},currentTarget:y}]})}}for(var kd=0;kd<Cl.length;kd++){var Bd=Cl[kd],Ub=Bd.toLowerCase(),Fb=Bd[0].toUpperCase()+Bd.slice(1);ls(Ub,"on"+Fb)}ls(pi,"onAnimationEnd"),ls(Yn,"onAnimationIteration"),ls(jt,"onAnimationStart"),ls("dblclick","onDoubleClick"),ls("focusin","onFocus"),ls("focusout","onBlur"),ls(kn,"onTransitionRun"),ls(ri,"onTransitionStart"),ls(Nr,"onTransitionCancel"),ls(zs,"onTransitionEnd"),Ni("onMouseEnter",["mouseout","mouseover"]),Ni("onMouseLeave",["mouseout","mouseover"]),Ni("onPointerEnter",["pointerout","pointerover"]),Ni("onPointerLeave",["pointerout","pointerover"]),Bt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wl));function Bp(t,s){s=(s&4)!==0;for(var c=0;c<t.length;c++){var d=t[c],y=d.event;d=d.listeners;e:{var b=void 0;if(s)for(var I=d.length-1;0<=I;I--){var L=d[I],z=L.instance,ae=L.currentTarget;if(L=L.listener,z!==b&&y.isPropagationStopped())break e;b=L,y.currentTarget=ae;try{b(y)}catch(de){cu(de)}y.currentTarget=null,b=z}else for(I=0;I<d.length;I++){if(L=d[I],z=L.instance,ae=L.currentTarget,L=L.listener,z!==b&&y.isPropagationStopped())break e;b=L,y.currentTarget=ae;try{b(y)}catch(de){cu(de)}y.currentTarget=null,b=z}}}}function yt(t,s){var c=s[mr];c===void 0&&(c=s[mr]=new Set);var d=t+"__bubble";c.has(d)||(Pp(s,t,2,!1),c.add(d))}function Pd(t,s,c){var d=0;s&&(d|=4),Pp(c,t,d,s)}var Ku="_reactListening"+Math.random().toString(36).slice(2);function jd(t){if(!t[Ku]){t[Ku]=!0,be.forEach(function(c){c!=="selectionchange"&&(zb.has(c)||Pd(c,!1,t),Pd(c,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Ku]||(s[Ku]=!0,Pd("selectionchange",!1,s))}}function Pp(t,s,c,d){switch(h2(s)){case 2:var y=mE;break;case 8:y=pE;break;default:y=$d}c=y.bind(null,s,c,t),y=void 0,!xl||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),d?y!==void 0?t.addEventListener(s,c,{capture:!0,passive:y}):t.addEventListener(s,c,!0):y!==void 0?t.addEventListener(s,c,{passive:y}):t.addEventListener(s,c,!1)}function Ud(t,s,c,d,y){var b=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var I=d.tag;if(I===3||I===4){var L=d.stateNode.containerInfo;if(L===y)break;if(I===4)for(I=d.return;I!==null;){var z=I.tag;if((z===3||z===4)&&I.stateNode.containerInfo===y)return;I=I.return}for(;L!==null;){if(I=hn(L),I===null)return;if(z=I.tag,z===5||z===6||z===26||z===27){d=b=I;continue e}L=L.parentNode}}d=d.return}Jc(function(){var ae=b,de=pl(c),_e=[];e:{var le=lu.get(t);if(le!==void 0){var he=Mn,ze=t;switch(t){case"keypress":if(vs(c)===0)break e;case"keydown":case"keyup":he=go;break;case"focusin":ze="focus",he=wl;break;case"focusout":ze="blur",he=wl;break;case"beforeblur":case"afterblur":he=wl;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=Lt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=fo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=mh;break;case pi:case Yn:case jt:he=ft;break;case zs:he=Ps;break;case"scroll":case"scrollend":he=$c;break;case"wheel":he=ph;break;case"copy":case"cut":case"paste":he=ho;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Pt;break;case"toggle":case"beforetoggle":he=El}var $e=(s&4)!==0,Xt=!$e&&(t==="scroll"||t==="scrollend"),J=$e?le!==null?le+"Capture":null:le;$e=[];for(var K=ae,re;K!==null;){var xe=K;if(re=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||re===null||J===null||(xe=st(K,J),xe!=null&&$e.push(Kl(K,xe,re))),Xt)break;K=K.return}0<$e.length&&(le=new he(le,ze,null,c,de),_e.push({event:le,listeners:$e}))}}if((s&7)===0){e:{if(le=t==="mouseover"||t==="pointerover",he=t==="mouseout"||t==="pointerout",le&&c!==ba&&(ze=c.relatedTarget||c.fromElement)&&(hn(ze)||ze[Ti]))break e;if((he||le)&&(le=de.window===de?de:(le=de.ownerDocument)?le.defaultView||le.parentWindow:window,he?(ze=c.relatedTarget||c.toElement,he=ae,ze=ze?hn(ze):null,ze!==null&&(Xt=m(ze),$e=ze.tag,ze!==Xt||$e!==5&&$e!==27&&$e!==6)&&(ze=null)):(he=null,ze=ae),he!==ze)){if($e=Lt,xe="onMouseLeave",J="onMouseEnter",K="mouse",(t==="pointerout"||t==="pointerover")&&($e=Pt,xe="onPointerLeave",J="onPointerEnter",K="pointer"),Xt=he==null?le:pr(he),re=ze==null?le:pr(ze),le=new $e(xe,K+"leave",he,c,de),le.target=Xt,le.relatedTarget=re,xe=null,hn(de)===ae&&($e=new $e(J,K+"enter",ze,c,de),$e.target=re,$e.relatedTarget=Xt,xe=$e),Xt=xe,he&&ze)t:{for($e=Hb,J=he,K=ze,re=0,xe=J;xe;xe=$e(xe))re++;xe=0;for(var We=K;We;We=$e(We))xe++;for(;0<re-xe;)J=$e(J),re--;for(;0<xe-re;)K=$e(K),xe--;for(;re--;){if(J===K||K!==null&&J===K.alternate){$e=J;break t}J=$e(J),K=$e(K)}$e=null}else $e=null;he!==null&&jp(_e,le,he,$e,!1),ze!==null&&Xt!==null&&jp(_e,Xt,ze,$e,!0)}}e:{if(le=ae?pr(ae):window,he=le.nodeName&&le.nodeName.toLowerCase(),he==="select"||he==="input"&&le.type==="file")var Rt=Di;else if(vl(le))if(ou)Rt=u;else{Rt=a;var qe=n}else he=le.nodeName,!he||he.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?ae&&Kt(ae.elementType)&&(Rt=Di):Rt=l;if(Rt&&(Rt=Rt(t,ae))){Oi(_e,Rt,c,de);break e}qe&&qe(t,le,ae),t==="focusout"&&ae&&le.type==="number"&&ae.memoizedProps.value!=null&&B(le,"number",le.value)}switch(qe=ae?pr(ae):window,t){case"focusin":(vl(qe)||qe.contentEditable==="true")&&(V=qe,X=ae,ie=null);break;case"focusout":ie=X=V=null;break;case"mousedown":ce=!0;break;case"contextmenu":case"mouseup":case"dragend":ce=!1,Se(_e,c,de);break;case"selectionchange":if(j)break;case"keydown":case"keyup":Se(_e,c,de)}var ht;if(Ca)e:{switch(t){case"compositionstart":var Ct="onCompositionStart";break e;case"compositionend":Ct="onCompositionEnd";break e;case"compositionupdate":Ct="onCompositionUpdate";break e}Ct=void 0}else Tr?au(t,c)&&(Ct="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(Ct="onCompositionStart");Ct&&(ru&&c.locale!=="ko"&&(Tr||Ct!=="onCompositionStart"?Ct==="onCompositionEnd"&&Tr&&(ht=Er()):(as=de,os="value"in as?as.value:as.textContent,Tr=!0)),qe=Zu(ae,Ct),0<qe.length&&(Ct=new nu(Ct,t,null,c,de),_e.push({event:Ct,listeners:qe}),ht?Ct.data=ht:(ht=Sr(c),ht!==null&&(Ct.data=ht)))),(ht=su?Ss(t,c):po(t,c))&&(Ct=Zu(ae,"onBeforeInput"),0<Ct.length&&(qe=new nu("onBeforeInput","beforeinput",null,c,de),_e.push({event:qe,listeners:Ct}),qe.data=ht)),jb(_e,t,ae,c,de)}Bp(_e,s)})}function Kl(t,s,c){return{instance:t,listener:s,currentTarget:c}}function Zu(t,s){for(var c=s+"Capture",d=[];t!==null;){var y=t,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=st(t,c),y!=null&&d.unshift(Kl(t,y,b)),y=st(t,s),y!=null&&d.push(Kl(t,y,b))),t.tag===3)return d;t=t.return}return[]}function Hb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function jp(t,s,c,d,y){for(var b=s._reactName,I=[];c!==null&&c!==d;){var L=c,z=L.alternate,ae=L.stateNode;if(L=L.tag,z!==null&&z===d)break;L!==5&&L!==26&&L!==27||ae===null||(z=ae,y?(ae=st(c,b),ae!=null&&I.unshift(Kl(c,ae,z))):y||(ae=st(c,b),ae!=null&&I.push(Kl(c,ae,z)))),c=c.return}I.length!==0&&t.push({event:s,listeners:I})}var Vb=/\r\n?/g,Gb=/\u0000|\uFFFD/g;function Up(t){return(typeof t=="string"?t:""+t).replace(Vb,`
`).replace(Gb,"")}function Fp(t,s){return s=Up(s),Up(t)===s}function qt(t,s,c,d,y,b){switch(c){case"children":typeof d=="string"?s==="body"||s==="textarea"&&d===""||wr(t,d):(typeof d=="number"||typeof d=="bigint")&&s!=="body"&&wr(t,""+d);break;case"className":yr(t,"class",d);break;case"tabIndex":yr(t,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":yr(t,c,d);break;case"style":Xe(t,d,b);break;case"data":if(s!=="object"){yr(t,"data",d);break}case"src":case"href":if(d===""&&(s!=="a"||c!=="href")){t.removeAttribute(c);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){t.removeAttribute(c);break}d=br(""+d),t.setAttribute(c,d);break;case"action":case"formAction":if(typeof d=="function"){t.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(s!=="input"&&qt(t,s,"name",y.name,y,null),qt(t,s,"formEncType",y.formEncType,y,null),qt(t,s,"formMethod",y.formMethod,y,null),qt(t,s,"formTarget",y.formTarget,y,null)):(qt(t,s,"encType",y.encType,y,null),qt(t,s,"method",y.method,y,null),qt(t,s,"target",y.target,y,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){t.removeAttribute(c);break}d=br(""+d),t.setAttribute(c,d);break;case"onClick":d!=null&&(t.onclick=gi);break;case"onScroll":d!=null&&yt("scroll",t);break;case"onScrollEnd":d!=null&&yt("scrollend",t);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"multiple":t.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":t.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){t.removeAttribute("xlink:href");break}c=br(""+d),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,""+d):t.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,""):t.removeAttribute(c);break;case"capture":case"download":d===!0?t.setAttribute(c,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?t.setAttribute(c,d):t.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?t.setAttribute(c,d):t.removeAttribute(c);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?t.removeAttribute(c):t.setAttribute(c,d);break;case"popover":yt("beforetoggle",t),yt("toggle",t),xr(t,"popover",d);break;case"xlinkActuate":Ii(t,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Ii(t,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Ii(t,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Ii(t,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Ii(t,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Ii(t,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Ii(t,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Ii(t,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Ii(t,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":xr(t,"is",d);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Qc.get(c)||c,xr(t,c,d))}}function Fd(t,s,c,d,y,b){switch(c){case"style":Xe(t,d,b);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(o(61));if(c=d.__html,c!=null){if(y.children!=null)throw Error(o(60));t.innerHTML=c}}break;case"children":typeof d=="string"?wr(t,d):(typeof d=="number"||typeof d=="bigint")&&wr(t,""+d);break;case"onScroll":d!=null&&yt("scroll",t);break;case"onScrollEnd":d!=null&&yt("scrollend",t);break;case"onClick":d!=null&&(t.onclick=gi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zc.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),s=c.slice(2,y?c.length-7:void 0),b=t[Ut]||null,b=b!=null?b[c]:null,typeof b=="function"&&t.removeEventListener(s,b,y),typeof d=="function")){typeof b!="function"&&b!==null&&(c in t?t[c]=null:t.hasAttribute(c)&&t.removeAttribute(c)),t.addEventListener(s,d,y);break e}c in t?t[c]=d:d===!0?t.setAttribute(c,""):xr(t,c,d)}}}function Qn(t,s,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":yt("error",t),yt("load",t);var d=!1,y=!1,b;for(b in c)if(c.hasOwnProperty(b)){var I=c[b];if(I!=null)switch(b){case"src":d=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:qt(t,s,b,I,c,null)}}y&&qt(t,s,"srcSet",c.srcSet,c,null),d&&qt(t,s,"src",c.src,c,null);return;case"input":yt("invalid",t);var L=b=I=y=null,z=null,ae=null;for(d in c)if(c.hasOwnProperty(d)){var de=c[d];if(de!=null)switch(d){case"name":y=de;break;case"type":I=de;break;case"checked":z=de;break;case"defaultChecked":ae=de;break;case"value":b=de;break;case"defaultValue":L=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(o(137,s));break;default:qt(t,s,d,de,c,null)}}se(t,b,L,z,ae,I,y,!1);return;case"select":yt("invalid",t),d=I=b=null;for(y in c)if(c.hasOwnProperty(y)&&(L=c[y],L!=null))switch(y){case"value":b=L;break;case"defaultValue":I=L;break;case"multiple":d=L;default:qt(t,s,y,L,c,null)}s=b,c=I,t.multiple=!!d,s!=null?He(t,!!d,s,!1):c!=null&&He(t,!!d,c,!0);return;case"textarea":yt("invalid",t),b=y=d=null;for(I in c)if(c.hasOwnProperty(I)&&(L=c[I],L!=null))switch(I){case"value":d=L;break;case"defaultValue":y=L;break;case"children":b=L;break;case"dangerouslySetInnerHTML":if(L!=null)throw Error(o(91));break;default:qt(t,s,I,L,c,null)}ii(t,d,y,b);return;case"option":for(z in c)if(c.hasOwnProperty(z)&&(d=c[z],d!=null))switch(z){case"selected":t.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:qt(t,s,z,d,c,null)}return;case"dialog":yt("beforetoggle",t),yt("toggle",t),yt("cancel",t),yt("close",t);break;case"iframe":case"object":yt("load",t);break;case"video":case"audio":for(d=0;d<Wl.length;d++)yt(Wl[d],t);break;case"image":yt("error",t),yt("load",t);break;case"details":yt("toggle",t);break;case"embed":case"source":case"link":yt("error",t),yt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ae in c)if(c.hasOwnProperty(ae)&&(d=c[ae],d!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:qt(t,s,ae,d,c,null)}return;default:if(Kt(s)){for(de in c)c.hasOwnProperty(de)&&(d=c[de],d!==void 0&&Fd(t,s,de,d,c,void 0));return}}for(L in c)c.hasOwnProperty(L)&&(d=c[L],d!=null&&qt(t,s,L,d,c,null))}function qb(t,s,c,d){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,I=null,L=null,z=null,ae=null,de=null;for(he in c){var _e=c[he];if(c.hasOwnProperty(he)&&_e!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":z=_e;default:d.hasOwnProperty(he)||qt(t,s,he,null,d,_e)}}for(var le in d){var he=d[le];if(_e=c[le],d.hasOwnProperty(le)&&(he!=null||_e!=null))switch(le){case"type":b=he;break;case"name":y=he;break;case"checked":ae=he;break;case"defaultChecked":de=he;break;case"value":I=he;break;case"defaultValue":L=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(o(137,s));break;default:he!==_e&&qt(t,s,le,he,d,_e)}}An(t,I,L,z,ae,de,b,y);return;case"select":he=I=L=le=null;for(b in c)if(z=c[b],c.hasOwnProperty(b)&&z!=null)switch(b){case"value":break;case"multiple":he=z;default:d.hasOwnProperty(b)||qt(t,s,b,null,d,z)}for(y in d)if(b=d[y],z=c[y],d.hasOwnProperty(y)&&(b!=null||z!=null))switch(y){case"value":le=b;break;case"defaultValue":L=b;break;case"multiple":I=b;default:b!==z&&qt(t,s,y,b,d,z)}s=L,c=I,d=he,le!=null?He(t,!!c,le,!1):!!d!=!!c&&(s!=null?He(t,!!c,s,!0):He(t,!!c,c?[]:"",!1));return;case"textarea":he=le=null;for(L in c)if(y=c[L],c.hasOwnProperty(L)&&y!=null&&!d.hasOwnProperty(L))switch(L){case"value":break;case"children":break;default:qt(t,s,L,null,d,y)}for(I in d)if(y=d[I],b=c[I],d.hasOwnProperty(I)&&(y!=null||b!=null))switch(I){case"value":le=y;break;case"defaultValue":he=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(o(91));break;default:y!==b&&qt(t,s,I,y,d,b)}bn(t,le,he);return;case"option":for(var ze in c)if(le=c[ze],c.hasOwnProperty(ze)&&le!=null&&!d.hasOwnProperty(ze))switch(ze){case"selected":t.selected=!1;break;default:qt(t,s,ze,null,d,le)}for(z in d)if(le=d[z],he=c[z],d.hasOwnProperty(z)&&le!==he&&(le!=null||he!=null))switch(z){case"selected":t.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:qt(t,s,z,le,d,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var $e in c)le=c[$e],c.hasOwnProperty($e)&&le!=null&&!d.hasOwnProperty($e)&&qt(t,s,$e,null,d,le);for(ae in d)if(le=d[ae],he=c[ae],d.hasOwnProperty(ae)&&le!==he&&(le!=null||he!=null))switch(ae){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(o(137,s));break;default:qt(t,s,ae,le,d,he)}return;default:if(Kt(s)){for(var Xt in c)le=c[Xt],c.hasOwnProperty(Xt)&&le!==void 0&&!d.hasOwnProperty(Xt)&&Fd(t,s,Xt,void 0,d,le);for(de in d)le=d[de],he=c[de],!d.hasOwnProperty(de)||le===he||le===void 0&&he===void 0||Fd(t,s,de,le,d,he);return}}for(var J in c)le=c[J],c.hasOwnProperty(J)&&le!=null&&!d.hasOwnProperty(J)&&qt(t,s,J,null,d,le);for(_e in d)le=d[_e],he=c[_e],!d.hasOwnProperty(_e)||le===he||le==null&&he==null||qt(t,s,_e,le,d,he)}function zp(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Xb(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,c=performance.getEntriesByType("resource"),d=0;d<c.length;d++){var y=c[d],b=y.transferSize,I=y.initiatorType,L=y.duration;if(b&&L&&zp(I)){for(I=0,L=y.responseEnd,d+=1;d<c.length;d++){var z=c[d],ae=z.startTime;if(ae>L)break;var de=z.transferSize,_e=z.initiatorType;de&&zp(_e)&&(z=z.responseEnd,I+=de*(z<L?1:(L-ae)/(z-ae)))}if(--d,s+=8*(b+I)/(y.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var zd=null,Hd=null;function Qu(t){return t.nodeType===9?t:t.ownerDocument}function Hp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vp(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Vd(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Gd=null;function Yb(){var t=window.event;return t&&t.type==="popstate"?t===Gd?!1:(Gd=t,!0):(Gd=null,!1)}var Gp=typeof setTimeout=="function"?setTimeout:void 0,Wb=typeof clearTimeout=="function"?clearTimeout:void 0,qp=typeof Promise=="function"?Promise:void 0,Kb=typeof queueMicrotask=="function"?queueMicrotask:typeof qp<"u"?function(t){return qp.resolve(null).then(t).catch(Zb)}:Gp;function Zb(t){setTimeout(function(){throw t})}function qr(t){return t==="head"}function Xp(t,s){var c=s,d=0;do{var y=c.nextSibling;if(t.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(d===0){t.removeChild(y),Ho(s);return}d--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")d++;else if(c==="html")Zl(t.ownerDocument.documentElement);else if(c==="head"){c=t.ownerDocument.head,Zl(c);for(var b=c.firstChild;b;){var I=b.nextSibling,L=b.nodeName;b[wa]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=I}}else c==="body"&&Zl(t.ownerDocument.body);c=y}while(c);Ho(s)}function Yp(t,s){var c=t;t=0;do{var d=c.nextSibling;if(c.nodeType===1?s?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(s?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),d&&d.nodeType===8)if(c=d.data,c==="/$"){if(t===0)break;t--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||t++;c=d}while(c)}function qd(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var c=s;switch(s=s.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":qd(c),di(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}t.removeChild(c)}}function Qb(t,s,c,d){for(;t.nodeType===1;){var y=c;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!d&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(d){if(!t[wa])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(b=t.getAttribute("rel"),b==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(b!==y.rel||t.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||t.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||t.getAttribute("title")!==(y.title==null?null:y.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(b=t.getAttribute("src"),(b!==(y.src==null?null:y.src)||t.getAttribute("type")!==(y.type==null?null:y.type)||t.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&t.getAttribute("name")===b)return t}else return t;if(t=$i(t.nextSibling),t===null)break}return null}function Jb(t,s,c){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!c||(t=$i(t.nextSibling),t===null))return null;return t}function Wp(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=$i(t.nextSibling),t===null))return null;return t}function Xd(t){return t.data==="$?"||t.data==="$~"}function Yd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function $b(t,s){var c=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||c.readyState!=="loading")s();else{var d=function(){s(),c.removeEventListener("DOMContentLoaded",d)};c.addEventListener("DOMContentLoaded",d),t._reactRetry=d}}function $i(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var Wd=null;function Kp(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"||c==="/&"){if(s===0)return $i(t.nextSibling);s--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||s++}t=t.nextSibling}return null}function Zp(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(s===0)return t;s--}else c!=="/$"&&c!=="/&"||s++}t=t.previousSibling}return null}function Qp(t,s,c){switch(s=Qu(c),t){case"html":if(t=s.documentElement,!t)throw Error(o(452));return t;case"head":if(t=s.head,!t)throw Error(o(453));return t;case"body":if(t=s.body,!t)throw Error(o(454));return t;default:throw Error(o(451))}}function Zl(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);di(t)}var es=new Map,Jp=new Set;function Ju(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var nr=me.d;me.d={f:eE,r:tE,D:nE,C:iE,L:sE,m:rE,X:oE,S:aE,M:lE};function eE(){var t=nr.f(),s=Vu();return t||s}function tE(t){var s=Mt(t);s!==null&&s.tag===5&&s.type==="form"?mm(s):nr.r(t)}var Uo=typeof document>"u"?null:document;function $p(t,s,c){var d=Uo;if(d&&typeof s=="string"&&s){var y=gt(s);y='link[rel="'+t+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),Jp.has(y)||(Jp.add(y),t={rel:t,crossOrigin:c,href:s},d.querySelector(y)===null&&(s=d.createElement("link"),Qn(s,"link",t),dn(s),d.head.appendChild(s)))}}function nE(t){nr.D(t),$p("dns-prefetch",t,null)}function iE(t,s){nr.C(t,s),$p("preconnect",t,s)}function sE(t,s,c){nr.L(t,s,c);var d=Uo;if(d&&t&&s){var y='link[rel="preload"][as="'+gt(s)+'"]';s==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+gt(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+gt(c.imageSizes)+'"]')):y+='[href="'+gt(t)+'"]';var b=y;switch(s){case"style":b=Fo(t);break;case"script":b=zo(t)}es.has(b)||(t=N({rel:"preload",href:s==="image"&&c&&c.imageSrcSet?void 0:t,as:s},c),es.set(b,t),d.querySelector(y)!==null||s==="style"&&d.querySelector(Ql(b))||s==="script"&&d.querySelector(Jl(b))||(s=d.createElement("link"),Qn(s,"link",t),dn(s),d.head.appendChild(s)))}}function rE(t,s){nr.m(t,s);var c=Uo;if(c&&t){var d=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+gt(d)+'"][href="'+gt(t)+'"]',b=y;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=zo(t)}if(!es.has(b)&&(t=N({rel:"modulepreload",href:t},s),es.set(b,t),c.querySelector(y)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Jl(b)))return}d=c.createElement("link"),Qn(d,"link",t),dn(d),c.head.appendChild(d)}}}function aE(t,s,c){nr.S(t,s,c);var d=Uo;if(d&&t){var y=ni(d).hoistableStyles,b=Fo(t);s=s||"default";var I=y.get(b);if(!I){var L={loading:0,preload:null};if(I=d.querySelector(Ql(b)))L.loading=5;else{t=N({rel:"stylesheet",href:t,"data-precedence":s},c),(c=es.get(b))&&Kd(t,c);var z=I=d.createElement("link");dn(z),Qn(z,"link",t),z._p=new Promise(function(ae,de){z.onload=ae,z.onerror=de}),z.addEventListener("load",function(){L.loading|=1}),z.addEventListener("error",function(){L.loading|=2}),L.loading|=4,$u(I,s,d)}I={type:"stylesheet",instance:I,count:1,state:L},y.set(b,I)}}}function oE(t,s){nr.X(t,s);var c=Uo;if(c&&t){var d=ni(c).hoistableScripts,y=zo(t),b=d.get(y);b||(b=c.querySelector(Jl(y)),b||(t=N({src:t,async:!0},s),(s=es.get(y))&&Zd(t,s),b=c.createElement("script"),dn(b),Qn(b,"link",t),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function lE(t,s){nr.M(t,s);var c=Uo;if(c&&t){var d=ni(c).hoistableScripts,y=zo(t),b=d.get(y);b||(b=c.querySelector(Jl(y)),b||(t=N({src:t,async:!0,type:"module"},s),(s=es.get(y))&&Zd(t,s),b=c.createElement("script"),dn(b),Qn(b,"link",t),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},d.set(y,b))}}function e2(t,s,c,d){var y=(y=Ae.current)?Ju(y):null;if(!y)throw Error(o(446));switch(t){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(s=Fo(c.href),c=ni(y).hoistableStyles,d=c.get(s),d||(d={type:"style",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){t=Fo(c.href);var b=ni(y).hoistableStyles,I=b.get(t);if(I||(y=y.ownerDocument||y,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(t,I),(b=y.querySelector(Ql(t)))&&!b._p&&(I.instance=b,I.state.loading=5),es.has(t)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},es.set(t,c),b||cE(y,t,c,I.state))),s&&d===null)throw Error(o(528,""));return I}if(s&&d!==null)throw Error(o(529,""));return null;case"script":return s=c.async,c=c.src,typeof c=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=zo(c),c=ni(y).hoistableScripts,d=c.get(s),d||(d={type:"script",instance:null,count:0,state:null},c.set(s,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,t))}}function Fo(t){return'href="'+gt(t)+'"'}function Ql(t){return'link[rel="stylesheet"]['+t+"]"}function t2(t){return N({},t,{"data-precedence":t.precedence,precedence:null})}function cE(t,s,c,d){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?d.loading=1:(s=t.createElement("link"),d.preload=s,s.addEventListener("load",function(){return d.loading|=1}),s.addEventListener("error",function(){return d.loading|=2}),Qn(s,"link",c),dn(s),t.head.appendChild(s))}function zo(t){return'[src="'+gt(t)+'"]'}function Jl(t){return"script[async]"+t}function n2(t,s,c){if(s.count++,s.instance===null)switch(s.type){case"style":var d=t.querySelector('style[data-href~="'+gt(c.href)+'"]');if(d)return s.instance=d,dn(d),d;var y=N({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return d=(t.ownerDocument||t).createElement("style"),dn(d),Qn(d,"style",y),$u(d,c.precedence,t),s.instance=d;case"stylesheet":y=Fo(c.href);var b=t.querySelector(Ql(y));if(b)return s.state.loading|=4,s.instance=b,dn(b),b;d=t2(c),(y=es.get(y))&&Kd(d,y),b=(t.ownerDocument||t).createElement("link"),dn(b);var I=b;return I._p=new Promise(function(L,z){I.onload=L,I.onerror=z}),Qn(b,"link",d),s.state.loading|=4,$u(b,c.precedence,t),s.instance=b;case"script":return b=zo(c.src),(y=t.querySelector(Jl(b)))?(s.instance=y,dn(y),y):(d=c,(y=es.get(b))&&(d=N({},c),Zd(d,y)),t=t.ownerDocument||t,y=t.createElement("script"),dn(y),Qn(y,"link",d),t.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(d=s.instance,s.state.loading|=4,$u(d,c.precedence,t));return s.instance}function $u(t,s,c){for(var d=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=d.length?d[d.length-1]:null,b=y,I=0;I<d.length;I++){var L=d[I];if(L.dataset.precedence===s)b=L;else if(b!==y)break}b?b.parentNode.insertBefore(t,b.nextSibling):(s=c.nodeType===9?c.head:c,s.insertBefore(t,s.firstChild))}function Kd(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Zd(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var ef=null;function i2(t,s,c){if(ef===null){var d=new Map,y=ef=new Map;y.set(c,d)}else y=ef,d=y.get(c),d||(d=new Map,y.set(c,d));if(d.has(t))return d;for(d.set(t,null),c=c.getElementsByTagName(t),y=0;y<c.length;y++){var b=c[y];if(!(b[wa]||b[wn]||t==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var I=b.getAttribute(s)||"";I=t+I;var L=d.get(I);L?L.push(b):d.set(I,[b])}}return d}function s2(t,s,c){t=t.ownerDocument||t,t.head.insertBefore(c,s==="title"?t.querySelector("head > title"):null)}function uE(t,s,c){if(c===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function r2(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function fE(t,s,c,d){if(c.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=Fo(d.href),b=s.querySelector(Ql(y));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=tf.bind(t),s.then(t,t)),c.state.loading|=4,c.instance=b,dn(b);return}b=s.ownerDocument||s,d=t2(d),(y=es.get(y))&&Kd(d,y),b=b.createElement("link"),dn(b);var I=b;I._p=new Promise(function(L,z){I.onload=L,I.onerror=z}),Qn(b,"link",d),c.instance=b}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(c,s),(s=c.state.preload)&&(c.state.loading&3)===0&&(t.count++,c=tf.bind(t),s.addEventListener("load",c),s.addEventListener("error",c))}}var Qd=0;function hE(t,s){return t.stylesheets&&t.count===0&&sf(t,t.stylesheets),0<t.count||0<t.imgCount?function(c){var d=setTimeout(function(){if(t.stylesheets&&sf(t,t.stylesheets),t.unsuspend){var b=t.unsuspend;t.unsuspend=null,b()}},6e4+s);0<t.imgBytes&&Qd===0&&(Qd=62500*Xb());var y=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&sf(t,t.stylesheets),t.unsuspend)){var b=t.unsuspend;t.unsuspend=null,b()}},(t.imgBytes>Qd?50:800)+s);return t.unsuspend=c,function(){t.unsuspend=null,clearTimeout(d),clearTimeout(y)}}:null}function tf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sf(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var nf=null;function sf(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,nf=new Map,s.forEach(dE,t),nf=null,tf.call(t))}function dE(t,s){if(!(s.state.loading&4)){var c=nf.get(t);if(c)var d=c.get(null);else{c=new Map,nf.set(t,c);for(var y=t.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var I=y[b];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(c.set(I.dataset.precedence,I),d=I)}d&&c.set(null,d)}y=s.instance,I=y.getAttribute("data-precedence"),b=c.get(I)||d,b===d&&c.set(null,y),c.set(I,y),this.count++,d=tf.bind(this),y.addEventListener("load",d),y.addEventListener("error",d),b?b.parentNode.insertBefore(y,b.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(y,t.firstChild)),s.state.loading|=4}}var $l={$$typeof:F,Provider:null,Consumer:null,_currentValue:Ge,_currentValue2:Ge,_threadCount:0};function gE(t,s,c,d,y,b,I,L,z){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ws(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ws(0),this.hiddenUpdates=ws(null),this.identifierPrefix=d,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function a2(t,s,c,d,y,b,I,L,z,ae,de,_e){return t=new gE(t,s,c,I,z,ae,de,_e,L),s=1,b===!0&&(s|=24),b=Mi(3,null,null,s),t.current=b,b.stateNode=t,s=Rh(),s.refCount++,t.pooledCache=s,s.refCount++,b.memoizedState={element:d,isDehydrated:c,cache:s},Lh(b),t}function o2(t){return t?(t=yo,t):yo}function l2(t,s,c,d,y,b){y=o2(y),d.context===null?d.context=y:d.pendingContext=y,d=Lr(s),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=kr(t,d,s),c!==null&&(bi(c,t,s),Ol(c,t,s))}function c2(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<s?c:s}}function Jd(t,s){c2(t,s),(t=t.alternate)&&c2(t,s)}function u2(t){if(t.tag===13||t.tag===31){var s=Ia(t,67108864);s!==null&&bi(s,t,67108864),Jd(t,67108864)}}function f2(t){if(t.tag===13||t.tag===31){var s=ji();s=Fn(s);var c=Ia(t,s);c!==null&&bi(c,t,s),Jd(t,s)}}var rf=!0;function mE(t,s,c,d){var y=ee.T;ee.T=null;var b=me.p;try{me.p=2,$d(t,s,c,d)}finally{me.p=b,ee.T=y}}function pE(t,s,c,d){var y=ee.T;ee.T=null;var b=me.p;try{me.p=8,$d(t,s,c,d)}finally{me.p=b,ee.T=y}}function $d(t,s,c,d){if(rf){var y=e0(d);if(y===null)Ud(t,s,d,af,c),d2(t,d);else if(yE(y,t,s,c,d))d.stopPropagation();else if(d2(t,d),s&4&&-1<xE.indexOf(t)){for(;y!==null;){var b=Mt(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var I=_s(b.pendingLanes);if(I!==0){var L=b;for(L.pendingLanes|=2,L.entangledLanes|=2;I;){var z=1<<31-ut(I);L.entanglements[1]|=z,I&=~z}Rs(b),(kt&6)===0&&(zu=Wt()+500,Yl(0))}}break;case 31:case 13:L=Ia(b,2),L!==null&&bi(L,b,2),Vu(),Jd(b,2)}if(b=e0(d),b===null&&Ud(t,s,d,af,c),b===y)break;y=b}y!==null&&d.stopPropagation()}else Ud(t,s,d,null,c)}}function e0(t){return t=pl(t),t0(t)}var af=null;function t0(t){if(af=null,t=hn(t),t!==null){var s=m(t);if(s===null)t=null;else{var c=s.tag;if(c===13){if(t=x(s),t!==null)return t;t=null}else if(c===31){if(t=v(s),t!==null)return t;t=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return af=t,null}function h2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(pa()){case hi:return 2;case fl:return 8;case Si:case qn:return 32;case hl:return 268435456;default:return 32}default:return 32}}var n0=!1,Xr=null,Yr=null,Wr=null,ec=new Map,tc=new Map,Kr=[],xE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function d2(t,s){switch(t){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Yr=null;break;case"mouseover":case"mouseout":Wr=null;break;case"pointerover":case"pointerout":ec.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":tc.delete(s.pointerId)}}function nc(t,s,c,d,y,b){return t===null||t.nativeEvent!==b?(t={blockedOn:s,domEventName:c,eventSystemFlags:d,nativeEvent:b,targetContainers:[y]},s!==null&&(s=Mt(s),s!==null&&u2(s)),t):(t.eventSystemFlags|=d,s=t.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),t)}function yE(t,s,c,d,y){switch(s){case"focusin":return Xr=nc(Xr,t,s,c,d,y),!0;case"dragenter":return Yr=nc(Yr,t,s,c,d,y),!0;case"mouseover":return Wr=nc(Wr,t,s,c,d,y),!0;case"pointerover":var b=y.pointerId;return ec.set(b,nc(ec.get(b)||null,t,s,c,d,y)),!0;case"gotpointercapture":return b=y.pointerId,tc.set(b,nc(tc.get(b)||null,t,s,c,d,y)),!0}return!1}function g2(t){var s=hn(t.target);if(s!==null){var c=m(s);if(c!==null){if(s=c.tag,s===13){if(s=x(c),s!==null){t.blockedOn=s,je(t.priority,function(){f2(c)});return}}else if(s===31){if(s=v(c),s!==null){t.blockedOn=s,je(t.priority,function(){f2(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function of(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var c=e0(t.nativeEvent);if(c===null){c=t.nativeEvent;var d=new c.constructor(c.type,c);ba=d,c.target.dispatchEvent(d),ba=null}else return s=Mt(c),s!==null&&u2(s),t.blockedOn=c,!1;s.shift()}return!0}function m2(t,s,c){of(t)&&c.delete(s)}function _E(){n0=!1,Xr!==null&&of(Xr)&&(Xr=null),Yr!==null&&of(Yr)&&(Yr=null),Wr!==null&&of(Wr)&&(Wr=null),ec.forEach(m2),tc.forEach(m2)}function lf(t,s){t.blockedOn===s&&(t.blockedOn=null,n0||(n0=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,_E)))}var cf=null;function p2(t){cf!==t&&(cf=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){cf===t&&(cf=null);for(var s=0;s<t.length;s+=3){var c=t[s],d=t[s+1],y=t[s+2];if(typeof d!="function"){if(t0(d||c)===null)continue;break}var b=Mt(c);b!==null&&(t.splice(s,3),s-=3,ed(b,{pending:!0,data:y,method:c.method,action:d},d,y))}}))}function Ho(t){function s(z){return lf(z,t)}Xr!==null&&lf(Xr,t),Yr!==null&&lf(Yr,t),Wr!==null&&lf(Wr,t),ec.forEach(s),tc.forEach(s);for(var c=0;c<Kr.length;c++){var d=Kr[c];d.blockedOn===t&&(d.blockedOn=null)}for(;0<Kr.length&&(c=Kr[0],c.blockedOn===null);)g2(c),c.blockedOn===null&&Kr.shift();if(c=(t.ownerDocument||t).$$reactFormReplay,c!=null)for(d=0;d<c.length;d+=3){var y=c[d],b=c[d+1],I=y[Ut]||null;if(typeof b=="function")I||p2(c);else if(I){var L=null;if(b&&b.hasAttribute("formAction")){if(y=b,I=b[Ut]||null)L=I.formAction;else if(t0(y)!==null)continue}else L=I.action;typeof L=="function"?c[d+1]=L:(c.splice(d,3),d-=3),p2(c)}}}function x2(){function t(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(I){return y=I})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),d||setTimeout(c,20)}function c(){if(!d&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,y=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(c,100),function(){d=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function i0(t){this._internalRoot=t}uf.prototype.render=i0.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(o(409));var c=s.current,d=ji();l2(c,d,t,s,null,null)},uf.prototype.unmount=i0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;l2(t.current,2,null,t,null,null),Vu(),s[Ti]=null}};function uf(t){this._internalRoot=t}uf.prototype.unstable_scheduleHydration=function(t){if(t){var s=ei();t={blockedOn:null,target:t,priority:s};for(var c=0;c<Kr.length&&s!==0&&s<Kr[c].priority;c++);Kr.splice(c,0,t),c===0&&g2(t)}};var y2=e.version;if(y2!=="19.2.0")throw Error(o(527,y2,"19.2.0"));me.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=w(s),t=t!==null?T(t):null,t=t===null?null:t.stateNode,t};var wE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{en=ff.inject(wE),Te=ff}catch{}}return sc.createRoot=function(t,s){if(!f(t))throw Error(o(299));var c=!1,d="",y=Am,b=Sm,I=Tm;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(I=s.onRecoverableError)),s=a2(t,1,!1,null,null,c,d,null,y,b,I,x2),t[Ti]=s.current,jd(t),new i0(s)},sc.hydrateRoot=function(t,s,c){if(!f(t))throw Error(o(299));var d=!1,y="",b=Am,I=Sm,L=Tm,z=null;return c!=null&&(c.unstable_strictMode===!0&&(d=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(I=c.onCaughtError),c.onRecoverableError!==void 0&&(L=c.onRecoverableError),c.formState!==void 0&&(z=c.formState)),s=a2(t,1,!0,s,c??null,d,y,z,b,I,L,x2),s.context=o2(null),c=s.current,d=ji(),d=Fn(d),y=Lr(d),y.callback=null,kr(c,y,d),c=d,s.current.lanes=c,bs(s,c),Rs(s),t[Ti]=s.current,jd(t),new uf(s)},sc.version="19.2.0",sc}var N2;function DE(){if(N2)return a0.exports;N2=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),a0.exports=OE(),a0.exports}var ME=DE();const LE=Bc(ME);var Ue;(function(r){r[r.QR_CODE=0]="QR_CODE",r[r.AZTEC=1]="AZTEC",r[r.CODABAR=2]="CODABAR",r[r.CODE_39=3]="CODE_39",r[r.CODE_93=4]="CODE_93",r[r.CODE_128=5]="CODE_128",r[r.DATA_MATRIX=6]="DATA_MATRIX",r[r.MAXICODE=7]="MAXICODE",r[r.ITF=8]="ITF",r[r.EAN_13=9]="EAN_13",r[r.EAN_8=10]="EAN_8",r[r.PDF_417=11]="PDF_417",r[r.RSS_14=12]="RSS_14",r[r.RSS_EXPANDED=13]="RSS_EXPANDED",r[r.UPC_A=14]="UPC_A",r[r.UPC_E=15]="UPC_E",r[r.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ue||(Ue={}));var I2=new Map([[Ue.QR_CODE,"QR_CODE"],[Ue.AZTEC,"AZTEC"],[Ue.CODABAR,"CODABAR"],[Ue.CODE_39,"CODE_39"],[Ue.CODE_93,"CODE_93"],[Ue.CODE_128,"CODE_128"],[Ue.DATA_MATRIX,"DATA_MATRIX"],[Ue.MAXICODE,"MAXICODE"],[Ue.ITF,"ITF"],[Ue.EAN_13,"EAN_13"],[Ue.EAN_8,"EAN_8"],[Ue.PDF_417,"PDF_417"],[Ue.RSS_14,"RSS_14"],[Ue.RSS_EXPANDED,"RSS_EXPANDED"],[Ue.UPC_A,"UPC_A"],[Ue.UPC_E,"UPC_E"],[Ue.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),R2;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.URL=1]="URL"})(R2||(R2={}));function kE(r){return Object.values(Ue).includes(r)}var Cf;(function(r){r[r.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",r[r.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Cf||(Cf={}));var BE=(function(){function r(){}return r.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",r.SCAN_DEFAULT_FPS=2,r.DEFAULT_DISABLE_FLIP=!1,r.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,r.DEFAULT_SUPPORTED_SCAN_TYPE=[Cf.SCAN_TYPE_CAMERA,Cf.SCAN_TYPE_FILE],r})(),Dy=(function(){function r(e,i){this.format=e,this.formatName=i}return r.prototype.toString=function(){return this.formatName},r.create=function(e){if(!I2.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new r(e,I2.get(e))},r})(),O2=(function(){function r(){}return r.createFromText=function(e){var i={text:e};return{decodedText:e,result:i}},r.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},r})(),Q0;(function(r){r[r.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",r[r.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",r[r.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Q0||(Q0={}));var PE=(function(){function r(){}return r.createFrom=function(e){return{errorMessage:e,type:Q0.UNKWOWN_ERROR}},r})(),jE=(function(){function r(e){this.verbose=e}return r.prototype.log=function(e){this.verbose&&console.log(e)},r.prototype.warn=function(e){this.verbose&&console.warn(e)},r.prototype.logError=function(e,i){(this.verbose||i===!0)&&console.error(e)},r.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},r})();function ir(r){return typeof r>"u"||r===null}var qo=(function(){function r(){}return r.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},r.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},r.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},r.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},r.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},r.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},r.scannerPaused=function(){return"Scanner paused"},r})(),My=(function(){function r(){}return r.isMediaStreamConstraintsValid=function(e,i){if(typeof e!="object"){var o=typeof e;return i.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(o,"."),!0),!1}for(var f=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(f),x=Object.keys(e),v=0,E=x;v<E.length;v++){var w=E[v];if(m.has(w))return i.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},r})(),hc={exports:{}},UE=hc.exports,D2;function FE(){return D2||(D2=1,(function(r,e){(function(i,o){o(e)})(UE,(function(i){function o(R){return R==null}var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,n){R.__proto__=n}||function(R,n){for(var a in n)n.hasOwnProperty(a)&&(R[a]=n[a])};function m(R,n){f(R,n);function a(){this.constructor=R}R.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}function x(R,n){var a=Object.setPrototypeOf;a?a(R,n):R.__proto__=n}function v(R,n){n===void 0&&(n=R.constructor);var a=Error.captureStackTrace;a&&a(R,n)}var E=(function(R){m(n,R);function n(a){var l=this.constructor,u=R.call(this,a)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),x(u,l.prototype),v(u),u}return n})(Error);class w extends E{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}w.kind="Exception";class T extends w{}T.kind="ArgumentException";class N extends w{}N.kind="IllegalArgumentException";class D{constructor(n){if(this.binarizer=n,n===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,a){return this.binarizer.getBlackRow(n,a)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,a,l,u){const h=this.binarizer.getLuminanceSource().crop(n,a,l,u);return new D(this.binarizer.createBinarizer(h))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new D(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new D(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class P extends w{static getChecksumInstance(){return new P}}P.kind="ChecksumException";class G{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class H{static arraycopy(n,a,l,u,h){for(;h--;)l[u++]=n[a++]}static currentTimeMillis(){return Date.now()}}class ye extends w{}ye.kind="IndexOutOfBoundsException";class te extends ye{constructor(n=void 0,a=void 0){super(a),this.index=n,this.message=a}}te.kind="ArrayIndexOutOfBoundsException";class ${static fill(n,a){for(let l=0,u=n.length;l<u;l++)n[l]=a}static fillWithin(n,a,l,u){$.rangeCheck(n.length,a,l);for(let h=a;h<l;h++)n[h]=u}static rangeCheck(n,a,l){if(a>l)throw new N("fromIndex("+a+") > toIndex("+l+")");if(a<0)throw new te(a);if(l>n)throw new te(l)}static asList(...n){return n}static create(n,a,l){return Array.from({length:n}).map(h=>Array.from({length:a}).fill(l))}static createInt32Array(n,a,l){return Array.from({length:n}).map(h=>Int32Array.from({length:a}).fill(l))}static equals(n,a){if(!n||!a||!n.length||!a.length||n.length!==a.length)return!1;for(let l=0,u=n.length;l<u;l++)if(n[l]!==a[l])return!1;return!0}static hashCode(n){if(n===null)return 0;let a=1;for(const l of n)a=31*a+l;return a}static fillUint8Array(n,a){for(let l=0;l!==n.length;l++)n[l]=a}static copyOf(n,a){return n.slice(0,a)}static copyOfUint8Array(n,a){if(n.length<=a){const l=new Uint8Array(a);return l.set(n),l}return n.slice(0,a)}static copyOfRange(n,a,l){const u=l-a,h=new Int32Array(u);return H.arraycopy(n,a,h,0,u),h}static binarySearch(n,a,l){l===void 0&&(l=$.numberComparator);let u=0,h=n.length-1;for(;u<=h;){const g=h+u>>1,p=l(a,n[g]);if(p>0)u=g+1;else if(p<0)h=g-1;else return g}return-u-1}static numberComparator(n,a){return n-a}}class F{static numberOfTrailingZeros(n){let a;if(n===0)return 32;let l=31;return a=n<<16,a!==0&&(l-=16,n=a),a=n<<8,a!==0&&(l-=8,n=a),a=n<<4,a!==0&&(l-=4,n=a),a=n<<2,a!==0&&(l-=2,n=a),l-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let a=1;return n>>>16||(a+=16,n<<=16),n>>>24||(a+=8,n<<=8),n>>>28||(a+=4,n<<=4),n>>>30||(a+=2,n<<=2),a-=n>>>31,a}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,a){return Math.trunc(n/a)}static parseInt(n,a=void 0){return parseInt(n,a)}}F.MIN_VALUE_32_BITS=-2147483648,F.MAX_VALUE=Number.MAX_SAFE_INTEGER;class q{constructor(n,a){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,a==null?this.bits=q.makeArray(n):this.bits=a)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const a=q.makeArray(n);H.arraycopy(this.bits,0,a,0,this.bits.length),this.bits=a}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const a=this.size;if(n>=a)return a;const l=this.bits;let u=Math.floor(n/32),h=l[u];h&=~((1<<(n&31))-1);const g=l.length;for(;h===0;){if(++u===g)return a;h=l[u]}const p=u*32+F.numberOfTrailingZeros(h);return p>a?a:p}getNextUnset(n){const a=this.size;if(n>=a)return a;const l=this.bits;let u=Math.floor(n/32),h=~l[u];h&=~((1<<(n&31))-1);const g=l.length;for(;h===0;){if(++u===g)return a;h=~l[u]}const p=u*32+F.numberOfTrailingZeros(h);return p>a?a:p}setBulk(n,a){this.bits[Math.floor(n/32)]=a}setRange(n,a){if(a<n||n<0||a>this.size)throw new N;if(a===n)return;a--;const l=Math.floor(n/32),u=Math.floor(a/32),h=this.bits;for(let g=l;g<=u;g++){const p=g>l?0:n&31,C=(2<<(g<u?31:a&31))-(1<<p);h[g]|=C}}clear(){const n=this.bits.length,a=this.bits;for(let l=0;l<n;l++)a[l]=0}isRange(n,a,l){if(a<n||n<0||a>this.size)throw new N;if(a===n)return!0;a--;const u=Math.floor(n/32),h=Math.floor(a/32),g=this.bits;for(let p=u;p<=h;p++){const _=p>u?0:n&31,S=(2<<(p<h?31:a&31))-(1<<_)&4294967295;if((g[p]&S)!==(l?S:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,a){if(a<0||a>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+a);for(let l=a;l>0;l--)this.appendBit((n>>l-1&1)===1)}appendBitArray(n){const a=n.size;this.ensureCapacity(this.size+a);for(let l=0;l<a;l++)this.appendBit(n.get(l))}xor(n){if(this.size!==n.size)throw new N("Sizes don't match");const a=this.bits;for(let l=0,u=a.length;l<u;l++)a[l]^=n.bits[l]}toBytes(n,a,l,u){for(let h=0;h<u;h++){let g=0;for(let p=0;p<8;p++)this.get(n)&&(g|=1<<7-p),n++;a[l+h]=g}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),a=Math.floor((this.size-1)/32),l=a+1,u=this.bits;for(let h=0;h<l;h++){let g=u[h];g=g>>1&1431655765|(g&1431655765)<<1,g=g>>2&858993459|(g&858993459)<<2,g=g>>4&252645135|(g&252645135)<<4,g=g>>8&16711935|(g&16711935)<<8,g=g>>16&65535|(g&65535)<<16,n[a-h]=g}if(this.size!==l*32){const h=l*32-this.size;let g=n[0]>>>h;for(let p=1;p<l;p++){const _=n[p];g|=_<<32-h,n[p-1]=g,g=_>>>h}n[l-1]=g}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof q))return!1;const a=n;return this.size===a.size&&$.equals(this.bits,a.bits)}hashCode(){return 31*this.size+$.hashCode(this.bits)}toString(){let n="";for(let a=0,l=this.size;a<l;a++)(a&7)===0&&(n+=" "),n+=this.get(a)?"X":".";return n}clone(){return new q(this.size,this.bits.slice())}}var Z;(function(R){R[R.OTHER=0]="OTHER",R[R.PURE_BARCODE=1]="PURE_BARCODE",R[R.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",R[R.TRY_HARDER=3]="TRY_HARDER",R[R.CHARACTER_SET=4]="CHARACTER_SET",R[R.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",R[R.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",R[R.ASSUME_GS1=7]="ASSUME_GS1",R[R.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",R[R.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",R[R.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Z||(Z={}));var U=Z;class k extends w{static getFormatInstance(){return new k}}k.kind="FormatException";var Y;(function(R){R[R.Cp437=0]="Cp437",R[R.ISO8859_1=1]="ISO8859_1",R[R.ISO8859_2=2]="ISO8859_2",R[R.ISO8859_3=3]="ISO8859_3",R[R.ISO8859_4=4]="ISO8859_4",R[R.ISO8859_5=5]="ISO8859_5",R[R.ISO8859_6=6]="ISO8859_6",R[R.ISO8859_7=7]="ISO8859_7",R[R.ISO8859_8=8]="ISO8859_8",R[R.ISO8859_9=9]="ISO8859_9",R[R.ISO8859_10=10]="ISO8859_10",R[R.ISO8859_11=11]="ISO8859_11",R[R.ISO8859_13=12]="ISO8859_13",R[R.ISO8859_14=13]="ISO8859_14",R[R.ISO8859_15=14]="ISO8859_15",R[R.ISO8859_16=15]="ISO8859_16",R[R.SJIS=16]="SJIS",R[R.Cp1250=17]="Cp1250",R[R.Cp1251=18]="Cp1251",R[R.Cp1252=19]="Cp1252",R[R.Cp1256=20]="Cp1256",R[R.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",R[R.UTF8=22]="UTF8",R[R.ASCII=23]="ASCII",R[R.Big5=24]="Big5",R[R.GB18030=25]="GB18030",R[R.EUC_KR=26]="EUC_KR"})(Y||(Y={}));class Q{constructor(n,a,l,...u){this.valueIdentifier=n,this.name=l,typeof a=="number"?this.values=Int32Array.from([a]):this.values=a,this.otherEncodingNames=u,Q.VALUE_IDENTIFIER_TO_ECI.set(n,this),Q.NAME_TO_ECI.set(l,this);const h=this.values;for(let g=0,p=h.length;g!==p;g++){const _=h[g];Q.VALUES_TO_ECI.set(_,this)}for(const g of u)Q.NAME_TO_ECI.set(g,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new k("incorect value");const a=Q.VALUES_TO_ECI.get(n);if(a===void 0)throw new k("incorect value");return a}static getCharacterSetECIByName(n){const a=Q.NAME_TO_ECI.get(n);if(a===void 0)throw new k("incorect value");return a}equals(n){if(!(n instanceof Q))return!1;const a=n;return this.getName()===a.getName()}}Q.VALUE_IDENTIFIER_TO_ECI=new Map,Q.VALUES_TO_ECI=new Map,Q.NAME_TO_ECI=new Map,Q.Cp437=new Q(Y.Cp437,Int32Array.from([0,2]),"Cp437"),Q.ISO8859_1=new Q(Y.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Q.ISO8859_2=new Q(Y.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Q.ISO8859_3=new Q(Y.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Q.ISO8859_4=new Q(Y.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Q.ISO8859_5=new Q(Y.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Q.ISO8859_6=new Q(Y.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Q.ISO8859_7=new Q(Y.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Q.ISO8859_8=new Q(Y.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Q.ISO8859_9=new Q(Y.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Q.ISO8859_10=new Q(Y.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Q.ISO8859_11=new Q(Y.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Q.ISO8859_13=new Q(Y.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Q.ISO8859_14=new Q(Y.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Q.ISO8859_15=new Q(Y.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Q.ISO8859_16=new Q(Y.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Q.SJIS=new Q(Y.SJIS,20,"SJIS","Shift_JIS"),Q.Cp1250=new Q(Y.Cp1250,21,"Cp1250","windows-1250"),Q.Cp1251=new Q(Y.Cp1251,22,"Cp1251","windows-1251"),Q.Cp1252=new Q(Y.Cp1252,23,"Cp1252","windows-1252"),Q.Cp1256=new Q(Y.Cp1256,24,"Cp1256","windows-1256"),Q.UnicodeBigUnmarked=new Q(Y.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Q.UTF8=new Q(Y.UTF8,26,"UTF8","UTF-8"),Q.ASCII=new Q(Y.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Q.Big5=new Q(Y.Big5,28,"Big5"),Q.GB18030=new Q(Y.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Q.EUC_KR=new Q(Y.EUC_KR,30,"EUC_KR","EUC-KR");class Ee extends w{}Ee.kind="UnsupportedOperationException";class we{static decode(n,a){const l=this.encodingName(a);return this.customDecoder?this.customDecoder(n,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(n,l):new TextDecoder(l).decode(n)}static shouldDecodeOnFallback(n){return!we.isBrowser()&&n==="ISO-8859-1"}static encode(n,a){const l=this.encodingName(a);return this.customEncoder?this.customEncoder(n,l):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof Q?n:Q.getCharacterSetECIByName(n)}static decodeFallback(n,a){const l=this.encodingCharacterSet(a);if(we.isDecodeFallbackSupported(l)){let u="";for(let h=0,g=n.length;h<g;h++){let p=n[h].toString(16);p.length<2&&(p="0"+p),u+="%"+p}return decodeURIComponent(u)}if(l.equals(Q.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new Ee(`Encoding ${this.encodingName(a)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(Q.UTF8)||n.equals(Q.ISO8859_1)||n.equals(Q.ASCII)}static encodeFallback(n){const l=btoa(unescape(encodeURIComponent(n))).split(""),u=[];for(let h=0;h<l.length;h++)u.push(l[h].charCodeAt(0));return new Uint8Array(u)}}class ne{static castAsNonUtf8Char(n,a=null){const l=a?a.getName():this.ISO88591;return we.decode(new Uint8Array([n]),l)}static guessEncoding(n,a){if(a!=null&&a.get(U.CHARACTER_SET)!==void 0)return a.get(U.CHARACTER_SET).toString();const l=n.length;let u=!0,h=!0,g=!0,p=0,_=0,C=0,S=0,O=0,M=0,j=0,V=0,X=0,ie=0,ce=0;const Se=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let Ce=0;Ce<l&&(u||h||g);Ce++){const ve=n[Ce]&255;g&&(p>0?(ve&128)===0?g=!1:p--:(ve&128)!==0&&((ve&64)===0?g=!1:(p++,(ve&32)===0?_++:(p++,(ve&16)===0?C++:(p++,(ve&8)===0?S++:g=!1))))),u&&(ve>127&&ve<160?u=!1:ve>159&&(ve<192||ve===215||ve===247)&&ce++),h&&(O>0?ve<64||ve===127||ve>252?h=!1:O--:ve===128||ve===160||ve>239?h=!1:ve>160&&ve<224?(M++,V=0,j++,j>X&&(X=j)):ve>127?(O++,j=0,V++,V>ie&&(ie=V)):(j=0,V=0))}return g&&p>0&&(g=!1),h&&O>0&&(h=!1),g&&(Se||_+C+S>0)?ne.UTF8:h&&(ne.ASSUME_SHIFT_JIS||X>=3||ie>=3)?ne.SHIFT_JIS:u&&h?X===2&&M===2||ce*10>=l?ne.SHIFT_JIS:ne.ISO88591:u?ne.ISO88591:h?ne.SHIFT_JIS:g?ne.UTF8:ne.PLATFORM_DEFAULT_ENCODING}static format(n,...a){let l=-1;function u(g,p,_,C,S,O){if(g==="%%")return"%";if(a[++l]===void 0)return;g=C?parseInt(C.substr(1)):void 0;let M=S?parseInt(S.substr(1)):void 0,j;switch(O){case"s":j=a[l];break;case"c":j=a[l][0];break;case"f":j=parseFloat(a[l]).toFixed(g);break;case"p":j=parseFloat(a[l]).toPrecision(g);break;case"e":j=parseFloat(a[l]).toExponential(g);break;case"x":j=parseInt(a[l]).toString(M||16);break;case"d":j=parseFloat(parseInt(a[l],M||10).toPrecision(g)).toFixed(0);break}j=typeof j=="object"?JSON.stringify(j):(+j).toString(M);let V=parseInt(_),X=_&&_[0]+""=="0"?"0":" ";for(;j.length<V;)j=p!==void 0?j+X:X+j;return j}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(h,u)}static getBytes(n,a){return we.encode(n,a)}static getCharCode(n,a=0){return n.charCodeAt(a)}static getCharAt(n){return String.fromCharCode(n)}}ne.SHIFT_JIS=Q.SJIS.getName(),ne.GB2312="GB2312",ne.ISO88591=Q.ISO8859_1.getName(),ne.EUC_JP="EUC_JP",ne.UTF8=Q.UTF8.getName(),ne.PLATFORM_DEFAULT_ENCODING=ne.UTF8,ne.ASSUME_SHIFT_JIS=!1;class ge{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=ne.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,a,l){for(let u=a;a<a+l;u++)this.append(n[u]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,a){this.value=this.value.substr(0,n)+a+this.value.substr(n+1)}substring(n,a){return this.value.substring(n,a)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,a){this.value=this.value.substr(0,n)+a+this.value.substr(n+a.length)}}class Ie{constructor(n,a,l,u){if(this.width=n,this.height=a,this.rowSize=l,this.bits=u,a==null&&(a=n),this.height=a,n<1||a<1)throw new N("Both dimensions must be greater than 0");l==null&&(l=Math.floor((n+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const a=n.length,l=n[0].length,u=new Ie(l,a);for(let h=0;h<a;h++){const g=n[h];for(let p=0;p<l;p++)g[p]&&u.set(p,h)}return u}static parseFromString(n,a,l){if(n===null)throw new N("stringRepresentation cannot be null");const u=new Array(n.length);let h=0,g=0,p=-1,_=0,C=0;for(;C<n.length;)if(n.charAt(C)===`
`||n.charAt(C)==="\r"){if(h>g){if(p===-1)p=h-g;else if(h-g!==p)throw new N("row lengths do not match");g=h,_++}C++}else if(n.substring(C,C+a.length)===a)C+=a.length,u[h]=!0,h++;else if(n.substring(C,C+l.length)===l)C+=l.length,u[h]=!1,h++;else throw new N("illegal character encountered: "+n.substring(C));if(h>g){if(p===-1)p=h-g;else if(h-g!==p)throw new N("row lengths do not match");_++}const S=new Ie(p,_);for(let O=0;O<h;O++)u[O]&&S.set(Math.floor(O%p),Math.floor(O/p));return S}get(n,a){const l=a*this.rowSize+Math.floor(n/32);return(this.bits[l]>>>(n&31)&1)!==0}set(n,a){const l=a*this.rowSize+Math.floor(n/32);this.bits[l]|=1<<(n&31)&4294967295}unset(n,a){const l=a*this.rowSize+Math.floor(n/32);this.bits[l]&=~(1<<(n&31)&4294967295)}flip(n,a){const l=a*this.rowSize+Math.floor(n/32);this.bits[l]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new N("input matrix dimensions do not match");const a=new q(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let h=0,g=this.height;h<g;h++){const p=h*l,_=n.getRow(h,a).getBitArray();for(let C=0;C<l;C++)u[p+C]^=_[C]}}clear(){const n=this.bits,a=n.length;for(let l=0;l<a;l++)n[l]=0}setRegion(n,a,l,u){if(a<0||n<0)throw new N("Left and top must be nonnegative");if(u<1||l<1)throw new N("Height and width must be at least 1");const h=n+l,g=a+u;if(g>this.height||h>this.width)throw new N("The region must fit inside the matrix");const p=this.rowSize,_=this.bits;for(let C=a;C<g;C++){const S=C*p;for(let O=n;O<h;O++)_[S+Math.floor(O/32)]|=1<<(O&31)&4294967295}}getRow(n,a){a==null||a.getSize()<this.width?a=new q(this.width):a.clear();const l=this.rowSize,u=this.bits,h=n*l;for(let g=0;g<l;g++)a.setBulk(g*32,u[h+g]);return a}setRow(n,a){H.arraycopy(a.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),a=this.getHeight();let l=new q(n),u=new q(n);for(let h=0,g=Math.floor((a+1)/2);h<g;h++)l=this.getRow(h,l),u=this.getRow(a-1-h,u),l.reverse(),u.reverse(),this.setRow(h,u),this.setRow(a-1-h,l)}getEnclosingRectangle(){const n=this.width,a=this.height,l=this.rowSize,u=this.bits;let h=n,g=a,p=-1,_=-1;for(let C=0;C<a;C++)for(let S=0;S<l;S++){const O=u[C*l+S];if(O!==0){if(C<g&&(g=C),C>_&&(_=C),S*32<h){let M=0;for(;(O<<31-M&4294967295)===0;)M++;S*32+M<h&&(h=S*32+M)}if(S*32+31>p){let M=31;for(;!(O>>>M);)M--;S*32+M>p&&(p=S*32+M)}}}return p<h||_<g?null:Int32Array.from([h,g,p-h+1,_-g+1])}getTopLeftOnBit(){const n=this.rowSize,a=this.bits;let l=0;for(;l<a.length&&a[l]===0;)l++;if(l===a.length)return null;const u=l/n;let h=l%n*32;const g=a[l];let p=0;for(;(g<<31-p&4294967295)===0;)p++;return h+=p,Int32Array.from([h,u])}getBottomRightOnBit(){const n=this.rowSize,a=this.bits;let l=a.length-1;for(;l>=0&&a[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/n);let h=Math.floor(l%n)*32;const g=a[l];let p=31;for(;!(g>>>p);)p--;return h+=p,Int32Array.from([h,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof Ie))return!1;const a=n;return this.width===a.width&&this.height===a.height&&this.rowSize===a.rowSize&&$.equals(this.bits,a.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+$.hashCode(this.bits),n}toString(n="X ",a="  ",l=`
`){return this.buildToString(n,a,l)}buildToString(n,a,l){let u=new ge;for(let h=0,g=this.height;h<g;h++){for(let p=0,_=this.width;p<_;p++)u.append(this.get(p,h)?n:a);u.append(l)}return u.toString()}clone(){return new Ie(this.width,this.height,this.rowSize,this.bits.slice())}}class oe extends w{static getNotFoundInstance(){return new oe}}oe.kind="NotFoundException";class ee extends G{constructor(n){super(n),this.luminances=ee.EMPTY,this.buckets=new Int32Array(ee.LUMINANCE_BUCKETS)}getBlackRow(n,a){const l=this.getLuminanceSource(),u=l.getWidth();a==null||a.getSize()<u?a=new q(u):a.clear(),this.initArrays(u);const h=l.getRow(n,this.luminances),g=this.buckets;for(let _=0;_<u;_++)g[(h[_]&255)>>ee.LUMINANCE_SHIFT]++;const p=ee.estimateBlackPoint(g);if(u<3)for(let _=0;_<u;_++)(h[_]&255)<p&&a.set(_);else{let _=h[0]&255,C=h[1]&255;for(let S=1;S<u-1;S++){const O=h[S+1]&255;(C*4-_-O)/2<p&&a.set(S),_=C,C=O}}return a}getBlackMatrix(){const n=this.getLuminanceSource(),a=n.getWidth(),l=n.getHeight(),u=new Ie(a,l);this.initArrays(a);const h=this.buckets;for(let _=1;_<5;_++){const C=Math.floor(l*_/5),S=n.getRow(C,this.luminances),O=Math.floor(a*4/5);for(let M=Math.floor(a/5);M<O;M++){const j=S[M]&255;h[j>>ee.LUMINANCE_SHIFT]++}}const g=ee.estimateBlackPoint(h),p=n.getMatrix();for(let _=0;_<l;_++){const C=_*a;for(let S=0;S<a;S++)(p[C+S]&255)<g&&u.set(S,_)}return u}createBinarizer(n){return new ee(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const a=this.buckets;for(let l=0;l<ee.LUMINANCE_BUCKETS;l++)a[l]=0}static estimateBlackPoint(n){const a=n.length;let l=0,u=0,h=0;for(let S=0;S<a;S++)n[S]>h&&(u=S,h=n[S]),n[S]>l&&(l=n[S]);let g=0,p=0;for(let S=0;S<a;S++){const O=S-u,M=n[S]*O*O;M>p&&(g=S,p=M)}if(u>g){const S=u;u=g,g=S}if(g-u<=a/16)throw new oe;let _=g-1,C=-1;for(let S=g-1;S>u;S--){const O=S-u,M=O*O*(g-S)*(l-n[S]);M>C&&(_=S,C=M)}return _<<ee.LUMINANCE_SHIFT}}ee.LUMINANCE_BITS=5,ee.LUMINANCE_SHIFT=8-ee.LUMINANCE_BITS,ee.LUMINANCE_BUCKETS=1<<ee.LUMINANCE_BITS,ee.EMPTY=Uint8ClampedArray.from([0]);class me extends ee{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),a=n.getWidth(),l=n.getHeight();if(a>=me.MINIMUM_DIMENSION&&l>=me.MINIMUM_DIMENSION){const u=n.getMatrix();let h=a>>me.BLOCK_SIZE_POWER;(a&me.BLOCK_SIZE_MASK)!==0&&h++;let g=l>>me.BLOCK_SIZE_POWER;(l&me.BLOCK_SIZE_MASK)!==0&&g++;const p=me.calculateBlackPoints(u,h,g,a,l),_=new Ie(a,l);me.calculateThresholdForBlock(u,h,g,a,l,p,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new me(n)}static calculateThresholdForBlock(n,a,l,u,h,g,p){const _=h-me.BLOCK_SIZE,C=u-me.BLOCK_SIZE;for(let S=0;S<l;S++){let O=S<<me.BLOCK_SIZE_POWER;O>_&&(O=_);const M=me.cap(S,2,l-3);for(let j=0;j<a;j++){let V=j<<me.BLOCK_SIZE_POWER;V>C&&(V=C);const X=me.cap(j,2,a-3);let ie=0;for(let Se=-2;Se<=2;Se++){const Ce=g[M+Se];ie+=Ce[X-2]+Ce[X-1]+Ce[X]+Ce[X+1]+Ce[X+2]}const ce=ie/25;me.thresholdBlock(n,V,O,ce,u,p)}}}static cap(n,a,l){return n<a?a:n>l?l:n}static thresholdBlock(n,a,l,u,h,g){for(let p=0,_=l*h+a;p<me.BLOCK_SIZE;p++,_+=h)for(let C=0;C<me.BLOCK_SIZE;C++)(n[_+C]&255)<=u&&g.set(a+C,l+p)}static calculateBlackPoints(n,a,l,u,h){const g=h-me.BLOCK_SIZE,p=u-me.BLOCK_SIZE,_=new Array(l);for(let C=0;C<l;C++){_[C]=new Int32Array(a);let S=C<<me.BLOCK_SIZE_POWER;S>g&&(S=g);for(let O=0;O<a;O++){let M=O<<me.BLOCK_SIZE_POWER;M>p&&(M=p);let j=0,V=255,X=0;for(let ce=0,Se=S*u+M;ce<me.BLOCK_SIZE;ce++,Se+=u){for(let Ce=0;Ce<me.BLOCK_SIZE;Ce++){const ve=n[Se+Ce]&255;j+=ve,ve<V&&(V=ve),ve>X&&(X=ve)}if(X-V>me.MIN_DYNAMIC_RANGE)for(ce++,Se+=u;ce<me.BLOCK_SIZE;ce++,Se+=u)for(let Ce=0;Ce<me.BLOCK_SIZE;Ce++)j+=n[Se+Ce]&255}let ie=j>>me.BLOCK_SIZE_POWER*2;if(X-V<=me.MIN_DYNAMIC_RANGE&&(ie=V/2,C>0&&O>0)){const ce=(_[C-1][O]+2*_[C][O-1]+_[C-1][O-1])/4;V<ce&&(ie=ce)}_[C][O]=ie}}return _}}me.BLOCK_SIZE_POWER=3,me.BLOCK_SIZE=1<<me.BLOCK_SIZE_POWER,me.BLOCK_SIZE_MASK=me.BLOCK_SIZE-1,me.MINIMUM_DIMENSION=me.BLOCK_SIZE*5,me.MIN_DYNAMIC_RANGE=24;class Ge{constructor(n,a){this.width=n,this.height=a}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,a,l,u){throw new Ee("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Ee("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Ee("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let a=new ge;for(let l=0;l<this.height;l++){const u=this.getRow(l,n);for(let h=0;h<this.width;h++){const g=u[h]&255;let p;g<64?p="#":g<128?p="+":g<192?p=".":p=" ",a.append(p)}a.append(`
`)}return a.toString()}}class rt extends Ge{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,a){const l=this.delegate.getRow(n,a),u=this.getWidth();for(let h=0;h<u;h++)l[h]=255-(l[h]&255);return l}getMatrix(){const n=this.delegate.getMatrix(),a=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(a);for(let u=0;u<a;u++)l[u]=255-(n[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(n,a,l,u){return new rt(this.delegate.crop(n,a,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new rt(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new rt(this.delegate.rotateCounterClockwise45())}}class lt extends Ge{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=lt.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const a=n.getContext("2d").getImageData(0,0,n.width,n.height);return lt.toGrayscaleBuffer(a.data,n.width,n.height)}static toGrayscaleBuffer(n,a,l){const u=new Uint8ClampedArray(a*l);for(let h=0,g=0,p=n.length;h<p;h+=4,g++){let _;if(n[h+3]===0)_=255;else{const S=n[h],O=n[h+1],M=n[h+2];_=306*S+601*O+117*M+512>>10}u[g]=_}return u}getRow(n,a){if(n<0||n>=this.getHeight())throw new N("Requested row is outside the image: "+n);const l=this.getWidth(),u=n*l;return a===null?a=this.buffer.slice(u,u+l):(a.length<l&&(a=new Uint8ClampedArray(l)),a.set(this.buffer.slice(u,u+l))),a}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,a,l,u){return super.crop(n,a,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const a=this.getTempCanvasElement(),l=a.getContext("2d"),u=n*lt.DEGREE_TO_RADIANS,h=this.canvas.width,g=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(u))*h+Math.abs(Math.sin(u))*g),_=Math.ceil(Math.abs(Math.sin(u))*h+Math.abs(Math.cos(u))*g);return a.width=p,a.height=_,l.translate(p/2,_/2),l.rotate(u),l.drawImage(this.canvas,h/-2,g/-2),this.buffer=lt.makeBufferFromCanvasImageData(a),this}invert(){return new rt(this)}}lt.DEGREE_TO_RADIANS=Math.PI/180;class W{constructor(n,a,l){this.deviceId=n,this.label=a,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var fe=(globalThis||hf||self||window||void 0)&&(globalThis||hf||self||window||void 0).__awaiter||function(R,n,a,l){function u(h){return h instanceof a?h:new a(function(g){g(h)})}return new(a||(a=Promise))(function(h,g){function p(S){try{C(l.next(S))}catch(O){g(O)}}function _(S){try{C(l.throw(S))}catch(O){g(O)}}function C(S){S.done?h(S.value):u(S.value).then(p,_)}C((l=l.apply(R,n||[])).next())})};class Re{constructor(n,a=500,l){this.reader=n,this.timeBetweenScansMillis=a,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return fe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),a=[];for(const l of n){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const h=l.deviceId||l.id,g=l.label||`Video device ${a.length+1}`,p=l.groupId,_={deviceId:h,label:g,kind:u,groupId:p};a.push(_)}return a})}getVideoInputDevices(){return fe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(a=>new W(a.deviceId,a.label))})}findDeviceById(n){return fe(this,void 0,void 0,function*(){const a=yield this.listVideoInputDevices();return a?a.find(l=>l.deviceId===n):null})}decodeFromInputVideoDevice(n,a){return fe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,a)})}decodeOnceFromVideoDevice(n,a){return fe(this,void 0,void 0,function*(){this.reset();let l;n?l={deviceId:{exact:n}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,a)})}decodeOnceFromConstraints(n,a){return fe(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(l,a)})}decodeOnceFromStream(n,a){return fe(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(n,a);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(n,a,l){return fe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,a,l)})}decodeFromVideoDevice(n,a,l){return fe(this,void 0,void 0,function*(){let u;n?u={deviceId:{exact:n}}:u={facingMode:"environment"};const h={video:u};return yield this.decodeFromConstraints(h,a,l)})}decodeFromConstraints(n,a,l){return fe(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(u,a,l)})}decodeFromStream(n,a,l){return fe(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(n,a);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,a){return fe(this,void 0,void 0,function*(){const l=this.prepareVideoElement(a);return this.addVideoSource(l,n),this.videoElement=l,this.stream=n,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(n){return new Promise((a,l)=>this.playVideoOnLoad(n,()=>a()))}playVideoOnLoad(n,a){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",a),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return fe(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,a){const l=document.getElementById(n);if(!l)throw new T(`element with id '${n}' not found`);if(l.nodeName.toLowerCase()!==a.toLowerCase())throw new T(`element with id '${n}' must be an ${a} element`);return l}decodeFromImage(n,a){if(!n&&!a)throw new T("either imageElement with a src set or an url must be provided");return a&&!n?this.decodeFromImageUrl(a):this.decodeFromImageElement(n)}decodeFromVideo(n,a){if(!n&&!a)throw new T("Either an element with a src set or an URL must be provided");return a&&!n?this.decodeFromVideoUrl(a):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,a,l){if(n===void 0&&a===void 0)throw new T("Either an element with a src set or an URL must be provided");return a&&!n?this.decodeFromVideoUrlContinuously(a,l):this.decodeFromVideoElementContinuously(n,l)}decodeFromImageElement(n){if(!n)throw new T("An image element must be provided.");this.reset();const a=this.prepareImageElement(n);this.imageElement=a;let l;return this.isImageLoaded(a)?l=this.decodeOnce(a,!1,!0):l=this._decodeOnLoadImage(a),l}decodeFromVideoElement(n){const a=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(a)}decodeFromVideoElementContinuously(n,a){const l=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(l,a)}_decodeFromVideoElementSetup(n){if(!n)throw new T("A video element must be provided.");this.reset();const a=this.prepareVideoElement(n);return this.videoElement=a,a}decodeFromImageUrl(n){if(!n)throw new T("An URL must be provided.");this.reset();const a=this.prepareImageElement();this.imageElement=a;const l=this._decodeOnLoadImage(a);return a.src=n,l}decodeFromVideoUrl(n){if(!n)throw new T("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),l=this.decodeFromVideoElement(a);return a.src=n,l}decodeFromVideoUrlContinuously(n,a){if(!n)throw new T("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,a);return l.src=n,u}_decodeOnLoadImage(n){return new Promise((a,l)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(a,l),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return fe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,a){return fe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,a)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let a;return typeof n>"u"&&(a=document.createElement("img"),a.width=200,a.height=200),typeof n=="string"&&(a=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(a=n),a}prepareVideoElement(n){let a;return!n&&typeof document<"u"&&(a=document.createElement("video"),a.width=200,a.height=200),typeof n=="string"&&(a=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(a=n),a.setAttribute("autoplay","true"),a.setAttribute("muted","true"),a.setAttribute("playsinline","true"),a}decodeOnce(n,a=!0,l=!0){this._stopAsyncDecode=!1;const u=(h,g)=>{if(this._stopAsyncDecode){g(new oe("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(n);h(p)}catch(p){const _=a&&p instanceof oe,S=(p instanceof P||p instanceof k)&&l;if(_||S)return setTimeout(u,this._timeBetweenDecodingAttempts,h,g);g(p)}};return new Promise((h,g)=>u(h,g))}decodeContinuously(n,a){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(n);a(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){a(null,u);const h=u instanceof P||u instanceof k,g=u instanceof oe;(h||g)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(n){const a=this.createBinaryBitmap(n);return this.decodeBitmap(a)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,a,l){a||(a={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(n,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}drawImageOnCanvas(n,a,l=this.captureCanvasContext){a||(a={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(n,a.sx,a.sy,a.sWidth,a.sHeight,a.dx,a.dy,a.dWidth,a.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const a=this.getCaptureCanvas(n),l=new lt(a),u=new me(l);return new D(u)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const a=this.createCaptureCanvas(n);this.captureCanvas=a}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const a=document.createElement("canvas");let l,u;return typeof n<"u"&&(n instanceof HTMLVideoElement?(l=n.videoWidth,u=n.videoHeight):n instanceof HTMLImageElement&&(l=n.naturalWidth||n.width,u=n.naturalHeight||n.height)),a.style.width=l+"px",a.style.height=u+"px",a.width=l,a.height=u,a}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,a){try{n.srcObject=a}catch{n.src=URL.createObjectURL(a)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class De{constructor(n,a,l=a==null?0:8*a.length,u,h,g=H.currentTimeMillis()){this.text=n,this.rawBytes=a,this.numBits=l,this.resultPoints=u,this.format=h,this.timestamp=g,this.text=n,this.rawBytes=a,l==null?this.numBits=a==null?0:8*a.length:this.numBits=l,this.resultPoints=u,this.format=h,this.resultMetadata=null,g==null?this.timestamp=H.currentTimeMillis():this.timestamp=g}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,a){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,a)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const a=this.resultPoints;if(a===null)this.resultPoints=n;else if(n!==null&&n.length>0){const l=new Array(a.length+n.length);H.arraycopy(a,0,l,0,a.length),H.arraycopy(n,0,l,a.length,n.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Je;(function(R){R[R.AZTEC=0]="AZTEC",R[R.CODABAR=1]="CODABAR",R[R.CODE_39=2]="CODE_39",R[R.CODE_93=3]="CODE_93",R[R.CODE_128=4]="CODE_128",R[R.DATA_MATRIX=5]="DATA_MATRIX",R[R.EAN_8=6]="EAN_8",R[R.EAN_13=7]="EAN_13",R[R.ITF=8]="ITF",R[R.MAXICODE=9]="MAXICODE",R[R.PDF_417=10]="PDF_417",R[R.QR_CODE=11]="QR_CODE",R[R.RSS_14=12]="RSS_14",R[R.RSS_EXPANDED=13]="RSS_EXPANDED",R[R.UPC_A=14]="UPC_A",R[R.UPC_E=15]="UPC_E",R[R.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Je||(Je={}));var Ae=Je,nt;(function(R){R[R.OTHER=0]="OTHER",R[R.ORIENTATION=1]="ORIENTATION",R[R.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",R[R.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",R[R.ISSUE_NUMBER=4]="ISSUE_NUMBER",R[R.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",R[R.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",R[R.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",R[R.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",R[R.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",R[R.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(nt||(nt={}));var it=nt;class wt{constructor(n,a,l,u,h=-1,g=-1){this.rawBytes=n,this.text=a,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=h,this.structuredAppendParity=g,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class On{exp(n){return this.expTable[n]}log(n){if(n===0)throw new N;return this.logTable[n]}static addOrSubtract(n,a){return n^a}}class _n{constructor(n,a){if(a.length===0)throw new N;this.field=n;const l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),H.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const a=this.coefficients;let l;if(n===1){l=0;for(let g=0,p=a.length;g!==p;g++){const _=a[g];l=On.addOrSubtract(l,_)}return l}l=a[0];const u=a.length,h=this.field;for(let g=1;g<u;g++)l=On.addOrSubtract(h.multiply(n,l),a[g]);return l}addOrSubtract(n){if(!this.field.equals(n.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let a=this.coefficients,l=n.coefficients;if(a.length>l.length){const g=a;a=l,l=g}let u=new Int32Array(l.length);const h=l.length-a.length;H.arraycopy(l,0,u,0,h);for(let g=h;g<l.length;g++)u[g]=On.addOrSubtract(a[g-h],l[g]);return new _n(this.field,u)}multiply(n){if(!this.field.equals(n.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const a=this.coefficients,l=a.length,u=n.coefficients,h=u.length,g=new Int32Array(l+h-1),p=this.field;for(let _=0;_<l;_++){const C=a[_];for(let S=0;S<h;S++)g[_+S]=On.addOrSubtract(g[_+S],p.multiply(C,u[S]))}return new _n(p,g)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const a=this.coefficients.length,l=this.field,u=new Int32Array(a),h=this.coefficients;for(let g=0;g<a;g++)u[g]=l.multiply(h[g],n);return new _n(l,u)}multiplyByMonomial(n,a){if(n<0)throw new N;if(a===0)return this.field.getZero();const l=this.coefficients,u=l.length,h=new Int32Array(u+n),g=this.field;for(let p=0;p<u;p++)h[p]=g.multiply(l[p],a);return new _n(g,h)}divide(n){if(!this.field.equals(n.field))throw new N("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new N("Divide by 0");const a=this.field;let l=a.getZero(),u=this;const h=n.getCoefficient(n.getDegree()),g=a.inverse(h);for(;u.getDegree()>=n.getDegree()&&!u.isZero();){const p=u.getDegree()-n.getDegree(),_=a.multiply(u.getCoefficient(u.getDegree()),g),C=n.multiplyByMonomial(p,_),S=a.buildMonomial(p,_);l=l.addOrSubtract(S),u=u.addOrSubtract(C)}return[l,u]}toString(){let n="";for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);if(l!==0){if(l<0?(n+=" - ",l=-l):n.length>0&&(n+=" + "),a===0||l!==1){const u=this.field.log(l);u===0?n+="1":u===1?n+="a":(n+="a^",n+=u)}a!==0&&(a===1?n+="x":(n+="x^",n+=a))}}return n}}class ui extends w{}ui.kind="ArithmeticException";class pe extends On{constructor(n,a,l){super(),this.primitive=n,this.size=a,this.generatorBase=l;const u=new Int32Array(a);let h=1;for(let p=0;p<a;p++)u[p]=h,h*=2,h>=a&&(h^=n,h&=a-1);this.expTable=u;const g=new Int32Array(a);for(let p=0;p<a-1;p++)g[u[p]]=p;this.logTable=g,this.zero=new _n(this,Int32Array.from([0])),this.one=new _n(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,a){if(n<0)throw new N;if(a===0)return this.zero;const l=new Int32Array(n+1);return l[0]=a,new _n(this,l)}inverse(n){if(n===0)throw new ui;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,a){return n===0||a===0?0:this.expTable[(this.logTable[n]+this.logTable[a])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+F.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}pe.AZTEC_DATA_12=new pe(4201,4096,1),pe.AZTEC_DATA_10=new pe(1033,1024,1),pe.AZTEC_DATA_6=new pe(67,64,1),pe.AZTEC_PARAM=new pe(19,16,1),pe.QR_CODE_FIELD_256=new pe(285,256,0),pe.DATA_MATRIX_FIELD_256=new pe(301,256,1),pe.AZTEC_DATA_8=pe.DATA_MATRIX_FIELD_256,pe.MAXICODE_FIELD_64=pe.AZTEC_DATA_6;class Ne extends w{}Ne.kind="ReedSolomonException";class Le extends w{}Le.kind="IllegalStateException";class Ye{constructor(n){this.field=n}decode(n,a){const l=this.field,u=new _n(l,n),h=new Int32Array(a);let g=!0;for(let j=0;j<a;j++){const V=u.evaluateAt(l.exp(j+l.getGeneratorBase()));h[h.length-1-j]=V,V!==0&&(g=!1)}if(g)return;const p=new _n(l,h),_=this.runEuclideanAlgorithm(l.buildMonomial(a,1),p,a),C=_[0],S=_[1],O=this.findErrorLocations(C),M=this.findErrorMagnitudes(S,O);for(let j=0;j<O.length;j++){const V=n.length-1-l.log(O[j]);if(V<0)throw new Ne("Bad error location");n[V]=pe.addOrSubtract(n[V],M[j])}}runEuclideanAlgorithm(n,a,l){if(n.getDegree()<a.getDegree()){const j=n;n=a,a=j}const u=this.field;let h=n,g=a,p=u.getZero(),_=u.getOne();for(;g.getDegree()>=(l/2|0);){let j=h,V=p;if(h=g,p=_,h.isZero())throw new Ne("r_{i-1} was zero");g=j;let X=u.getZero();const ie=h.getCoefficient(h.getDegree()),ce=u.inverse(ie);for(;g.getDegree()>=h.getDegree()&&!g.isZero();){const Se=g.getDegree()-h.getDegree(),Ce=u.multiply(g.getCoefficient(g.getDegree()),ce);X=X.addOrSubtract(u.buildMonomial(Se,Ce)),g=g.addOrSubtract(h.multiplyByMonomial(Se,Ce))}if(_=X.multiply(p).addOrSubtract(V),g.getDegree()>=h.getDegree())throw new Le("Division algorithm failed to reduce polynomial?")}const C=_.getCoefficient(0);if(C===0)throw new Ne("sigmaTilde(0) was zero");const S=u.inverse(C),O=_.multiplyScalar(S),M=g.multiplyScalar(S);return[O,M]}findErrorLocations(n){const a=n.getDegree();if(a===1)return Int32Array.from([n.getCoefficient(1)]);const l=new Int32Array(a);let u=0;const h=this.field;for(let g=1;g<h.getSize()&&u<a;g++)n.evaluateAt(g)===0&&(l[u]=h.inverse(g),u++);if(u!==a)throw new Ne("Error locator degree does not match number of roots");return l}findErrorMagnitudes(n,a){const l=a.length,u=new Int32Array(l),h=this.field;for(let g=0;g<l;g++){const p=h.inverse(a[g]);let _=1;for(let C=0;C<l;C++)if(g!==C){const S=h.multiply(a[C],p),O=(S&1)===0?S|1:S&-2;_=h.multiply(_,O)}u[g]=h.multiply(n.evaluateAt(p),h.inverse(_)),h.getGeneratorBase()!==0&&(u[g]=h.multiply(u[g],p))}return u}}var Fe;(function(R){R[R.UPPER=0]="UPPER",R[R.LOWER=1]="LOWER",R[R.MIXED=2]="MIXED",R[R.DIGIT=3]="DIGIT",R[R.PUNCT=4]="PUNCT",R[R.BINARY=5]="BINARY"})(Fe||(Fe={}));class Me{decode(n){this.ddata=n;let a=n.getBits(),l=this.extractBits(a),u=this.correctBits(l),h=Me.convertBoolArrayToByteArray(u),g=Me.getEncodedData(u),p=new wt(h,g,null,null);return p.setNumBits(u.length),p}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let a=n.length,l=Fe.UPPER,u=Fe.UPPER,h="",g=0;for(;g<a;)if(u===Fe.BINARY){if(a-g<5)break;let p=Me.readCode(n,g,5);if(g+=5,p===0){if(a-g<11)break;p=Me.readCode(n,g,11)+31,g+=11}for(let _=0;_<p;_++){if(a-g<8){g=a;break}const C=Me.readCode(n,g,8);h+=ne.castAsNonUtf8Char(C),g+=8}u=l}else{let p=u===Fe.DIGIT?4:5;if(a-g<p)break;let _=Me.readCode(n,g,p);g+=p;let C=Me.getCharacter(u,_);C.startsWith("CTRL_")?(l=u,u=Me.getTable(C.charAt(5)),C.charAt(6)==="L"&&(l=u)):(h+=C,u=l)}return h}static getTable(n){switch(n){case"L":return Fe.LOWER;case"P":return Fe.PUNCT;case"M":return Fe.MIXED;case"D":return Fe.DIGIT;case"B":return Fe.BINARY;case"U":default:return Fe.UPPER}}static getCharacter(n,a){switch(n){case Fe.UPPER:return Me.UPPER_TABLE[a];case Fe.LOWER:return Me.LOWER_TABLE[a];case Fe.MIXED:return Me.MIXED_TABLE[a];case Fe.PUNCT:return Me.PUNCT_TABLE[a];case Fe.DIGIT:return Me.DIGIT_TABLE[a];default:throw new Le("Bad table")}}correctBits(n){let a,l;this.ddata.getNbLayers()<=2?(l=6,a=pe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,a=pe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,a=pe.AZTEC_DATA_10):(l=12,a=pe.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),h=n.length/l;if(h<u)throw new k;let g=n.length%l,p=new Int32Array(h);for(let M=0;M<h;M++,g+=l)p[M]=Me.readCode(n,g,l);try{new Ye(a).decode(p,h-u)}catch(M){throw new k(M)}let _=(1<<l)-1,C=0;for(let M=0;M<u;M++){let j=p[M];if(j===0||j===_)throw new k;(j===1||j===_-1)&&C++}let S=new Array(u*l-C),O=0;for(let M=0;M<u;M++){let j=p[M];if(j===1||j===_-1)S.fill(j>1,O,O+l-1),O+=l-1;else for(let V=l-1;V>=0;--V)S[O++]=(j&1<<V)!==0}return S}extractBits(n){let a=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(a?11:14)+l*4,h=new Int32Array(u),g=new Array(this.totalBitsInLayer(l,a));if(a)for(let p=0;p<h.length;p++)h[p]=p;else{let p=u+1+2*F.truncDivision(F.truncDivision(u,2)-1,15),_=u/2,C=F.truncDivision(p,2);for(let S=0;S<_;S++){let O=S+F.truncDivision(S,15);h[_-S-1]=C-O-1,h[_+S]=C+O+1}}for(let p=0,_=0;p<l;p++){let C=(l-p)*4+(a?9:12),S=p*2,O=u-1-S;for(let M=0;M<C;M++){let j=M*2;for(let V=0;V<2;V++)g[_+j+V]=n.get(h[S+V],h[S+M]),g[_+2*C+j+V]=n.get(h[S+M],h[O-V]),g[_+4*C+j+V]=n.get(h[O-V],h[O-M]),g[_+6*C+j+V]=n.get(h[O-M],h[S+V])}_+=C*8}return g}static readCode(n,a,l){let u=0;for(let h=a;h<a+l;h++)u<<=1,n[h]&&(u|=1);return u}static readByte(n,a){let l=n.length-a;return l>=8?Me.readCode(n,a,8):Me.readCode(n,a,l)<<8-l}static convertBoolArrayToByteArray(n){let a=new Uint8Array((n.length+7)/8);for(let l=0;l<a.length;l++)a[l]=Me.readByte(n,8*l);return a}totalBitsInLayer(n,a){return((a?88:112)+16*n)*n}}Me.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Me.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Me.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Me.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Me.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ke{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,a,l,u){const h=n-l,g=a-u;return Math.sqrt(h*h+g*g)}static sum(n){let a=0;for(let l=0,u=n.length;l!==u;l++){const h=n[l];a+=h}return a}}class Ht{static floatToIntBits(n){return n}}Ht.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Be{constructor(n,a){this.x=n,this.y=a}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof Be){const a=n;return this.x===a.x&&this.y===a.y}return!1}hashCode(){return 31*Ht.floatToIntBits(this.x)+Ht.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const a=this.distance(n[0],n[1]),l=this.distance(n[1],n[2]),u=this.distance(n[0],n[2]);let h,g,p;if(l>=a&&l>=u?(g=n[0],h=n[1],p=n[2]):u>=l&&u>=a?(g=n[1],h=n[0],p=n[2]):(g=n[2],h=n[0],p=n[1]),this.crossProductZ(h,g,p)<0){const _=h;h=p,p=_}n[0]=h,n[1]=g,n[2]=p}static distance(n,a){return ke.distance(n.x,n.y,a.x,a.y)}static crossProductZ(n,a,l){const u=a.x,h=a.y;return(l.x-u)*(n.y-h)-(l.y-h)*(n.x-u)}}class zi{constructor(n,a){this.bits=n,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class fi extends zi{constructor(n,a,l,u,h){super(n,a),this.compact=l,this.nbDatablocks=u,this.nbLayers=h}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Wt{constructor(n,a,l,u){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),a==null&&(a=Wt.INIT_SIZE),l==null&&(l=n.getWidth()/2|0),u==null&&(u=n.getHeight()/2|0);const h=a/2|0;if(this.leftInit=l-h,this.rightInit=l+h,this.upInit=u-h,this.downInit=u+h,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new oe}detect(){let n=this.leftInit,a=this.rightInit,l=this.upInit,u=this.downInit,h=!1,g=!0,p=!1,_=!1,C=!1,S=!1,O=!1;const M=this.width,j=this.height;for(;g;){g=!1;let V=!0;for(;(V||!_)&&a<M;)V=this.containsBlackPoint(l,u,a,!1),V?(a++,g=!0,_=!0):_||a++;if(a>=M){h=!0;break}let X=!0;for(;(X||!C)&&u<j;)X=this.containsBlackPoint(n,a,u,!0),X?(u++,g=!0,C=!0):C||u++;if(u>=j){h=!0;break}let ie=!0;for(;(ie||!S)&&n>=0;)ie=this.containsBlackPoint(l,u,n,!1),ie?(n--,g=!0,S=!0):S||n--;if(n<0){h=!0;break}let ce=!0;for(;(ce||!O)&&l>=0;)ce=this.containsBlackPoint(n,a,l,!0),ce?(l--,g=!0,O=!0):O||l--;if(l<0){h=!0;break}g&&(p=!0)}if(!h&&p){const V=a-n;let X=null;for(let Ce=1;X===null&&Ce<V;Ce++)X=this.getBlackPointOnSegment(n,u-Ce,n+Ce,u);if(X==null)throw new oe;let ie=null;for(let Ce=1;ie===null&&Ce<V;Ce++)ie=this.getBlackPointOnSegment(n,l+Ce,n+Ce,l);if(ie==null)throw new oe;let ce=null;for(let Ce=1;ce===null&&Ce<V;Ce++)ce=this.getBlackPointOnSegment(a,l+Ce,a-Ce,l);if(ce==null)throw new oe;let Se=null;for(let Ce=1;Se===null&&Ce<V;Ce++)Se=this.getBlackPointOnSegment(a,u-Ce,a-Ce,u);if(Se==null)throw new oe;return this.centerEdges(Se,X,ce,ie)}else throw new oe}getBlackPointOnSegment(n,a,l,u){const h=ke.round(ke.distance(n,a,l,u)),g=(l-n)/h,p=(u-a)/h,_=this.image;for(let C=0;C<h;C++){const S=ke.round(n+C*g),O=ke.round(a+C*p);if(_.get(S,O))return new Be(S,O)}return null}centerEdges(n,a,l,u){const h=n.getX(),g=n.getY(),p=a.getX(),_=a.getY(),C=l.getX(),S=l.getY(),O=u.getX(),M=u.getY(),j=Wt.CORR;return h<this.width/2?[new Be(O-j,M+j),new Be(p+j,_+j),new Be(C-j,S-j),new Be(h+j,g-j)]:[new Be(O+j,M+j),new Be(p+j,_-j),new Be(C-j,S+j),new Be(h-j,g-j)]}containsBlackPoint(n,a,l,u){const h=this.image;if(u){for(let g=n;g<=a;g++)if(h.get(g,l))return!0}else for(let g=n;g<=a;g++)if(h.get(l,g))return!0;return!1}}Wt.INIT_SIZE=10,Wt.CORR=1;class pa{static checkAndNudgePoints(n,a){const l=n.getWidth(),u=n.getHeight();let h=!0;for(let g=0;g<a.length&&h;g+=2){const p=Math.floor(a[g]),_=Math.floor(a[g+1]);if(p<-1||p>l||_<-1||_>u)throw new oe;h=!1,p===-1?(a[g]=0,h=!0):p===l&&(a[g]=l-1,h=!0),_===-1?(a[g+1]=0,h=!0):_===u&&(a[g+1]=u-1,h=!0)}h=!0;for(let g=a.length-2;g>=0&&h;g-=2){const p=Math.floor(a[g]),_=Math.floor(a[g+1]);if(p<-1||p>l||_<-1||_>u)throw new oe;h=!1,p===-1?(a[g]=0,h=!0):p===l&&(a[g]=l-1,h=!0),_===-1?(a[g+1]=0,h=!0):_===u&&(a[g+1]=u-1,h=!0)}}}class hi{constructor(n,a,l,u,h,g,p,_,C){this.a11=n,this.a21=a,this.a31=l,this.a12=u,this.a22=h,this.a32=g,this.a13=p,this.a23=_,this.a33=C}static quadrilateralToQuadrilateral(n,a,l,u,h,g,p,_,C,S,O,M,j,V,X,ie){const ce=hi.quadrilateralToSquare(n,a,l,u,h,g,p,_);return hi.squareToQuadrilateral(C,S,O,M,j,V,X,ie).times(ce)}transformPoints(n){const a=n.length,l=this.a11,u=this.a12,h=this.a13,g=this.a21,p=this.a22,_=this.a23,C=this.a31,S=this.a32,O=this.a33;for(let M=0;M<a;M+=2){const j=n[M],V=n[M+1],X=h*j+_*V+O;n[M]=(l*j+g*V+C)/X,n[M+1]=(u*j+p*V+S)/X}}transformPointsWithValues(n,a){const l=this.a11,u=this.a12,h=this.a13,g=this.a21,p=this.a22,_=this.a23,C=this.a31,S=this.a32,O=this.a33,M=n.length;for(let j=0;j<M;j++){const V=n[j],X=a[j],ie=h*V+_*X+O;n[j]=(l*V+g*X+C)/ie,a[j]=(u*V+p*X+S)/ie}}static squareToQuadrilateral(n,a,l,u,h,g,p,_){const C=n-l+h-p,S=a-u+g-_;if(C===0&&S===0)return new hi(l-n,h-l,n,u-a,g-u,a,0,0,1);{const O=l-h,M=p-h,j=u-g,V=_-g,X=O*V-M*j,ie=(C*V-M*S)/X,ce=(O*S-C*j)/X;return new hi(l-n+ie*l,p-n+ce*p,n,u-a+ie*u,_-a+ce*_,a,ie,ce,1)}}static quadrilateralToSquare(n,a,l,u,h,g,p,_){return hi.squareToQuadrilateral(n,a,l,u,h,g,p,_).buildAdjoint()}buildAdjoint(){return new hi(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new hi(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class fl extends pa{sampleGrid(n,a,l,u,h,g,p,_,C,S,O,M,j,V,X,ie,ce,Se,Ce){const ve=hi.quadrilateralToQuadrilateral(u,h,g,p,_,C,S,O,M,j,V,X,ie,ce,Se,Ce);return this.sampleGridWithTransform(n,a,l,ve)}sampleGridWithTransform(n,a,l,u){if(a<=0||l<=0)throw new oe;const h=new Ie(a,l),g=new Float32Array(2*a);for(let p=0;p<l;p++){const _=g.length,C=p+.5;for(let S=0;S<_;S+=2)g[S]=S/2+.5,g[S+1]=C;u.transformPoints(g),pa.checkAndNudgePoints(n,g);try{for(let S=0;S<_;S+=2)n.get(Math.floor(g[S]),Math.floor(g[S+1]))&&h.set(S/2,p)}catch{throw new oe}}return h}}class Si{static setGridSampler(n){Si.gridSampler=n}static getInstance(){return Si.gridSampler}}Si.gridSampler=new fl;class qn{constructor(n,a){this.x=n,this.y=a}toResultPoint(){return new Be(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class hl{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let a=this.getMatrixCenter(),l=this.getBullsEyeCorners(a);if(n){let g=l[0];l[0]=l[2],l[2]=g}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),h=this.getMatrixCornerPoints(l);return new fi(u,h,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new oe;let a=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(n[0],n[1],a),this.sampleLine(n[1],n[2],a),this.sampleLine(n[2],n[3],a),this.sampleLine(n[3],n[0],a)]);this.shift=this.getRotation(l,a);let u=0;for(let g=0;g<4;g++){let p=l[(this.shift+g)%4];this.compact?(u<<=7,u+=p>>1&127):(u<<=10,u+=(p>>2&992)+(p>>1&31))}let h=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(h>>6)+1,this.nbDataBlocks=(h&63)+1):(this.nbLayers=(h>>11)+1,this.nbDataBlocks=(h&2047)+1)}getRotation(n,a){let l=0;n.forEach((u,h,g)=>{let p=(u>>a-2<<1)+(u&1);l=(l<<3)+p}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(F.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new oe}getCorrectedParameterData(n,a){let l,u;a?(l=7,u=2):(l=10,u=4);let h=l-u,g=new Int32Array(l);for(let _=l-1;_>=0;--_)g[_]=n&15,n>>=4;try{new Ye(pe.AZTEC_PARAM).decode(g,h)}catch{throw new oe}let p=0;for(let _=0;_<u;_++)p=(p<<4)+g[_];return p}getBullsEyeCorners(n){let a=n,l=n,u=n,h=n,g=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let O=this.getFirstDifferent(a,g,1,-1),M=this.getFirstDifferent(l,g,1,1),j=this.getFirstDifferent(u,g,-1,1),V=this.getFirstDifferent(h,g,-1,-1);if(this.nbCenterLayers>2){let X=this.distancePoint(V,O)*this.nbCenterLayers/(this.distancePoint(h,a)*(this.nbCenterLayers+2));if(X<.75||X>1.25||!this.isWhiteOrBlackRectangle(O,M,j,V))break}a=O,l=M,u=j,h=V,g=!g}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new oe;this.compact=this.nbCenterLayers===5;let p=new Be(a.getX()+.5,a.getY()-.5),_=new Be(l.getX()+.5,l.getY()+.5),C=new Be(u.getX()-.5,u.getY()+.5),S=new Be(h.getX()-.5,h.getY()-.5);return this.expandSquare([p,_,C,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,a,l,u;try{let p=new Wt(this.image).detect();n=p[0],a=p[1],l=p[2],u=p[3]}catch{let _=this.image.getWidth()/2,C=this.image.getHeight()/2;n=this.getFirstDifferent(new qn(_+7,C-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new qn(_+7,C+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new qn(_-7,C+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new qn(_-7,C-7),!1,-1,-1).toResultPoint()}let h=ke.round((n.getX()+u.getX()+a.getX()+l.getX())/4),g=ke.round((n.getY()+u.getY()+a.getY()+l.getY())/4);try{let p=new Wt(this.image,15,h,g).detect();n=p[0],a=p[1],l=p[2],u=p[3]}catch{n=this.getFirstDifferent(new qn(h+7,g-7),!1,1,-1).toResultPoint(),a=this.getFirstDifferent(new qn(h+7,g+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new qn(h-7,g+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new qn(h-7,g-7),!1,-1,-1).toResultPoint()}return h=ke.round((n.getX()+u.getX()+a.getX()+l.getX())/4),g=ke.round((n.getY()+u.getY()+a.getY()+l.getY())/4),new qn(h,g)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,a,l,u,h){let g=Si.getInstance(),p=this.getDimension(),_=p/2-this.nbCenterLayers,C=p/2+this.nbCenterLayers;return g.sampleGrid(n,p,p,_,_,C,_,C,C,_,C,a.getX(),a.getY(),l.getX(),l.getY(),u.getX(),u.getY(),h.getX(),h.getY())}sampleLine(n,a,l){let u=0,h=this.distanceResultPoint(n,a),g=h/l,p=n.getX(),_=n.getY(),C=g*(a.getX()-n.getX())/h,S=g*(a.getY()-n.getY())/h;for(let O=0;O<l;O++)this.image.get(ke.round(p+O*C),ke.round(_+O*S))&&(u|=1<<l-O-1);return u}isWhiteOrBlackRectangle(n,a,l,u){let h=3;n=new qn(n.getX()-h,n.getY()+h),a=new qn(a.getX()-h,a.getY()-h),l=new qn(l.getX()+h,l.getY()-h),u=new qn(u.getX()+h,u.getY()+h);let g=this.getColor(u,n);if(g===0)return!1;let p=this.getColor(n,a);return p!==g||(p=this.getColor(a,l),p!==g)?!1:(p=this.getColor(l,u),p===g)}getColor(n,a){let l=this.distancePoint(n,a),u=(a.getX()-n.getX())/l,h=(a.getY()-n.getY())/l,g=0,p=n.getX(),_=n.getY(),C=this.image.get(n.getX(),n.getY()),S=Math.ceil(l);for(let M=0;M<S;M++)p+=u,_+=h,this.image.get(ke.round(p),ke.round(_))!==C&&g++;let O=g/l;return O>.1&&O<.9?0:O<=.1===C?1:-1}getFirstDifferent(n,a,l,u){let h=n.getX()+l,g=n.getY()+u;for(;this.isValid(h,g)&&this.image.get(h,g)===a;)h+=l,g+=u;for(h-=l,g-=u;this.isValid(h,g)&&this.image.get(h,g)===a;)h+=l;for(h-=l;this.isValid(h,g)&&this.image.get(h,g)===a;)g+=u;return g-=u,new qn(h,g)}expandSquare(n,a,l){let u=l/(2*a),h=n[0].getX()-n[2].getX(),g=n[0].getY()-n[2].getY(),p=(n[0].getX()+n[2].getX())/2,_=(n[0].getY()+n[2].getY())/2,C=new Be(p+u*h,_+u*g),S=new Be(p-u*h,_-u*g);h=n[1].getX()-n[3].getX(),g=n[1].getY()-n[3].getY(),p=(n[1].getX()+n[3].getX())/2,_=(n[1].getY()+n[3].getY())/2;let O=new Be(p+u*h,_+u*g),M=new Be(p-u*h,_-u*g);return[C,O,S,M]}isValid(n,a){return n>=0&&n<this.image.getWidth()&&a>0&&a<this.image.getHeight()}isValidPoint(n){let a=ke.round(n.getX()),l=ke.round(n.getY());return this.isValid(a,l)}distancePoint(n,a){return ke.distance(n.getX(),n.getY(),a.getX(),a.getY())}distanceResultPoint(n,a){return ke.distance(n.getX(),n.getY(),a.getX(),a.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(F.truncDivision(this.nbLayers-4,8)+1)+15}}class so{decode(n,a=null){let l=null,u=new hl(n.getBlackMatrix()),h=null,g=null;try{let S=u.detectMirror(!1);h=S.getPoints(),this.reportFoundResultPoints(a,h),g=new Me().decode(S)}catch(S){l=S}if(g==null)try{let S=u.detectMirror(!0);h=S.getPoints(),this.reportFoundResultPoints(a,h),g=new Me().decode(S)}catch(S){throw l??S}let p=new De(g.getText(),g.getRawBytes(),g.getNumBits(),h,Ae.AZTEC,H.currentTimeMillis()),_=g.getByteSegments();_!=null&&p.putMetadata(it.BYTE_SEGMENTS,_);let C=g.getECLevel();return C!=null&&p.putMetadata(it.ERROR_CORRECTION_LEVEL,C),p}reportFoundResultPoints(n,a){if(n!=null){let l=n.get(U.NEED_RESULT_POINT_CALLBACK);l!=null&&a.forEach((u,h,g)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class ch extends Re{constructor(n=500){super(new so,n)}}class en{decode(n,a){try{return this.doDecode(n,a)}catch{if(a&&a.get(U.TRY_HARDER)===!0&&n.isRotateSupported()){const h=n.rotateCounterClockwise(),g=this.doDecode(h,a),p=g.getResultMetadata();let _=270;p!==null&&p.get(it.ORIENTATION)===!0&&(_=_+p.get(it.ORIENTATION)%360),g.putMetadata(it.ORIENTATION,_);const C=g.getResultPoints();if(C!==null){const S=h.getHeight();for(let O=0;O<C.length;O++)C[O]=new Be(S-C[O].getY()-1,C[O].getX())}return g}else throw new oe}}reset(){}doDecode(n,a){const l=n.getWidth(),u=n.getHeight();let h=new q(l);const g=a&&a.get(U.TRY_HARDER)===!0,p=Math.max(1,u>>(g?8:5));let _;g?_=u:_=15;const C=Math.trunc(u/2);for(let S=0;S<_;S++){const O=Math.trunc((S+1)/2),M=(S&1)===0,j=C+p*(M?O:-O);if(j<0||j>=u)break;try{h=n.getBlackRow(j,h)}catch{continue}for(let V=0;V<2;V++){if(V===1&&(h.reverse(),a&&a.get(U.NEED_RESULT_POINT_CALLBACK)===!0)){const X=new Map;a.forEach((ie,ce)=>X.set(ce,ie)),X.delete(U.NEED_RESULT_POINT_CALLBACK),a=X}try{const X=this.decodeRow(j,h,a);if(V===1){X.putMetadata(it.ORIENTATION,180);const ie=X.getResultPoints();ie!==null&&(ie[0]=new Be(l-ie[0].getX()-1,ie[0].getY()),ie[1]=new Be(l-ie[1].getX()-1,ie[1].getY()))}return X}catch{}}}throw new oe}static recordPattern(n,a,l){const u=l.length;for(let C=0;C<u;C++)l[C]=0;const h=n.getSize();if(a>=h)throw new oe;let g=!n.get(a),p=0,_=a;for(;_<h;){if(n.get(_)!==g)l[p]++;else{if(++p===u)break;l[p]=1,g=!g}_++}if(!(p===u||p===u-1&&_===h))throw new oe}static recordPatternInReverse(n,a,l){let u=l.length,h=n.get(a);for(;a>0&&u>=0;)n.get(--a)!==h&&(u--,h=!h);if(u>=0)throw new oe;en.recordPattern(n,a+1,l)}static patternMatchVariance(n,a,l){const u=n.length;let h=0,g=0;for(let C=0;C<u;C++)h+=n[C],g+=a[C];if(h<g)return Number.POSITIVE_INFINITY;const p=h/g;l*=p;let _=0;for(let C=0;C<u;C++){const S=n[C],O=a[C]*p,M=S>O?S-O:O-S;if(M>l)return Number.POSITIVE_INFINITY;_+=M}return _/h}}class Te extends en{static findStartPattern(n){const a=n.getSize(),l=n.getNextSet(0);let u=0,h=Int32Array.from([0,0,0,0,0,0]),g=l,p=!1;const _=6;for(let C=l;C<a;C++)if(n.get(C)!==p)h[u]++;else{if(u===_-1){let S=Te.MAX_AVG_VARIANCE,O=-1;for(let M=Te.CODE_START_A;M<=Te.CODE_START_C;M++){const j=en.patternMatchVariance(h,Te.CODE_PATTERNS[M],Te.MAX_INDIVIDUAL_VARIANCE);j<S&&(S=j,O=M)}if(O>=0&&n.isRange(Math.max(0,g-(C-g)/2),g,!1))return Int32Array.from([g,C,O]);g+=h[0]+h[1],h=h.slice(2,h.length-1),h[u-1]=0,h[u]=0,u--}else u++;h[u]=1,p=!p}throw new oe}static decodeCode(n,a,l){en.recordPattern(n,l,a);let u=Te.MAX_AVG_VARIANCE,h=-1;for(let g=0;g<Te.CODE_PATTERNS.length;g++){const p=Te.CODE_PATTERNS[g],_=this.patternMatchVariance(a,p,Te.MAX_INDIVIDUAL_VARIANCE);_<u&&(u=_,h=g)}if(h>=0)return h;throw new oe}decodeRow(n,a,l){const u=l&&l.get(U.ASSUME_GS1)===!0,h=Te.findStartPattern(a),g=h[2];let p=0;const _=new Uint8Array(20);_[p++]=g;let C;switch(g){case Te.CODE_START_A:C=Te.CODE_CODE_A;break;case Te.CODE_START_B:C=Te.CODE_CODE_B;break;case Te.CODE_START_C:C=Te.CODE_CODE_C;break;default:throw new k}let S=!1,O=!1,M="",j=h[0],V=h[1];const X=Int32Array.from([0,0,0,0,0,0]);let ie=0,ce=0,Se=g,Ce=0,ve=!0,dt=!1,at=!1;for(;!S;){const zs=O;switch(O=!1,ie=ce,ce=Te.decodeCode(a,X,V),_[p++]=ce,ce!==Te.CODE_STOP&&(ve=!0),ce!==Te.CODE_STOP&&(Ce++,Se+=Ce*ce),j=V,V+=X.reduce((lu,Cl)=>lu+Cl,0),ce){case Te.CODE_START_A:case Te.CODE_START_B:case Te.CODE_START_C:throw new k}switch(C){case Te.CODE_CODE_A:if(ce<64)at===dt?M+=String.fromCharCode(32+ce):M+=String.fromCharCode(32+ce+128),at=!1;else if(ce<96)at===dt?M+=String.fromCharCode(ce-64):M+=String.fromCharCode(ce+64),at=!1;else switch(ce!==Te.CODE_STOP&&(ve=!1),ce){case Te.CODE_FNC_1:u&&(M.length===0?M+="]C1":M+="");break;case Te.CODE_FNC_2:case Te.CODE_FNC_3:break;case Te.CODE_FNC_4_A:!dt&&at?(dt=!0,at=!1):dt&&at?(dt=!1,at=!1):at=!0;break;case Te.CODE_SHIFT:O=!0,C=Te.CODE_CODE_B;break;case Te.CODE_CODE_B:C=Te.CODE_CODE_B;break;case Te.CODE_CODE_C:C=Te.CODE_CODE_C;break;case Te.CODE_STOP:S=!0;break}break;case Te.CODE_CODE_B:if(ce<96)at===dt?M+=String.fromCharCode(32+ce):M+=String.fromCharCode(32+ce+128),at=!1;else switch(ce!==Te.CODE_STOP&&(ve=!1),ce){case Te.CODE_FNC_1:u&&(M.length===0?M+="]C1":M+="");break;case Te.CODE_FNC_2:case Te.CODE_FNC_3:break;case Te.CODE_FNC_4_B:!dt&&at?(dt=!0,at=!1):dt&&at?(dt=!1,at=!1):at=!0;break;case Te.CODE_SHIFT:O=!0,C=Te.CODE_CODE_A;break;case Te.CODE_CODE_A:C=Te.CODE_CODE_A;break;case Te.CODE_CODE_C:C=Te.CODE_CODE_C;break;case Te.CODE_STOP:S=!0;break}break;case Te.CODE_CODE_C:if(ce<100)ce<10&&(M+="0"),M+=ce;else switch(ce!==Te.CODE_STOP&&(ve=!1),ce){case Te.CODE_FNC_1:u&&(M.length===0?M+="]C1":M+="");break;case Te.CODE_CODE_A:C=Te.CODE_CODE_A;break;case Te.CODE_CODE_B:C=Te.CODE_CODE_B;break;case Te.CODE_STOP:S=!0;break}break}zs&&(C=C===Te.CODE_CODE_A?Te.CODE_CODE_B:Te.CODE_CODE_A)}const gn=V-j;if(V=a.getNextUnset(V),!a.isRange(V,Math.min(a.getSize(),V+(V-j)/2),!1))throw new oe;if(Se-=Ce*ie,Se%103!==ie)throw new P;const pi=M.length;if(pi===0)throw new oe;pi>0&&ve&&(C===Te.CODE_CODE_C?M=M.substring(0,pi-2):M=M.substring(0,pi-1));const Yn=(h[1]+h[0])/2,jt=j+gn/2,kn=_.length,ri=new Uint8Array(kn);for(let zs=0;zs<kn;zs++)ri[zs]=_[zs];const Nr=[new Be(Yn,n),new Be(jt,n)];return new De(M,ri,0,Nr,Ae.CODE_128,new Date().getTime())}}Te.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Te.MAX_AVG_VARIANCE=.25,Te.MAX_INDIVIDUAL_VARIANCE=.7,Te.CODE_SHIFT=98,Te.CODE_CODE_C=99,Te.CODE_CODE_B=100,Te.CODE_CODE_A=101,Te.CODE_FNC_1=102,Te.CODE_FNC_2=97,Te.CODE_FNC_3=96,Te.CODE_FNC_4_A=101,Te.CODE_FNC_4_B=100,Te.CODE_START_A=103,Te.CODE_START_B=104,Te.CODE_START_C=105,Te.CODE_STOP=106;class Vt extends en{constructor(n=!1,a=!1){super(),this.usingCheckDigit=n,this.extendedMode=a,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,a,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let h=Vt.findAsteriskPattern(a,u),g=a.getNextSet(h[1]),p=a.getSize(),_,C;do{Vt.recordPattern(a,g,u);let X=Vt.toNarrowWidePattern(u);if(X<0)throw new oe;_=Vt.patternToChar(X),this.decodeRowResult+=_,C=g;for(let ie of u)g+=ie;g=a.getNextSet(g)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let S=0;for(let X of u)S+=X;let O=g-C-S;if(g!==p&&O*2<S)throw new oe;if(this.usingCheckDigit){let X=this.decodeRowResult.length-1,ie=0;for(let ce=0;ce<X;ce++)ie+=Vt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ce));if(this.decodeRowResult.charAt(X)!==Vt.ALPHABET_STRING.charAt(ie%43))throw new P;this.decodeRowResult=this.decodeRowResult.substring(0,X)}if(this.decodeRowResult.length===0)throw new oe;let M;this.extendedMode?M=Vt.decodeExtended(this.decodeRowResult):M=this.decodeRowResult;let j=(h[1]+h[0])/2,V=C+S/2;return new De(M,null,0,[new Be(j,n),new Be(V,n)],Ae.CODE_39,new Date().getTime())}static findAsteriskPattern(n,a){let l=n.getSize(),u=n.getNextSet(0),h=0,g=u,p=!1,_=a.length;for(let C=u;C<l;C++)if(n.get(C)!==p)a[h]++;else{if(h===_-1){if(this.toNarrowWidePattern(a)===Vt.ASTERISK_ENCODING&&n.isRange(Math.max(0,g-Math.floor((C-g)/2)),g,!1))return[g,C];g+=a[0]+a[1],a.copyWithin(0,2,2+h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,p=!p}throw new oe}static toNarrowWidePattern(n){let a=n.length,l=0,u;do{let h=2147483647;for(let _ of n)_<h&&_>l&&(h=_);l=h,u=0;let g=0,p=0;for(let _=0;_<a;_++){let C=n[_];C>l&&(p|=1<<a-1-_,u++,g+=C)}if(u===3){for(let _=0;_<a&&u>0;_++){let C=n[_];if(C>l&&(u--,C*2>=g))return-1}return p}}while(u>3);return-1}static patternToChar(n){for(let a=0;a<Vt.CHARACTER_ENCODINGS.length;a++)if(Vt.CHARACTER_ENCODINGS[a]===n)return Vt.ALPHABET_STRING.charAt(a);if(n===Vt.ASTERISK_ENCODING)return"*";throw new oe}static decodeExtended(n){let a=n.length,l="";for(let u=0;u<a;u++){let h=n.charAt(u);if(h==="+"||h==="$"||h==="%"||h==="/"){let g=n.charAt(u+1),p="\0";switch(h){case"+":if(g>="A"&&g<="Z")p=String.fromCharCode(g.charCodeAt(0)+32);else throw new k;break;case"$":if(g>="A"&&g<="Z")p=String.fromCharCode(g.charCodeAt(0)-64);else throw new k;break;case"%":if(g>="A"&&g<="E")p=String.fromCharCode(g.charCodeAt(0)-38);else if(g>="F"&&g<="J")p=String.fromCharCode(g.charCodeAt(0)-11);else if(g>="K"&&g<="O")p=String.fromCharCode(g.charCodeAt(0)+16);else if(g>="P"&&g<="T")p=String.fromCharCode(g.charCodeAt(0)+43);else if(g==="U")p="\0";else if(g==="V")p="@";else if(g==="W")p="`";else if(g==="X"||g==="Y"||g==="Z")p="";else throw new k;break;case"/":if(g>="A"&&g<="O")p=String.fromCharCode(g.charCodeAt(0)-32);else if(g==="Z")p=":";else throw new k;break}l+=p,u++}else l+=h}return l}}Vt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Vt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Vt.ASTERISK_ENCODING=148;class ut extends en{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,a,l){let u=this.decodeStart(a),h=this.decodeEnd(a),g=new ge;ut.decodeMiddle(a,u[1],h[0],g);let p=g.toString(),_=null;l!=null&&(_=l.get(U.ALLOWED_LENGTHS)),_==null&&(_=ut.DEFAULT_ALLOWED_LENGTHS);let C=p.length,S=!1,O=0;for(let V of _){if(C===V){S=!0;break}V>O&&(O=V)}if(!S&&C>O&&(S=!0),!S)throw new k;const M=[new Be(u[1],n),new Be(h[0],n)];return new De(p,null,0,M,Ae.ITF,new Date().getTime())}static decodeMiddle(n,a,l,u){let h=new Int32Array(10),g=new Int32Array(5),p=new Int32Array(5);for(h.fill(0),g.fill(0),p.fill(0);a<l;){en.recordPattern(n,a,h);for(let C=0;C<5;C++){let S=2*C;g[C]=h[S],p[C]=h[S+1]}let _=ut.decodeDigit(g);u.append(_.toString()),_=this.decodeDigit(p),u.append(_.toString()),h.forEach(function(C){a+=C})}}decodeStart(n){let a=ut.skipWhiteSpace(n),l=ut.findGuardPattern(n,a,ut.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(n,l[0]),l}validateQuietZone(n,a){let l=this.narrowLineWidth*10;l=l<a?l:a;for(let u=a-1;l>0&&u>=0&&!n.get(u);u--)l--;if(l!==0)throw new oe}static skipWhiteSpace(n){const a=n.getSize(),l=n.getNextSet(0);if(l===a)throw new oe;return l}decodeEnd(n){n.reverse();try{let a=ut.skipWhiteSpace(n),l;try{l=ut.findGuardPattern(n,a,ut.END_PATTERN_REVERSED[0])}catch(h){h instanceof oe&&(l=ut.findGuardPattern(n,a,ut.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,l[0]);let u=l[0];return l[0]=n.getSize()-l[1],l[1]=n.getSize()-u,l}finally{n.reverse()}}static findGuardPattern(n,a,l){let u=l.length,h=new Int32Array(u),g=n.getSize(),p=!1,_=0,C=a;h.fill(0);for(let S=a;S<g;S++)if(n.get(S)!==p)h[_]++;else{if(_===u-1){if(en.patternMatchVariance(h,l,ut.MAX_INDIVIDUAL_VARIANCE)<ut.MAX_AVG_VARIANCE)return[C,S];C+=h[0]+h[1],H.arraycopy(h,2,h,0,_-1),h[_-1]=0,h[_]=0,_--}else _++;h[_]=1,p=!p}throw new oe}static decodeDigit(n){let a=ut.MAX_AVG_VARIANCE,l=-1,u=ut.PATTERNS.length;for(let h=0;h<u;h++){let g=ut.PATTERNS[h],p=en.patternMatchVariance(n,g,ut.MAX_INDIVIDUAL_VARIANCE);p<a?(a=p,l=h):p===a&&(l=-1)}if(l>=0)return l%10;throw new oe}}ut.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ut.MAX_AVG_VARIANCE=.38,ut.MAX_INDIVIDUAL_VARIANCE=.5,ut.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ut.START_PATTERN=Int32Array.from([1,1,1,1]),ut.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class cn extends en{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let a=!1,l,u=0,h=Int32Array.from([0,0,0]);for(;!a;){h=Int32Array.from([0,0,0]),l=cn.findGuardPattern(n,u,!1,this.START_END_PATTERN,h);let g=l[0];u=l[1];let p=g-(u-g);p>=0&&(a=n.isRange(p,g,!1))}return l}static checkChecksum(n){return cn.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let a=n.length;if(a===0)return!1;let l=parseInt(n.charAt(a-1),10);return cn.getStandardUPCEANChecksum(n.substring(0,a-1))===l}static getStandardUPCEANChecksum(n){let a=n.length,l=0;for(let u=a-1;u>=0;u-=2){let h=n.charAt(u).charCodeAt(0)-48;if(h<0||h>9)throw new k;l+=h}l*=3;for(let u=a-2;u>=0;u-=2){let h=n.charAt(u).charCodeAt(0)-48;if(h<0||h>9)throw new k;l+=h}return(1e3-l)%10}static decodeEnd(n,a){return cn.findGuardPattern(n,a,!1,cn.START_END_PATTERN,new Int32Array(cn.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,a,l,u){return this.findGuardPattern(n,a,l,u,new Int32Array(u.length))}static findGuardPattern(n,a,l,u,h){let g=n.getSize();a=l?n.getNextUnset(a):n.getNextSet(a);let p=0,_=a,C=u.length,S=l;for(let O=a;O<g;O++)if(n.get(O)!==S)h[p]++;else{if(p===C-1){if(en.patternMatchVariance(h,u,cn.MAX_INDIVIDUAL_VARIANCE)<cn.MAX_AVG_VARIANCE)return Int32Array.from([_,O]);_+=h[0]+h[1];let M=h.slice(2,h.length-1);for(let j=0;j<p-1;j++)h[j]=M[j];h[p-1]=0,h[p]=0,p--}else p++;h[p]=1,S=!S}throw new oe}static decodeDigit(n,a,l,u){this.recordPattern(n,l,a);let h=this.MAX_AVG_VARIANCE,g=-1,p=u.length;for(let _=0;_<p;_++){let C=u[_],S=en.patternMatchVariance(a,C,cn.MAX_INDIVIDUAL_VARIANCE);S<h&&(h=S,g=_)}if(g>=0)return g;throw new oe}}cn.MAX_AVG_VARIANCE=.48,cn.MAX_INDIVIDUAL_VARIANCE=.7,cn.START_END_PATTERN=Int32Array.from([1,1,1]),cn.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),cn.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),cn.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class xa{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,a,l){let u=this.decodeRowStringBuffer,h=this.decodeMiddle(a,l,u),g=u.toString(),p=xa.parseExtensionString(g),_=[new Be((l[0]+l[1])/2,n),new Be(h,n)],C=new De(g,null,0,_,Ae.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&C.putAllMetadata(p),C}decodeMiddle(n,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let h=n.getSize(),g=a[1],p=0;for(let C=0;C<5&&g<h;C++){let S=cn.decodeDigit(n,u,g,cn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+S%10);for(let O of u)g+=O;S>=10&&(p|=1<<4-C),C!==4&&(g=n.getNextSet(g),g=n.getNextUnset(g))}if(l.length!==5)throw new oe;let _=this.determineCheckDigit(p);if(xa.extensionChecksum(l.toString())!==_)throw new oe;return g}static extensionChecksum(n){let a=n.length,l=0;for(let u=a-2;u>=0;u-=2)l+=n.charAt(u).charCodeAt(0)-48;l*=3;for(let u=a-1;u>=0;u-=2)l+=n.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(n){for(let a=0;a<10;a++)if(n===this.CHECK_DIGIT_ENCODINGS[a])return a;throw new oe}static parseExtensionString(n){if(n.length!==5)return null;let a=xa.parseExtension5String(n);return a==null?null:new Map([[it.SUGGESTED_PRICE,a]])}static parseExtension5String(n){let a;switch(n.charAt(0)){case"0":a="";break;case"5":a="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}a="";break;default:a="";break}let l=parseInt(n.substring(1)),u=(l/100).toString(),h=l%100,g=h<10?"0"+h:h.toString();return a+u+"."+g}}class dl{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,a,l){let u=this.decodeRowStringBuffer,h=this.decodeMiddle(a,l,u),g=u.toString(),p=dl.parseExtensionString(g),_=[new Be((l[0]+l[1])/2,n),new Be(h,n)],C=new De(g,null,0,_,Ae.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&C.putAllMetadata(p),C}decodeMiddle(n,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let h=n.getSize(),g=a[1],p=0;for(let _=0;_<2&&g<h;_++){let C=cn.decodeDigit(n,u,g,cn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+C%10);for(let S of u)g+=S;C>=10&&(p|=1<<1-_),_!==1&&(g=n.getNextSet(g),g=n.getNextUnset(g))}if(l.length!==2)throw new oe;if(parseInt(l.toString())%4!==p)throw new oe;return g}static parseExtensionString(n){return n.length!==2?null:new Map([[it.ISSUE_NUMBER,parseInt(n)]])}}class ya{static decodeRow(n,a,l){let u=cn.findGuardPattern(a,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new xa().decodeRow(n,a,u)}catch{return new dl().decodeRow(n,a,u)}}}ya.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class bt extends cn{constructor(){super(),this.decodeRowStringBuffer="",bt.L_AND_G_PATTERNS=bt.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let a=bt.L_PATTERNS[n-10],l=new Int32Array(a.length);for(let u=0;u<a.length;u++)l[u]=a[a.length-u-1];bt.L_AND_G_PATTERNS[n]=l}}decodeRow(n,a,l){let u=bt.findStartGuardPattern(a),h=l==null?null:l.get(U.NEED_RESULT_POINT_CALLBACK);if(h!=null){const ve=new Be((u[0]+u[1])/2,n);h.foundPossibleResultPoint(ve)}let g=this.decodeMiddle(a,u,this.decodeRowStringBuffer),p=g.rowOffset,_=g.resultString;if(h!=null){const ve=new Be(p,n);h.foundPossibleResultPoint(ve)}let C=this.decodeEnd(a,p);if(h!=null){const ve=new Be((C[0]+C[1])/2,n);h.foundPossibleResultPoint(ve)}let S=C[1],O=S+(S-C[0]);if(O>=a.getSize()||!a.isRange(S,O,!1))throw new oe;let M=_.toString();if(M.length<8)throw new k;if(!bt.checkChecksum(M))throw new P;let j=(u[1]+u[0])/2,V=(C[1]+C[0])/2,X=this.getBarcodeFormat(),ie=[new Be(j,n),new Be(V,n)],ce=new De(M,null,0,ie,X,new Date().getTime()),Se=0;try{let ve=ya.decodeRow(n,a,C[1]);ce.putMetadata(it.UPC_EAN_EXTENSION,ve.getText()),ce.putAllMetadata(ve.getResultMetadata()),ce.addResultPoints(ve.getResultPoints()),Se=ve.getText().length}catch{}let Ce=l==null?null:l.get(U.ALLOWED_EAN_EXTENSIONS);if(Ce!=null){let ve=!1;for(let dt in Ce)if(Se.toString()===dt){ve=!0;break}if(!ve)throw new oe}return ce}decodeEnd(n,a){return bt.findGuardPattern(n,a,!1,bt.START_END_PATTERN,new Int32Array(bt.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return bt.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let a=n.length;if(a===0)return!1;let l=parseInt(n.charAt(a-1),10);return bt.getStandardUPCEANChecksum(n.substring(0,a-1))===l}static getStandardUPCEANChecksum(n){let a=n.length,l=0;for(let u=a-1;u>=0;u-=2){let h=n.charAt(u).charCodeAt(0)-48;if(h<0||h>9)throw new k;l+=h}l*=3;for(let u=a-2;u>=0;u-=2){let h=n.charAt(u).charCodeAt(0)-48;if(h<0||h>9)throw new k;l+=h}return(1e3-l)%10}}class Hi extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,a,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let h=n.getSize(),g=a[1],p=0;for(let C=0;C<6&&g<h;C++){let S=bt.decodeDigit(n,u,g,bt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+S%10);for(let O of u)g+=O;S>=10&&(p|=1<<5-C)}l=Hi.determineFirstDigit(l,p),g=bt.findGuardPattern(n,g,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let C=0;C<6&&g<h;C++){let S=bt.decodeDigit(n,u,g,bt.L_PATTERNS);l+=String.fromCharCode(48+S);for(let O of u)g+=O}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return Ae.EAN_13}static determineFirstDigit(n,a){for(let l=0;l<10;l++)if(a===this.FIRST_DIGIT_ENCODINGS[l])return n=String.fromCharCode(48+l)+n,n;throw new oe}}Hi.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class _s extends bt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,a,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let h=n.getSize(),g=a[1];for(let _=0;_<4&&g<h;_++){let C=bt.decodeDigit(n,u,g,bt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let S of u)g+=S}g=bt.findGuardPattern(n,g,!0,bt.MIDDLE_PATTERN,new Int32Array(bt.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&g<h;_++){let C=bt.decodeDigit(n,u,g,bt.L_PATTERNS);l+=String.fromCharCode(48+C);for(let S of u)g+=S}return{rowOffset:g,resultString:l}}getBarcodeFormat(){return Ae.EAN_8}}class _a extends bt{constructor(){super(...arguments),this.ean13Reader=new Hi}getBarcodeFormat(){return Ae.UPC_A}decode(n,a){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,a,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,a,l))}decodeMiddle(n,a,l){return this.ean13Reader.decodeMiddle(n,a,l)}maybeReturnResult(n){let a=n.getText();if(a.charAt(0)==="0"){let l=new De(a.substring(1),null,null,n.getResultPoints(),Ae.UPC_A);return n.getResultMetadata()!=null&&l.putAllMetadata(n.getResultMetadata()),l}else throw new oe}reset(){this.ean13Reader.reset()}}class Xn extends bt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,a,l){const u=this.decodeMiddleCounters.map(C=>C);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const h=n.getSize();let g=a[1],p=0;for(let C=0;C<6&&g<h;C++){const S=Xn.decodeDigit(n,u,g,Xn.L_AND_G_PATTERNS);l+=String.fromCharCode(48+S%10);for(let O of u)g+=O;S>=10&&(p|=1<<5-C)}let _=Xn.determineNumSysAndCheckDigit(l,p);return{rowOffset:g,resultString:_}}decodeEnd(n,a){return Xn.findGuardPatternWithoutCounters(n,a,!0,Xn.MIDDLE_END_PATTERN)}checkChecksum(n){return bt.checkChecksum(Xn.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,a){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(a===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let h=String.fromCharCode(48+l),g=String.fromCharCode(48+u);return h+n+g}throw oe.getNotFoundInstance()}getBarcodeFormat(){return Ae.UPC_E}static convertUPCEtoUPCA(n){const a=n.slice(1,7).split("").map(h=>h.charCodeAt(0)),l=new ge;l.append(n.charAt(0));let u=a[5];switch(u){case 0:case 1:case 2:l.appendChars(a,0,2),l.append(u),l.append("0000"),l.appendChars(a,2,3);break;case 3:l.appendChars(a,0,3),l.append("00000"),l.appendChars(a,3,2);break;case 4:l.appendChars(a,0,4),l.append("00000"),l.append(a[4]);break;default:l.appendChars(a,0,5),l.append("0000"),l.append(u);break}return n.length>=8&&l.append(n.charAt(7)),l.toString()}}Xn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Xn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class gl extends en{constructor(n){super();let a=n==null?null:n.get(U.POSSIBLE_FORMATS),l=[];o(a)?(l.push(new Hi),l.push(new _a),l.push(new _s),l.push(new Xn)):(a.indexOf(Ae.EAN_13)>-1&&l.push(new Hi),a.indexOf(Ae.UPC_A)>-1&&l.push(new _a),a.indexOf(Ae.EAN_8)>-1&&l.push(new _s),a.indexOf(Ae.UPC_E)>-1&&l.push(new Xn)),this.readers=l}decodeRow(n,a,l){for(let u of this.readers)try{const h=u.decodeRow(n,a,l),g=h.getBarcodeFormat()===Ae.EAN_13&&h.getText().charAt(0)==="0",p=l==null?null:l.get(U.POSSIBLE_FORMATS),_=p==null||p.includes(Ae.UPC_A);if(g&&_){const C=h.getRawBytes(),S=new De(h.getText().substring(1),C,C?C.length:null,h.getResultPoints(),Ae.UPC_A);return S.putAllMetadata(h.getResultMetadata()),S}return h}catch{}throw new oe}reset(){for(let n of this.readers)n.reset()}}class Dn extends en{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,a){for(let l=0;l<a.length;l++)if(en.patternMatchVariance(n,a[l],Dn.MAX_INDIVIDUAL_VARIANCE)<Dn.MAX_AVG_VARIANCE)return l;throw new oe}static count(n){return ke.sum(new Int32Array(n))}static increment(n,a){let l=0,u=a[0];for(let h=1;h<n.length;h++)a[h]>u&&(u=a[h],l=h);n[l]++}static decrement(n,a){let l=0,u=a[0];for(let h=1;h<n.length;h++)a[h]<u&&(u=a[h],l=h);n[l]--}static isFinderPattern(n){let a=n[0]+n[1],l=a+n[2]+n[3],u=a/l;if(u>=Dn.MIN_FINDER_PATTERN_RATIO&&u<=Dn.MAX_FINDER_PATTERN_RATIO){let h=Number.MAX_SAFE_INTEGER,g=Number.MIN_SAFE_INTEGER;for(let p of n)p>g&&(g=p),p<h&&(h=p);return g<10*h}return!1}}Dn.MAX_AVG_VARIANCE=.2,Dn.MAX_INDIVIDUAL_VARIANCE=.45,Dn.MIN_FINDER_PATTERN_RATIO=9.5/12,Dn.MAX_FINDER_PATTERN_RATIO=12.5/14;class ws{constructor(n,a){this.value=n,this.checksumPortion=a}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof ws))return!1;const a=n;return this.value===a.value&&this.checksumPortion===a.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class bs{constructor(n,a,l,u,h){this.value=n,this.startEnd=a,this.value=n,this.startEnd=a,this.resultPoints=new Array,this.resultPoints.push(new Be(l,h)),this.resultPoints.push(new Be(u,h))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof bs))return!1;const a=n;return this.value===a.value}hashCode(){return this.value}}class Vi{constructor(){}static getRSSvalue(n,a,l){let u=0;for(let _ of n)u+=_;let h=0,g=0,p=n.length;for(let _=0;_<p-1;_++){let C;for(C=1,g|=1<<_;C<n[_];C++,g&=~(1<<_)){let S=Vi.combins(u-C-1,p-_-2);if(l&&g===0&&u-C-(p-_-1)>=p-_-1&&(S-=Vi.combins(u-C-(p-_),p-_-2)),p-_-1>1){let O=0;for(let M=u-C-(p-_-2);M>a;M--)O+=Vi.combins(u-C-M-1,p-_-3);S-=O*(p-1-_)}else u-C>a&&S--;h+=S}u-=C}return h}static combins(n,a){let l,u;n-a>a?(u=a,l=n-a):(u=n-a,l=a);let h=1,g=1;for(let p=n;p>l;p--)h*=p,g<=u&&(h/=g,g++);for(;g<=u;)h/=g,g++;return h}}class Wc{static buildBitArray(n){let a=n.length*2-1;n[n.length-1].getRightChar()==null&&(a-=1);let l=12*a,u=new q(l),h=0,p=n[0].getRightChar().getValue();for(let _=11;_>=0;--_)(p&1<<_)!=0&&u.set(h),h++;for(let _=1;_<n.length;++_){let C=n[_],S=C.getLeftChar().getValue();for(let O=11;O>=0;--O)(S&1<<O)!=0&&u.set(h),h++;if(C.getRightChar()!=null){let O=C.getRightChar().getValue();for(let M=11;M>=0;--M)(O&1<<M)!=0&&u.set(h),h++}}return u}}class Es{constructor(n,a){a?this.decodedInformation=null:(this.finished=n,this.decodedInformation=a)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ro{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class Fn extends ro{constructor(n,a){super(n),this.value=a}getValue(){return this.value}isFNC1(){return this.value===Fn.FNC1}}Fn.FNC1="$";class ns extends ro{constructor(n,a,l){super(n),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=a}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ei extends ro{constructor(n,a,l){if(super(n),a<0||a>10||l<0||l>10)throw new k;this.firstDigit=a,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ei.FNC1}isSecondDigitFNC1(){return this.secondDigit===ei.FNC1}isAnyFNC1(){return this.firstDigit===ei.FNC1||this.secondDigit===ei.FNC1}}ei.FNC1=10;class je{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new oe;let a=n.substring(0,2);for(let h of je.TWO_DIGIT_DATA_LENGTH)if(h[0]===a)return h[1]===je.VARIABLE_LENGTH?je.processVariableAI(2,h[2],n):je.processFixedAI(2,h[1],n);if(n.length<3)throw new oe;let l=n.substring(0,3);for(let h of je.THREE_DIGIT_DATA_LENGTH)if(h[0]===l)return h[1]===je.VARIABLE_LENGTH?je.processVariableAI(3,h[2],n):je.processFixedAI(3,h[1],n);for(let h of je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(h[0]===l)return h[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,h[2],n):je.processFixedAI(4,h[1],n);if(n.length<4)throw new oe;let u=n.substring(0,4);for(let h of je.FOUR_DIGIT_DATA_LENGTH)if(h[0]===u)return h[1]===je.VARIABLE_LENGTH?je.processVariableAI(4,h[2],n):je.processFixedAI(4,h[1],n);throw new oe}static processFixedAI(n,a,l){if(l.length<n)throw new oe;let u=l.substring(0,n);if(l.length<n+a)throw new oe;let h=l.substring(n,n+a),g=l.substring(n+a),p="("+u+")"+h,_=je.parseFieldsInGeneralPurpose(g);return _==null?p:p+_}static processVariableAI(n,a,l){let u=l.substring(0,n),h;l.length<n+a?h=l.length:h=n+a;let g=l.substring(n,h),p=l.substring(h),_="("+u+")"+g,C=je.parseFieldsInGeneralPurpose(p);return C==null?_:_+C}}je.VARIABLE_LENGTH=[],je.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",je.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",je.VARIABLE_LENGTH,20],["22",je.VARIABLE_LENGTH,29],["30",je.VARIABLE_LENGTH,8],["37",je.VARIABLE_LENGTH,8],["90",je.VARIABLE_LENGTH,30],["91",je.VARIABLE_LENGTH,30],["92",je.VARIABLE_LENGTH,30],["93",je.VARIABLE_LENGTH,30],["94",je.VARIABLE_LENGTH,30],["95",je.VARIABLE_LENGTH,30],["96",je.VARIABLE_LENGTH,30],["97",je.VARIABLE_LENGTH,3],["98",je.VARIABLE_LENGTH,30],["99",je.VARIABLE_LENGTH,30]],je.THREE_DIGIT_DATA_LENGTH=[["240",je.VARIABLE_LENGTH,30],["241",je.VARIABLE_LENGTH,30],["242",je.VARIABLE_LENGTH,6],["250",je.VARIABLE_LENGTH,30],["251",je.VARIABLE_LENGTH,30],["253",je.VARIABLE_LENGTH,17],["254",je.VARIABLE_LENGTH,20],["400",je.VARIABLE_LENGTH,30],["401",je.VARIABLE_LENGTH,30],["402",17],["403",je.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",je.VARIABLE_LENGTH,20],["421",je.VARIABLE_LENGTH,15],["422",3],["423",je.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],je.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",je.VARIABLE_LENGTH,15],["391",je.VARIABLE_LENGTH,18],["392",je.VARIABLE_LENGTH,15],["393",je.VARIABLE_LENGTH,18],["703",je.VARIABLE_LENGTH,30]],je.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",je.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",je.VARIABLE_LENGTH,20],["8003",je.VARIABLE_LENGTH,30],["8004",je.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",je.VARIABLE_LENGTH,30],["8008",je.VARIABLE_LENGTH,12],["8018",18],["8020",je.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",je.VARIABLE_LENGTH,70],["8200",je.VARIABLE_LENGTH,70]];class ti{constructor(n){this.buffer=new ge,this.information=n}decodeAllCodes(n,a){let l=a,u=null;do{let h=this.decodeGeneralPurposeField(l,u),g=je.parseFieldsInGeneralPurpose(h.getNewString());if(g!=null&&n.append(g),h.isRemaining()?u=""+h.getRemainingValue():u=null,l===h.getNewPosition())break;l=h.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let a=n;a<n+3;++a)if(this.information.get(a))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let h=this.extractNumericValueFromBitArray(n,4);return h===0?new ei(this.information.getSize(),ei.FNC1,ei.FNC1):new ei(this.information.getSize(),h-1,ei.FNC1)}let a=this.extractNumericValueFromBitArray(n,7),l=(a-8)/11,u=(a-8)%11;return new ei(n+7,l,u)}extractNumericValueFromBitArray(n,a){return ti.extractNumericValueFromBitArray(this.information,n,a)}static extractNumericValueFromBitArray(n,a,l){let u=0;for(let h=0;h<l;++h)n.get(a+h)&&(u|=1<<l-h-1);return u}decodeGeneralPurposeField(n,a){this.buffer.setLengthToZero(),a!=null&&this.buffer.append(a),this.current.setPosition(n);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new ns(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new ns(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,a;do{let l=this.current.getPosition();if(this.current.isAlpha()?(a=this.parseAlphaBlock(),n=a.isFinished()):this.current.isIsoIec646()?(a=this.parseIsoIec646Block(),n=a.isFinished()):(a=this.parseNumericBlock(),n=a.isFinished()),!(l!==this.current.getPosition())&&!n)break}while(!n);return a.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let a;return n.isSecondDigitFNC1()?a=new ns(this.current.getPosition(),this.buffer.toString()):a=new ns(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new Es(!0,a)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let a=new ns(this.current.getPosition(),this.buffer.toString());return new Es(!0,a)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Es(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let a=new ns(this.current.getPosition(),this.buffer.toString());return new Es(!0,a)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Es(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let a=new ns(this.current.getPosition(),this.buffer.toString());return new Es(!0,a)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Es(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(n,5);if(a>=5&&a<16)return!0;if(n+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(n,7);if(l>=64&&l<116)return!0;if(n+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(n,8);return u>=232&&u<253}decodeIsoIec646(n){let a=this.extractNumericValueFromBitArray(n,5);if(a===15)return new Fn(n+5,Fn.FNC1);if(a>=5&&a<15)return new Fn(n+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(n,7);if(l>=64&&l<90)return new Fn(n+7,""+(l+1));if(l>=90&&l<116)return new Fn(n+7,""+(l+7));let u=this.extractNumericValueFromBitArray(n,8),h;switch(u){case 232:h="!";break;case 233:h='"';break;case 234:h="%";break;case 235:h="&";break;case 236:h="'";break;case 237:h="(";break;case 238:h=")";break;case 239:h="*";break;case 240:h="+";break;case 241:h=",";break;case 242:h="-";break;case 243:h=".";break;case 244:h="/";break;case 245:h=":";break;case 246:h=";";break;case 247:h="<";break;case 248:h="=";break;case 249:h=">";break;case 250:h="?";break;case 251:h="_";break;case 252:h=" ";break;default:throw new k}return new Fn(n+8,h)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(n,5);if(a>=5&&a<16)return!0;if(n+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(n,6);return l>=16&&l<63}decodeAlphanumeric(n){let a=this.extractNumericValueFromBitArray(n,5);if(a===15)return new Fn(n+5,Fn.FNC1);if(a>=5&&a<15)return new Fn(n+5,"0"+(a-5));let l=this.extractNumericValueFromBitArray(n,6);if(l>=32&&l<58)return new Fn(n+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new Le("Decoding invalid alphanumeric value: "+l)}return new Fn(n+6,u)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let a=0;a<5&&a+n<this.information.getSize();++a)if(a===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+a))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let a=n;a<n+3;++a)if(this.information.get(a))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let a=0;a<4&&a+n<this.information.getSize();++a)if(this.information.get(n+a))return!1;return!0}}class wn{constructor(n){this.information=n,this.generalDecoder=new ti(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ut extends wn{constructor(n){super(n)}encodeCompressedGtin(n,a){n.append("(01)");let l=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,a,l)}encodeCompressedGtinWithoutAI(n,a,l){for(let u=0;u<4;++u){let h=this.getGeneralDecoder().extractNumericValueFromBitArray(a+10*u,10);h/100===0&&n.append("0"),h/10===0&&n.append("0"),n.append(h)}Ut.appendCheckDigit(n,l)}static appendCheckDigit(n,a){let l=0;for(let u=0;u<13;u++){let h=n.charAt(u+a).charCodeAt(0)-48;l+=(u&1)===0?3*h:h}l=10-l%10,l===10&&(l=0),n.append(l)}}Ut.GTIN_SIZE=40;class Ti extends Ut{constructor(n){super(n)}parseInformation(){let n=new ge;n.append("(01)");let a=n.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(Ti.HEADER_SIZE,4);return n.append(l),this.encodeCompressedGtinWithoutAI(n,Ti.HEADER_SIZE+4,a),this.getGeneralDecoder().decodeAllCodes(n,Ti.HEADER_SIZE+44)}}Ti.HEADER_SIZE=4;class mr extends wn{constructor(n){super(n)}parseInformation(){let n=new ge;return this.getGeneralDecoder().decodeAllCodes(n,mr.HEADER_SIZE)}}mr.HEADER_SIZE=5;class ao extends Ut{constructor(n){super(n)}encodeCompressedWeight(n,a,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(a,l);this.addWeightCode(n,u);let h=this.checkWeight(u),g=1e5;for(let p=0;p<5;++p)h/g===0&&n.append("0"),g/=10;n.append(h)}}class Gi extends ao{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=Gi.HEADER_SIZE+ao.GTIN_SIZE+Gi.WEIGHT_SIZE)throw new oe;let n=new ge;return this.encodeCompressedGtin(n,Gi.HEADER_SIZE),this.encodeCompressedWeight(n,Gi.HEADER_SIZE+ao.GTIN_SIZE,Gi.WEIGHT_SIZE),n.toString()}}Gi.HEADER_SIZE=5,Gi.WEIGHT_SIZE=15;class Kc extends Gi{constructor(n){super(n)}addWeightCode(n,a){n.append("(3103)")}checkWeight(n){return n}}class wa extends Gi{constructor(n){super(n)}addWeightCode(n,a){a<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class di extends Ut{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<di.HEADER_SIZE+Ut.GTIN_SIZE)throw new oe;let n=new ge;this.encodeCompressedGtin(n,di.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(di.HEADER_SIZE+Ut.GTIN_SIZE,di.LAST_DIGIT_SIZE);n.append("(392"),n.append(a),n.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(di.HEADER_SIZE+Ut.GTIN_SIZE+di.LAST_DIGIT_SIZE,null);return n.append(l.getNewString()),n.toString()}}di.HEADER_SIZE=8,di.LAST_DIGIT_SIZE=2;class hn extends Ut{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<hn.HEADER_SIZE+Ut.GTIN_SIZE)throw new oe;let n=new ge;this.encodeCompressedGtin(n,hn.HEADER_SIZE);let a=this.getGeneralDecoder().extractNumericValueFromBitArray(hn.HEADER_SIZE+Ut.GTIN_SIZE,hn.LAST_DIGIT_SIZE);n.append("(393"),n.append(a),n.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(hn.HEADER_SIZE+Ut.GTIN_SIZE+hn.LAST_DIGIT_SIZE,hn.FIRST_THREE_DIGITS_SIZE);l/100==0&&n.append("0"),l/10==0&&n.append("0"),n.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(hn.HEADER_SIZE+Ut.GTIN_SIZE+hn.LAST_DIGIT_SIZE+hn.FIRST_THREE_DIGITS_SIZE,null);return n.append(u.getNewString()),n.toString()}}hn.HEADER_SIZE=8,hn.LAST_DIGIT_SIZE=2,hn.FIRST_THREE_DIGITS_SIZE=10;class Mt extends ao{constructor(n,a,l){super(n),this.dateCode=l,this.firstAIdigits=a}parseInformation(){if(this.getInformation().getSize()!=Mt.HEADER_SIZE+Mt.GTIN_SIZE+Mt.WEIGHT_SIZE+Mt.DATE_SIZE)throw new oe;let n=new ge;return this.encodeCompressedGtin(n,Mt.HEADER_SIZE),this.encodeCompressedWeight(n,Mt.HEADER_SIZE+Mt.GTIN_SIZE,Mt.WEIGHT_SIZE),this.encodeCompressedDate(n,Mt.HEADER_SIZE+Mt.GTIN_SIZE+Mt.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(a,Mt.DATE_SIZE);if(l==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let u=l%32;l/=32;let h=l%12+1;l/=12;let g=l;g/10==0&&n.append("0"),n.append(g),h/10==0&&n.append("0"),n.append(h),u/10==0&&n.append("0"),n.append(u)}addWeightCode(n,a){n.append("("),n.append(this.firstAIdigits),n.append(a/1e5),n.append(")")}checkWeight(n){return n%1e5}}Mt.HEADER_SIZE=8,Mt.WEIGHT_SIZE=20,Mt.DATE_SIZE=16;function pr(R){try{if(R.get(1))return new Ti(R);if(!R.get(2))return new mr(R);switch(ti.extractNumericValueFromBitArray(R,1,4)){case 4:return new Kc(R);case 5:return new wa(R)}switch(ti.extractNumericValueFromBitArray(R,1,5)){case 12:return new di(R);case 13:return new hn(R)}switch(ti.extractNumericValueFromBitArray(R,1,7)){case 56:return new Mt(R,"310","11");case 57:return new Mt(R,"320","11");case 58:return new Mt(R,"310","13");case 59:return new Mt(R,"320","13");case 60:return new Mt(R,"310","15");case 61:return new Mt(R,"320","15");case 62:return new Mt(R,"310","17");case 63:return new Mt(R,"320","17")}}catch(n){throw console.log(n),new Le("unknown decoder: "+R)}}class ni{constructor(n,a,l,u){this.leftchar=n,this.rightchar=a,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,a){return n instanceof ni?ni.equalsOrNull(n.leftchar,a.leftchar)&&ni.equalsOrNull(n.rightchar,a.rightchar)&&ni.equalsOrNull(n.finderpattern,a.finderpattern):!1}static equalsOrNull(n,a){return n===null?a===null:ni.equals(n,a)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class dn{constructor(n,a,l){this.pairs=n,this.rowNumber=a,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,a){return n instanceof dn?this.checkEqualitity(n,a)&&n.wasReversed===a.wasReversed:!1}checkEqualitity(n,a){if(!n||!a)return;let l;return n.forEach((u,h)=>{a.forEach(g=>{u.getLeftChar().getValue()===g.getLeftChar().getValue()&&u.getRightChar().getValue()===g.getRightChar().getValue()&&u.getFinderPatter().getValue()===g.getFinderPatter().getValue()&&(l=!0)})}),l}}class be extends Dn{constructor(n){super(...arguments),this.pairs=new Array(be.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,a,l){this.pairs.length=0,this.startFromEven=!1;try{return be.constructResult(this.decodeRow2pairs(n,a))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,be.constructResult(this.decodeRow2pairs(n,a))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,a){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(a,this.pairs,n))}catch(h){if(h instanceof oe){if(!this.pairs.length)throw new oe;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(n,!1),u){let h=this.checkRowsBoolean(!1);if(h!=null||(h=this.checkRowsBoolean(!0),h!=null))return h}throw new oe}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let a=null;try{a=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return n&&(this.rows=this.rows.reverse()),a}checkRows(n,a){for(let l=a;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let g of n)this.pairs.push(g.getPairs());if(this.pairs.push(u.getPairs()),!be.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let h=new Array(n);h.push(u);try{return this.checkRows(h,l+1)}catch(g){this.verbose&&console.log(g)}}throw new oe}static isValidSequence(n){for(let a of be.FINDER_PATTERN_SEQUENCES){if(n.length>a.length)continue;let l=!0;for(let u=0;u<n.length;u++)if(n[u].getFinderPattern().getValue()!=a[u]){l=!1;break}if(l)return!0}return!1}storeRow(n,a){let l=0,u=!1,h=!1;for(;l<this.rows.length;){let g=this.rows[l];if(g.getRowNumber()>n){h=g.isEquivalent(this.pairs);break}u=g.isEquivalent(this.pairs),l++}h||u||be.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new dn(this.pairs,n,a)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,a){for(let l of a)if(l.getPairs().length!==n.length){for(let u of l.getPairs())for(let h of n)if(ni.equals(u,h))break}}static isPartialRow(n,a){for(let l of a){let u=!0;for(let h of n){let g=!1;for(let p of l.getPairs())if(h.equals(p)){g=!0;break}if(!g){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(n){let a=Wc.buildBitArray(n),u=pr(a).parseInformation(),h=n[0].getFinderPattern().getResultPoints(),g=n[n.length-1].getFinderPattern().getResultPoints(),p=[h[0],h[1],g[0],g[1]];return new De(u,null,null,p,Ae.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),a=n.getLeftChar(),l=n.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),h=2;for(let p=1;p<this.pairs.size();++p){let _=this.pairs.get(p);u+=_.getLeftChar().getChecksumPortion(),h++;let C=_.getRightChar();C!=null&&(u+=C.getChecksumPortion(),h++)}return u%=211,211*(h-4)+u==a.getValue()}static getNextSecondBar(n,a){let l;return n.get(a)?(l=n.getNextUnset(a),l=n.getNextSet(l)):(l=n.getNextSet(a),l=n.getNextUnset(l)),l}retrieveNextPair(n,a,l){let u=a.length%2==0;this.startFromEven&&(u=!u);let h,g=!0,p=-1;do this.findNextPair(n,a,p),h=this.parseFoundFinderPattern(n,l,u),h==null?p=be.getNextSecondBar(n,this.startEnd[0]):g=!1;while(g);let _=this.decodeDataCharacter(n,h,u,!0);if(!this.isEmptyPair(a)&&a[a.length-1].mustBeLast())throw new oe;let C;try{C=this.decodeDataCharacter(n,h,u,!1)}catch(S){C=null,this.verbose&&console.log(S)}return new ni(_,C,h,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,a,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let h=n.getSize(),g;l>=0?g=l:this.isEmptyPair(a)?g=0:g=a[a.length-1].getFinderPattern().getStartEnd()[1];let p=a.length%2!=0;this.startFromEven&&(p=!p);let _=!1;for(;g<h&&(_=!n.get(g),!!_);)g++;let C=0,S=g;for(let O=g;O<h;O++)if(n.get(O)!=_)u[C]++;else{if(C==3){if(p&&be.reverseCounters(u),be.isFinderPattern(u)){this.startEnd[0]=S,this.startEnd[1]=O;return}p&&be.reverseCounters(u),S+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,C--}else C++;u[C]=1,_=!_}throw new oe}static reverseCounters(n){let a=n.length;for(let l=0;l<a/2;++l){let u=n[l];n[l]=n[a-l-1],n[a-l-1]=u}}parseFoundFinderPattern(n,a,l){let u,h,g;if(l){let C=this.startEnd[0]-1;for(;C>=0&&!n.get(C);)C--;C++,u=this.startEnd[0]-C,h=C,g=this.startEnd[1]}else h=this.startEnd[0],g=n.getNextUnset(this.startEnd[1]+1),u=g-this.startEnd[1];let p=this.getDecodeFinderCounters();H.arraycopy(p,0,p,1,p.length-1),p[0]=u;let _;try{_=this.parseFinderValue(p,be.FINDER_PATTERNS)}catch{return null}return new bs(_,[h,g],h,g,a)}decodeDataCharacter(n,a,l,u){let h=this.getDataCharacterCounters();for(let jt=0;jt<h.length;jt++)h[jt]=0;if(u)be.recordPatternInReverse(n,a.getStartEnd()[0],h);else{be.recordPattern(n,a.getStartEnd()[1],h);for(let jt=0,kn=h.length-1;jt<kn;jt++,kn--){let ri=h[jt];h[jt]=h[kn],h[kn]=ri}}let g=17,p=ke.sum(new Int32Array(h))/g,_=(a.getStartEnd()[1]-a.getStartEnd()[0])/15;if(Math.abs(p-_)/_>.3)throw new oe;let C=this.getOddCounts(),S=this.getEvenCounts(),O=this.getOddRoundingErrors(),M=this.getEvenRoundingErrors();for(let jt=0;jt<h.length;jt++){let kn=1*h[jt]/p,ri=kn+.5;if(ri<1){if(kn<.3)throw new oe;ri=1}else if(ri>8){if(kn>8.7)throw new oe;ri=8}let Nr=jt/2;(jt&1)==0?(C[Nr]=ri,O[Nr]=kn-ri):(S[Nr]=ri,M[Nr]=kn-ri)}this.adjustOddEvenCounts(g);let j=4*a.getValue()+(l?0:2)+(u?0:1)-1,V=0,X=0;for(let jt=C.length-1;jt>=0;jt--){if(be.isNotA1left(a,l,u)){let kn=be.WEIGHTS[j][2*jt];X+=C[jt]*kn}V+=C[jt]}let ie=0;for(let jt=S.length-1;jt>=0;jt--)if(be.isNotA1left(a,l,u)){let kn=be.WEIGHTS[j][2*jt+1];ie+=S[jt]*kn}let ce=X+ie;if((V&1)!=0||V>13||V<4)throw new oe;let Se=(13-V)/2,Ce=be.SYMBOL_WIDEST[Se],ve=9-Ce,dt=Vi.getRSSvalue(C,Ce,!0),at=Vi.getRSSvalue(S,ve,!1),gn=be.EVEN_TOTAL_SUBSET[Se],pi=be.GSUM[Se],Yn=dt*gn+at+pi;return new ws(Yn,ce)}static isNotA1left(n,a,l){return!(n.getValue()==0&&a&&l)}adjustOddEvenCounts(n){let a=ke.sum(new Int32Array(this.getOddCounts())),l=ke.sum(new Int32Array(this.getEvenCounts())),u=!1,h=!1;a>13?h=!0:a<4&&(u=!0);let g=!1,p=!1;l>13?p=!0:l<4&&(g=!0);let _=a+l-n,C=(a&1)==1,S=(l&1)==0;if(_==1)if(C){if(S)throw new oe;h=!0}else{if(!S)throw new oe;p=!0}else if(_==-1)if(C){if(S)throw new oe;u=!0}else{if(!S)throw new oe;g=!0}else if(_==0){if(C){if(!S)throw new oe;a<l?(u=!0,p=!0):(h=!0,g=!0)}else if(S)throw new oe}else throw new oe;if(u){if(h)throw new oe;be.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&be.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(p)throw new oe;be.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&be.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}be.SYMBOL_WIDEST=[7,5,4,3,1],be.EVEN_TOTAL_SUBSET=[4,20,52,104,204],be.GSUM=[0,348,1388,2948,3988],be.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],be.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],be.FINDER_PAT_A=0,be.FINDER_PAT_B=1,be.FINDER_PAT_C=2,be.FINDER_PAT_D=3,be.FINDER_PAT_E=4,be.FINDER_PAT_F=5,be.FINDER_PATTERN_SEQUENCES=[[be.FINDER_PAT_A,be.FINDER_PAT_A],[be.FINDER_PAT_A,be.FINDER_PAT_B,be.FINDER_PAT_B],[be.FINDER_PAT_A,be.FINDER_PAT_C,be.FINDER_PAT_B,be.FINDER_PAT_D],[be.FINDER_PAT_A,be.FINDER_PAT_E,be.FINDER_PAT_B,be.FINDER_PAT_D,be.FINDER_PAT_C],[be.FINDER_PAT_A,be.FINDER_PAT_E,be.FINDER_PAT_B,be.FINDER_PAT_D,be.FINDER_PAT_D,be.FINDER_PAT_F],[be.FINDER_PAT_A,be.FINDER_PAT_E,be.FINDER_PAT_B,be.FINDER_PAT_D,be.FINDER_PAT_E,be.FINDER_PAT_F,be.FINDER_PAT_F],[be.FINDER_PAT_A,be.FINDER_PAT_A,be.FINDER_PAT_B,be.FINDER_PAT_B,be.FINDER_PAT_C,be.FINDER_PAT_C,be.FINDER_PAT_D,be.FINDER_PAT_D],[be.FINDER_PAT_A,be.FINDER_PAT_A,be.FINDER_PAT_B,be.FINDER_PAT_B,be.FINDER_PAT_C,be.FINDER_PAT_C,be.FINDER_PAT_D,be.FINDER_PAT_E,be.FINDER_PAT_E],[be.FINDER_PAT_A,be.FINDER_PAT_A,be.FINDER_PAT_B,be.FINDER_PAT_B,be.FINDER_PAT_C,be.FINDER_PAT_C,be.FINDER_PAT_D,be.FINDER_PAT_E,be.FINDER_PAT_F,be.FINDER_PAT_F],[be.FINDER_PAT_A,be.FINDER_PAT_A,be.FINDER_PAT_B,be.FINDER_PAT_B,be.FINDER_PAT_C,be.FINDER_PAT_D,be.FINDER_PAT_D,be.FINDER_PAT_E,be.FINDER_PAT_E,be.FINDER_PAT_F,be.FINDER_PAT_F]],be.MAX_PAIRS=11;class Zc extends ws{constructor(n,a,l){super(n,a),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Bt extends Dn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,a,l){const u=this.decodePair(a,!1,n,l);Bt.addOrTally(this.possibleLeftPairs,u),a.reverse();let h=this.decodePair(a,!0,n,l);Bt.addOrTally(this.possibleRightPairs,h),a.reverse();for(let g of this.possibleLeftPairs)if(g.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Bt.checkChecksum(g,p))return Bt.constructResult(g,p)}throw new oe}static addOrTally(n,a){if(a==null)return;let l=!1;for(let u of n)if(u.getValue()===a.getValue()){u.incrementCount(),l=!0;break}l||n.push(a)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,a){let l=4537077*n.getValue()+a.getValue(),u=new String(l).toString(),h=new ge;for(let C=13-u.length;C>0;C--)h.append("0");h.append(u);let g=0;for(let C=0;C<13;C++){let S=h.charAt(C).charCodeAt(0)-48;g+=(C&1)===0?3*S:S}g=10-g%10,g===10&&(g=0),h.append(g.toString());let p=n.getFinderPattern().getResultPoints(),_=a.getFinderPattern().getResultPoints();return new De(h.toString(),null,0,[p[0],p[1],_[0],_[1]],Ae.RSS_14,new Date().getTime())}static checkChecksum(n,a){let l=(n.getChecksumPortion()+16*a.getChecksumPortion())%79,u=9*n.getFinderPattern().getValue()+a.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(n,a,l,u){try{let h=this.findFinderPattern(n,a),g=this.parseFoundFinderPattern(n,l,a,h),p=u==null?null:u.get(U.NEED_RESULT_POINT_CALLBACK);if(p!=null){let S=(h[0]+h[1])/2;a&&(S=n.getSize()-1-S),p.foundPossibleResultPoint(new Be(S,l))}let _=this.decodeDataCharacter(n,g,!0),C=this.decodeDataCharacter(n,g,!1);return new Zc(1597*_.getValue()+C.getValue(),_.getChecksumPortion()+4*C.getChecksumPortion(),g)}catch{return null}}decodeDataCharacter(n,a,l){let u=this.getDataCharacterCounters();for(let ie=0;ie<u.length;ie++)u[ie]=0;if(l)en.recordPatternInReverse(n,a.getStartEnd()[0],u);else{en.recordPattern(n,a.getStartEnd()[1]+1,u);for(let ie=0,ce=u.length-1;ie<ce;ie++,ce--){let Se=u[ie];u[ie]=u[ce],u[ce]=Se}}let h=l?16:15,g=ke.sum(new Int32Array(u))/h,p=this.getOddCounts(),_=this.getEvenCounts(),C=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let ie=0;ie<u.length;ie++){let ce=u[ie]/g,Se=Math.floor(ce+.5);Se<1?Se=1:Se>8&&(Se=8);let Ce=Math.floor(ie/2);(ie&1)===0?(p[Ce]=Se,C[Ce]=ce-Se):(_[Ce]=Se,S[Ce]=ce-Se)}this.adjustOddEvenCounts(l,h);let O=0,M=0;for(let ie=p.length-1;ie>=0;ie--)M*=9,M+=p[ie],O+=p[ie];let j=0,V=0;for(let ie=_.length-1;ie>=0;ie--)j*=9,j+=_[ie],V+=_[ie];let X=M+3*j;if(l){if((O&1)!==0||O>12||O<4)throw new oe;let ie=(12-O)/2,ce=Bt.OUTSIDE_ODD_WIDEST[ie],Se=9-ce,Ce=Vi.getRSSvalue(p,ce,!1),ve=Vi.getRSSvalue(_,Se,!0),dt=Bt.OUTSIDE_EVEN_TOTAL_SUBSET[ie],at=Bt.OUTSIDE_GSUM[ie];return new ws(Ce*dt+ve+at,X)}else{if((V&1)!==0||V>10||V<4)throw new oe;let ie=(10-V)/2,ce=Bt.INSIDE_ODD_WIDEST[ie],Se=9-ce,Ce=Vi.getRSSvalue(p,ce,!0),ve=Vi.getRSSvalue(_,Se,!1),dt=Bt.INSIDE_ODD_TOTAL_SUBSET[ie],at=Bt.INSIDE_GSUM[ie];return new ws(ve*dt+Ce+at,X)}}findFinderPattern(n,a){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=n.getSize(),h=!1,g=0;for(;g<u&&(h=!n.get(g),a!==h);)g++;let p=0,_=g;for(let C=g;C<u;C++)if(n.get(C)!==h)l[p]++;else{if(p===3){if(Dn.isFinderPattern(l))return[_,C];_+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,p--}else p++;l[p]=1,h=!h}throw new oe}parseFoundFinderPattern(n,a,l,u){let h=n.get(u[0]),g=u[0]-1;for(;g>=0&&h!==n.get(g);)g--;g++;const p=u[0]-g,_=this.getDecodeFinderCounters(),C=new Int32Array(_.length);H.arraycopy(_,0,C,1,_.length-1),C[0]=p;const S=this.parseFinderValue(C,Bt.FINDER_PATTERNS);let O=g,M=u[1];return l&&(O=n.getSize()-1-O,M=n.getSize()-1-M),new bs(S,[g,u[1]],O,M,a)}adjustOddEvenCounts(n,a){let l=ke.sum(new Int32Array(this.getOddCounts())),u=ke.sum(new Int32Array(this.getEvenCounts())),h=!1,g=!1,p=!1,_=!1;n?(l>12?g=!0:l<4&&(h=!0),u>12?_=!0:u<4&&(p=!0)):(l>11?g=!0:l<5&&(h=!0),u>10?_=!0:u<4&&(p=!0));let C=l+u-a,S=(l&1)===(n?1:0),O=(u&1)===1;if(C===1)if(S){if(O)throw new oe;g=!0}else{if(!O)throw new oe;_=!0}else if(C===-1)if(S){if(O)throw new oe;h=!0}else{if(!O)throw new oe;p=!0}else if(C===0){if(S){if(!O)throw new oe;l<u?(h=!0,_=!0):(g=!0,p=!0)}else if(O)throw new oe}else throw new oe;if(h){if(g)throw new oe;Dn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&Dn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(_)throw new oe;Dn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&Dn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Bt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Bt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Bt.OUTSIDE_GSUM=[0,161,961,2015,2715],Bt.INSIDE_GSUM=[0,336,1036,1516],Bt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Bt.INSIDE_ODD_WIDEST=[2,4,6,8],Bt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ni extends en{constructor(n,a){super(),this.readers=[],this.verbose=a===!0;const l=n?n.get(U.POSSIBLE_FORMATS):null,u=n&&n.get(U.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(Ae.EAN_13)||l.includes(Ae.UPC_A)||l.includes(Ae.EAN_8)||l.includes(Ae.UPC_E))&&this.readers.push(new gl(n)),l.includes(Ae.CODE_39)&&this.readers.push(new Vt(u)),l.includes(Ae.CODE_128)&&this.readers.push(new Te),l.includes(Ae.ITF)&&this.readers.push(new ut),l.includes(Ae.RSS_14)&&this.readers.push(new Bt),l.includes(Ae.RSS_EXPANDED)&&this.readers.push(new be(this.verbose))):(this.readers.push(new gl(n)),this.readers.push(new Vt),this.readers.push(new gl(n)),this.readers.push(new Te),this.readers.push(new ut),this.readers.push(new Bt),this.readers.push(new be(this.verbose)))}decodeRow(n,a,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(n,a,l)}catch{}throw new oe}reset(){this.readers.forEach(n=>n.reset())}}class uh extends Re{constructor(n=500,a){super(new Ni(a),n,a)}}class Nt{constructor(n,a,l){this.ecCodewords=n,this.ecBlocks=[a],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Tt{constructor(n,a){this.count=n,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class pt{constructor(n,a,l,u,h,g){this.versionNumber=n,this.symbolSizeRows=a,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=h,this.ecBlocks=g;let p=0;const _=g.getECCodewords(),C=g.getECBlocks();for(let S of C)p+=S.getCount()*(S.getDataCodewords()+_);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,a){if((n&1)!==0||(a&1)!==0)throw new k;for(let l of pt.VERSIONS)if(l.symbolSizeRows===n&&l.symbolSizeColumns===a)return l;throw new k}toString(){return""+this.versionNumber}static buildVersions(){return[new pt(1,10,10,8,8,new Nt(5,new Tt(1,3))),new pt(2,12,12,10,10,new Nt(7,new Tt(1,5))),new pt(3,14,14,12,12,new Nt(10,new Tt(1,8))),new pt(4,16,16,14,14,new Nt(12,new Tt(1,12))),new pt(5,18,18,16,16,new Nt(14,new Tt(1,18))),new pt(6,20,20,18,18,new Nt(18,new Tt(1,22))),new pt(7,22,22,20,20,new Nt(20,new Tt(1,30))),new pt(8,24,24,22,22,new Nt(24,new Tt(1,36))),new pt(9,26,26,24,24,new Nt(28,new Tt(1,44))),new pt(10,32,32,14,14,new Nt(36,new Tt(1,62))),new pt(11,36,36,16,16,new Nt(42,new Tt(1,86))),new pt(12,40,40,18,18,new Nt(48,new Tt(1,114))),new pt(13,44,44,20,20,new Nt(56,new Tt(1,144))),new pt(14,48,48,22,22,new Nt(68,new Tt(1,174))),new pt(15,52,52,24,24,new Nt(42,new Tt(2,102))),new pt(16,64,64,14,14,new Nt(56,new Tt(2,140))),new pt(17,72,72,16,16,new Nt(36,new Tt(4,92))),new pt(18,80,80,18,18,new Nt(48,new Tt(4,114))),new pt(19,88,88,20,20,new Nt(56,new Tt(4,144))),new pt(20,96,96,22,22,new Nt(68,new Tt(4,174))),new pt(21,104,104,24,24,new Nt(56,new Tt(6,136))),new pt(22,120,120,18,18,new Nt(68,new Tt(6,175))),new pt(23,132,132,20,20,new Nt(62,new Tt(8,163))),new pt(24,144,144,22,22,new Nt(62,new Tt(8,156),new Tt(2,155))),new pt(25,8,18,6,16,new Nt(7,new Tt(1,5))),new pt(26,8,32,6,14,new Nt(11,new Tt(1,10))),new pt(27,12,26,10,24,new Nt(14,new Tt(1,16))),new pt(28,12,36,10,16,new Nt(18,new Tt(1,22))),new pt(29,16,36,14,16,new Nt(24,new Tt(1,32))),new pt(30,16,48,14,22,new Nt(28,new Tt(1,49)))]}}pt.VERSIONS=pt.buildVersions();class xr{constructor(n){const a=n.getHeight();if(a<8||a>144||(a&1)!==0)throw new k;this.version=xr.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new Ie(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const a=n.getHeight(),l=n.getWidth();return pt.getVersionForDimensions(a,l)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let a=0,l=4,u=0;const h=this.mappingBitMatrix.getHeight(),g=this.mappingBitMatrix.getWidth();let p=!1,_=!1,C=!1,S=!1;do if(l===h&&u===0&&!p)n[a++]=this.readCorner1(h,g)&255,l-=2,u+=2,p=!0;else if(l===h-2&&u===0&&(g&3)!==0&&!_)n[a++]=this.readCorner2(h,g)&255,l-=2,u+=2,_=!0;else if(l===h+4&&u===2&&(g&7)===0&&!C)n[a++]=this.readCorner3(h,g)&255,l-=2,u+=2,C=!0;else if(l===h-2&&u===0&&(g&7)===4&&!S)n[a++]=this.readCorner4(h,g)&255,l-=2,u+=2,S=!0;else{do l<h&&u>=0&&!this.readMappingMatrix.get(u,l)&&(n[a++]=this.readUtah(l,u,h,g)&255),l-=2,u+=2;while(l>=0&&u<g);l+=1,u+=3;do l>=0&&u<g&&!this.readMappingMatrix.get(u,l)&&(n[a++]=this.readUtah(l,u,h,g)&255),l+=2,u-=2;while(l<h&&u>=0);l+=3,u+=1}while(l<h||u<g);if(a!==this.version.getTotalCodewords())throw new k;return n}readModule(n,a,l,u){return n<0&&(n+=l,a+=4-(l+4&7)),a<0&&(a+=u,n+=4-(u+4&7)),this.readMappingMatrix.set(a,n),this.mappingBitMatrix.get(a,n)}readUtah(n,a,l,u){let h=0;return this.readModule(n-2,a-2,l,u)&&(h|=1),h<<=1,this.readModule(n-2,a-1,l,u)&&(h|=1),h<<=1,this.readModule(n-1,a-2,l,u)&&(h|=1),h<<=1,this.readModule(n-1,a-1,l,u)&&(h|=1),h<<=1,this.readModule(n-1,a,l,u)&&(h|=1),h<<=1,this.readModule(n,a-2,l,u)&&(h|=1),h<<=1,this.readModule(n,a-1,l,u)&&(h|=1),h<<=1,this.readModule(n,a,l,u)&&(h|=1),h}readCorner1(n,a){let l=0;return this.readModule(n-1,0,n,a)&&(l|=1),l<<=1,this.readModule(n-1,1,n,a)&&(l|=1),l<<=1,this.readModule(n-1,2,n,a)&&(l|=1),l<<=1,this.readModule(0,a-2,n,a)&&(l|=1),l<<=1,this.readModule(0,a-1,n,a)&&(l|=1),l<<=1,this.readModule(1,a-1,n,a)&&(l|=1),l<<=1,this.readModule(2,a-1,n,a)&&(l|=1),l<<=1,this.readModule(3,a-1,n,a)&&(l|=1),l}readCorner2(n,a){let l=0;return this.readModule(n-3,0,n,a)&&(l|=1),l<<=1,this.readModule(n-2,0,n,a)&&(l|=1),l<<=1,this.readModule(n-1,0,n,a)&&(l|=1),l<<=1,this.readModule(0,a-4,n,a)&&(l|=1),l<<=1,this.readModule(0,a-3,n,a)&&(l|=1),l<<=1,this.readModule(0,a-2,n,a)&&(l|=1),l<<=1,this.readModule(0,a-1,n,a)&&(l|=1),l<<=1,this.readModule(1,a-1,n,a)&&(l|=1),l}readCorner3(n,a){let l=0;return this.readModule(n-1,0,n,a)&&(l|=1),l<<=1,this.readModule(n-1,a-1,n,a)&&(l|=1),l<<=1,this.readModule(0,a-3,n,a)&&(l|=1),l<<=1,this.readModule(0,a-2,n,a)&&(l|=1),l<<=1,this.readModule(0,a-1,n,a)&&(l|=1),l<<=1,this.readModule(1,a-3,n,a)&&(l|=1),l<<=1,this.readModule(1,a-2,n,a)&&(l|=1),l<<=1,this.readModule(1,a-1,n,a)&&(l|=1),l}readCorner4(n,a){let l=0;return this.readModule(n-3,0,n,a)&&(l|=1),l<<=1,this.readModule(n-2,0,n,a)&&(l|=1),l<<=1,this.readModule(n-1,0,n,a)&&(l|=1),l<<=1,this.readModule(0,a-2,n,a)&&(l|=1),l<<=1,this.readModule(0,a-1,n,a)&&(l|=1),l<<=1,this.readModule(1,a-1,n,a)&&(l|=1),l<<=1,this.readModule(2,a-1,n,a)&&(l|=1),l<<=1,this.readModule(3,a-1,n,a)&&(l|=1),l}extractDataRegion(n){const a=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(n.getHeight()!==a)throw new N("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),h=this.version.getDataRegionSizeColumns(),g=a/u|0,p=l/h|0,_=g*u,C=p*h,S=new Ie(C,_);for(let O=0;O<g;++O){const M=O*u;for(let j=0;j<p;++j){const V=j*h;for(let X=0;X<u;++X){const ie=O*(u+2)+1+X,ce=M+X;for(let Se=0;Se<h;++Se){const Ce=j*(h+2)+1+Se;if(n.get(Ce,ie)){const ve=V+Se;S.set(ve,ce)}}}}}return S}}class yr{constructor(n,a){this.numDataCodewords=n,this.codewords=a}static getDataBlocks(n,a){const l=a.getECBlocks();let u=0;const h=l.getECBlocks();for(let X of h)u+=X.getCount();const g=new Array(u);let p=0;for(let X of h)for(let ie=0;ie<X.getCount();ie++){const ce=X.getDataCodewords(),Se=l.getECCodewords()+ce;g[p++]=new yr(ce,new Uint8Array(Se))}const C=g[0].codewords.length-l.getECCodewords(),S=C-1;let O=0;for(let X=0;X<S;X++)for(let ie=0;ie<p;ie++)g[ie].codewords[X]=n[O++];const M=a.getVersionNumber()===24,j=M?8:p;for(let X=0;X<j;X++)g[X].codewords[C-1]=n[O++];const V=g[0].codewords.length;for(let X=C;X<V;X++)for(let ie=0;ie<p;ie++){const ce=M?(ie+8)%p:ie,Se=M&&ce>7?X-1:X;g[ce].codewords[Se]=n[O++]}if(O!==n.length)throw new N;return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ii{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new N(""+n);let a=0,l=this.bitOffset,u=this.byteOffset;const h=this.bytes;if(l>0){const g=8-l,p=n<g?n:g,_=g-p,C=255>>8-p<<_;a=(h[u]&C)>>_,n-=p,l+=p,l===8&&(l=0,u++)}if(n>0){for(;n>=8;)a=a<<8|h[u]&255,u++,n-=8;if(n>0){const g=8-n,p=255>>g<<g;a=a<<n|(h[u]&p)>>g,l+=n}}return this.bitOffset=l,this.byteOffset=u,a}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var It;(function(R){R[R.PAD_ENCODE=0]="PAD_ENCODE",R[R.ASCII_ENCODE=1]="ASCII_ENCODE",R[R.C40_ENCODE=2]="C40_ENCODE",R[R.TEXT_ENCODE=3]="TEXT_ENCODE",R[R.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",R[R.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",R[R.BASE256_ENCODE=6]="BASE256_ENCODE"})(It||(It={}));class is{static decode(n){const a=new Ii(n),l=new ge,u=new ge,h=new Array;let g=It.ASCII_ENCODE;do if(g===It.ASCII_ENCODE)g=this.decodeAsciiSegment(a,l,u);else{switch(g){case It.C40_ENCODE:this.decodeC40Segment(a,l);break;case It.TEXT_ENCODE:this.decodeTextSegment(a,l);break;case It.ANSIX12_ENCODE:this.decodeAnsiX12Segment(a,l);break;case It.EDIFACT_ENCODE:this.decodeEdifactSegment(a,l);break;case It.BASE256_ENCODE:this.decodeBase256Segment(a,l,h);break;default:throw new k}g=It.ASCII_ENCODE}while(g!==It.PAD_ENCODE&&a.available()>0);return u.length()>0&&l.append(u.toString()),new wt(n,l.toString(),h.length===0?null:h,null)}static decodeAsciiSegment(n,a,l){let u=!1;do{let h=n.readBits(8);if(h===0)throw new k;if(h<=128)return u&&(h+=128),a.append(String.fromCharCode(h-1)),It.ASCII_ENCODE;if(h===129)return It.PAD_ENCODE;if(h<=229){const g=h-130;g<10&&a.append("0"),a.append(""+g)}else switch(h){case 230:return It.C40_ENCODE;case 231:return It.BASE256_ENCODE;case 232:a.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:a.append("[)>05"),l.insert(0,"");break;case 237:a.append("[)>06"),l.insert(0,"");break;case 238:return It.ANSIX12_ENCODE;case 239:return It.TEXT_ENCODE;case 240:return It.EDIFACT_ENCODE;case 241:break;default:if(h!==254||n.available()!==0)throw new k;break}}while(n.available()>0);return It.ASCII_ENCODE}static decodeC40Segment(n,a){let l=!1;const u=[];let h=0;do{if(n.available()===8)return;const g=n.readBits(8);if(g===254)return;this.parseTwoBytes(g,n.readBits(8),u);for(let p=0;p<3;p++){const _=u[p];switch(h){case 0:if(_<3)h=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const C=this.C40_BASIC_SET_CHARS[_];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else throw new k;break;case 1:l?(a.append(String.fromCharCode(_+128)),l=!1):a.append(String.fromCharCode(_)),h=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const C=this.C40_SHIFT2_SET_CHARS[_];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else switch(_){case 27:a.append("");break;case 30:l=!0;break;default:throw new k}h=0;break;case 3:l?(a.append(String.fromCharCode(_+224)),l=!1):a.append(String.fromCharCode(_+96)),h=0;break;default:throw new k}}}while(n.available()>0)}static decodeTextSegment(n,a){let l=!1,u=[],h=0;do{if(n.available()===8)return;const g=n.readBits(8);if(g===254)return;this.parseTwoBytes(g,n.readBits(8),u);for(let p=0;p<3;p++){const _=u[p];switch(h){case 0:if(_<3)h=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const C=this.TEXT_BASIC_SET_CHARS[_];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else throw new k;break;case 1:l?(a.append(String.fromCharCode(_+128)),l=!1):a.append(String.fromCharCode(_)),h=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const C=this.TEXT_SHIFT2_SET_CHARS[_];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C)}else switch(_){case 27:a.append("");break;case 30:l=!0;break;default:throw new k}h=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const C=this.TEXT_SHIFT3_SET_CHARS[_];l?(a.append(String.fromCharCode(C.charCodeAt(0)+128)),l=!1):a.append(C),h=0}else throw new k;break;default:throw new k}}}while(n.available()>0)}static decodeAnsiX12Segment(n,a){const l=[];do{if(n.available()===8)return;const u=n.readBits(8);if(u===254)return;this.parseTwoBytes(u,n.readBits(8),l);for(let h=0;h<3;h++){const g=l[h];switch(g){case 0:a.append("\r");break;case 1:a.append("*");break;case 2:a.append(">");break;case 3:a.append(" ");break;default:if(g<14)a.append(String.fromCharCode(g+44));else if(g<40)a.append(String.fromCharCode(g+51));else throw new k;break}}}while(n.available()>0)}static parseTwoBytes(n,a,l){let u=(n<<8)+a-1,h=Math.floor(u/1600);l[0]=h,u-=h*1600,h=Math.floor(u/40),l[1]=h,l[2]=u-h*40}static decodeEdifactSegment(n,a){do{if(n.available()<=16)return;for(let l=0;l<4;l++){let u=n.readBits(6);if(u===31){const h=8-n.getBitOffset();h!==8&&n.readBits(h);return}(u&32)===0&&(u|=64),a.append(String.fromCharCode(u))}}while(n.available()>0)}static decodeBase256Segment(n,a,l){let u=1+n.getByteOffset();const h=this.unrandomize255State(n.readBits(8),u++);let g;if(h===0?g=n.available()/8|0:h<250?g=h:g=250*(h-249)+this.unrandomize255State(n.readBits(8),u++),g<0)throw new k;const p=new Uint8Array(g);for(let _=0;_<g;_++){if(n.available()<8)throw new k;p[_]=this.unrandomize255State(n.readBits(8),u++)}l.push(p);try{a.append(we.decode(p,ne.ISO88591))}catch(_){throw new Le("Platform does not support required encoding: "+_.message)}}static unrandomize255State(n,a){const l=149*a%255+1,u=n-l;return u>=0?u:u+256}}is.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],is.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],is.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],is.TEXT_SHIFT2_SET_CHARS=is.C40_SHIFT2_SET_CHARS,is.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class fh{constructor(){this.rsDecoder=new Ye(pe.DATA_MATRIX_FIELD_256)}decode(n){const a=new xr(n),l=a.getVersion(),u=a.readCodewords(),h=yr.getDataBlocks(u,l);let g=0;for(let C of h)g+=C.getNumDataCodewords();const p=new Uint8Array(g),_=h.length;for(let C=0;C<_;C++){const S=h[C],O=S.getCodewords(),M=S.getNumDataCodewords();this.correctErrors(O,M);for(let j=0;j<M;j++)p[j*_+C]=O[j]}return is.decode(p)}correctErrors(n,a){const l=new Int32Array(n);try{this.rsDecoder.decode(l,n.length-a)}catch{throw new P}for(let u=0;u<a;u++)n[u]=l[u]}}class nn{constructor(n){this.image=n,this.rectangleDetector=new Wt(this.image)}detect(){const n=this.rectangleDetector.detect();let a=this.detectSolid1(n);if(a=this.detectSolid2(a),a[3]=this.correctTopRight(a),!a[3])throw new oe;a=this.shiftToModuleCenter(a);const l=a[0],u=a[1],h=a[2],g=a[3];let p=this.transitionsBetween(l,g)+1,_=this.transitionsBetween(h,g)+1;(p&1)===1&&(p+=1),(_&1)===1&&(_+=1),4*p<7*_&&4*_<7*p&&(p=_=Math.max(p,_));let C=nn.sampleGrid(this.image,l,u,h,g,p,_);return new zi(C,[l,u,h,g])}static shiftPoint(n,a,l){let u=(a.getX()-n.getX())/(l+1),h=(a.getY()-n.getY())/(l+1);return new Be(n.getX()+u,n.getY()+h)}static moveAway(n,a,l){let u=n.getX(),h=n.getY();return u<a?u-=1:u+=1,h<l?h-=1:h+=1,new Be(u,h)}detectSolid1(n){let a=n[0],l=n[1],u=n[3],h=n[2],g=this.transitionsBetween(a,l),p=this.transitionsBetween(l,u),_=this.transitionsBetween(u,h),C=this.transitionsBetween(h,a),S=g,O=[h,a,l,u];return S>p&&(S=p,O[0]=a,O[1]=l,O[2]=u,O[3]=h),S>_&&(S=_,O[0]=l,O[1]=u,O[2]=h,O[3]=a),S>C&&(O[0]=u,O[1]=h,O[2]=a,O[3]=l),O}detectSolid2(n){let a=n[0],l=n[1],u=n[2],h=n[3],g=this.transitionsBetween(a,h),p=nn.shiftPoint(l,u,(g+1)*4),_=nn.shiftPoint(u,l,(g+1)*4),C=this.transitionsBetween(p,a),S=this.transitionsBetween(_,h);return C<S?(n[0]=a,n[1]=l,n[2]=u,n[3]=h):(n[0]=l,n[1]=u,n[2]=h,n[3]=a),n}correctTopRight(n){let a=n[0],l=n[1],u=n[2],h=n[3],g=this.transitionsBetween(a,h),p=this.transitionsBetween(l,h),_=nn.shiftPoint(a,l,(p+1)*4),C=nn.shiftPoint(u,l,(g+1)*4);g=this.transitionsBetween(_,h),p=this.transitionsBetween(C,h);let S=new Be(h.getX()+(u.getX()-l.getX())/(g+1),h.getY()+(u.getY()-l.getY())/(g+1)),O=new Be(h.getX()+(a.getX()-l.getX())/(p+1),h.getY()+(a.getY()-l.getY())/(p+1));if(!this.isValid(S))return this.isValid(O)?O:null;if(!this.isValid(O))return S;let M=this.transitionsBetween(_,S)+this.transitionsBetween(C,S),j=this.transitionsBetween(_,O)+this.transitionsBetween(C,O);return M>j?S:O}shiftToModuleCenter(n){let a=n[0],l=n[1],u=n[2],h=n[3],g=this.transitionsBetween(a,h)+1,p=this.transitionsBetween(u,h)+1,_=nn.shiftPoint(a,l,p*4),C=nn.shiftPoint(u,l,g*4);g=this.transitionsBetween(_,h)+1,p=this.transitionsBetween(C,h)+1,(g&1)===1&&(g+=1),(p&1)===1&&(p+=1);let S=(a.getX()+l.getX()+u.getX()+h.getX())/4,O=(a.getY()+l.getY()+u.getY()+h.getY())/4;a=nn.moveAway(a,S,O),l=nn.moveAway(l,S,O),u=nn.moveAway(u,S,O),h=nn.moveAway(h,S,O);let M,j;return _=nn.shiftPoint(a,l,p*4),_=nn.shiftPoint(_,h,g*4),M=nn.shiftPoint(l,a,p*4),M=nn.shiftPoint(M,u,g*4),C=nn.shiftPoint(u,h,p*4),C=nn.shiftPoint(C,l,g*4),j=nn.shiftPoint(h,u,p*4),j=nn.shiftPoint(j,a,g*4),[_,M,C,j]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,a,l,u,h,g,p){return Si.getInstance().sampleGrid(n,g,p,.5,.5,g-.5,.5,g-.5,p-.5,.5,p-.5,a.getX(),a.getY(),h.getX(),h.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(n,a){let l=Math.trunc(n.getX()),u=Math.trunc(n.getY()),h=Math.trunc(a.getX()),g=Math.trunc(a.getY()),p=Math.abs(g-u)>Math.abs(h-l);if(p){let X=l;l=u,u=X,X=h,h=g,g=X}let _=Math.abs(h-l),C=Math.abs(g-u),S=-_/2,O=u<g?1:-1,M=l<h?1:-1,j=0,V=this.image.get(p?u:l,p?l:u);for(let X=l,ie=u;X!==h;X+=M){let ce=this.image.get(p?ie:X,p?X:ie);if(ce!==V&&(j++,V=ce),S+=C,S>0){if(ie===g)break;ie+=O,S-=_}}return j}}class ss{constructor(){this.decoder=new fh}decode(n,a=null){let l,u;if(a!=null&&a.has(U.PURE_BARCODE)){const C=ss.extractPureBits(n.getBlackMatrix());l=this.decoder.decode(C),u=ss.NO_POINTS}else{const C=new nn(n.getBlackMatrix()).detect();l=this.decoder.decode(C.getBits()),u=C.getPoints()}const h=l.getRawBytes(),g=new De(l.getText(),h,8*h.length,u,Ae.DATA_MATRIX,H.currentTimeMillis()),p=l.getByteSegments();p!=null&&g.putMetadata(it.BYTE_SEGMENTS,p);const _=l.getECLevel();return _!=null&&g.putMetadata(it.ERROR_CORRECTION_LEVEL,_),g}reset(){}static extractPureBits(n){const a=n.getTopLeftOnBit(),l=n.getBottomRightOnBit();if(a==null||l==null)throw new oe;const u=this.moduleSize(a,n);let h=a[1];const g=l[1];let p=a[0];const C=(l[0]-p+1)/u,S=(g-h+1)/u;if(C<=0||S<=0)throw new oe;const O=u/2;h+=O,p+=O;const M=new Ie(C,S);for(let j=0;j<S;j++){const V=h+j*u;for(let X=0;X<C;X++)n.get(p+X*u,V)&&M.set(X,j)}return M}static moduleSize(n,a){const l=a.getWidth();let u=n[0];const h=n[1];for(;u<l&&a.get(u,h);)u++;if(u===l)throw new oe;const g=u-n[0];if(g===0)throw new oe;return g}}ss.NO_POINTS=[];class oo extends Re{constructor(n=500){super(new ss,n)}}var _r;(function(R){R[R.L=0]="L",R[R.M=1]="M",R[R.Q=2]="Q",R[R.H=3]="H"})(_r||(_r={}));class gt{constructor(n,a,l){this.value=n,this.stringValue=a,this.bits=l,gt.FOR_BITS.set(l,this),gt.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return gt.L;case"M":return gt.M;case"Q":return gt.Q;case"H":return gt.H;default:throw new T(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof gt))return!1;const a=n;return this.value===a.value}static forBits(n){if(n<0||n>=gt.FOR_BITS.size)throw new N;return gt.FOR_BITS.get(n)}}gt.FOR_BITS=new Map,gt.FOR_VALUE=new Map,gt.L=new gt(_r.L,"L",1),gt.M=new gt(_r.M,"M",0),gt.Q=new gt(_r.Q,"Q",3),gt.H=new gt(_r.H,"H",2);class An{constructor(n){this.errorCorrectionLevel=gt.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,a){return F.bitCount(n^a)}static decodeFormatInformation(n,a){const l=An.doDecodeFormatInformation(n,a);return l!==null?l:An.doDecodeFormatInformation(n^An.FORMAT_INFO_MASK_QR,a^An.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,a){let l=Number.MAX_SAFE_INTEGER,u=0;for(const h of An.FORMAT_INFO_DECODE_LOOKUP){const g=h[0];if(g===n||g===a)return new An(h[1]);let p=An.numBitsDiffering(n,g);p<l&&(u=h[1],l=p),n!==a&&(p=An.numBitsDiffering(a,g),p<l&&(u=h[1],l=p))}return l<=3?new An(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof An))return!1;const a=n;return this.errorCorrectionLevel===a.errorCorrectionLevel&&this.dataMask===a.dataMask}}An.FORMAT_INFO_MASK_QR=21522,An.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class se{constructor(n,...a){this.ecCodewordsPerBlock=n,this.ecBlocks=a}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const a=this.ecBlocks;for(const l of a)n+=l.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class B{constructor(n,a){this.count=n,this.dataCodewords=a}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class He{constructor(n,a,...l){this.versionNumber=n,this.alignmentPatternCenters=a,this.ecBlocks=l;let u=0;const h=l[0].getECCodewordsPerBlock(),g=l[0].getECBlocks();for(const p of g)u+=p.getCount()*(p.getDataCodewords()+h);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new k;try{return this.getVersionForNumber((n-17)/4)}catch{throw new k}}static getVersionForNumber(n){if(n<1||n>40)throw new N;return He.VERSIONS[n-1]}static decodeVersionInformation(n){let a=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<He.VERSION_DECODE_INFO.length;u++){const h=He.VERSION_DECODE_INFO[u];if(h===n)return He.getVersionForNumber(u+7);const g=An.numBitsDiffering(n,h);g<a&&(l=u+7,a=g)}return a<=3?He.getVersionForNumber(l):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),a=new Ie(n);a.setRegion(0,0,9,9),a.setRegion(n-8,0,8,9),a.setRegion(0,n-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const h=this.alignmentPatternCenters[u]-2;for(let g=0;g<l;g++)u===0&&(g===0||g===l-1)||u===l-1&&g===0||a.setRegion(this.alignmentPatternCenters[g]-2,h,5,5)}return a.setRegion(6,9,1,n-17),a.setRegion(9,6,n-17,1),this.versionNumber>6&&(a.setRegion(n-11,0,3,6),a.setRegion(0,n-11,6,3)),a}toString(){return""+this.versionNumber}}He.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),He.VERSIONS=[new He(1,new Int32Array(0),new se(7,new B(1,19)),new se(10,new B(1,16)),new se(13,new B(1,13)),new se(17,new B(1,9))),new He(2,Int32Array.from([6,18]),new se(10,new B(1,34)),new se(16,new B(1,28)),new se(22,new B(1,22)),new se(28,new B(1,16))),new He(3,Int32Array.from([6,22]),new se(15,new B(1,55)),new se(26,new B(1,44)),new se(18,new B(2,17)),new se(22,new B(2,13))),new He(4,Int32Array.from([6,26]),new se(20,new B(1,80)),new se(18,new B(2,32)),new se(26,new B(2,24)),new se(16,new B(4,9))),new He(5,Int32Array.from([6,30]),new se(26,new B(1,108)),new se(24,new B(2,43)),new se(18,new B(2,15),new B(2,16)),new se(22,new B(2,11),new B(2,12))),new He(6,Int32Array.from([6,34]),new se(18,new B(2,68)),new se(16,new B(4,27)),new se(24,new B(4,19)),new se(28,new B(4,15))),new He(7,Int32Array.from([6,22,38]),new se(20,new B(2,78)),new se(18,new B(4,31)),new se(18,new B(2,14),new B(4,15)),new se(26,new B(4,13),new B(1,14))),new He(8,Int32Array.from([6,24,42]),new se(24,new B(2,97)),new se(22,new B(2,38),new B(2,39)),new se(22,new B(4,18),new B(2,19)),new se(26,new B(4,14),new B(2,15))),new He(9,Int32Array.from([6,26,46]),new se(30,new B(2,116)),new se(22,new B(3,36),new B(2,37)),new se(20,new B(4,16),new B(4,17)),new se(24,new B(4,12),new B(4,13))),new He(10,Int32Array.from([6,28,50]),new se(18,new B(2,68),new B(2,69)),new se(26,new B(4,43),new B(1,44)),new se(24,new B(6,19),new B(2,20)),new se(28,new B(6,15),new B(2,16))),new He(11,Int32Array.from([6,30,54]),new se(20,new B(4,81)),new se(30,new B(1,50),new B(4,51)),new se(28,new B(4,22),new B(4,23)),new se(24,new B(3,12),new B(8,13))),new He(12,Int32Array.from([6,32,58]),new se(24,new B(2,92),new B(2,93)),new se(22,new B(6,36),new B(2,37)),new se(26,new B(4,20),new B(6,21)),new se(28,new B(7,14),new B(4,15))),new He(13,Int32Array.from([6,34,62]),new se(26,new B(4,107)),new se(22,new B(8,37),new B(1,38)),new se(24,new B(8,20),new B(4,21)),new se(22,new B(12,11),new B(4,12))),new He(14,Int32Array.from([6,26,46,66]),new se(30,new B(3,115),new B(1,116)),new se(24,new B(4,40),new B(5,41)),new se(20,new B(11,16),new B(5,17)),new se(24,new B(11,12),new B(5,13))),new He(15,Int32Array.from([6,26,48,70]),new se(22,new B(5,87),new B(1,88)),new se(24,new B(5,41),new B(5,42)),new se(30,new B(5,24),new B(7,25)),new se(24,new B(11,12),new B(7,13))),new He(16,Int32Array.from([6,26,50,74]),new se(24,new B(5,98),new B(1,99)),new se(28,new B(7,45),new B(3,46)),new se(24,new B(15,19),new B(2,20)),new se(30,new B(3,15),new B(13,16))),new He(17,Int32Array.from([6,30,54,78]),new se(28,new B(1,107),new B(5,108)),new se(28,new B(10,46),new B(1,47)),new se(28,new B(1,22),new B(15,23)),new se(28,new B(2,14),new B(17,15))),new He(18,Int32Array.from([6,30,56,82]),new se(30,new B(5,120),new B(1,121)),new se(26,new B(9,43),new B(4,44)),new se(28,new B(17,22),new B(1,23)),new se(28,new B(2,14),new B(19,15))),new He(19,Int32Array.from([6,30,58,86]),new se(28,new B(3,113),new B(4,114)),new se(26,new B(3,44),new B(11,45)),new se(26,new B(17,21),new B(4,22)),new se(26,new B(9,13),new B(16,14))),new He(20,Int32Array.from([6,34,62,90]),new se(28,new B(3,107),new B(5,108)),new se(26,new B(3,41),new B(13,42)),new se(30,new B(15,24),new B(5,25)),new se(28,new B(15,15),new B(10,16))),new He(21,Int32Array.from([6,28,50,72,94]),new se(28,new B(4,116),new B(4,117)),new se(26,new B(17,42)),new se(28,new B(17,22),new B(6,23)),new se(30,new B(19,16),new B(6,17))),new He(22,Int32Array.from([6,26,50,74,98]),new se(28,new B(2,111),new B(7,112)),new se(28,new B(17,46)),new se(30,new B(7,24),new B(16,25)),new se(24,new B(34,13))),new He(23,Int32Array.from([6,30,54,78,102]),new se(30,new B(4,121),new B(5,122)),new se(28,new B(4,47),new B(14,48)),new se(30,new B(11,24),new B(14,25)),new se(30,new B(16,15),new B(14,16))),new He(24,Int32Array.from([6,28,54,80,106]),new se(30,new B(6,117),new B(4,118)),new se(28,new B(6,45),new B(14,46)),new se(30,new B(11,24),new B(16,25)),new se(30,new B(30,16),new B(2,17))),new He(25,Int32Array.from([6,32,58,84,110]),new se(26,new B(8,106),new B(4,107)),new se(28,new B(8,47),new B(13,48)),new se(30,new B(7,24),new B(22,25)),new se(30,new B(22,15),new B(13,16))),new He(26,Int32Array.from([6,30,58,86,114]),new se(28,new B(10,114),new B(2,115)),new se(28,new B(19,46),new B(4,47)),new se(28,new B(28,22),new B(6,23)),new se(30,new B(33,16),new B(4,17))),new He(27,Int32Array.from([6,34,62,90,118]),new se(30,new B(8,122),new B(4,123)),new se(28,new B(22,45),new B(3,46)),new se(30,new B(8,23),new B(26,24)),new se(30,new B(12,15),new B(28,16))),new He(28,Int32Array.from([6,26,50,74,98,122]),new se(30,new B(3,117),new B(10,118)),new se(28,new B(3,45),new B(23,46)),new se(30,new B(4,24),new B(31,25)),new se(30,new B(11,15),new B(31,16))),new He(29,Int32Array.from([6,30,54,78,102,126]),new se(30,new B(7,116),new B(7,117)),new se(28,new B(21,45),new B(7,46)),new se(30,new B(1,23),new B(37,24)),new se(30,new B(19,15),new B(26,16))),new He(30,Int32Array.from([6,26,52,78,104,130]),new se(30,new B(5,115),new B(10,116)),new se(28,new B(19,47),new B(10,48)),new se(30,new B(15,24),new B(25,25)),new se(30,new B(23,15),new B(25,16))),new He(31,Int32Array.from([6,30,56,82,108,134]),new se(30,new B(13,115),new B(3,116)),new se(28,new B(2,46),new B(29,47)),new se(30,new B(42,24),new B(1,25)),new se(30,new B(23,15),new B(28,16))),new He(32,Int32Array.from([6,34,60,86,112,138]),new se(30,new B(17,115)),new se(28,new B(10,46),new B(23,47)),new se(30,new B(10,24),new B(35,25)),new se(30,new B(19,15),new B(35,16))),new He(33,Int32Array.from([6,30,58,86,114,142]),new se(30,new B(17,115),new B(1,116)),new se(28,new B(14,46),new B(21,47)),new se(30,new B(29,24),new B(19,25)),new se(30,new B(11,15),new B(46,16))),new He(34,Int32Array.from([6,34,62,90,118,146]),new se(30,new B(13,115),new B(6,116)),new se(28,new B(14,46),new B(23,47)),new se(30,new B(44,24),new B(7,25)),new se(30,new B(59,16),new B(1,17))),new He(35,Int32Array.from([6,30,54,78,102,126,150]),new se(30,new B(12,121),new B(7,122)),new se(28,new B(12,47),new B(26,48)),new se(30,new B(39,24),new B(14,25)),new se(30,new B(22,15),new B(41,16))),new He(36,Int32Array.from([6,24,50,76,102,128,154]),new se(30,new B(6,121),new B(14,122)),new se(28,new B(6,47),new B(34,48)),new se(30,new B(46,24),new B(10,25)),new se(30,new B(2,15),new B(64,16))),new He(37,Int32Array.from([6,28,54,80,106,132,158]),new se(30,new B(17,122),new B(4,123)),new se(28,new B(29,46),new B(14,47)),new se(30,new B(49,24),new B(10,25)),new se(30,new B(24,15),new B(46,16))),new He(38,Int32Array.from([6,32,58,84,110,136,162]),new se(30,new B(4,122),new B(18,123)),new se(28,new B(13,46),new B(32,47)),new se(30,new B(48,24),new B(14,25)),new se(30,new B(42,15),new B(32,16))),new He(39,Int32Array.from([6,26,54,82,110,138,166]),new se(30,new B(20,117),new B(4,118)),new se(28,new B(40,47),new B(7,48)),new se(30,new B(43,24),new B(22,25)),new se(30,new B(10,15),new B(67,16))),new He(40,Int32Array.from([6,30,58,86,114,142,170]),new se(30,new B(19,118),new B(6,119)),new se(28,new B(18,47),new B(31,48)),new se(30,new B(34,24),new B(34,25)),new se(30,new B(20,15),new B(61,16)))];var bn;(function(R){R[R.DATA_MASK_000=0]="DATA_MASK_000",R[R.DATA_MASK_001=1]="DATA_MASK_001",R[R.DATA_MASK_010=2]="DATA_MASK_010",R[R.DATA_MASK_011=3]="DATA_MASK_011",R[R.DATA_MASK_100=4]="DATA_MASK_100",R[R.DATA_MASK_101=5]="DATA_MASK_101",R[R.DATA_MASK_110=6]="DATA_MASK_110",R[R.DATA_MASK_111=7]="DATA_MASK_111"})(bn||(bn={}));class ii{constructor(n,a){this.value=n,this.isMasked=a}unmaskBitMatrix(n,a){for(let l=0;l<a;l++)for(let u=0;u<a;u++)this.isMasked(l,u)&&n.flip(u,l)}}ii.values=new Map([[bn.DATA_MASK_000,new ii(bn.DATA_MASK_000,(R,n)=>(R+n&1)===0)],[bn.DATA_MASK_001,new ii(bn.DATA_MASK_001,(R,n)=>(R&1)===0)],[bn.DATA_MASK_010,new ii(bn.DATA_MASK_010,(R,n)=>n%3===0)],[bn.DATA_MASK_011,new ii(bn.DATA_MASK_011,(R,n)=>(R+n)%3===0)],[bn.DATA_MASK_100,new ii(bn.DATA_MASK_100,(R,n)=>(Math.floor(R/2)+Math.floor(n/3)&1)===0)],[bn.DATA_MASK_101,new ii(bn.DATA_MASK_101,(R,n)=>R*n%6===0)],[bn.DATA_MASK_110,new ii(bn.DATA_MASK_110,(R,n)=>R*n%6<3)],[bn.DATA_MASK_111,new ii(bn.DATA_MASK_111,(R,n)=>(R+n+R*n%3&1)===0)]]);class wr{constructor(n){const a=n.getHeight();if(a<21||(a&3)!==1)throw new k;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let h=0;h<6;h++)n=this.copyBit(h,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let h=5;h>=0;h--)n=this.copyBit(8,h,n);const a=this.bitMatrix.getHeight();let l=0;const u=a-7;for(let h=a-1;h>=u;h--)l=this.copyBit(8,h,l);for(let h=a-8;h<a;h++)l=this.copyBit(h,8,l);if(this.parsedFormatInfo=An.decodeFormatInformation(n,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new k}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),a=Math.floor((n-17)/4);if(a<=6)return He.getVersionForNumber(a);let l=0;const u=n-11;for(let g=5;g>=0;g--)for(let p=n-9;p>=u;p--)l=this.copyBit(p,g,l);let h=He.decodeVersionInformation(l);if(h!==null&&h.getDimensionForVersion()===n)return this.parsedVersion=h,h;l=0;for(let g=5;g>=0;g--)for(let p=n-9;p>=u;p--)l=this.copyBit(g,p,l);if(h=He.decodeVersionInformation(l),h!==null&&h.getDimensionForVersion()===n)return this.parsedVersion=h,h;throw new k}copyBit(n,a,l){return(this.isMirror?this.bitMatrix.get(a,n):this.bitMatrix.get(n,a))?l<<1|1:l<<1}readCodewords(){const n=this.readFormatInformation(),a=this.readVersion(),l=ii.values.get(n.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const h=a.buildFunctionPattern();let g=!0;const p=new Uint8Array(a.getTotalCodewords());let _=0,C=0,S=0;for(let O=u-1;O>0;O-=2){O===6&&O--;for(let M=0;M<u;M++){const j=g?u-1-M:M;for(let V=0;V<2;V++)h.get(O-V,j)||(S++,C<<=1,this.bitMatrix.get(O-V,j)&&(C|=1),S===8&&(p[_++]=C,S=0,C=0))}g=!g}if(_!==a.getTotalCodewords())throw new k;return p}remask(){if(this.parsedFormatInfo===null)return;const n=ii.values[this.parsedFormatInfo.getDataMask()],a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let a=0,l=n.getWidth();a<l;a++)for(let u=a+1,h=n.getHeight();u<h;u++)n.get(a,u)!==n.get(u,a)&&(n.flip(u,a),n.flip(a,u))}}class ml{constructor(n,a){this.numDataCodewords=n,this.codewords=a}static getDataBlocks(n,a,l){if(n.length!==a.getTotalCodewords())throw new N;const u=a.getECBlocksForLevel(l);let h=0;const g=u.getECBlocks();for(const V of g)h+=V.getCount();const p=new Array(h);let _=0;for(const V of g)for(let X=0;X<V.getCount();X++){const ie=V.getDataCodewords(),ce=u.getECCodewordsPerBlock()+ie;p[_++]=new ml(ie,new Uint8Array(ce))}const C=p[0].codewords.length;let S=p.length-1;for(;S>=0&&p[S].codewords.length!==C;)S--;S++;const O=C-u.getECCodewordsPerBlock();let M=0;for(let V=0;V<O;V++)for(let X=0;X<_;X++)p[X].codewords[V]=n[M++];for(let V=S;V<_;V++)p[V].codewords[O]=n[M++];const j=p[0].codewords.length;for(let V=O;V<j;V++)for(let X=0;X<_;X++){const ie=X<S?V:V+1;p[X].codewords[ie]=n[M++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var si;(function(R){R[R.TERMINATOR=0]="TERMINATOR",R[R.NUMERIC=1]="NUMERIC",R[R.ALPHANUMERIC=2]="ALPHANUMERIC",R[R.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",R[R.BYTE=4]="BYTE",R[R.ECI=5]="ECI",R[R.KANJI=6]="KANJI",R[R.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",R[R.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",R[R.HANZI=9]="HANZI"})(si||(si={}));class Xe{constructor(n,a,l,u){this.value=n,this.stringValue=a,this.characterCountBitsForVersions=l,this.bits=u,Xe.FOR_BITS.set(u,this),Xe.FOR_VALUE.set(n,this)}static forBits(n){const a=Xe.FOR_BITS.get(n);if(a===void 0)throw new N;return a}getCharacterCountBits(n){const a=n.getVersionNumber();let l;return a<=9?l=0:a<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof Xe))return!1;const a=n;return this.value===a.value}toString(){return this.stringValue}}Xe.FOR_BITS=new Map,Xe.FOR_VALUE=new Map,Xe.TERMINATOR=new Xe(si.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Xe.NUMERIC=new Xe(si.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Xe.ALPHANUMERIC=new Xe(si.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Xe.STRUCTURED_APPEND=new Xe(si.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Xe.BYTE=new Xe(si.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Xe.ECI=new Xe(si.ECI,"ECI",Int32Array.from([0,0,0]),7),Xe.KANJI=new Xe(si.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Xe.FNC1_FIRST_POSITION=new Xe(si.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Xe.FNC1_SECOND_POSITION=new Xe(si.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Xe.HANZI=new Xe(si.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Kt{static decode(n,a,l,u){const h=new Ii(n);let g=new ge;const p=new Array;let _=-1,C=-1;try{let S=null,O=!1,M;do{if(h.available()<4)M=Xe.TERMINATOR;else{const j=h.readBits(4);M=Xe.forBits(j)}switch(M){case Xe.TERMINATOR:break;case Xe.FNC1_FIRST_POSITION:case Xe.FNC1_SECOND_POSITION:O=!0;break;case Xe.STRUCTURED_APPEND:if(h.available()<16)throw new k;_=h.readBits(8),C=h.readBits(8);break;case Xe.ECI:const j=Kt.parseECIValue(h);if(S=Q.getCharacterSetECIByValue(j),S===null)throw new k;break;case Xe.HANZI:const V=h.readBits(4),X=h.readBits(M.getCharacterCountBits(a));V===Kt.GB2312_SUBSET&&Kt.decodeHanziSegment(h,g,X);break;default:const ie=h.readBits(M.getCharacterCountBits(a));switch(M){case Xe.NUMERIC:Kt.decodeNumericSegment(h,g,ie);break;case Xe.ALPHANUMERIC:Kt.decodeAlphanumericSegment(h,g,ie,O);break;case Xe.BYTE:Kt.decodeByteSegment(h,g,ie,S,p,u);break;case Xe.KANJI:Kt.decodeKanjiSegment(h,g,ie);break;default:throw new k}break}}while(M!==Xe.TERMINATOR)}catch{throw new k}return new wt(n,g.toString(),p.length===0?null:p,l===null?null:l.toString(),_,C)}static decodeHanziSegment(n,a,l){if(l*13>n.available())throw new k;const u=new Uint8Array(2*l);let h=0;for(;l>0;){const g=n.readBits(13);let p=g/96<<8&4294967295|g%96;p<959?p+=41377:p+=42657,u[h]=p>>8&255,u[h+1]=p&255,h+=2,l--}try{a.append(we.decode(u,ne.GB2312))}catch(g){throw new k(g)}}static decodeKanjiSegment(n,a,l){if(l*13>n.available())throw new k;const u=new Uint8Array(2*l);let h=0;for(;l>0;){const g=n.readBits(13);let p=g/192<<8&4294967295|g%192;p<7936?p+=33088:p+=49472,u[h]=p>>8,u[h+1]=p,h+=2,l--}try{a.append(we.decode(u,ne.SHIFT_JIS))}catch(g){throw new k(g)}}static decodeByteSegment(n,a,l,u,h,g){if(8*l>n.available())throw new k;const p=new Uint8Array(l);for(let C=0;C<l;C++)p[C]=n.readBits(8);let _;u===null?_=ne.guessEncoding(p,g):_=u.getName();try{a.append(we.decode(p,_))}catch(C){throw new k(C)}h.push(p)}static toAlphaNumericChar(n){if(n>=Kt.ALPHANUMERIC_CHARS.length)throw new k;return Kt.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,a,l,u){const h=a.length();for(;l>1;){if(n.available()<11)throw new k;const g=n.readBits(11);a.append(Kt.toAlphaNumericChar(Math.floor(g/45))),a.append(Kt.toAlphaNumericChar(g%45)),l-=2}if(l===1){if(n.available()<6)throw new k;a.append(Kt.toAlphaNumericChar(n.readBits(6)))}if(u)for(let g=h;g<a.length();g++)a.charAt(g)==="%"&&(g<a.length()-1&&a.charAt(g+1)==="%"?a.deleteCharAt(g+1):a.setCharAt(g,""))}static decodeNumericSegment(n,a,l){for(;l>=3;){if(n.available()<10)throw new k;const u=n.readBits(10);if(u>=1e3)throw new k;a.append(Kt.toAlphaNumericChar(Math.floor(u/100))),a.append(Kt.toAlphaNumericChar(Math.floor(u/10)%10)),a.append(Kt.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(n.available()<7)throw new k;const u=n.readBits(7);if(u>=100)throw new k;a.append(Kt.toAlphaNumericChar(Math.floor(u/10))),a.append(Kt.toAlphaNumericChar(u%10))}else if(l===1){if(n.available()<4)throw new k;const u=n.readBits(4);if(u>=10)throw new k;a.append(Kt.toAlphaNumericChar(u))}}static parseECIValue(n){const a=n.readBits(8);if((a&128)===0)return a&127;if((a&192)===128){const l=n.readBits(8);return(a&63)<<8&4294967295|l}if((a&224)===192){const l=n.readBits(16);return(a&31)<<16&4294967295|l}throw new k}}Kt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Kt.GB2312_SUBSET=1;class Qc{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const a=n[0];n[0]=n[2],n[2]=a}}class hh{constructor(){this.rsDecoder=new Ye(pe.QR_CODE_FIELD_256)}decodeBooleanArray(n,a){return this.decodeBitMatrix(Ie.parseFromBooleanArray(n),a)}decodeBitMatrix(n,a){const l=new wr(n);let u=null;try{return this.decodeBitMatrixParser(l,a)}catch(h){u=h}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const h=this.decodeBitMatrixParser(l,a);return h.setOther(new Qc(!0)),h}catch(h){throw u!==null?u:h}}decodeBitMatrixParser(n,a){const l=n.readVersion(),u=n.readFormatInformation().getErrorCorrectionLevel(),h=n.readCodewords(),g=ml.getDataBlocks(h,l,u);let p=0;for(const S of g)p+=S.getNumDataCodewords();const _=new Uint8Array(p);let C=0;for(const S of g){const O=S.getCodewords(),M=S.getNumDataCodewords();this.correctErrors(O,M);for(let j=0;j<M;j++)_[C++]=O[j]}return Kt.decode(_,l,u,a)}correctErrors(n,a){const l=new Int32Array(n);try{this.rsDecoder.decode(l,n.length-a)}catch{throw new P}for(let u=0;u<a;u++)n[u]=l[u]}}class br extends Be{constructor(n,a,l){super(n,a),this.estimatedModuleSize=l}aboutEquals(n,a,l){if(Math.abs(a-this.getY())<=n&&Math.abs(l-this.getX())<=n){const u=Math.abs(n-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(n,a,l){const u=(this.getX()+a)/2,h=(this.getY()+n)/2,g=(this.estimatedModuleSize+l)/2;return new br(u,h,g)}}class gi{constructor(n,a,l,u,h,g,p){this.image=n,this.startX=a,this.startY=l,this.width=u,this.height=h,this.moduleSize=g,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,a=this.height,l=this.width,u=n+l,h=this.startY+a/2,g=new Int32Array(3),p=this.image;for(let _=0;_<a;_++){const C=h+((_&1)===0?Math.floor((_+1)/2):-Math.floor((_+1)/2));g[0]=0,g[1]=0,g[2]=0;let S=n;for(;S<u&&!p.get(S,C);)S++;let O=0;for(;S<u;){if(p.get(S,C))if(O===1)g[1]++;else if(O===2){if(this.foundPatternCross(g)){const M=this.handlePossibleCenter(g,C,S);if(M!==null)return M}g[0]=g[2],g[1]=1,g[2]=0,O=1}else g[++O]++;else O===1&&O++,g[O]++;S++}if(this.foundPatternCross(g)){const M=this.handlePossibleCenter(g,C,u);if(M!==null)return M}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new oe}static centerFromEnd(n,a){return a-n[2]-n[1]/2}foundPatternCross(n){const a=this.moduleSize,l=a/2;for(let u=0;u<3;u++)if(Math.abs(a-n[u])>=l)return!1;return!0}crossCheckVertical(n,a,l,u){const h=this.image,g=h.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let _=n;for(;_>=0&&h.get(a,_)&&p[1]<=l;)p[1]++,_--;if(_<0||p[1]>l)return NaN;for(;_>=0&&!h.get(a,_)&&p[0]<=l;)p[0]++,_--;if(p[0]>l)return NaN;for(_=n+1;_<g&&h.get(a,_)&&p[1]<=l;)p[1]++,_++;if(_===g||p[1]>l)return NaN;for(;_<g&&!h.get(a,_)&&p[2]<=l;)p[2]++,_++;if(p[2]>l)return NaN;const C=p[0]+p[1]+p[2];return 5*Math.abs(C-u)>=2*u?NaN:this.foundPatternCross(p)?gi.centerFromEnd(p,_):NaN}handlePossibleCenter(n,a,l){const u=n[0]+n[1]+n[2],h=gi.centerFromEnd(n,l),g=this.crossCheckVertical(a,h,2*n[1],u);if(!isNaN(g)){const p=(n[0]+n[1]+n[2])/3;for(const C of this.possibleCenters)if(C.aboutEquals(p,g,h))return C.combineEstimate(g,h,p);const _=new br(h,g,p);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class ba extends Be{constructor(n,a,l,u){super(n,a),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,a,l){if(Math.abs(a-this.getY())<=n&&Math.abs(l-this.getX())<=n){const u=Math.abs(n-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(n,a,l){const u=this.count+1,h=(this.count*this.getX()+a)/u,g=(this.count*this.getY()+n)/u,p=(this.count*this.estimatedModuleSize+l)/u;return new ba(h,g,p,u)}}class pl{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class sn{constructor(n,a){this.image=n,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=a}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const a=n!=null&&n.get(U.TRY_HARDER)!==void 0,l=n!=null&&n.get(U.PURE_BARCODE)!==void 0,u=this.image,h=u.getHeight(),g=u.getWidth();let p=Math.floor(3*h/(4*sn.MAX_MODULES));(p<sn.MIN_SKIP||a)&&(p=sn.MIN_SKIP);let _=!1;const C=new Int32Array(5);for(let O=p-1;O<h&&!_;O+=p){C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0;let M=0;for(let j=0;j<g;j++)if(u.get(j,O))(M&1)===1&&M++,C[M]++;else if((M&1)===0)if(M===4)if(sn.foundPatternCross(C)){if(this.handlePossibleCenter(C,O,j,l)===!0)if(p=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const X=this.findRowSkip();X>C[2]&&(O+=X-C[2]-p,j=g-1)}else{C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,M=3;continue}M=0,C[0]=0,C[1]=0,C[2]=0,C[3]=0,C[4]=0}else C[0]=C[2],C[1]=C[3],C[2]=C[4],C[3]=1,C[4]=0,M=3;else C[++M]++;else C[M]++;sn.foundPatternCross(C)&&this.handlePossibleCenter(C,O,g,l)===!0&&(p=C[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const S=this.selectBestPatterns();return Be.orderBestPatterns(S),new pl(S)}static centerFromEnd(n,a){return a-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let a=0;for(let h=0;h<5;h++){const g=n[h];if(g===0)return!1;a+=g}if(a<7)return!1;const l=a/7,u=l/2;return Math.abs(l-n[0])<u&&Math.abs(l-n[1])<u&&Math.abs(3*l-n[2])<3*u&&Math.abs(l-n[3])<u&&Math.abs(l-n[4])<u}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,a,l,u){const h=this.getCrossCheckStateCount();let g=0;const p=this.image;for(;n>=g&&a>=g&&p.get(a-g,n-g);)h[2]++,g++;if(n<g||a<g)return!1;for(;n>=g&&a>=g&&!p.get(a-g,n-g)&&h[1]<=l;)h[1]++,g++;if(n<g||a<g||h[1]>l)return!1;for(;n>=g&&a>=g&&p.get(a-g,n-g)&&h[0]<=l;)h[0]++,g++;if(h[0]>l)return!1;const _=p.getHeight(),C=p.getWidth();for(g=1;n+g<_&&a+g<C&&p.get(a+g,n+g);)h[2]++,g++;if(n+g>=_||a+g>=C)return!1;for(;n+g<_&&a+g<C&&!p.get(a+g,n+g)&&h[3]<l;)h[3]++,g++;if(n+g>=_||a+g>=C||h[3]>=l)return!1;for(;n+g<_&&a+g<C&&p.get(a+g,n+g)&&h[4]<l;)h[4]++,g++;if(h[4]>=l)return!1;const S=h[0]+h[1]+h[2]+h[3]+h[4];return Math.abs(S-u)<2*u&&sn.foundPatternCross(h)}crossCheckVertical(n,a,l,u){const h=this.image,g=h.getHeight(),p=this.getCrossCheckStateCount();let _=n;for(;_>=0&&h.get(a,_);)p[2]++,_--;if(_<0)return NaN;for(;_>=0&&!h.get(a,_)&&p[1]<=l;)p[1]++,_--;if(_<0||p[1]>l)return NaN;for(;_>=0&&h.get(a,_)&&p[0]<=l;)p[0]++,_--;if(p[0]>l)return NaN;for(_=n+1;_<g&&h.get(a,_);)p[2]++,_++;if(_===g)return NaN;for(;_<g&&!h.get(a,_)&&p[3]<l;)p[3]++,_++;if(_===g||p[3]>=l)return NaN;for(;_<g&&h.get(a,_)&&p[4]<l;)p[4]++,_++;if(p[4]>=l)return NaN;const C=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(C-u)>=2*u?NaN:sn.foundPatternCross(p)?sn.centerFromEnd(p,_):NaN}crossCheckHorizontal(n,a,l,u){const h=this.image,g=h.getWidth(),p=this.getCrossCheckStateCount();let _=n;for(;_>=0&&h.get(_,a);)p[2]++,_--;if(_<0)return NaN;for(;_>=0&&!h.get(_,a)&&p[1]<=l;)p[1]++,_--;if(_<0||p[1]>l)return NaN;for(;_>=0&&h.get(_,a)&&p[0]<=l;)p[0]++,_--;if(p[0]>l)return NaN;for(_=n+1;_<g&&h.get(_,a);)p[2]++,_++;if(_===g)return NaN;for(;_<g&&!h.get(_,a)&&p[3]<l;)p[3]++,_++;if(_===g||p[3]>=l)return NaN;for(;_<g&&h.get(_,a)&&p[4]<l;)p[4]++,_++;if(p[4]>=l)return NaN;const C=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(C-u)>=u?NaN:sn.foundPatternCross(p)?sn.centerFromEnd(p,_):NaN}handlePossibleCenter(n,a,l,u){const h=n[0]+n[1]+n[2]+n[3]+n[4];let g=sn.centerFromEnd(n,l),p=this.crossCheckVertical(a,Math.floor(g),n[2],h);if(!isNaN(p)&&(g=this.crossCheckHorizontal(Math.floor(g),Math.floor(p),n[2],h),!isNaN(g)&&(!u||this.crossCheckDiagonal(Math.floor(p),Math.floor(g),n[2],h)))){const _=h/7;let C=!1;const S=this.possibleCenters;for(let O=0,M=S.length;O<M;O++){const j=S[O];if(j.aboutEquals(_,p,g)){S[O]=j.combineEstimate(p,g,_),C=!0;break}}if(!C){const O=new ba(g,p,_);S.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let a=null;for(const l of this.possibleCenters)if(l.getCount()>=sn.CENTER_QUORUM)if(a==null)a=l;else return this.hasSkipped=!0,Math.floor((Math.abs(a.getX()-l.getX())-Math.abs(a.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,a=0;const l=this.possibleCenters.length;for(const g of this.possibleCenters)g.getCount()>=sn.CENTER_QUORUM&&(n++,a+=g.getEstimatedModuleSize());if(n<3)return!1;const u=a/l;let h=0;for(const g of this.possibleCenters)h+=Math.abs(g.getEstimatedModuleSize()-u);return h<=.05*a}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new oe;const a=this.possibleCenters;let l;if(n>3){let u=0,h=0;for(const _ of this.possibleCenters){const C=_.getEstimatedModuleSize();u+=C,h+=C*C}l=u/n;let g=Math.sqrt(h/n-l*l);a.sort((_,C)=>{const S=Math.abs(C.getEstimatedModuleSize()-l),O=Math.abs(_.getEstimatedModuleSize()-l);return S<O?-1:S>O?1:0});const p=Math.max(.2*l,g);for(let _=0;_<a.length&&a.length>3;_++){const C=a[_];Math.abs(C.getEstimatedModuleSize()-l)>p&&(a.splice(_,1),_--)}}if(a.length>3){let u=0;for(const h of a)u+=h.getEstimatedModuleSize();l=u/a.length,a.sort((h,g)=>{if(g.getCount()===h.getCount()){const p=Math.abs(g.getEstimatedModuleSize()-l),_=Math.abs(h.getEstimatedModuleSize()-l);return p<_?1:p>_?-1:0}else return g.getCount()-h.getCount()}),a.splice(3)}return[a[0],a[1],a[2]]}}sn.CENTER_QUORUM=2,sn.MIN_SKIP=3,sn.MAX_MODULES=57;class qi{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(U.NEED_RESULT_POINT_CALLBACK);const l=new sn(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(l)}processFinderPatternInfo(n){const a=n.getTopLeft(),l=n.getTopRight(),u=n.getBottomLeft(),h=this.calculateModuleSize(a,l,u);if(h<1)throw new oe("No pattern found in proccess finder.");const g=qi.computeDimension(a,l,u,h),p=He.getProvisionalVersionForDimension(g),_=p.getDimensionForVersion()-7;let C=null;if(p.getAlignmentPatternCenters().length>0){const j=l.getX()-a.getX()+u.getX(),V=l.getY()-a.getY()+u.getY(),X=1-3/_,ie=Math.floor(a.getX()+X*(j-a.getX())),ce=Math.floor(a.getY()+X*(V-a.getY()));for(let Se=4;Se<=16;Se<<=1)try{C=this.findAlignmentInRegion(h,ie,ce,Se);break}catch(Ce){if(!(Ce instanceof oe))throw Ce}}const S=qi.createTransform(a,l,u,C,g),O=qi.sampleGrid(this.image,S,g);let M;return C===null?M=[u,a,l]:M=[u,a,l,C],new zi(O,M)}static createTransform(n,a,l,u,h){const g=h-3.5;let p,_,C,S;return u!==null?(p=u.getX(),_=u.getY(),C=g-3,S=C):(p=a.getX()-n.getX()+l.getX(),_=a.getY()-n.getY()+l.getY(),C=g,S=g),hi.quadrilateralToQuadrilateral(3.5,3.5,g,3.5,C,S,3.5,g,n.getX(),n.getY(),a.getX(),a.getY(),p,_,l.getX(),l.getY())}static sampleGrid(n,a,l){return Si.getInstance().sampleGridWithTransform(n,l,l,a)}static computeDimension(n,a,l,u){const h=ke.round(Be.distance(n,a)/u),g=ke.round(Be.distance(n,l)/u);let p=Math.floor((h+g)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new oe("Dimensions could be not found.")}return p}calculateModuleSize(n,a,l){return(this.calculateModuleSizeOneWay(n,a)+this.calculateModuleSizeOneWay(n,l))/2}calculateModuleSizeOneWay(n,a){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(a.getX()),Math.floor(a.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(n,a,l,u){let h=this.sizeOfBlackWhiteBlackRun(n,a,l,u),g=1,p=n-(l-n);p<0?(g=n/(n-p),p=0):p>=this.image.getWidth()&&(g=(this.image.getWidth()-1-n)/(p-n),p=this.image.getWidth()-1);let _=Math.floor(a-(u-a)*g);return g=1,_<0?(g=a/(a-_),_=0):_>=this.image.getHeight()&&(g=(this.image.getHeight()-1-a)/(_-a),_=this.image.getHeight()-1),p=Math.floor(n+(p-n)*g),h+=this.sizeOfBlackWhiteBlackRun(n,a,p,_),h-1}sizeOfBlackWhiteBlackRun(n,a,l,u){const h=Math.abs(u-a)>Math.abs(l-n);if(h){let j=n;n=a,a=j,j=l,l=u,u=j}const g=Math.abs(l-n),p=Math.abs(u-a);let _=-g/2;const C=n<l?1:-1,S=a<u?1:-1;let O=0;const M=l+C;for(let j=n,V=a;j!==M;j+=C){const X=h?V:j,ie=h?j:V;if(O===1===this.image.get(X,ie)){if(O===2)return ke.distance(j,V,n,a);O++}if(_+=p,_>0){if(V===u)break;V+=S,_-=g}}return O===2?ke.distance(l+C,u,n,a):NaN}findAlignmentInRegion(n,a,l,u){const h=Math.floor(u*n),g=Math.max(0,a-h),p=Math.min(this.image.getWidth()-1,a+h);if(p-g<n*3)throw new oe("Alignment top exceeds estimated module size.");const _=Math.max(0,l-h),C=Math.min(this.image.getHeight()-1,l+h);if(C-_<n*3)throw new oe("Alignment bottom exceeds estimated module size.");return new gi(this.image,g,_,p-g,C-_,n,this.resultPointCallback).find()}}class rs{constructor(){this.decoder=new hh}getDecoder(){return this.decoder}decode(n,a){let l,u;if(a!=null&&a.get(U.PURE_BARCODE)!==void 0){const _=rs.extractPureBits(n.getBlackMatrix());l=this.decoder.decodeBitMatrix(_,a),u=rs.NO_POINTS}else{const _=new qi(n.getBlackMatrix()).detect(a);l=this.decoder.decodeBitMatrix(_.getBits(),a),u=_.getPoints()}l.getOther()instanceof Qc&&l.getOther().applyMirroredCorrection(u);const h=new De(l.getText(),l.getRawBytes(),void 0,u,Ae.QR_CODE,void 0),g=l.getByteSegments();g!==null&&h.putMetadata(it.BYTE_SEGMENTS,g);const p=l.getECLevel();return p!==null&&h.putMetadata(it.ERROR_CORRECTION_LEVEL,p),l.hasStructuredAppend()&&(h.putMetadata(it.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),h.putMetadata(it.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),h}reset(){}static extractPureBits(n){const a=n.getTopLeftOnBit(),l=n.getBottomRightOnBit();if(a===null||l===null)throw new oe;const u=this.moduleSize(a,n);let h=a[1],g=l[1],p=a[0],_=l[0];if(p>=_||h>=g)throw new oe;if(g-h!==_-p&&(_=p+(g-h),_>=n.getWidth()))throw new oe;const C=Math.round((_-p+1)/u),S=Math.round((g-h+1)/u);if(C<=0||S<=0)throw new oe;if(S!==C)throw new oe;const O=Math.floor(u/2);h+=O,p+=O;const M=p+Math.floor((C-1)*u)-_;if(M>0){if(M>O)throw new oe;p-=M}const j=h+Math.floor((S-1)*u)-g;if(j>0){if(j>O)throw new oe;h-=j}const V=new Ie(C,S);for(let X=0;X<S;X++){const ie=h+Math.floor(X*u);for(let ce=0;ce<C;ce++)n.get(p+Math.floor(ce*u),ie)&&V.set(ce,X)}return V}static moduleSize(n,a){const l=a.getHeight(),u=a.getWidth();let h=n[0],g=n[1],p=!0,_=0;for(;h<u&&g<l;){if(p!==a.get(h,g)){if(++_===5)break;p=!p}h++,g++}if(h===u||g===l)throw new oe;return(h-n[0])/7}}rs.NO_POINTS=new Array;class Ke{PDF417Common(){}static getBitCountSum(n){return ke.sum(n)}static toIntArray(n){if(n==null||!n.length)return Ke.EMPTY_INT_ARRAY;const a=new Int32Array(n.length);let l=0;for(const u of n)a[l++]=u;return a}static getCodeword(n){const a=$.binarySearch(Ke.SYMBOL_TABLE,n&262143);return a<0?-1:(Ke.CODEWORD_TABLE[a]-1)%Ke.NUMBER_OF_CODEWORDS}}Ke.NUMBER_OF_CODEWORDS=929,Ke.MAX_CODEWORDS_IN_BARCODE=Ke.NUMBER_OF_CODEWORDS-1,Ke.MIN_ROWS_IN_BARCODE=3,Ke.MAX_ROWS_IN_BARCODE=90,Ke.MODULES_IN_CODEWORD=17,Ke.MODULES_IN_STOP_PATTERN=18,Ke.BARS_IN_MODULE=8,Ke.EMPTY_INT_ARRAY=new Int32Array([]),Ke.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ke.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Jc{constructor(n,a){this.bits=n,this.points=a}getBits(){return this.bits}getPoints(){return this.points}}class st{static detectMultiple(n,a,l){let u=n.getBlackMatrix(),h=st.detect(l,u);return h.length||(u=u.clone(),u.rotate180(),h=st.detect(l,u)),new Jc(u,h)}static detect(n,a){const l=new Array;let u=0,h=0,g=!1;for(;u<a.getHeight();){const p=st.findVertices(a,u,h);if(p[0]==null&&p[3]==null){if(!g)break;g=!1,h=0;for(const _ of l)_[1]!=null&&(u=Math.trunc(Math.max(u,_[1].getY()))),_[3]!=null&&(u=Math.max(u,Math.trunc(_[3].getY())));u+=st.ROW_STEP;continue}if(g=!0,l.push(p),!n)break;p[2]!=null?(h=Math.trunc(p[2].getX()),u=Math.trunc(p[2].getY())):(h=Math.trunc(p[4].getX()),u=Math.trunc(p[4].getY()))}return l}static findVertices(n,a,l){const u=n.getHeight(),h=n.getWidth(),g=new Array(8);return st.copyToResult(g,st.findRowsWithPattern(n,u,h,a,l,st.START_PATTERN),st.INDEXES_START_PATTERN),g[4]!=null&&(l=Math.trunc(g[4].getX()),a=Math.trunc(g[4].getY())),st.copyToResult(g,st.findRowsWithPattern(n,u,h,a,l,st.STOP_PATTERN),st.INDEXES_STOP_PATTERN),g}static copyToResult(n,a,l){for(let u=0;u<l.length;u++)n[l[u]]=a[u]}static findRowsWithPattern(n,a,l,u,h,g){const p=new Array(4);let _=!1;const C=new Int32Array(g.length);for(;u<a;u+=st.ROW_STEP){let O=st.findGuardPattern(n,h,u,l,!1,g,C);if(O!=null){for(;u>0;){const M=st.findGuardPattern(n,h,--u,l,!1,g,C);if(M!=null)O=M;else{u++;break}}p[0]=new Be(O[0],u),p[1]=new Be(O[1],u),_=!0;break}}let S=u+1;if(_){let O=0,M=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;S<a;S++){const j=st.findGuardPattern(n,M[0],S,l,!1,g,C);if(j!=null&&Math.abs(M[0]-j[0])<st.MAX_PATTERN_DRIFT&&Math.abs(M[1]-j[1])<st.MAX_PATTERN_DRIFT)M=j,O=0;else{if(O>st.SKIPPED_ROW_COUNT_MAX)break;O++}}S-=O+1,p[2]=new Be(M[0],S),p[3]=new Be(M[1],S)}return S-u<st.BARCODE_MIN_HEIGHT&&$.fill(p,null),p}static findGuardPattern(n,a,l,u,h,g,p){$.fillWithin(p,0,p.length,0);let _=a,C=0;for(;n.get(_,l)&&_>0&&C++<st.MAX_PIXEL_DRIFT;)_--;let S=_,O=0,M=g.length;for(let j=h;S<u;S++)if(n.get(S,l)!==j)p[O]++;else{if(O===M-1){if(st.patternMatchVariance(p,g,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE)return new Int32Array([_,S]);_+=p[0]+p[1],H.arraycopy(p,2,p,0,O-1),p[O-1]=0,p[O]=0,O--}else O++;p[O]=1,j=!j}return O===M-1&&st.patternMatchVariance(p,g,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE?new Int32Array([_,S-1]):null}static patternMatchVariance(n,a,l){let u=n.length,h=0,g=0;for(let C=0;C<u;C++)h+=n[C],g+=a[C];if(h<g)return 1/0;let p=h/g;l*=p;let _=0;for(let C=0;C<u;C++){let S=n[C],O=a[C]*p,M=S>O?S-O:O-S;if(M>l)return 1/0;_+=M}return _/h}}st.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),st.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),st.MAX_AVG_VARIANCE=.42,st.MAX_INDIVIDUAL_VARIANCE=.8,st.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),st.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),st.MAX_PIXEL_DRIFT=3,st.MAX_PATTERN_DRIFT=5,st.SKIPPED_ROW_COUNT_MAX=25,st.ROW_STEP=5,st.BARCODE_MIN_HEIGHT=10;class Zt{constructor(n,a){if(a.length===0)throw new N;this.field=n;let l=a.length;if(l>1&&a[0]===0){let u=1;for(;u<l&&a[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),H.arraycopy(a,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=a}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let u=0;for(let h of this.coefficients)u=this.field.add(u,h);return u}let a=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)a=this.field.add(this.field.multiply(n,a),this.coefficients[u]);return a}add(n){if(!this.field.equals(n.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let a=this.coefficients,l=n.coefficients;if(a.length>l.length){let g=a;a=l,l=g}let u=new Int32Array(l.length),h=l.length-a.length;H.arraycopy(l,0,u,0,h);for(let g=h;g<l.length;g++)u[g]=this.field.add(a[g-h],l[g]);return new Zt(this.field,u)}subtract(n){if(!this.field.equals(n.field))throw new N("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof Zt?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new Zt(this.field,new Int32Array([0]));let a=this.coefficients,l=a.length,u=n.coefficients,h=u.length,g=new Int32Array(l+h-1);for(let p=0;p<l;p++){let _=a[p];for(let C=0;C<h;C++)g[p+C]=this.field.add(g[p+C],this.field.multiply(_,u[C]))}return new Zt(this.field,g)}negative(){let n=this.coefficients.length,a=new Int32Array(n);for(let l=0;l<n;l++)a[l]=this.field.subtract(0,this.coefficients[l]);return new Zt(this.field,a)}multiplyScalar(n){if(n===0)return new Zt(this.field,new Int32Array([0]));if(n===1)return this;let a=this.coefficients.length,l=new Int32Array(a);for(let u=0;u<a;u++)l[u]=this.field.multiply(this.coefficients[u],n);return new Zt(this.field,l)}multiplyByMonomial(n,a){if(n<0)throw new N;if(a===0)return new Zt(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+n);for(let h=0;h<l;h++)u[h]=this.field.multiply(this.coefficients[h],a);return new Zt(this.field,u)}toString(){let n=new ge;for(let a=this.getDegree();a>=0;a--){let l=this.getCoefficient(a);l!==0&&(l<0?(n.append(" - "),l=-l):n.length()>0&&n.append(" + "),(a===0||l!==1)&&n.append(l),a!==0&&(a===1?n.append("x"):(n.append("x^"),n.append(a))))}return n.toString()}}class xl{add(n,a){return(n+a)%this.modulus}subtract(n,a){return(this.modulus+n-a)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new N;return this.logTable[n]}inverse(n){if(n===0)throw new ui;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,a){return n===0||a===0?0:this.expTable[(this.logTable[n]+this.logTable[a])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class ks extends xl{constructor(n,a){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let l=1;for(let u=0;u<n;u++)this.expTable[u]=l,l=l*a%n;for(let u=0;u<n-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new Zt(this,new Int32Array([0])),this.one=new Zt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,a){if(n<0)throw new N;if(a===0)return this.zero;let l=new Int32Array(n+1);return l[0]=a,new Zt(this,l)}}ks.PDF417_GF=new ks(Ke.NUMBER_OF_CODEWORDS,3);class as{constructor(){this.field=ks.PDF417_GF}decode(n,a,l){let u=new Zt(this.field,n),h=new Int32Array(a),g=!1;for(let V=a;V>0;V--){let X=u.evaluateAt(this.field.exp(V));h[a-V]=X,X!==0&&(g=!0)}if(!g)return 0;let p=this.field.getOne();if(l!=null)for(const V of l){let X=this.field.exp(n.length-1-V),ie=new Zt(this.field,new Int32Array([this.field.subtract(0,X),1]));p=p.multiply(ie)}let _=new Zt(this.field,h),C=this.runEuclideanAlgorithm(this.field.buildMonomial(a,1),_,a),S=C[0],O=C[1],M=this.findErrorLocations(S),j=this.findErrorMagnitudes(O,S,M);for(let V=0;V<M.length;V++){let X=n.length-1-this.field.log(M[V]);if(X<0)throw P.getChecksumInstance();n[X]=this.field.subtract(n[X],j[V])}return M.length}runEuclideanAlgorithm(n,a,l){if(n.getDegree()<a.getDegree()){let M=n;n=a,a=M}let u=n,h=a,g=this.field.getZero(),p=this.field.getOne();for(;h.getDegree()>=Math.round(l/2);){let M=u,j=g;if(u=h,g=p,u.isZero())throw P.getChecksumInstance();h=M;let V=this.field.getZero(),X=u.getCoefficient(u.getDegree()),ie=this.field.inverse(X);for(;h.getDegree()>=u.getDegree()&&!h.isZero();){let ce=h.getDegree()-u.getDegree(),Se=this.field.multiply(h.getCoefficient(h.getDegree()),ie);V=V.add(this.field.buildMonomial(ce,Se)),h=h.subtract(u.multiplyByMonomial(ce,Se))}p=V.multiply(g).subtract(j).negative()}let _=p.getCoefficient(0);if(_===0)throw P.getChecksumInstance();let C=this.field.inverse(_),S=p.multiply(C),O=h.multiply(C);return[S,O]}findErrorLocations(n){let a=n.getDegree(),l=new Int32Array(a),u=0;for(let h=1;h<this.field.getSize()&&u<a;h++)n.evaluateAt(h)===0&&(l[u]=this.field.inverse(h),u++);if(u!==a)throw P.getChecksumInstance();return l}findErrorMagnitudes(n,a,l){let u=a.getDegree(),h=new Int32Array(u);for(let C=1;C<=u;C++)h[u-C]=this.field.multiply(C,a.getCoefficient(C));let g=new Zt(this.field,h),p=l.length,_=new Int32Array(p);for(let C=0;C<p;C++){let S=this.field.inverse(l[C]),O=this.field.subtract(0,n.evaluateAt(S)),M=this.field.inverse(g.evaluateAt(S));_[C]=this.field.multiply(O,M)}return _}}class os{constructor(n,a,l,u,h){n instanceof os?this.constructor_2(n):this.constructor_1(n,a,l,u,h)}constructor_1(n,a,l,u,h){const g=a==null||l==null,p=u==null||h==null;if(g&&p)throw new oe;g?(a=new Be(0,u.getY()),l=new Be(0,h.getY())):p&&(u=new Be(n.getWidth()-1,a.getY()),h=new Be(n.getWidth()-1,l.getY())),this.image=n,this.topLeft=a,this.bottomLeft=l,this.topRight=u,this.bottomRight=h,this.minX=Math.trunc(Math.min(a.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),h.getX())),this.minY=Math.trunc(Math.min(a.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),h.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,a){return n==null?a:a==null?n:new os(n.image,n.topLeft,n.bottomLeft,a.topRight,a.bottomRight)}addMissingRows(n,a,l){let u=this.topLeft,h=this.bottomLeft,g=this.topRight,p=this.bottomRight;if(n>0){let _=l?this.topLeft:this.topRight,C=Math.trunc(_.getY()-n);C<0&&(C=0);let S=new Be(_.getX(),C);l?u=S:g=S}if(a>0){let _=l?this.bottomLeft:this.bottomRight,C=Math.trunc(_.getY()+a);C>=this.image.getHeight()&&(C=this.image.getHeight()-1);let S=new Be(_.getX(),C);l?h=S:p=S}return new os(this.image,u,h,g,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class lo{constructor(n,a,l,u){this.columnCount=n,this.errorCorrectionLevel=u,this.rowCountUpperPart=a,this.rowCountLowerPart=l,this.rowCount=a+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Er{constructor(){this.buffer=""}static form(n,a){let l=-1;function u(g,p,_,C,S,O){if(g==="%%")return"%";if(a[++l]===void 0)return;g=C?parseInt(C.substr(1)):void 0;let M=S?parseInt(S.substr(1)):void 0,j;switch(O){case"s":j=a[l];break;case"c":j=a[l][0];break;case"f":j=parseFloat(a[l]).toFixed(g);break;case"p":j=parseFloat(a[l]).toPrecision(g);break;case"e":j=parseFloat(a[l]).toExponential(g);break;case"x":j=parseInt(a[l]).toString(M||16);break;case"d":j=parseFloat(parseInt(a[l],M||10).toPrecision(g)).toFixed(0);break}j=typeof j=="object"?JSON.stringify(j):(+j).toString(M);let V=parseInt(_),X=_&&_[0]+""=="0"?"0":" ";for(;j.length<V;)j=p!==void 0?j+X:X+j;return j}let h=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(h,u)}format(n,...a){this.buffer+=Er.form(n,a)}toString(){return this.buffer}}class vs{constructor(n){this.boundingBox=new os(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let a=this.getCodeword(n);if(a!=null)return a;for(let l=1;l<vs.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(n)-l;if(u>=0&&(a=this.codewords[u],a!=null)||(u=this.imageRowToCodewordIndex(n)+l,u<this.codewords.length&&(a=this.codewords[u],a!=null)))return a}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,a){this.codewords[this.imageRowToCodewordIndex(n)]=a}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new Er;let a=0;for(const l of this.codewords){if(l==null){n.format("%3d:    |   %n",a++);continue}n.format("%3d: %3d|%3d%n",a++,l.getRowNumber(),l.getValue())}return n.toString()}}vs.MAX_NEARBY_DISTANCE=5;class Cs{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let a=this.values.get(n);a==null&&(a=0),a++,this.values.set(n,a)}getValue(){let n=-1,a=new Array;for(const[l,u]of this.values.entries()){const h={getKey:()=>l,getValue:()=>u};h.getValue()>n?(n=h.getValue(),a=[],a.push(h.getKey())):h.getValue()===n&&a.push(h.getKey())}return Ke.toIntArray(a)}getConfidence(n){return this.values.get(n)}}class yl extends vs{constructor(n,a){super(n),this._isLeft=a}setRowNumbers(){for(let n of this.getCodewords())n!=null&&n.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let a=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(a,n);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),h=this._isLeft?l.getBottomLeft():l.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.imageRowToCodewordIndex(Math.trunc(h.getY())),_=-1,C=1,S=0;for(let O=g;O<p;O++){if(a[O]==null)continue;let M=a[O],j=M.getRowNumber()-_;if(j===0)S++;else if(j===1)C=Math.max(C,S),S=1,_=M.getRowNumber();else if(j<0||M.getRowNumber()>=n.getRowCount()||j>O)a[O]=null;else{let V;C>2?V=(C-2)*j:V=j;let X=V>=O;for(let ie=1;ie<=V&&!X;ie++)X=a[O-ie]!=null;X?a[O]=null:(_=M.getRowNumber(),S=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let a=new Int32Array(n.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=a.length)continue;a[u]++}return a}adjustIncompleteIndicatorColumnRowNumbers(n){let a=this.getBoundingBox(),l=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(l.getY())),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.getCodewords(),_=-1;for(let C=h;C<g;C++){if(p[C]==null)continue;let S=p[C];S.setRowNumberAsRowIndicatorColumn();let O=S.getRowNumber()-_;O===0||(O===1?_=S.getRowNumber():S.getRowNumber()>=n.getRowCount()?p[C]=null:_=S.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),a=new Cs,l=new Cs,u=new Cs,h=new Cs;for(let p of n){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let _=p.getValue()%30,C=p.getRowNumber();switch(this._isLeft||(C+=2),C%3){case 0:l.setValue(_*3+1);break;case 1:h.setValue(_/3),u.setValue(_%3);break;case 2:a.setValue(_+1);break}}if(a.getValue().length===0||l.getValue().length===0||u.getValue().length===0||h.getValue().length===0||a.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<Ke.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>Ke.MAX_ROWS_IN_BARCODE)return null;let g=new lo(a.getValue()[0],l.getValue()[0],u.getValue()[0],h.getValue()[0]);return this.removeIncorrectCodewords(n,g),g}removeIncorrectCodewords(n,a){for(let l=0;l<n.length;l++){let u=n[l];if(n[l]==null)continue;let h=u.getValue()%30,g=u.getRowNumber();if(g>a.getRowCount()){n[l]=null;continue}switch(this._isLeft||(g+=2),g%3){case 0:h*3+1!==a.getRowCountUpperPart()&&(n[l]=null);break;case 1:(Math.trunc(h/3)!==a.getErrorCorrectionLevel()||h%3!==a.getRowCountLowerPart())&&(n[l]=null);break;case 2:h+1!==a.getColumnCount()&&(n[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Sn{constructor(n,a){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=a,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=Ke.MAX_CODEWORDS_IN_BARCODE,a;do a=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<a);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n!=null&&n.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let a=1;a<this.barcodeColumnCount+1;a++){let l=this.detectionResultColumns[a].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(a,u,l))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<n.length;l++)if(n[l]!=null&&a[l]!=null&&n[l].getRowNumber()===a[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let h=this.detectionResultColumns[u].getCodewords()[l];h!=null&&(h.setRowNumber(n[l].getRowNumber()),h.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,a=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),h=0;for(let g=this.barcodeColumnCount+1;g>0&&h<this.ADJUST_ROW_NUMBER_SKIP;g--){let p=this.detectionResultColumns[g].getCodewords()[l];p!=null&&(h=Sn.adjustRowNumberIfValid(u,h,p),p.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,a=this.detectionResultColumns[0].getCodewords();for(let l=0;l<a.length;l++){if(a[l]==null)continue;let u=a[l].getRowNumber(),h=0;for(let g=1;g<this.barcodeColumnCount+1&&h<this.ADJUST_ROW_NUMBER_SKIP;g++){let p=this.detectionResultColumns[g].getCodewords()[l];p!=null&&(h=Sn.adjustRowNumberIfValid(u,h,p),p.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,a,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(n)?(l.setRowNumber(n),a=0):++a),a}adjustRowNumbers(n,a,l){if(!this.detectionResultColumns[n-1])return;let u=l[a],h=this.detectionResultColumns[n-1].getCodewords(),g=h;this.detectionResultColumns[n+1]!=null&&(g=this.detectionResultColumns[n+1].getCodewords());let p=new Array(14);p[2]=h[a],p[3]=g[a],a>0&&(p[0]=l[a-1],p[4]=h[a-1],p[5]=g[a-1]),a>1&&(p[8]=l[a-2],p[10]=h[a-2],p[11]=g[a-2]),a<l.length-1&&(p[1]=l[a+1],p[6]=h[a+1],p[7]=g[a+1]),a<l.length-2&&(p[9]=l[a+2],p[12]=h[a+2],p[13]=g[a+2]);for(let _ of p)if(Sn.adjustRowNumber(u,_))return}static adjustRowNumber(n,a){return a==null?!1:a.hasValidRowNumber()&&a.getBucket()===n.getBucket()?(n.setRowNumber(a.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,a){this.detectionResultColumns[n]=a}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let a=new Er;for(let l=0;l<n.getCodewords().length;l++){a.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){a.format("    |   ");continue}let h=this.detectionResultColumns[u].getCodewords()[l];if(h==null){a.format("    |   ");continue}a.format(" %3d|%3d",h.getRowNumber(),h.getValue())}a.format("%n")}return a.toString()}}class Ri{constructor(n,a,l,u){this.rowNumber=Ri.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(a),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==Ri.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}Ri.BARCODE_ROW_UNKNOWN=-1;class Mn{static initialize(){for(let n=0;n<Ke.SYMBOL_TABLE.length;n++){let a=Ke.SYMBOL_TABLE[n],l=a&1;for(let u=0;u<Ke.BARS_IN_MODULE;u++){let h=0;for(;(a&1)===l;)h+=1,a>>=1;l=a&1,Mn.RATIOS_TABLE[n]||(Mn.RATIOS_TABLE[n]=new Array(Ke.BARS_IN_MODULE)),Mn.RATIOS_TABLE[n][Ke.BARS_IN_MODULE-u-1]=Math.fround(h/Ke.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let a=Mn.getDecodedCodewordValue(Mn.sampleBitCounts(n));return a!==-1?a:Mn.getClosestDecodedValue(n)}static sampleBitCounts(n){let a=ke.sum(n),l=new Int32Array(Ke.BARS_IN_MODULE),u=0,h=0;for(let g=0;g<Ke.MODULES_IN_CODEWORD;g++){let p=a/(2*Ke.MODULES_IN_CODEWORD)+g*a/Ke.MODULES_IN_CODEWORD;h+n[u]<=p&&(h+=n[u],u++),l[u]++}return l}static getDecodedCodewordValue(n){let a=Mn.getBitValue(n);return Ke.getCodeword(a)===-1?-1:a}static getBitValue(n){let a=0;for(let l=0;l<n.length;l++)for(let u=0;u<n[l];u++)a=a<<1|(l%2===0?1:0);return Math.trunc(a)}static getClosestDecodedValue(n){let a=ke.sum(n),l=new Array(Ke.BARS_IN_MODULE);if(a>1)for(let g=0;g<l.length;g++)l[g]=Math.fround(n[g]/a);let u=Ht.MAX_VALUE,h=-1;this.bSymbolTableReady||Mn.initialize();for(let g=0;g<Mn.RATIOS_TABLE.length;g++){let p=0,_=Mn.RATIOS_TABLE[g];for(let C=0;C<Ke.BARS_IN_MODULE;C++){let S=Math.fround(_[C]-l[C]);if(p+=Math.fround(S*S),p>=u)break}p<u&&(u=p,h=Ke.SYMBOL_TABLE[g])}return h}}Mn.bSymbolTableReady=!1,Mn.RATIOS_TABLE=new Array(Ke.SYMBOL_TABLE.length).map(R=>new Array(Ke.BARS_IN_MODULE));class vr{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class $c{static parseLong(n,a=void 0){return parseInt(n,a)}}class co extends w{}co.kind="NullPointerException";class _l{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,a,l){if(n==null)throw new co;if(a<0||a>n.length||l<0||a+l>n.length||a+l<0)throw new ye;if(l===0)return;for(let u=0;u<l;u++)this.write(n[a+u])}flush(){}close(){}}class Ea extends w{}class uo extends _l{constructor(n=32){if(super(),this.count=0,n<0)throw new N("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let l=this.buf.length<<1;if(l-n<0&&(l=n),l<0){if(n<0)throw new Ea;l=F.MAX_VALUE}this.buf=$.copyOfUint8Array(this.buf,l)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,a,l){if(a<0||a>n.length||l<0||a+l-n.length>0)throw new ye;this.ensureCapacity(this.count+l),H.arraycopy(n,a,this.buf,this.count,l),this.count+=l}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return $.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var Lt;(function(R){R[R.ALPHA=0]="ALPHA",R[R.LOWER=1]="LOWER",R[R.MIXED=2]="MIXED",R[R.PUNCT=3]="PUNCT",R[R.ALPHA_SHIFT=4]="ALPHA_SHIFT",R[R.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Lt||(Lt={}));function eu(){if(typeof window<"u")return window.BigInt||null;if(typeof hf<"u")return hf.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let fo;function As(R){if(typeof fo>"u"&&(fo=eu()),fo===null)throw new Error("BigInt is not supported!");return fo(R)}function wl(){let R=[];R[0]=As(1);let n=As(900);R[1]=n;for(let a=2;a<16;a++)R[a]=R[a-1]*n;return R}class ue{static decode(n,a){let l=new ge(""),u=Q.ISO8859_1;l.enableDecoding(u);let h=1,g=n[h++],p=new vr;for(;h<n[0];){switch(g){case ue.TEXT_COMPACTION_MODE_LATCH:h=ue.textCompaction(n,h,l);break;case ue.BYTE_COMPACTION_MODE_LATCH:case ue.BYTE_COMPACTION_MODE_LATCH_6:h=ue.byteCompaction(g,n,u,h,l);break;case ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(n[h++]);break;case ue.NUMERIC_COMPACTION_MODE_LATCH:h=ue.numericCompaction(n,h,l);break;case ue.ECI_CHARSET:Q.getCharacterSetECIByValue(n[h++]);break;case ue.ECI_GENERAL_PURPOSE:h+=2;break;case ue.ECI_USER_DEFINED:h++;break;case ue.BEGIN_MACRO_PDF417_CONTROL_BLOCK:h=ue.decodeMacroBlock(n,h,p);break;case ue.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ue.MACRO_PDF417_TERMINATOR:throw new k;default:h--,h=ue.textCompaction(n,h,l);break}if(h<n.length)g=n[h++];else throw k.getFormatInstance()}if(l.length()===0)throw k.getFormatInstance();let _=new wt(null,l.toString(),null,a);return _.setOther(p),_}static decodeMacroBlock(n,a,l){if(a+ue.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw k.getFormatInstance();let u=new Int32Array(ue.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<ue.NUMBER_OF_SEQUENCE_CODEWORDS;p++,a++)u[p]=n[a];l.setSegmentIndex(F.parseInt(ue.decodeBase900toBase10(u,ue.NUMBER_OF_SEQUENCE_CODEWORDS)));let h=new ge;a=ue.textCompaction(n,a,h),l.setFileId(h.toString());let g=-1;for(n[a]===ue.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(g=a+1);a<n[0];)switch(n[a]){case ue.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(a++,n[a]){case ue.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new ge;a=ue.textCompaction(n,a+1,p),l.setFileName(p.toString());break;case ue.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new ge;a=ue.textCompaction(n,a+1,_),l.setSender(_.toString());break;case ue.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let C=new ge;a=ue.textCompaction(n,a+1,C),l.setAddressee(C.toString());break;case ue.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let S=new ge;a=ue.numericCompaction(n,a+1,S),l.setSegmentCount(F.parseInt(S.toString()));break;case ue.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let O=new ge;a=ue.numericCompaction(n,a+1,O),l.setTimestamp($c.parseLong(O.toString()));break;case ue.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let M=new ge;a=ue.numericCompaction(n,a+1,M),l.setChecksum(F.parseInt(M.toString()));break;case ue.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let j=new ge;a=ue.numericCompaction(n,a+1,j),l.setFileSize($c.parseLong(j.toString()));break;default:throw k.getFormatInstance()}break;case ue.MACRO_PDF417_TERMINATOR:a++,l.setLastSegment(!0);break;default:throw k.getFormatInstance()}if(g!==-1){let p=a-g;l.isLastSegment()&&p--,l.setOptionalData($.copyOfRange(n,g,g+p))}return a}static textCompaction(n,a,l){let u=new Int32Array((n[0]-a)*2),h=new Int32Array((n[0]-a)*2),g=0,p=!1;for(;a<n[0]&&!p;){let _=n[a++];if(_<ue.TEXT_COMPACTION_MODE_LATCH)u[g]=_/30,u[g+1]=_%30,g+=2;else switch(_){case ue.TEXT_COMPACTION_MODE_LATCH:u[g++]=ue.TEXT_COMPACTION_MODE_LATCH;break;case ue.BYTE_COMPACTION_MODE_LATCH:case ue.BYTE_COMPACTION_MODE_LATCH_6:case ue.NUMERIC_COMPACTION_MODE_LATCH:case ue.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ue.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ue.MACRO_PDF417_TERMINATOR:a--,p=!0;break;case ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[g]=ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=n[a++],h[g]=_,g++;break}}return ue.decodeTextCompaction(u,h,g,l),a}static decodeTextCompaction(n,a,l,u){let h=Lt.ALPHA,g=Lt.ALPHA,p=0;for(;p<l;){let _=n[p],C="";switch(h){case Lt.ALPHA:if(_<26)C=String.fromCharCode(65+_);else switch(_){case 26:C=" ";break;case ue.LL:h=Lt.LOWER;break;case ue.ML:h=Lt.MIXED;break;case ue.PS:g=h,h=Lt.PUNCT_SHIFT;break;case ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case ue.TEXT_COMPACTION_MODE_LATCH:h=Lt.ALPHA;break}break;case Lt.LOWER:if(_<26)C=String.fromCharCode(97+_);else switch(_){case 26:C=" ";break;case ue.AS:g=h,h=Lt.ALPHA_SHIFT;break;case ue.ML:h=Lt.MIXED;break;case ue.PS:g=h,h=Lt.PUNCT_SHIFT;break;case ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case ue.TEXT_COMPACTION_MODE_LATCH:h=Lt.ALPHA;break}break;case Lt.MIXED:if(_<ue.PL)C=ue.MIXED_CHARS[_];else switch(_){case ue.PL:h=Lt.PUNCT;break;case 26:C=" ";break;case ue.LL:h=Lt.LOWER;break;case ue.AL:h=Lt.ALPHA;break;case ue.PS:g=h,h=Lt.PUNCT_SHIFT;break;case ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case ue.TEXT_COMPACTION_MODE_LATCH:h=Lt.ALPHA;break}break;case Lt.PUNCT:if(_<ue.PAL)C=ue.PUNCT_CHARS[_];else switch(_){case ue.PAL:h=Lt.ALPHA;break;case ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case ue.TEXT_COMPACTION_MODE_LATCH:h=Lt.ALPHA;break}break;case Lt.ALPHA_SHIFT:if(h=g,_<26)C=String.fromCharCode(65+_);else switch(_){case 26:C=" ";break;case ue.TEXT_COMPACTION_MODE_LATCH:h=Lt.ALPHA;break}break;case Lt.PUNCT_SHIFT:if(h=g,_<ue.PAL)C=ue.PUNCT_CHARS[_];else switch(_){case ue.PAL:h=Lt.ALPHA;break;case ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(a[p]);break;case ue.TEXT_COMPACTION_MODE_LATCH:h=Lt.ALPHA;break}break}C!==""&&u.append(C),p++}}static byteCompaction(n,a,l,u,h){let g=new uo,p=0,_=0,C=!1;switch(n){case ue.BYTE_COMPACTION_MODE_LATCH:let S=new Int32Array(6),O=a[u++];for(;u<a[0]&&!C;)switch(S[p++]=O,_=900*_+O,O=a[u++],O){case ue.TEXT_COMPACTION_MODE_LATCH:case ue.BYTE_COMPACTION_MODE_LATCH:case ue.NUMERIC_COMPACTION_MODE_LATCH:case ue.BYTE_COMPACTION_MODE_LATCH_6:case ue.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ue.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ue.MACRO_PDF417_TERMINATOR:u--,C=!0;break;default:if(p%5===0&&p>0){for(let M=0;M<6;++M)g.write(Number(As(_)>>As(8*(5-M))));_=0,p=0}break}u===a[0]&&O<ue.TEXT_COMPACTION_MODE_LATCH&&(S[p++]=O);for(let M=0;M<p;M++)g.write(S[M]);break;case ue.BYTE_COMPACTION_MODE_LATCH_6:for(;u<a[0]&&!C;){let M=a[u++];if(M<ue.TEXT_COMPACTION_MODE_LATCH)p++,_=900*_+M;else switch(M){case ue.TEXT_COMPACTION_MODE_LATCH:case ue.BYTE_COMPACTION_MODE_LATCH:case ue.NUMERIC_COMPACTION_MODE_LATCH:case ue.BYTE_COMPACTION_MODE_LATCH_6:case ue.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ue.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ue.MACRO_PDF417_TERMINATOR:u--,C=!0;break}if(p%5===0&&p>0){for(let j=0;j<6;++j)g.write(Number(As(_)>>As(8*(5-j))));_=0,p=0}}break}return h.append(we.decode(g.toByteArray(),l)),u}static numericCompaction(n,a,l){let u=0,h=!1,g=new Int32Array(ue.MAX_NUMERIC_CODEWORDS);for(;a<n[0]&&!h;){let p=n[a++];if(a===n[0]&&(h=!0),p<ue.TEXT_COMPACTION_MODE_LATCH)g[u]=p,u++;else switch(p){case ue.TEXT_COMPACTION_MODE_LATCH:case ue.BYTE_COMPACTION_MODE_LATCH:case ue.BYTE_COMPACTION_MODE_LATCH_6:case ue.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ue.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ue.MACRO_PDF417_TERMINATOR:a--,h=!0;break}(u%ue.MAX_NUMERIC_CODEWORDS===0||p===ue.NUMERIC_COMPACTION_MODE_LATCH||h)&&u>0&&(l.append(ue.decodeBase900toBase10(g,u)),u=0)}return a}static decodeBase900toBase10(n,a){let l=As(0);for(let h=0;h<a;h++)l+=ue.EXP900[a-h-1]*As(n[h]);let u=l.toString();if(u.charAt(0)!=="1")throw new k;return u.substring(1)}}ue.TEXT_COMPACTION_MODE_LATCH=900,ue.BYTE_COMPACTION_MODE_LATCH=901,ue.NUMERIC_COMPACTION_MODE_LATCH=902,ue.BYTE_COMPACTION_MODE_LATCH_6=924,ue.ECI_USER_DEFINED=925,ue.ECI_GENERAL_PURPOSE=926,ue.ECI_CHARSET=927,ue.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ue.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ue.MACRO_PDF417_TERMINATOR=922,ue.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ue.MAX_NUMERIC_CODEWORDS=15,ue.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ue.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ue.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ue.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ue.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ue.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ue.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ue.PL=25,ue.LL=27,ue.AS=27,ue.ML=28,ue.AL=28,ue.PS=29,ue.PAL=29,ue.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ue.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ue.EXP900=eu()?wl():[],ue.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ft{constructor(){}static decode(n,a,l,u,h,g,p){let _=new os(n,a,l,u,h),C=null,S=null,O;for(let V=!0;;V=!1){if(a!=null&&(C=ft.getRowIndicatorColumn(n,_,a,!0,g,p)),u!=null&&(S=ft.getRowIndicatorColumn(n,_,u,!1,g,p)),O=ft.merge(C,S),O==null)throw oe.getNotFoundInstance();let X=O.getBoundingBox();if(V&&X!=null&&(X.getMinY()<_.getMinY()||X.getMaxY()>_.getMaxY()))_=X;else break}O.setBoundingBox(_);let M=O.getBarcodeColumnCount()+1;O.setDetectionResultColumn(0,C),O.setDetectionResultColumn(M,S);let j=C!=null;for(let V=1;V<=M;V++){let X=j?V:M-V;if(O.getDetectionResultColumn(X)!==void 0)continue;let ie;X===0||X===M?ie=new yl(_,X===0):ie=new vs(_),O.setDetectionResultColumn(X,ie);let ce=-1,Se=ce;for(let Ce=_.getMinY();Ce<=_.getMaxY();Ce++){if(ce=ft.getStartColumn(O,X,Ce,j),ce<0||ce>_.getMaxX()){if(Se===-1)continue;ce=Se}let ve=ft.detectCodeword(n,_.getMinX(),_.getMaxX(),j,ce,Ce,g,p);ve!=null&&(ie.setCodeword(Ce,ve),Se=ce,g=Math.min(g,ve.getWidth()),p=Math.max(p,ve.getWidth()))}}return ft.createDecoderResult(O)}static merge(n,a){if(n==null&&a==null)return null;let l=ft.getBarcodeMetadata(n,a);if(l==null)return null;let u=os.merge(ft.adjustBoundingBox(n),ft.adjustBoundingBox(a));return new Sn(l,u)}static adjustBoundingBox(n){if(n==null)return null;let a=n.getRowHeights();if(a==null)return null;let l=ft.getMax(a),u=0;for(let p of a)if(u+=l-p,p>0)break;let h=n.getCodewords();for(let p=0;u>0&&h[p]==null;p++)u--;let g=0;for(let p=a.length-1;p>=0&&(g+=l-a[p],!(a[p]>0));p--);for(let p=h.length-1;g>0&&h[p]==null;p--)g--;return n.getBoundingBox().addMissingRows(u,g,n.isLeft())}static getMax(n){let a=-1;for(let l of n)a=Math.max(a,l);return a}static getBarcodeMetadata(n,a){let l;if(n==null||(l=n.getBarcodeMetadata())==null)return a==null?null:a.getBarcodeMetadata();let u;return a==null||(u=a.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(n,a,l,u,h,g){let p=new yl(a,u);for(let _=0;_<2;_++){let C=_===0?1:-1,S=Math.trunc(Math.trunc(l.getX()));for(let O=Math.trunc(Math.trunc(l.getY()));O<=a.getMaxY()&&O>=a.getMinY();O+=C){let M=ft.detectCodeword(n,0,n.getWidth(),u,S,O,h,g);M!=null&&(p.setCodeword(O,M),u?S=M.getStartX():S=M.getEndX())}}return p}static adjustCodewordCount(n,a){let l=a[0][1],u=l.getValue(),h=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-ft.getNumberOfECCodeWords(n.getBarcodeECLevel());if(u.length===0){if(h<1||h>Ke.MAX_CODEWORDS_IN_BARCODE)throw oe.getNotFoundInstance();l.setValue(h)}else u[0]!==h&&l.setValue(h)}static createDecoderResult(n){let a=ft.createBarcodeMatrix(n);ft.adjustCodewordCount(n,a);let l=new Array,u=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),h=[],g=new Array;for(let _=0;_<n.getBarcodeRowCount();_++)for(let C=0;C<n.getBarcodeColumnCount();C++){let S=a[_][C+1].getValue(),O=_*n.getBarcodeColumnCount()+C;S.length===0?l.push(O):S.length===1?u[O]=S[0]:(g.push(O),h.push(S))}let p=new Array(h.length);for(let _=0;_<p.length;_++)p[_]=h[_];return ft.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),u,Ke.toIntArray(l),Ke.toIntArray(g),p)}static createDecoderResultFromAmbiguousValues(n,a,l,u,h){let g=new Int32Array(u.length),p=100;for(;p-- >0;){for(let _=0;_<g.length;_++)a[u[_]]=h[_][g[_]];try{return ft.decodeCodewords(a,n,l)}catch(_){if(!(_ instanceof P))throw _}if(g.length===0)throw P.getChecksumInstance();for(let _=0;_<g.length;_++)if(g[_]<h[_].length-1){g[_]++;break}else if(g[_]=0,_===g.length-1)throw P.getChecksumInstance()}throw P.getChecksumInstance()}static createBarcodeMatrix(n){let a=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let u=0;u<a.length;u++)for(let h=0;h<a[u].length;h++)a[u][h]=new Cs;let l=0;for(let u of n.getDetectionResultColumns()){if(u!=null){for(let h of u.getCodewords())if(h!=null){let g=h.getRowNumber();if(g>=0){if(g>=a.length)continue;a[g][l].setValue(h.getValue())}}}l++}return a}static isValidBarcodeColumn(n,a){return a>=0&&a<=n.getBarcodeColumnCount()+1}static getStartColumn(n,a,l,u){let h=u?1:-1,g=null;if(ft.isValidBarcodeColumn(n,a-h)&&(g=n.getDetectionResultColumn(a-h).getCodeword(l)),g!=null)return u?g.getEndX():g.getStartX();if(g=n.getDetectionResultColumn(a).getCodewordNearby(l),g!=null)return u?g.getStartX():g.getEndX();if(ft.isValidBarcodeColumn(n,a-h)&&(g=n.getDetectionResultColumn(a-h).getCodewordNearby(l)),g!=null)return u?g.getEndX():g.getStartX();let p=0;for(;ft.isValidBarcodeColumn(n,a-h);){a-=h;for(let _ of n.getDetectionResultColumn(a).getCodewords())if(_!=null)return(u?_.getEndX():_.getStartX())+h*p*(_.getEndX()-_.getStartX());p++}return u?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,a,l,u,h,g,p,_){h=ft.adjustCodewordStartColumn(n,a,l,u,h,g);let C=ft.getModuleBitCount(n,a,l,u,h,g);if(C==null)return null;let S,O=ke.sum(C);if(u)S=h+O;else{for(let V=0;V<C.length/2;V++){let X=C[V];C[V]=C[C.length-1-V],C[C.length-1-V]=X}S=h,h=S-O}if(!ft.checkCodewordSkew(O,p,_))return null;let M=Mn.getDecodedValue(C),j=Ke.getCodeword(M);return j===-1?null:new Ri(h,S,ft.getCodewordBucketNumber(M),j)}static getModuleBitCount(n,a,l,u,h,g){let p=h,_=new Int32Array(8),C=0,S=u?1:-1,O=u;for(;(u?p<l:p>=a)&&C<_.length;)n.get(p,g)===O?(_[C]++,p+=S):(C++,O=!O);return C===_.length||p===(u?l:a)&&C===_.length-1?_:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,a,l,u,h,g){let p=h,_=u?-1:1;for(let C=0;C<2;C++){for(;(u?p>=a:p<l)&&u===n.get(p,g);){if(Math.abs(h-p)>ft.CODEWORD_SKEW_SIZE)return h;p+=_}_=-_,u=!u}return p}static checkCodewordSkew(n,a,l){return a-ft.CODEWORD_SKEW_SIZE<=n&&n<=l+ft.CODEWORD_SKEW_SIZE}static decodeCodewords(n,a,l){if(n.length===0)throw k.getFormatInstance();let u=1<<a+1,h=ft.correctErrors(n,l,u);ft.verifyCodewordCount(n,u);let g=ue.decode(n,""+a);return g.setErrorsCorrected(h),g.setErasures(l.length),g}static correctErrors(n,a,l){if(a!=null&&a.length>l/2+ft.MAX_ERRORS||l<0||l>ft.MAX_EC_CODEWORDS)throw P.getChecksumInstance();return ft.errorCorrection.decode(n,l,a)}static verifyCodewordCount(n,a){if(n.length<4)throw k.getFormatInstance();let l=n[0];if(l>n.length)throw k.getFormatInstance();if(l===0)if(a<n.length)n[0]=n.length-a;else throw k.getFormatInstance()}static getBitCountForCodeword(n){let a=new Int32Array(8),l=0,u=a.length-1;for(;!((n&1)!==l&&(l=n&1,u--,u<0));)a[u]++,n>>=1;return a}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return ft.getCodewordBucketNumber(ft.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let a=new Er;for(let l=0;l<n.length;l++){a.format("Row %2d: ",l);for(let u=0;u<n[l].length;u++){let h=n[l][u];h.getValue().length===0?a.format("        ",null):a.format("%4d(%2d)",h.getValue()[0],h.getConfidence(h.getValue()[0]))}a.format("%n")}return a.toString()}}ft.CODEWORD_SKEW_SIZE=2,ft.MAX_ERRORS=3,ft.MAX_EC_CODEWORDS=512,ft.errorCorrection=new as;class Ln{decode(n,a=null){let l=Ln.decode(n,a,!1);if(l==null||l.length===0||l[0]==null)throw oe.getNotFoundInstance();return l[0]}decodeMultiple(n,a=null){try{return Ln.decode(n,a,!0)}catch(l){throw l instanceof k||l instanceof P?oe.getNotFoundInstance():l}}static decode(n,a,l){const u=new Array,h=st.detectMultiple(n,a,l);for(const g of h.getPoints()){const p=ft.decode(h.getBits(),g[4],g[5],g[6],g[7],Ln.getMinCodewordWidth(g),Ln.getMaxCodewordWidth(g)),_=new De(p.getText(),p.getRawBytes(),void 0,g,Ae.PDF_417);_.putMetadata(it.ERROR_CORRECTION_LEVEL,p.getECLevel());const C=p.getOther();C!=null&&_.putMetadata(it.PDF417_EXTRA_METADATA,C),u.push(_)}return u.map(g=>g)}static getMaxWidth(n,a){return n==null||a==null?0:Math.trunc(Math.abs(n.getX()-a.getX()))}static getMinWidth(n,a){return n==null||a==null?F.MAX_VALUE:Math.trunc(Math.abs(n.getX()-a.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(Ln.getMaxWidth(n[0],n[4]),Ln.getMaxWidth(n[6],n[2])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN),Math.max(Ln.getMaxWidth(n[1],n[5]),Ln.getMaxWidth(n[7],n[3])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(Ln.getMinWidth(n[0],n[4]),Ln.getMinWidth(n[6],n[2])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN),Math.min(Ln.getMinWidth(n[1],n[5]),Ln.getMinWidth(n[7],n[3])*Ke.MODULES_IN_CODEWORD/Ke.MODULES_IN_STOP_PATTERN)))}reset(){}}class ho extends w{}ho.kind="ReaderException";class tu{constructor(n,a){this.verbose=n===!0,a&&this.setHints(a)}decode(n,a){return a&&this.setHints(a),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const a=!o(n)&&n.get(U.TRY_HARDER)===!0,l=o(n)?null:n.get(U.POSSIBLE_FORMATS),u=new Array;if(!o(l)){const h=l.some(g=>g===Ae.UPC_A||g===Ae.UPC_E||g===Ae.EAN_13||g===Ae.EAN_8||g===Ae.CODABAR||g===Ae.CODE_39||g===Ae.CODE_93||g===Ae.CODE_128||g===Ae.ITF||g===Ae.RSS_14||g===Ae.RSS_EXPANDED);h&&!a&&u.push(new Ni(n,this.verbose)),l.includes(Ae.QR_CODE)&&u.push(new rs),l.includes(Ae.DATA_MATRIX)&&u.push(new ss),l.includes(Ae.AZTEC)&&u.push(new so),l.includes(Ae.PDF_417)&&u.push(new Ln),h&&a&&u.push(new Ni(n,this.verbose))}u.length===0&&(a||u.push(new Ni(n,this.verbose)),u.push(new rs),u.push(new ss),u.push(new so),u.push(new Ln),a&&u.push(new Ni(n,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new ho("No readers where selected, nothing can be read.");for(const a of this.readers)try{return a.decode(n,this.hints)}catch(l){if(l instanceof ho)continue}throw new oe("No MultiFormat Readers were able to detect the code.")}}class nu extends Re{constructor(n=null,a=500){const l=new tu;l.setHints(n),super(l,a)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class dh extends Re{constructor(n=500){super(new Ln,n)}}class gh extends Re{constructor(n=500){super(new rs,n)}}var bl;(function(R){R[R.ERROR_CORRECTION=0]="ERROR_CORRECTION",R[R.CHARACTER_SET=1]="CHARACTER_SET",R[R.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",R[R.MIN_SIZE=3]="MIN_SIZE",R[R.MAX_SIZE=4]="MAX_SIZE",R[R.MARGIN=5]="MARGIN",R[R.PDF417_COMPACT=6]="PDF417_COMPACT",R[R.PDF417_COMPACTION=7]="PDF417_COMPACTION",R[R.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",R[R.AZTEC_LAYERS=9]="AZTEC_LAYERS",R[R.QR_VERSION=10]="QR_VERSION"})(bl||(bl={}));var En=bl;class va{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new _n(n,Int32Array.from([1])))}buildGenerator(n){const a=this.cachedGenerators;if(n>=a.length){let l=a[a.length-1];const u=this.field;for(let h=a.length;h<=n;h++){const g=l.multiply(new _n(u,Int32Array.from([1,u.exp(h-1+u.getGeneratorBase())])));a.push(g),l=g}}return a[n]}encode(n,a){if(a===0)throw new N("No error correction bytes");const l=n.length-a;if(l<=0)throw new N("No data bytes provided");const u=this.buildGenerator(a),h=new Int32Array(l);H.arraycopy(n,0,h,0,l);let g=new _n(this.field,h);g=g.multiplyByMonomial(a,1);const _=g.divide(u)[1].getCoefficients(),C=a-_.length;for(let S=0;S<C;S++)n[l+S]=0;H.arraycopy(_,0,n,l+C,_.length)}}class un{constructor(){}static applyMaskPenaltyRule1(n){return un.applyMaskPenaltyRule1Internal(n,!0)+un.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let a=0;const l=n.getArray(),u=n.getWidth(),h=n.getHeight();for(let g=0;g<h-1;g++){const p=l[g];for(let _=0;_<u-1;_++){const C=p[_];C===p[_+1]&&C===l[g+1][_]&&C===l[g+1][_+1]&&a++}}return un.N2*a}static applyMaskPenaltyRule3(n){let a=0;const l=n.getArray(),u=n.getWidth(),h=n.getHeight();for(let g=0;g<h;g++)for(let p=0;p<u;p++){const _=l[g];p+6<u&&_[p]===1&&_[p+1]===0&&_[p+2]===1&&_[p+3]===1&&_[p+4]===1&&_[p+5]===0&&_[p+6]===1&&(un.isWhiteHorizontal(_,p-4,p)||un.isWhiteHorizontal(_,p+7,p+11))&&a++,g+6<h&&l[g][p]===1&&l[g+1][p]===0&&l[g+2][p]===1&&l[g+3][p]===1&&l[g+4][p]===1&&l[g+5][p]===0&&l[g+6][p]===1&&(un.isWhiteVertical(l,p,g-4,g)||un.isWhiteVertical(l,p,g+7,g+11))&&a++}return a*un.N3}static isWhiteHorizontal(n,a,l){a=Math.max(a,0),l=Math.min(l,n.length);for(let u=a;u<l;u++)if(n[u]===1)return!1;return!0}static isWhiteVertical(n,a,l,u){l=Math.max(l,0),u=Math.min(u,n.length);for(let h=l;h<u;h++)if(n[h][a]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let a=0;const l=n.getArray(),u=n.getWidth(),h=n.getHeight();for(let _=0;_<h;_++){const C=l[_];for(let S=0;S<u;S++)C[S]===1&&a++}const g=n.getHeight()*n.getWidth();return Math.floor(Math.abs(a*2-g)*10/g)*un.N4}static getDataMaskBit(n,a,l){let u,h;switch(n){case 0:u=l+a&1;break;case 1:u=l&1;break;case 2:u=a%3;break;case 3:u=(l+a)%3;break;case 4:u=Math.floor(l/2)+Math.floor(a/3)&1;break;case 5:h=l*a,u=(h&1)+h%3;break;case 6:h=l*a,u=(h&1)+h%3&1;break;case 7:h=l*a,u=h%3+(l+a&1)&1;break;default:throw new N("Invalid mask pattern: "+n)}return u===0}static applyMaskPenaltyRule1Internal(n,a){let l=0;const u=a?n.getHeight():n.getWidth(),h=a?n.getWidth():n.getHeight(),g=n.getArray();for(let p=0;p<u;p++){let _=0,C=-1;for(let S=0;S<h;S++){const O=a?g[p][S]:g[S][p];O===C?_++:(_>=5&&(l+=un.N1+(_-5)),_=1,C=O)}_>=5&&(l+=un.N1+(_-5))}return l}}un.N1=3,un.N2=3,un.N3=40,un.N4=10;class go{constructor(n,a){this.width=n,this.height=a;const l=new Array(a);for(let u=0;u!==a;u++)l[u]=new Uint8Array(n);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(n,a){return this.bytes[a][n]}getArray(){return this.bytes}setNumber(n,a,l){this.bytes[a][n]=l}setBoolean(n,a,l){this.bytes[a][n]=l?1:0}clear(n){for(const a of this.bytes)$.fill(a,n)}equals(n){if(!(n instanceof go))return!1;const a=n;if(this.width!==a.width||this.height!==a.height)return!1;for(let l=0,u=this.height;l<u;++l){const h=this.bytes[l],g=a.bytes[l];for(let p=0,_=this.width;p<_;++p)if(h[p]!==g[p])return!1}return!0}toString(){const n=new ge;for(let a=0,l=this.height;a<l;++a){const u=this.bytes[a];for(let h=0,g=this.width;h<g;++h)switch(u[h]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class Bs{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new ge;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<Bs.NUM_MASK_PATTERNS}}Bs.NUM_MASK_PATTERNS=8;class Pt extends w{}Pt.kind="WriterException";class Ze{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,a,l,u,h){Ze.clearMatrix(h),Ze.embedBasicPatterns(l,h),Ze.embedTypeInfo(a,u,h),Ze.maybeEmbedVersionInfo(l,h),Ze.embedDataBits(n,u,h)}static embedBasicPatterns(n,a){Ze.embedPositionDetectionPatternsAndSeparators(a),Ze.embedDarkDotAtLeftBottomCorner(a),Ze.maybeEmbedPositionAdjustmentPatterns(n,a),Ze.embedTimingPatterns(a)}static embedTypeInfo(n,a,l){const u=new q;Ze.makeTypeInfoBits(n,a,u);for(let h=0,g=u.getSize();h<g;++h){const p=u.get(u.getSize()-1-h),_=Ze.TYPE_INFO_COORDINATES[h],C=_[0],S=_[1];if(l.setBoolean(C,S,p),h<8){const O=l.getWidth()-h-1;l.setBoolean(O,8,p)}else{const M=l.getHeight()-7+(h-8);l.setBoolean(8,M,p)}}}static maybeEmbedVersionInfo(n,a){if(n.getVersionNumber()<7)return;const l=new q;Ze.makeVersionInfoBits(n,l);let u=17;for(let h=0;h<6;++h)for(let g=0;g<3;++g){const p=l.get(u);u--,a.setBoolean(h,a.getHeight()-11+g,p),a.setBoolean(a.getHeight()-11+g,h,p)}}static embedDataBits(n,a,l){let u=0,h=-1,g=l.getWidth()-1,p=l.getHeight()-1;for(;g>0;){for(g===6&&(g-=1);p>=0&&p<l.getHeight();){for(let _=0;_<2;++_){const C=g-_;if(!Ze.isEmpty(l.get(C,p)))continue;let S;u<n.getSize()?(S=n.get(u),++u):S=!1,a!==255&&un.getDataMaskBit(a,C,p)&&(S=!S),l.setBoolean(C,p,S)}p+=h}h=-h,p+=h,g-=2}if(u!==n.getSize())throw new Pt("Not all bits consumed: "+u+"/"+n.getSize())}static findMSBSet(n){return 32-F.numberOfLeadingZeros(n)}static calculateBCHCode(n,a){if(a===0)throw new N("0 polynomial");const l=Ze.findMSBSet(a);for(n<<=l-1;Ze.findMSBSet(n)>=l;)n^=a<<Ze.findMSBSet(n)-l;return n}static makeTypeInfoBits(n,a,l){if(!Bs.isValidMaskPattern(a))throw new Pt("Invalid mask pattern");const u=n.getBits()<<3|a;l.appendBits(u,5);const h=Ze.calculateBCHCode(u,Ze.TYPE_INFO_POLY);l.appendBits(h,10);const g=new q;if(g.appendBits(Ze.TYPE_INFO_MASK_PATTERN,15),l.xor(g),l.getSize()!==15)throw new Pt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(n,a){a.appendBits(n.getVersionNumber(),6);const l=Ze.calculateBCHCode(n.getVersionNumber(),Ze.VERSION_INFO_POLY);if(a.appendBits(l,12),a.getSize()!==18)throw new Pt("should not happen but we got: "+a.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let a=8;a<n.getWidth()-8;++a){const l=(a+1)%2;Ze.isEmpty(n.get(a,6))&&n.setNumber(a,6,l),Ze.isEmpty(n.get(6,a))&&n.setNumber(6,a,l)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new Pt;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,a,l){for(let u=0;u<8;++u){if(!Ze.isEmpty(l.get(n+u,a)))throw new Pt;l.setNumber(n+u,a,0)}}static embedVerticalSeparationPattern(n,a,l){for(let u=0;u<7;++u){if(!Ze.isEmpty(l.get(n,a+u)))throw new Pt;l.setNumber(n,a+u,0)}}static embedPositionAdjustmentPattern(n,a,l){for(let u=0;u<5;++u){const h=Ze.POSITION_ADJUSTMENT_PATTERN[u];for(let g=0;g<5;++g)l.setNumber(n+g,a+u,h[g])}}static embedPositionDetectionPattern(n,a,l){for(let u=0;u<7;++u){const h=Ze.POSITION_DETECTION_PATTERN[u];for(let g=0;g<7;++g)l.setNumber(n+g,a+u,h[g])}}static embedPositionDetectionPatternsAndSeparators(n){const a=Ze.POSITION_DETECTION_PATTERN[0].length;Ze.embedPositionDetectionPattern(0,0,n),Ze.embedPositionDetectionPattern(n.getWidth()-a,0,n),Ze.embedPositionDetectionPattern(0,n.getWidth()-a,n);const l=8;Ze.embedHorizontalSeparationPattern(0,l-1,n),Ze.embedHorizontalSeparationPattern(n.getWidth()-l,l-1,n),Ze.embedHorizontalSeparationPattern(0,n.getWidth()-l,n);const u=7;Ze.embedVerticalSeparationPattern(u,0,n),Ze.embedVerticalSeparationPattern(n.getHeight()-u-1,0,n),Ze.embedVerticalSeparationPattern(u,n.getHeight()-u,n)}static maybeEmbedPositionAdjustmentPatterns(n,a){if(n.getVersionNumber()<2)return;const l=n.getVersionNumber()-1,u=Ze.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let h=0,g=u.length;h!==g;h++){const p=u[h];if(p>=0)for(let _=0;_!==g;_++){const C=u[_];C>=0&&Ze.isEmpty(a.get(C,p))&&Ze.embedPositionAdjustmentPattern(C-2,p-2,a)}}}}Ze.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ze.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ze.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ze.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ze.VERSION_INFO_POLY=7973,Ze.TYPE_INFO_POLY=1335,Ze.TYPE_INFO_MASK_PATTERN=21522;class mh{constructor(n,a){this.dataBytes=n,this.errorCorrectionBytes=a}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Qt{constructor(){}static calculateMaskPenalty(n){return un.applyMaskPenaltyRule1(n)+un.applyMaskPenaltyRule2(n)+un.applyMaskPenaltyRule3(n)+un.applyMaskPenaltyRule4(n)}static encode(n,a,l=null){let u=Qt.DEFAULT_BYTE_MODE_ENCODING;const h=l!==null&&l.get(En.CHARACTER_SET)!==void 0;h&&(u=l.get(En.CHARACTER_SET).toString());const g=this.chooseMode(n,u),p=new q;if(g===Xe.BYTE&&(h||Qt.DEFAULT_BYTE_MODE_ENCODING!==u)){const Ce=Q.getCharacterSetECIByName(u);Ce!==void 0&&this.appendECI(Ce,p)}this.appendModeInfo(g,p);const _=new q;this.appendBytes(n,g,_,u);let C;if(l!==null&&l.get(En.QR_VERSION)!==void 0){const Ce=Number.parseInt(l.get(En.QR_VERSION).toString(),10);C=He.getVersionForNumber(Ce);const ve=this.calculateBitsNeeded(g,p,_,C);if(!this.willFit(ve,C,a))throw new Pt("Data too big for requested version")}else C=this.recommendVersion(a,g,p,_);const S=new q;S.appendBitArray(p);const O=g===Xe.BYTE?_.getSizeInBytes():n.length;this.appendLengthInfo(O,C,g,S),S.appendBitArray(_);const M=C.getECBlocksForLevel(a),j=C.getTotalCodewords()-M.getTotalECCodewords();this.terminateBits(j,S);const V=this.interleaveWithECBytes(S,C.getTotalCodewords(),j,M.getNumBlocks()),X=new Bs;X.setECLevel(a),X.setMode(g),X.setVersion(C);const ie=C.getDimensionForVersion(),ce=new go(ie,ie),Se=this.chooseMaskPattern(V,a,C,ce);return X.setMaskPattern(Se),Ze.buildMatrix(V,a,C,Se,ce),X.setMatrix(ce),X}static recommendVersion(n,a,l,u){const h=this.calculateBitsNeeded(a,l,u,He.getVersionForNumber(1)),g=this.chooseVersion(h,n),p=this.calculateBitsNeeded(a,l,u,g);return this.chooseVersion(p,n)}static calculateBitsNeeded(n,a,l,u){return a.getSize()+n.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(n){return n<Qt.ALPHANUMERIC_TABLE.length?Qt.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,a=null){if(Q.SJIS.getName()===a&&this.isOnlyDoubleByteKanji(n))return Xe.KANJI;let l=!1,u=!1;for(let h=0,g=n.length;h<g;++h){const p=n.charAt(h);if(Qt.isDigit(p))l=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)u=!0;else return Xe.BYTE}return u?Xe.ALPHANUMERIC:l?Xe.NUMERIC:Xe.BYTE}static isOnlyDoubleByteKanji(n){let a;try{a=we.encode(n,Q.SJIS)}catch{return!1}const l=a.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const h=a[u]&255;if((h<129||h>159)&&(h<224||h>235))return!1}return!0}static chooseMaskPattern(n,a,l,u){let h=Number.MAX_SAFE_INTEGER,g=-1;for(let p=0;p<Bs.NUM_MASK_PATTERNS;p++){Ze.buildMatrix(n,a,l,p,u);let _=this.calculateMaskPenalty(u);_<h&&(h=_,g=p)}return g}static chooseVersion(n,a){for(let l=1;l<=40;l++){const u=He.getVersionForNumber(l);if(Qt.willFit(n,u,a))return u}throw new Pt("Data too big")}static willFit(n,a,l){const u=a.getTotalCodewords(),g=a.getECBlocksForLevel(l).getTotalECCodewords(),p=u-g,_=(n+7)/8;return p>=_}static terminateBits(n,a){const l=n*8;if(a.getSize()>l)throw new Pt("data bits cannot fit in the QR Code"+a.getSize()+" > "+l);for(let g=0;g<4&&a.getSize()<l;++g)a.appendBit(!1);const u=a.getSize()&7;if(u>0)for(let g=u;g<8;g++)a.appendBit(!1);const h=n-a.getSizeInBytes();for(let g=0;g<h;++g)a.appendBits((g&1)===0?236:17,8);if(a.getSize()!==l)throw new Pt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,a,l,u,h,g){if(u>=l)throw new Pt("Block ID too large");const p=n%l,_=l-p,C=Math.floor(n/l),S=C+1,O=Math.floor(a/l),M=O+1,j=C-O,V=S-M;if(j!==V)throw new Pt("EC bytes mismatch");if(l!==_+p)throw new Pt("RS blocks mismatch");if(n!==(O+j)*_+(M+V)*p)throw new Pt("Total bytes mismatch");u<_?(h[0]=O,g[0]=j):(h[0]=M,g[0]=V)}static interleaveWithECBytes(n,a,l,u){if(n.getSizeInBytes()!==l)throw new Pt("Number of bits and data bytes does not match");let h=0,g=0,p=0;const _=new Array;for(let S=0;S<u;++S){const O=new Int32Array(1),M=new Int32Array(1);Qt.getNumDataBytesAndNumECBytesForBlockID(a,l,u,S,O,M);const j=O[0],V=new Uint8Array(j);n.toBytes(8*h,V,0,j);const X=Qt.generateECBytes(V,M[0]);_.push(new mh(V,X)),g=Math.max(g,j),p=Math.max(p,X.length),h+=O[0]}if(l!==h)throw new Pt("Data bytes does not match offset");const C=new q;for(let S=0;S<g;++S)for(const O of _){const M=O.getDataBytes();S<M.length&&C.appendBits(M[S],8)}for(let S=0;S<p;++S)for(const O of _){const M=O.getErrorCorrectionBytes();S<M.length&&C.appendBits(M[S],8)}if(a!==C.getSizeInBytes())throw new Pt("Interleaving error: "+a+" and "+C.getSizeInBytes()+" differ.");return C}static generateECBytes(n,a){const l=n.length,u=new Int32Array(l+a);for(let g=0;g<l;g++)u[g]=n[g]&255;new va(pe.QR_CODE_FIELD_256).encode(u,a);const h=new Uint8Array(a);for(let g=0;g<a;g++)h[g]=u[l+g];return h}static appendModeInfo(n,a){a.appendBits(n.getBits(),4)}static appendLengthInfo(n,a,l,u){const h=l.getCharacterCountBits(a);if(n>=1<<h)throw new Pt(n+" is bigger than "+((1<<h)-1));u.appendBits(n,h)}static appendBytes(n,a,l,u){switch(a){case Xe.NUMERIC:Qt.appendNumericBytes(n,l);break;case Xe.ALPHANUMERIC:Qt.appendAlphanumericBytes(n,l);break;case Xe.BYTE:Qt.append8BitBytes(n,l,u);break;case Xe.KANJI:Qt.appendKanjiBytes(n,l);break;default:throw new Pt("Invalid mode: "+a)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const a=Qt.getDigit(n);return a>=0&&a<=9}static appendNumericBytes(n,a){const l=n.length;let u=0;for(;u<l;){const h=Qt.getDigit(n.charAt(u));if(u+2<l){const g=Qt.getDigit(n.charAt(u+1)),p=Qt.getDigit(n.charAt(u+2));a.appendBits(h*100+g*10+p,10),u+=3}else if(u+1<l){const g=Qt.getDigit(n.charAt(u+1));a.appendBits(h*10+g,7),u+=2}else a.appendBits(h,4),u++}}static appendAlphanumericBytes(n,a){const l=n.length;let u=0;for(;u<l;){const h=Qt.getAlphanumericCode(n.charCodeAt(u));if(h===-1)throw new Pt;if(u+1<l){const g=Qt.getAlphanumericCode(n.charCodeAt(u+1));if(g===-1)throw new Pt;a.appendBits(h*45+g,11),u+=2}else a.appendBits(h,6),u++}}static append8BitBytes(n,a,l){let u;try{u=we.encode(n,l)}catch(h){throw new Pt(h)}for(let h=0,g=u.length;h!==g;h++){const p=u[h];a.appendBits(p,8)}}static appendKanjiBytes(n,a){let l;try{l=we.encode(n,Q.SJIS)}catch(h){throw new Pt(h)}const u=l.length;for(let h=0;h<u;h+=2){const g=l[h]&255,p=l[h+1]&255,_=g<<8&4294967295|p;let C=-1;if(_>=33088&&_<=40956?C=_-33088:_>=57408&&_<=60351&&(C=_-49472),C===-1)throw new Pt("Invalid byte sequence");const S=(C>>8)*192+(C&255);a.appendBits(S,13)}}static appendECI(n,a){a.appendBits(Xe.ECI.getBits(),4),a.appendBits(n.getValue(),8)}}Qt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Qt.DEFAULT_BYTE_MODE_ENCODING=Q.UTF8.getName();class Ps{write(n,a,l,u=null){if(n.length===0)throw new N("Found empty contents");if(a<0||l<0)throw new N("Requested dimensions are too small: "+a+"x"+l);let h=gt.L,g=Ps.QUIET_ZONE_SIZE;u!==null&&(u.get(En.ERROR_CORRECTION)!==void 0&&(h=gt.fromString(u.get(En.ERROR_CORRECTION).toString())),u.get(En.MARGIN)!==void 0&&(g=Number.parseInt(u.get(En.MARGIN).toString(),10)));const p=Qt.encode(n,h,u);return this.renderResult(p,a,l,g)}writeToDom(n,a,l,u,h=null){typeof n=="string"&&(n=document.querySelector(n));const g=this.write(a,l,u,h);n&&n.appendChild(g)}renderResult(n,a,l,u){const h=n.getMatrix();if(h===null)throw new Le;const g=h.getWidth(),p=h.getHeight(),_=g+u*2,C=p+u*2,S=Math.max(a,_),O=Math.max(l,C),M=Math.min(Math.floor(S/_),Math.floor(O/C)),j=Math.floor((S-g*M)/2),V=Math.floor((O-p*M)/2),X=this.createSVGElement(S,O);for(let ie=0,ce=V;ie<p;ie++,ce+=M)for(let Se=0,Ce=j;Se<g;Se++,Ce+=M)if(h.get(Se,ie)===1){const ve=this.createSvgRectElement(Ce,ce,M,M);X.appendChild(ve)}return X}createSVGElement(n,a){const l=document.createElementNS(Ps.SVG_NS,"svg");return l.setAttributeNS(null,"height",n.toString()),l.setAttributeNS(null,"width",a.toString()),l}createSvgRectElement(n,a,l,u){const h=document.createElementNS(Ps.SVG_NS,"rect");return h.setAttributeNS(null,"x",n.toString()),h.setAttributeNS(null,"y",a.toString()),h.setAttributeNS(null,"height",l.toString()),h.setAttributeNS(null,"width",u.toString()),h.setAttributeNS(null,"fill","#000000"),h}}Ps.QUIET_ZONE_SIZE=4,Ps.SVG_NS="http://www.w3.org/2000/svg";class Cr{encode(n,a,l,u,h){if(n.length===0)throw new N("Found empty contents");if(a!==Ae.QR_CODE)throw new N("Can only encode QR_CODE, but got "+a);if(l<0||u<0)throw new N(`Requested dimensions are too small: ${l}x${u}`);let g=gt.L,p=Cr.QUIET_ZONE_SIZE;h!==null&&(h.get(En.ERROR_CORRECTION)!==void 0&&(g=gt.fromString(h.get(En.ERROR_CORRECTION).toString())),h.get(En.MARGIN)!==void 0&&(p=Number.parseInt(h.get(En.MARGIN).toString(),10)));const _=Qt.encode(n,g,h);return Cr.renderResult(_,l,u,p)}static renderResult(n,a,l,u){const h=n.getMatrix();if(h===null)throw new Le;const g=h.getWidth(),p=h.getHeight(),_=g+u*2,C=p+u*2,S=Math.max(a,_),O=Math.max(l,C),M=Math.min(Math.floor(S/_),Math.floor(O/C)),j=Math.floor((S-g*M)/2),V=Math.floor((O-p*M)/2),X=new Ie(S,O);for(let ie=0,ce=V;ie<p;ie++,ce+=M)for(let Se=0,Ce=j;Se<g;Se++,Ce+=M)h.get(Se,ie)===1&&X.setRegion(Ce,ce,M,M);return X}}Cr.QUIET_ZONE_SIZE=4;class ph{encode(n,a,l,u,h){let g;switch(a){case Ae.QR_CODE:g=new Cr;break;default:throw new N("No encoder available for format "+a)}return g.encode(n,a,l,u,h)}}class Xi extends Ge{constructor(n,a,l,u,h,g,p,_){if(super(g,p),this.yuvData=n,this.dataWidth=a,this.dataHeight=l,this.left=u,this.top=h,u+g>a||h+p>l)throw new N("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(g,p)}getRow(n,a){if(n<0||n>=this.getHeight())throw new N("Requested row is outside the image: "+n);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const u=(n+this.top)*this.dataWidth+this.left;return H.arraycopy(this.yuvData,u,a,0,l),a}getMatrix(){const n=this.getWidth(),a=this.getHeight();if(n===this.dataWidth&&a===this.dataHeight)return this.yuvData;const l=n*a,u=new Uint8ClampedArray(l);let h=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return H.arraycopy(this.yuvData,h,u,0,l),u;for(let g=0;g<a;g++){const p=g*n;H.arraycopy(this.yuvData,h,u,p,n),h+=this.dataWidth}return u}isCropSupported(){return!0}crop(n,a,l,u){return new Xi(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+a,l,u,!1)}renderThumbnail(){const n=this.getWidth()/Xi.THUMBNAIL_SCALE_FACTOR,a=this.getHeight()/Xi.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(n*a),u=this.yuvData;let h=this.top*this.dataWidth+this.left;for(let g=0;g<a;g++){const p=g*n;for(let _=0;_<n;_++){const C=u[h+_*Xi.THUMBNAIL_SCALE_FACTOR]&255;l[p+_]=4278190080|C*65793}h+=this.dataWidth*Xi.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Xi.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Xi.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,a){const l=this.yuvData;for(let u=0,h=this.top*this.dataWidth+this.left;u<a;u++,h+=this.dataWidth){const g=h+n/2;for(let p=h,_=h+n-1;p<g;p++,_--){const C=l[p];l[p]=l[_],l[_]=C}}}invert(){return new rt(this)}}Xi.THUMBNAIL_SCALE_FACTOR=2;class El extends Ge{constructor(n,a,l,u,h,g,p){if(super(a,l),this.dataWidth=u,this.dataHeight=h,this.left=g,this.top=p,n.BYTES_PER_ELEMENT===4){const _=a*l,C=new Uint8ClampedArray(_);for(let S=0;S<_;S++){const O=n[S],M=O>>16&255,j=O>>7&510,V=O&255;C[S]=(M+j+V)/4&255}this.luminances=C}else this.luminances=n;if(u===void 0&&(this.dataWidth=a),h===void 0&&(this.dataHeight=l),g===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+a>this.dataWidth||this.top+l>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(n,a){if(n<0||n>=this.getHeight())throw new N("Requested row is outside the image: "+n);const l=this.getWidth();(a==null||a.length<l)&&(a=new Uint8ClampedArray(l));const u=(n+this.top)*this.dataWidth+this.left;return H.arraycopy(this.luminances,u,a,0,l),a}getMatrix(){const n=this.getWidth(),a=this.getHeight();if(n===this.dataWidth&&a===this.dataHeight)return this.luminances;const l=n*a,u=new Uint8ClampedArray(l);let h=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return H.arraycopy(this.luminances,h,u,0,l),u;for(let g=0;g<a;g++){const p=g*n;H.arraycopy(this.luminances,h,u,p,n),h+=this.dataWidth}return u}isCropSupported(){return!0}crop(n,a,l,u){return new El(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+n,this.top+a)}invert(){return new rt(this)}}class iu extends Q{static forName(n){return this.getCharacterSetECIByName(n)}}class Ca{}Ca.ISO_8859_1=Q.ISO8859_1;class Ar{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class su{static singletonList(n){return[n]}static min(n,a){return n.sort(a)[0]}}class ru{constructor(n){this.previous=n}getPrevious(){return this.previous}}class js extends ru{constructor(n,a,l){super(n),this.value=a,this.bitCount=l}appendTo(n,a){n.appendBits(this.value,this.bitCount)}add(n,a){return new js(this,n,a)}addBinaryShift(n,a){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new js(this,n,a)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+F.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class mo extends js{constructor(n,a,l){super(n,0,0),this.binaryShiftStart=a,this.binaryShiftByteCount=l}appendTo(n,a){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):l===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(a[this.binaryShiftStart+l],8)}addBinaryShift(n,a){return new mo(this,n,a)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function au(R,n,a){return new mo(R,n,a)}function Sr(R,n,a){return new js(R,n,a)}const Tr=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Ss=0,po=1,mi=2,vl=3,Oi=4,Aa=new js(null,0,0),Us=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function xh(R){for(let n of R)$.fill(n,-1);return R[Ss][Oi]=0,R[po][Oi]=0,R[po][Ss]=28,R[vl][Oi]=0,R[mi][Oi]=0,R[mi][Ss]=15,R}const Sa=xh($.createInt32Array(6,6));class Di{constructor(n,a,l,u){this.token=n,this.mode=a,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,a){let l=this.bitCount,u=this.token;if(n!==this.mode){let g=Us[this.mode][n];u=Sr(u,g&65535,g>>16),l+=g>>16}let h=n===mi?4:5;return u=Sr(u,a,h),new Di(u,n,0,l+h)}shiftAndAppend(n,a){let l=this.token,u=this.mode===mi?4:5;return l=Sr(l,Sa[this.mode][n],u),l=Sr(l,a,5),new Di(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(n){let a=this.token,l=this.mode,u=this.bitCount;if(this.mode===Oi||this.mode===mi){let p=Us[l][Ss];a=Sr(a,p&65535,p>>16),u+=p>>16,l=Ss}let h=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,g=new Di(a,l,this.binaryShiftByteCount+1,u+h);return g.binaryShiftByteCount===2078&&(g=g.endBinaryShift(n+1)),g}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let a=this.token;return a=au(a,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new Di(a,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let a=this.bitCount+(Us[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?a+=Di.calculateBinaryShiftCost(n)-Di.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(a+=10),a<=n.bitCount}toBitArray(n){let a=[];for(let u=this.endBinaryShift(n.length).token;u!==null;u=u.getPrevious())a.unshift(u);let l=new q;for(const u of a)u.appendTo(l,n);return l}toString(){return ne.format("%s bits=%d bytes=%d",Tr[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}Di.INITIAL_STATE=new Di(Aa,Ss,0,0);function ou(R){const n=ne.getCharCode(" "),a=ne.getCharCode("."),l=ne.getCharCode(",");R[Ss][n]=1;const u=ne.getCharCode("Z"),h=ne.getCharCode("A");for(let M=h;M<=u;M++)R[Ss][M]=M-h+2;R[po][n]=1;const g=ne.getCharCode("z"),p=ne.getCharCode("a");for(let M=p;M<=g;M++)R[po][M]=M-p+2;R[mi][n]=1;const _=ne.getCharCode("9"),C=ne.getCharCode("0");for(let M=C;M<=_;M++)R[mi][M]=M-C+2;R[mi][l]=12,R[mi][a]=13;const S=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let M=0;M<S.length;M++)R[vl][ne.getCharCode(S[M])]=M;const O=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let M=0;M<O.length;M++)ne.getCharCode(O[M])>0&&(R[Oi][ne.getCharCode(O[M])]=M);return R}const Ta=ou($.createInt32Array(5,256));class Fs{constructor(n){this.text=n}encode(){const n=ne.getCharCode(" "),a=ne.getCharCode(`
`);let l=su.singletonList(Di.INITIAL_STATE);for(let h=0;h<this.text.length;h++){let g,p=h+1<this.text.length?this.text[h+1]:0;switch(this.text[h]){case ne.getCharCode("\r"):g=p===a?2:0;break;case ne.getCharCode("."):g=p===n?3:0;break;case ne.getCharCode(","):g=p===n?4:0;break;case ne.getCharCode(":"):g=p===n?5:0;break;default:g=0}g>0?(l=Fs.updateStateListForPair(l,h,g),h++):l=this.updateStateListForChar(l,h)}return su.min(l,(h,g)=>h.getBitCount()-g.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,a){const l=[];for(let u of n)this.updateStateForChar(u,a,l);return Fs.simplifyStates(l)}updateStateForChar(n,a,l){let u=this.text[a]&255,h=Ta[n.getMode()][u]>0,g=null;for(let p=0;p<=Oi;p++){let _=Ta[p][u];if(_>0){if(g==null&&(g=n.endBinaryShift(a)),!h||p===n.getMode()||p===mi){const C=g.latchAndAppend(p,_);l.push(C)}if(!h&&Sa[n.getMode()][p]>=0){const C=g.shiftAndAppend(p,_);l.push(C)}}}if(n.getBinaryShiftByteCount()>0||Ta[n.getMode()][u]===0){let p=n.addBinaryShiftChar(a);l.push(p)}}static updateStateListForPair(n,a,l){const u=[];for(let h of n)this.updateStateForPair(h,a,l,u);return this.simplifyStates(u)}static updateStateForPair(n,a,l,u){let h=n.endBinaryShift(a);if(u.push(h.latchAndAppend(Oi,l)),n.getMode()!==Oi&&u.push(h.shiftAndAppend(Oi,l)),l===3||l===4){let g=h.latchAndAppend(mi,16-l).latchAndAppend(mi,1);u.push(g)}if(n.getBinaryShiftByteCount()>0){let g=n.addBinaryShiftChar(a).addBinaryShiftChar(a+1);u.push(g)}}static simplifyStates(n){let a=[];for(const l of n){let u=!0;for(const h of a){if(h.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(h)&&(a=a.filter(g=>g!==h))}u&&a.push(l)}return a}}class Et{constructor(){}static encodeBytes(n){return Et.encode(n,Et.DEFAULT_EC_PERCENT,Et.DEFAULT_AZTEC_LAYERS)}static encode(n,a,l){let u=new Fs(n).encode(),h=F.truncDivision(u.getSize()*a,100)+11,g=u.getSize()+h,p,_,C,S,O;if(l!==Et.DEFAULT_AZTEC_LAYERS){if(p=l<0,_=Math.abs(l),_>(p?Et.MAX_NB_BITS_COMPACT:Et.MAX_NB_BITS))throw new N(ne.format("Illegal value %s for layers",l));C=Et.totalBitsInLayer(_,p),S=Et.WORD_SIZE[_];let ve=C-C%S;if(O=Et.stuffBits(u,S),O.getSize()+h>ve)throw new N("Data to large for user specified layer");if(p&&O.getSize()>S*64)throw new N("Data to large for user specified layer")}else{S=0,O=null;for(let ve=0;;ve++){if(ve>Et.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(p=ve<=3,_=p?ve+1:ve,C=Et.totalBitsInLayer(_,p),g>C)continue;(O==null||S!==Et.WORD_SIZE[_])&&(S=Et.WORD_SIZE[_],O=Et.stuffBits(u,S));let dt=C-C%S;if(!(p&&O.getSize()>S*64)&&O.getSize()+h<=dt)break}}let M=Et.generateCheckWords(O,C,S),j=O.getSize()/S,V=Et.generateModeMessage(p,_,j),X=(p?11:14)+_*4,ie=new Int32Array(X),ce;if(p){ce=X;for(let ve=0;ve<ie.length;ve++)ie[ve]=ve}else{ce=X+1+2*F.truncDivision(F.truncDivision(X,2)-1,15);let ve=F.truncDivision(X,2),dt=F.truncDivision(ce,2);for(let at=0;at<ve;at++){let gn=at+F.truncDivision(at,15);ie[ve-at-1]=dt-gn-1,ie[ve+at]=dt+gn+1}}let Se=new Ie(ce);for(let ve=0,dt=0;ve<_;ve++){let at=(_-ve)*4+(p?9:12);for(let gn=0;gn<at;gn++){let pi=gn*2;for(let Yn=0;Yn<2;Yn++)M.get(dt+pi+Yn)&&Se.set(ie[ve*2+Yn],ie[ve*2+gn]),M.get(dt+at*2+pi+Yn)&&Se.set(ie[ve*2+gn],ie[X-1-ve*2-Yn]),M.get(dt+at*4+pi+Yn)&&Se.set(ie[X-1-ve*2-Yn],ie[X-1-ve*2-gn]),M.get(dt+at*6+pi+Yn)&&Se.set(ie[X-1-ve*2-gn],ie[ve*2+Yn])}dt+=at*8}if(Et.drawModeMessage(Se,p,ce,V),p)Et.drawBullsEye(Se,F.truncDivision(ce,2),5);else{Et.drawBullsEye(Se,F.truncDivision(ce,2),7);for(let ve=0,dt=0;ve<F.truncDivision(X,2)-1;ve+=15,dt+=16)for(let at=F.truncDivision(ce,2)&1;at<ce;at+=2)Se.set(F.truncDivision(ce,2)-dt,at),Se.set(F.truncDivision(ce,2)+dt,at),Se.set(at,F.truncDivision(ce,2)-dt),Se.set(at,F.truncDivision(ce,2)+dt)}let Ce=new Ar;return Ce.setCompact(p),Ce.setSize(ce),Ce.setLayers(_),Ce.setCodeWords(j),Ce.setMatrix(Se),Ce}static drawBullsEye(n,a,l){for(let u=0;u<l;u+=2)for(let h=a-u;h<=a+u;h++)n.set(h,a-u),n.set(h,a+u),n.set(a-u,h),n.set(a+u,h);n.set(a-l,a-l),n.set(a-l+1,a-l),n.set(a-l,a-l+1),n.set(a+l,a-l),n.set(a+l,a-l+1),n.set(a+l,a+l-1)}static generateModeMessage(n,a,l){let u=new q;return n?(u.appendBits(a-1,2),u.appendBits(l-1,6),u=Et.generateCheckWords(u,28,4)):(u.appendBits(a-1,5),u.appendBits(l-1,11),u=Et.generateCheckWords(u,40,4)),u}static drawModeMessage(n,a,l,u){let h=F.truncDivision(l,2);if(a)for(let g=0;g<7;g++){let p=h-3+g;u.get(g)&&n.set(p,h-5),u.get(g+7)&&n.set(h+5,p),u.get(20-g)&&n.set(p,h+5),u.get(27-g)&&n.set(h-5,p)}else for(let g=0;g<10;g++){let p=h-5+g+F.truncDivision(g,5);u.get(g)&&n.set(p,h-7),u.get(g+10)&&n.set(h+7,p),u.get(29-g)&&n.set(p,h+7),u.get(39-g)&&n.set(h-7,p)}}static generateCheckWords(n,a,l){let u=n.getSize()/l,h=new va(Et.getGF(l)),g=F.truncDivision(a,l),p=Et.bitsToWords(n,l,g);h.encode(p,g-u);let _=a%l,C=new q;C.appendBits(0,_);for(const S of Array.from(p))C.appendBits(S,l);return C}static bitsToWords(n,a,l){let u=new Int32Array(l),h,g;for(h=0,g=n.getSize()/a;h<g;h++){let p=0;for(let _=0;_<a;_++)p|=n.get(h*a+_)?1<<a-_-1:0;u[h]=p}return u}static getGF(n){switch(n){case 4:return pe.AZTEC_PARAM;case 6:return pe.AZTEC_DATA_6;case 8:return pe.AZTEC_DATA_8;case 10:return pe.AZTEC_DATA_10;case 12:return pe.AZTEC_DATA_12;default:throw new N("Unsupported word size "+n)}}static stuffBits(n,a){let l=new q,u=n.getSize(),h=(1<<a)-2;for(let g=0;g<u;g+=a){let p=0;for(let _=0;_<a;_++)(g+_>=u||n.get(g+_))&&(p|=1<<a-1-_);(p&h)===h?(l.appendBits(p&h,a),g--):(p&h)===0?(l.appendBits(p|1,a),g--):l.appendBits(p,a)}return l}static totalBitsInLayer(n,a){return((a?88:112)+16*n)*n}}Et.DEFAULT_EC_PERCENT=33,Et.DEFAULT_AZTEC_LAYERS=0,Et.MAX_NB_BITS=32,Et.MAX_NB_BITS_COMPACT=4,Et.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Na{encode(n,a,l,u){return this.encodeWithHints(n,a,l,u,null)}encodeWithHints(n,a,l,u,h){let g=Ca.ISO_8859_1,p=Et.DEFAULT_EC_PERCENT,_=Et.DEFAULT_AZTEC_LAYERS;return h!=null&&(h.has(En.CHARACTER_SET)&&(g=iu.forName(h.get(En.CHARACTER_SET).toString())),h.has(En.ERROR_CORRECTION)&&(p=F.parseInt(h.get(En.ERROR_CORRECTION).toString())),h.has(En.AZTEC_LAYERS)&&(_=F.parseInt(h.get(En.AZTEC_LAYERS).toString()))),Na.encodeLayers(n,a,l,u,g,p,_)}static encodeLayers(n,a,l,u,h,g,p){if(a!==Ae.AZTEC)throw new N("Can only encode AZTEC, but got "+a);let _=Et.encode(ne.getBytes(n,h),g,p);return Na.renderResult(_,l,u)}static renderResult(n,a,l){let u=n.getMatrix();if(u==null)throw new Le;let h=u.getWidth(),g=u.getHeight(),p=Math.max(a,h),_=Math.max(l,g),C=Math.min(p/h,_/g),S=(p-h*C)/2,O=(_-g*C)/2,M=new Ie(p,_);for(let j=0,V=O;j<g;j++,V+=C)for(let X=0,ie=S;X<h;X++,ie+=C)u.get(X,j)&&M.setRegion(ie,V,C,C);return M}}i.AbstractExpandedDecoder=wn,i.ArgumentException=T,i.ArithmeticException=ui,i.AztecCode=Ar,i.AztecCodeReader=so,i.AztecCodeWriter=Na,i.AztecDecoder=Me,i.AztecDetector=hl,i.AztecDetectorResult=fi,i.AztecEncoder=Et,i.AztecHighLevelEncoder=Fs,i.AztecPoint=qn,i.BarcodeFormat=Ae,i.Binarizer=G,i.BinaryBitmap=D,i.BitArray=q,i.BitMatrix=Ie,i.BitSource=Ii,i.BrowserAztecCodeReader=ch,i.BrowserBarcodeReader=uh,i.BrowserCodeReader=Re,i.BrowserDatamatrixCodeReader=oo,i.BrowserMultiFormatReader=nu,i.BrowserPDF417Reader=dh,i.BrowserQRCodeReader=gh,i.BrowserQRCodeSvgWriter=Ps,i.CharacterSetECI=Q,i.ChecksumException=P,i.Code128Reader=Te,i.Code39Reader=Vt,i.DataMatrixDecodedBitStreamParser=is,i.DataMatrixReader=ss,i.DecodeHintType=U,i.DecoderResult=wt,i.DefaultGridSampler=fl,i.DetectorResult=zi,i.EAN13Reader=Hi,i.EncodeHintType=En,i.Exception=w,i.FormatException=k,i.GenericGF=pe,i.GenericGFPoly=_n,i.GlobalHistogramBinarizer=ee,i.GridSampler=pa,i.GridSamplerInstance=Si,i.HTMLCanvasElementLuminanceSource=lt,i.HybridBinarizer=me,i.ITFReader=ut,i.IllegalArgumentException=N,i.IllegalStateException=Le,i.InvertedLuminanceSource=rt,i.LuminanceSource=Ge,i.MathUtils=ke,i.MultiFormatOneDReader=Ni,i.MultiFormatReader=tu,i.MultiFormatWriter=ph,i.NotFoundException=oe,i.OneDReader=en,i.PDF417DecodedBitStreamParser=ue,i.PDF417DecoderErrorCorrection=as,i.PDF417Reader=Ln,i.PDF417ResultMetadata=vr,i.PerspectiveTransform=hi,i.PlanarYUVLuminanceSource=Xi,i.QRCodeByteMatrix=go,i.QRCodeDataMask=ii,i.QRCodeDecodedBitStreamParser=Kt,i.QRCodeDecoderErrorCorrectionLevel=gt,i.QRCodeDecoderFormatInformation=An,i.QRCodeEncoder=Qt,i.QRCodeEncoderQRCode=Bs,i.QRCodeMaskUtil=un,i.QRCodeMatrixUtil=Ze,i.QRCodeMode=Xe,i.QRCodeReader=rs,i.QRCodeVersion=He,i.QRCodeWriter=Cr,i.RGBLuminanceSource=El,i.RSS14Reader=Bt,i.RSSExpandedReader=be,i.ReaderException=ho,i.ReedSolomonDecoder=Ye,i.ReedSolomonEncoder=va,i.ReedSolomonException=Ne,i.Result=De,i.ResultMetadataType=it,i.ResultPoint=Be,i.StringUtils=ne,i.UnsupportedOperationException=Ee,i.VideoInputDevice=W,i.WhiteRectangleDetector=Wt,i.WriterException=Pt,i.ZXingArrays=$,i.ZXingCharset=iu,i.ZXingInteger=F,i.ZXingStandardCharsets=Ca,i.ZXingStringBuilder=ge,i.ZXingStringEncoding=we,i.ZXingSystem=H,i.createAbstractExpandedDecoder=pr,Object.defineProperty(i,"__esModule",{value:!0})}))})(hc,hc.exports)),hc.exports}var on=FE();const zE=Bc(on),HE=EE({__proto__:null,default:zE},[on]);var M2=(function(){function r(e,i,o){if(this.formatMap=new Map([[Ue.QR_CODE,on.BarcodeFormat.QR_CODE],[Ue.AZTEC,on.BarcodeFormat.AZTEC],[Ue.CODABAR,on.BarcodeFormat.CODABAR],[Ue.CODE_39,on.BarcodeFormat.CODE_39],[Ue.CODE_93,on.BarcodeFormat.CODE_93],[Ue.CODE_128,on.BarcodeFormat.CODE_128],[Ue.DATA_MATRIX,on.BarcodeFormat.DATA_MATRIX],[Ue.MAXICODE,on.BarcodeFormat.MAXICODE],[Ue.ITF,on.BarcodeFormat.ITF],[Ue.EAN_13,on.BarcodeFormat.EAN_13],[Ue.EAN_8,on.BarcodeFormat.EAN_8],[Ue.PDF_417,on.BarcodeFormat.PDF_417],[Ue.RSS_14,on.BarcodeFormat.RSS_14],[Ue.RSS_EXPANDED,on.BarcodeFormat.RSS_EXPANDED],[Ue.UPC_A,on.BarcodeFormat.UPC_A],[Ue.UPC_E,on.BarcodeFormat.UPC_E],[Ue.UPC_EAN_EXTENSION,on.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!HE)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=i,this.logger=o;var f=this.createZXingFormats(e),m=new Map;m.set(on.DecodeHintType.POSSIBLE_FORMATS,f),m.set(on.DecodeHintType.TRY_HARDER,!1),this.hints=m}return r.prototype.decodeAsync=function(e){var i=this;return new Promise(function(o,f){try{o(i.decode(e))}catch(m){f(m)}})},r.prototype.decode=function(e){var i=new on.MultiFormatReader(this.verbose,this.hints),o=new on.HTMLCanvasElementLuminanceSource(e),f=new on.BinaryBitmap(new on.HybridBinarizer(o)),m=i.decode(f);return{text:m.text,format:Dy.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(i,o,f){e.set(i,o)}),e},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createZXingFormats=function(e){for(var i=[],o=0,f=e;o<f.length;o++){var m=f[o];this.formatMap.has(m)?i.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return i},r.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},r})(),VE=function(r,e,i,o){function f(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function v(T){try{w(o.next(T))}catch(N){x(N)}}function E(T){try{w(o.throw(T))}catch(N){x(N)}}function w(T){T.done?m(T.value):f(T.value).then(v,E)}w((o=o.apply(r,e||[])).next())})},GE=function(r,e){var i={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,f,m,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(w){return function(T){return E([w,T])}}function E(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(i=0)),i;)try{if(o=1,f&&(m=w[0]&2?f.return:w[0]?f.throw||((m=f.return)&&m.call(f),0):f.next)&&!(m=m.call(f,w[1])).done)return m;switch(f=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return i.label++,{value:w[1],done:!1};case 5:i.label++,f=w[1],w=[0];continue;case 7:w=i.ops.pop(),i.trys.pop();continue;default:if(m=i.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){i=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){i.label=w[1];break}if(w[0]===6&&i.label<m[1]){i.label=m[1],m=w;break}if(m&&i.label<m[2]){i.label=m[2],i.ops.push(w);break}m[2]&&i.ops.pop(),i.trys.pop();continue}w=e.call(r,i)}catch(T){w=[6,T],f=0}finally{o=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},L2=(function(){function r(e,i,o){if(this.formatMap=new Map([[Ue.QR_CODE,"qr_code"],[Ue.AZTEC,"aztec"],[Ue.CODABAR,"codabar"],[Ue.CODE_39,"code_39"],[Ue.CODE_93,"code_93"],[Ue.CODE_128,"code_128"],[Ue.DATA_MATRIX,"data_matrix"],[Ue.ITF,"itf"],[Ue.EAN_13,"ean_13"],[Ue.EAN_8,"ean_8"],[Ue.PDF_417,"pdf417"],[Ue.UPC_A,"upc_a"],[Ue.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!r.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=i,this.logger=o;var f=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(f),!this.detector)throw"BarcodeDetector detector not supported"}return r.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},r.prototype.decodeAsync=function(e){return VE(this,void 0,void 0,function(){var i,o;return GE(this,function(f){switch(f.label){case 0:return[4,this.detector.detect(e)];case 1:if(i=f.sent(),!i||i.length===0)throw"No barcode or QR code detected.";return o=this.selectLargestBarcode(i),[2,{text:o.rawValue,format:Dy.create(this.toHtml5QrcodeSupportedFormats(o.format)),debugData:this.createDebugData()}]}})})},r.prototype.selectLargestBarcode=function(e){for(var i=null,o=0,f=0,m=e;f<m.length;f++){var x=m[f],v=x.boundingBox.width*x.boundingBox.height;v>o&&(o=v,i=x)}if(!i)throw"No largest barcode found";return i},r.prototype.createBarcodeDetectorFormats=function(e){for(var i=[],o=0,f=e;o<f.length;o++){var m=f[o];this.formatMap.has(m)?i.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:i}},r.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},r.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(i,o,f){e.set(i,o)}),e},r.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},r})(),k2=function(r,e,i,o){function f(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function v(T){try{w(o.next(T))}catch(N){x(N)}}function E(T){try{w(o.throw(T))}catch(N){x(N)}}function w(T){T.done?m(T.value):f(T.value).then(v,E)}w((o=o.apply(r,e||[])).next())})},B2=function(r,e){var i={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,f,m,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(w){return function(T){return E([w,T])}}function E(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(i=0)),i;)try{if(o=1,f&&(m=w[0]&2?f.return:w[0]?f.throw||((m=f.return)&&m.call(f),0):f.next)&&!(m=m.call(f,w[1])).done)return m;switch(f=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return i.label++,{value:w[1],done:!1};case 5:i.label++,f=w[1],w=[0];continue;case 7:w=i.ops.pop(),i.trys.pop();continue;default:if(m=i.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){i=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){i.label=w[1];break}if(w[0]===6&&i.label<m[1]){i.label=m[1],m=w;break}if(m&&i.label<m[2]){i.label=m[2],i.ops.push(w);break}m[2]&&i.ops.pop(),i.trys.pop();continue}w=e.call(r,i)}catch(T){w=[6,T],f=0}finally{o=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},qE=(function(){function r(e,i,o,f){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=o,i&&L2.isSupported()?(this.primaryDecoder=new L2(e,o,f),this.secondaryDecoder=new M2(e,o,f)):this.primaryDecoder=new M2(e,o,f)}return r.prototype.decodeAsync=function(e){return k2(this,void 0,void 0,function(){var i;return B2(this,function(o){switch(o.label){case 0:i=performance.now(),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,o.sent()];case 3:return this.possiblyLogPerformance(i),[7];case 4:return[2]}})})},r.prototype.decodeRobustlyAsync=function(e){return k2(this,void 0,void 0,function(){var i,o;return B2(this,function(f){switch(f.label){case 0:i=performance.now(),f.label=1;case 1:return f.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,f.sent()];case 3:if(o=f.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw o;case 4:return this.possiblyLogPerformance(i),[7];case 5:return[2]}})})},r.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},r.prototype.possiblyLogPerformance=function(e){if(this.verbose){var i=performance.now()-e;this.executionResults.push(i),this.executions++,this.possiblyFlushPerformanceReport()}},r.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,i=0,o=this.executionResults;i<o.length;i++){var f=o[i];e+=f}var m=e/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},r})(),E1=(function(){var r=function(e,i){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,f){o.__proto__=f}||function(o,f){for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(o[m]=f[m])},r(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");r(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}})(),Af=function(r,e,i,o){function f(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function v(T){try{w(o.next(T))}catch(N){x(N)}}function E(T){try{w(o.throw(T))}catch(N){x(N)}}function w(T){T.done?m(T.value):f(T.value).then(v,E)}w((o=o.apply(r,e||[])).next())})},Sf=function(r,e){var i={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,f,m,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(w){return function(T){return E([w,T])}}function E(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(i=0)),i;)try{if(o=1,f&&(m=w[0]&2?f.return:w[0]?f.throw||((m=f.return)&&m.call(f),0):f.next)&&!(m=m.call(f,w[1])).done)return m;switch(f=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return i.label++,{value:w[1],done:!1};case 5:i.label++,f=w[1],w=[0];continue;case 7:w=i.ops.pop(),i.trys.pop();continue;default:if(m=i.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){i=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){i.label=w[1];break}if(w[0]===6&&i.label<m[1]){i.label=m[1],m=w;break}if(m&&i.label<m[2]){i.label=m[2],i.ops.push(w);break}m[2]&&i.ops.pop(),i.trys.pop();continue}w=e.call(r,i)}catch(T){w=[6,T],f=0}finally{o=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Ly=(function(){function r(e,i){this.name=e,this.track=i}return r.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},r.prototype.apply=function(e){var i={};i[this.name]=e;var o={advanced:[i]};return this.track.applyConstraints(o)},r.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var i=e[this.name];return i}return null},r})(),XE=(function(r){E1(e,r);function e(i,o){return r.call(this,i,o)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(i){var o={};o[this.name]=i;var f={advanced:[o]};return this.track.applyConstraints(f)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var i=this.track.getCapabilities(),o=i[this.name];return{min:o.min,max:o.max,step:o.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e})(Ly),YE=(function(r){E1(e,r);function e(i){return r.call(this,"zoom",i)||this}return e})(XE),WE=(function(r){E1(e,r);function e(i){return r.call(this,"torch",i)||this}return e})(Ly),KE=(function(){function r(e){this.track=e}return r.prototype.zoomFeature=function(){return new YE(this.track)},r.prototype.torchFeature=function(){return new WE(this.track)},r})(),ZE=(function(){function r(e,i,o){this.isClosed=!1,this.parentElement=e,this.mediaStream=i,this.callbacks=o,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return r.prototype.createVideoElement=function(e){var i=document.createElement("video");return i.style.width="".concat(e,"px"),i.style.display="block",i.muted=!0,i.setAttribute("muted","true"),i.playsInline=!0,i},r.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var i=function(){var o=e.surface.clientWidth,f=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(o,f),e.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.srcObject=this.mediaStream,this.surface.play()},r.create=function(e,i,o,f){return Af(this,void 0,void 0,function(){var m,x;return Sf(this,function(v){switch(v.label){case 0:return m=new r(e,i,f),o.aspectRatio?(x={aspectRatio:o.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(x)]):[3,2];case 1:v.sent(),v.label=2;case 2:return m.setupSurface(),[2,m]}})})},r.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},r.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},r.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},r.prototype.resume=function(e){this.failIfClosed();var i=this,o=function(){setTimeout(e,200),i.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.play()},r.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},r.prototype.getSurface=function(){return this.failIfClosed(),this.surface},r.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},r.prototype.applyVideoConstraints=function(e){return Af(this,void 0,void 0,function(){return Sf(this,function(i){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},r.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(i,o){var f=e.mediaStream.getVideoTracks(),m=f.length,x=0;e.mediaStream.getVideoTracks().forEach(function(v){e.mediaStream.removeTrack(v),v.stop(),++x,x>=m&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),i())})})},r.prototype.getCapabilities=function(){return new KE(this.getFirstTrackOrFail())},r})(),QE=(function(){function r(e){this.mediaStream=e}return r.prototype.render=function(e,i,o){return Af(this,void 0,void 0,function(){return Sf(this,function(f){return[2,ZE.create(e,this.mediaStream,i,o)]})})},r.create=function(e){return Af(this,void 0,void 0,function(){var i,o;return Sf(this,function(f){switch(f.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return i={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(i)];case 1:return o=f.sent(),[2,new r(o)]}})})},r})(),P2=function(r,e,i,o){function f(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function v(T){try{w(o.next(T))}catch(N){x(N)}}function E(T){try{w(o.throw(T))}catch(N){x(N)}}function w(T){T.done?m(T.value):f(T.value).then(v,E)}w((o=o.apply(r,e||[])).next())})},j2=function(r,e){var i={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,f,m,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(w){return function(T){return E([w,T])}}function E(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(i=0)),i;)try{if(o=1,f&&(m=w[0]&2?f.return:w[0]?f.throw||((m=f.return)&&m.call(f),0):f.next)&&!(m=m.call(f,w[1])).done)return m;switch(f=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return i.label++,{value:w[1],done:!1};case 5:i.label++,f=w[1],w=[0];continue;case 7:w=i.ops.pop(),i.trys.pop();continue;default:if(m=i.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){i=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){i.label=w[1];break}if(w[0]===6&&i.label<m[1]){i.label=m[1],m=w;break}if(m&&i.label<m[2]){i.label=m[2],i.ops.push(w);break}m[2]&&i.ops.pop(),i.trys.pop();continue}w=e.call(r,i)}catch(T){w=[6,T],f=0}finally{o=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},JE=(function(){function r(){}return r.failIfNotSupported=function(){return P2(this,void 0,void 0,function(){return j2(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new r]})})},r.prototype.create=function(e){return P2(this,void 0,void 0,function(){return j2(this,function(i){return[2,QE.create(e)]})})},r})(),$E=function(r,e,i,o){function f(m){return m instanceof i?m:new i(function(x){x(m)})}return new(i||(i=Promise))(function(m,x){function v(T){try{w(o.next(T))}catch(N){x(N)}}function E(T){try{w(o.throw(T))}catch(N){x(N)}}function w(T){T.done?m(T.value):f(T.value).then(v,E)}w((o=o.apply(r,e||[])).next())})},ev=function(r,e){var i={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},o,f,m,x;return x={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function v(w){return function(T){return E([w,T])}}function E(w){if(o)throw new TypeError("Generator is already executing.");for(;x&&(x=0,w[0]&&(i=0)),i;)try{if(o=1,f&&(m=w[0]&2?f.return:w[0]?f.throw||((m=f.return)&&m.call(f),0):f.next)&&!(m=m.call(f,w[1])).done)return m;switch(f=0,m&&(w=[w[0]&2,m.value]),w[0]){case 0:case 1:m=w;break;case 4:return i.label++,{value:w[1],done:!1};case 5:i.label++,f=w[1],w=[0];continue;case 7:w=i.ops.pop(),i.trys.pop();continue;default:if(m=i.trys,!(m=m.length>0&&m[m.length-1])&&(w[0]===6||w[0]===2)){i=0;continue}if(w[0]===3&&(!m||w[1]>m[0]&&w[1]<m[3])){i.label=w[1];break}if(w[0]===6&&i.label<m[1]){i.label=m[1],m=w;break}if(m&&i.label<m[2]){i.label=m[2],i.ops.push(w);break}m[2]&&i.ops.pop(),i.trys.pop();continue}w=e.call(r,i)}catch(T){w=[6,T],f=0}finally{o=m=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},tv=(function(){function r(){}return r.retrieve=function(){if(navigator.mediaDevices)return r.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?r.getCamerasFromMediaStreamTrack():r.rejectWithError()},r.rejectWithError=function(){var e=qo.unableToQuerySupportedDevices();return r.isHttpsOrLocalhost()||(e=qo.insecureContextCameraQueryError()),Promise.reject(e)},r.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},r.getCamerasFromMediaDevices=function(){return $E(this,void 0,void 0,function(){var e,i,o,f,m,x,v;return ev(this,function(E){switch(E.label){case 0:return e=function(w){for(var T=w.getVideoTracks(),N=0,D=T;N<D.length;N++){var P=D[N];P.enabled=!1,P.stop(),w.removeTrack(P)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return i=E.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(o=E.sent(),f=[],m=0,x=o;m<x.length;m++)v=x[m],v.kind==="videoinput"&&f.push({id:v.deviceId,label:v.label});return e(i),[2,f]}})})},r.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,i){var o=function(m){for(var x=[],v=0,E=m;v<E.length;v++){var w=E[v];w.kind==="video"&&x.push({id:w.id,label:w.label})}e(x)},f=MediaStreamTrack;f.getSources(o)})},r})(),xn;(function(r){r[r.UNKNOWN=0]="UNKNOWN",r[r.NOT_STARTED=1]="NOT_STARTED",r[r.SCANNING=2]="SCANNING",r[r.PAUSED=3]="PAUSED"})(xn||(xn={}));var nv=(function(){function r(){this.state=xn.NOT_STARTED,this.onGoingTransactionNewState=xn.UNKNOWN}return r.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},r.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},r.prototype.execute=function(){if(this.onGoingTransactionNewState===xn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=xn.UNKNOWN,this.directTransition(e)},r.prototype.cancel=function(){if(this.onGoingTransactionNewState===xn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=xn.UNKNOWN},r.prototype.getState=function(){return this.state},r.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==xn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},r.prototype.validateTransition=function(e){switch(this.state){case xn.UNKNOWN:throw"Transition from unknown is not allowed";case xn.NOT_STARTED:this.failIfNewStateIs(e,[xn.PAUSED]);break;case xn.SCANNING:break;case xn.PAUSED:break}},r.prototype.failIfNewStateIs=function(e,i){for(var o=0,f=i;o<f.length;o++){var m=f[o];if(e===m)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},r})(),iv=(function(){function r(e){this.stateManager=e}return r.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},r.prototype.directTransition=function(e){this.stateManager.directTransition(e)},r.prototype.getState=function(){return this.stateManager.getState()},r.prototype.canScanFile=function(){return this.stateManager.getState()===xn.NOT_STARTED},r.prototype.isScanning=function(){return this.stateManager.getState()!==xn.NOT_STARTED},r.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===xn.SCANNING},r.prototype.isPaused=function(){return this.stateManager.getState()===xn.PAUSED},r})(),sv=(function(){function r(){}return r.create=function(){return new iv(new nv)},r})(),rv=(function(){var r=function(e,i){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,f){o.__proto__=f}||function(o,f){for(var m in f)Object.prototype.hasOwnProperty.call(f,m)&&(o[m]=f[m])},r(e,i)};return function(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");r(e,i);function o(){this.constructor=e}e.prototype=i===null?Object.create(i):(o.prototype=i.prototype,new o)}})(),Ui=(function(r){rv(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e})(BE),av=(function(){function r(e,i){this.logger=i,this.fps=Ui.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Ui.DEFAULT_DISABLE_FLIP}return r.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?My.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},r.prototype.isShadedBoxEnabled=function(){return!ir(this.qrbox)},r.create=function(e,i){return new r(e,i)},r})(),U2=(function(){function r(e,i){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var o;typeof i=="boolean"?this.verbose=i===!0:i&&(o=i,this.verbose=o.verbose===!0,o.experimentalFeatures),this.logger=new jE(this.verbose),this.qrcode=new qE(this.getSupportedFormats(i),this.getUseBarCodeDetectorIfSupported(o),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=sv.create()}return r.prototype.start=function(e,i,o,f){var m=this;if(!e)throw"cameraIdOrConfig is required";if(!o||typeof o!="function")throw"qrCodeSuccessCallback is required and should be a function.";var x;f?x=f:x=this.verbose?this.logger.log:function(){};var v=av.create(i,this.logger);this.clearElement();var E=!1;v.videoConstraints&&(v.isMediaStreamConstraintsValid()?E=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=E,T=document.getElementById(this.elementId);T.clientWidth?T.clientWidth:Ui.DEFAULT_WIDTH,T.style.position="relative",this.shouldScan=!0,this.element=T;var N=this,D=this.stateManagerProxy.startTransition(xn.SCANNING);return new Promise(function(P,G){var H=w?v.videoConstraints:N.createVideoConstraints(e);if(!H){D.cancel(),G("videoConstraints should be defined");return}var ye={};(!w||v.aspectRatio)&&(ye.aspectRatio=v.aspectRatio);var te={onRenderSurfaceReady:function($,F){N.setupUi($,F,v),N.isScanning=!0,N.foreverScan(v,o,x)}};JE.failIfNotSupported().then(function($){$.create(H).then(function(F){return F.render(m.element,ye,te).then(function(q){N.renderedCamera=q,D.execute(),P(null)}).catch(function(q){D.cancel(),G(q)})}).catch(function(F){D.cancel(),G(qo.errorGettingUserMedia(F))})}).catch(function($){D.cancel(),G(qo.cameraStreamingNotSupported())})})},r.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(xn.PAUSED),this.showPausedState(),(ir(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},r.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,i=function(){e.stateManagerProxy.directTransition(xn.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){i();return}this.renderedCamera.resume(function(){i()})},r.prototype.getState=function(){return this.stateManagerProxy.getState()},r.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var i=this.stateManagerProxy.startTransition(xn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var o=function(){if(e.element){var m=document.getElementById(Ui.SHADED_REGION_ELEMENT_ID);m&&e.element.removeChild(m)}},f=this;return this.renderedCamera.close().then(function(){return f.renderedCamera=null,f.element&&(f.element.removeChild(f.canvasElement),f.canvasElement=null),o(),f.qrRegion&&(f.qrRegion=null),f.context&&(f.context=null),i.execute(),f.hidePausedState(),f.isScanning=!1,Promise.resolve()})},r.prototype.scanFile=function(e,i){return this.scanFileV2(e,i).then(function(o){return o.decodedText})},r.prototype.scanFileV2=function(e,i){var o=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ir(i)&&(i=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(f,m){o.possiblyCloseLastScanImageFile(),o.clearElement(),o.lastScanImageFile=URL.createObjectURL(e);var x=new Image;x.onload=function(){var v=x.width,E=x.height,w=document.getElementById(o.elementId),T=w.clientWidth?w.clientWidth:Ui.DEFAULT_WIDTH,N=Math.max(w.clientHeight?w.clientHeight:E,Ui.FILE_SCAN_MIN_HEIGHT),D=o.computeCanvasDrawConfig(v,E,T,N);if(i){var P=o.createCanvasElement(T,N,"qr-canvas-visible");P.style.display="inline-block",w.appendChild(P);var G=P.getContext("2d");if(!G)throw"Unable to get 2d context from canvas";G.canvas.width=T,G.canvas.height=N,G.drawImage(x,0,0,v,E,D.x,D.y,D.width,D.height)}var H=Ui.FILE_SCAN_HIDDEN_CANVAS_PADDING,ye=Math.max(x.width,D.width),te=Math.max(x.height,D.height),$=ye+2*H,F=te+2*H,q=o.createCanvasElement($,F);w.appendChild(q);var Z=q.getContext("2d");if(!Z)throw"Unable to get 2d context from canvas";Z.canvas.width=$,Z.canvas.height=F,Z.drawImage(x,0,0,v,E,H,H,ye,te);try{o.qrcode.decodeRobustlyAsync(q).then(function(U){f(O2.createFromQrcodeResult(U))}).catch(m)}catch(U){m("QR code parse error, error = ".concat(U))}},x.onerror=m,x.onabort=m,x.onstalled=m,x.onsuspend=m,x.src=URL.createObjectURL(e)})},r.prototype.clear=function(){this.clearElement()},r.getCameras=function(){return tv.retrieve()},r.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},r.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},r.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},r.prototype.applyVideoConstraints=function(e){if(e){if(!My.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},r.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},r.prototype.getSupportedFormats=function(e){var i=[Ue.QR_CODE,Ue.AZTEC,Ue.CODABAR,Ue.CODE_39,Ue.CODE_93,Ue.CODE_128,Ue.DATA_MATRIX,Ue.MAXICODE,Ue.ITF,Ue.EAN_13,Ue.EAN_8,Ue.PDF_417,Ue.RSS_14,Ue.RSS_EXPANDED,Ue.UPC_A,Ue.UPC_E,Ue.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return i;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var o=[],f=0,m=e.formatsToSupport;f<m.length;f++){var x=m[f];kE(x)?o.push(x):this.logger.warn("Invalid format: ".concat(x," passed in config, ignoring."))}if(o.length===0)throw"None of formatsToSupport match supported values.";return o},r.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ir(e))return!0;if(!ir(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ir(e.experimentalFeatures))return!0;var i=e.experimentalFeatures;return ir(i.useBarCodeDetectorIfSupported)?!0:i.useBarCodeDetectorIfSupported!==!1},r.prototype.validateQrboxSize=function(e,i,o){var f=this,m=o.qrbox;this.validateQrboxConfig(m);var x=this.toQrdimensions(e,i,m),v=function(w){if(w<Ui.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ui.MIN_QR_BOX_SIZE,"px.")},E=function(w){return w>e&&(f.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=e),w};v(x.width),v(x.height),x.width=E(x.width)},r.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},r.prototype.toQrdimensions=function(e,i,o){if(typeof o=="number")return{width:o,height:o};if(typeof o=="function")try{return o(e,i)}catch(f){throw new Error("qrbox config was passed as a function but it failed with unknown error"+f)}return o},r.prototype.setupUi=function(e,i,o){o.isShadedBoxEnabled()&&this.validateQrboxSize(e,i,o);var f=ir(o.qrbox)?{width:e,height:i}:o.qrbox;this.validateQrboxConfig(f);var m=this.toQrdimensions(e,i,f);m.height>i&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var x=o.isShadedBoxEnabled()&&m.height<=i,v={x:0,y:0,width:e,height:i},E=x?this.getShadedRegionBounds(e,i,m):v,w=this.createCanvasElement(E.width,E.height),T={willReadFrequently:!0},N=w.getContext("2d",T);N.canvas.width=E.width,N.canvas.height=E.height,this.element.append(w),x&&this.possiblyInsertShadingElement(this.element,e,i,m),this.createScannerPausedUiElement(this.element),this.qrRegion=E,this.context=N,this.canvasElement=w},r.prototype.createScannerPausedUiElement=function(e){var i=document.createElement("div");i.innerText=qo.scannerPaused(),i.style.display="none",i.style.position="absolute",i.style.top="0px",i.style.zIndex="1",i.style.background="rgba(9, 9, 9, 0.46)",i.style.color="#FFECEC",i.style.textAlign="center",i.style.width="100%",e.appendChild(i),this.scannerPausedUiElement=i},r.prototype.scanContext=function(e,i){var o=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(f){return e(f.text,O2.createFromQrcodeResult(f)),o.possiblyUpdateShaders(!0),!0}).catch(function(f){o.possiblyUpdateShaders(!1);var m=qo.codeParseError(f);return i(m,PE.createFrom(m)),!1})},r.prototype.foreverScan=function(e,i,o){var f=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),x=m.videoWidth/m.clientWidth,v=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var E=this.qrRegion.width*x,w=this.qrRegion.height*v,T=this.qrRegion.x*x,N=this.qrRegion.y*v;this.context.drawImage(m,T,N,E,w,0,0,this.qrRegion.width,this.qrRegion.height);var D=function(){f.foreverScanTimeout=setTimeout(function(){f.foreverScan(e,i,o)},f.getTimeoutFps(e.fps))};this.scanContext(i,o).then(function(P){!P&&e.disableFlip!==!0?(f.context.translate(f.context.canvas.width,0),f.context.scale(-1,1),f.scanContext(i,o).finally(function(){D()})):D()}).catch(function(P){f.logger.logError("Error happend while scanning context",P),D()})}},r.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var i="facingMode",o="deviceId",f={user:!0,environment:!0},m="exact",x=function(G){if(G in f)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(G,"'")},v=Object.keys(e);if(v.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(v.length," keys");var E=Object.keys(e)[0];if(E!==i&&E!==o)throw"Only '".concat(i,"' and '").concat(o,"' ")+" are supported for 'cameraIdOrConfig'";if(E===i){var w=e.facingMode;if(typeof w=="string"){if(x(w))return{facingMode:w}}else if(typeof w=="object")if(m in w){if(x(w["".concat(m)]))return{facingMode:{exact:w["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var T=typeof w;throw"Invalid type of 'facingMode' = ".concat(T)}}else{var N=e.deviceId;if(typeof N=="string")return{deviceId:N};if(typeof N=="object"){if(m in N)return{deviceId:{exact:N["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var D=typeof N;throw"Invalid type of 'deviceId' = ".concat(D)}}}var P=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(P)},r.prototype.computeCanvasDrawConfig=function(e,i,o,f){if(e<=o&&i<=f){var m=(o-e)/2,x=(f-i)/2;return{x:m,y:x,width:e,height:i}}else{var v=e,E=i;return e>o&&(i=o/e*i,e=o),i>f&&(e=f/i*e,i=f),this.logger.log("Image downsampled from "+"".concat(v,"X").concat(E)+" to ".concat(e,"X").concat(i,".")),this.computeCanvasDrawConfig(e,i,o,f)}},r.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},r.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(i){i.style.backgroundColor=e?Ui.BORDER_SHADER_MATCH_COLOR:Ui.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},r.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},r.prototype.createCanvasElement=function(e,i,o){var f=e,m=i,x=document.createElement("canvas");return x.style.width="".concat(f,"px"),x.style.height="".concat(m,"px"),x.style.display="none",x.id=ir(o)?"qr-canvas":o,x},r.prototype.getShadedRegionBounds=function(e,i,o){if(o.width>e||o.height>i)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-o.width)/2,y:(i-o.height)/2,width:o.width,height:o.height}},r.prototype.possiblyInsertShadingElement=function(e,i,o,f){if(!(i-f.width<1||o-f.height<1)){var m=document.createElement("div");m.style.position="absolute";var x=(i-f.width)/2,v=(o-f.height)/2;if(m.style.borderLeft="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(v,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(Ui.SHADED_REGION_ELEMENT_ID),i-f.width<11||o-f.height<11)this.hasBorderShaders=!1;else{var E=5,w=40;this.insertShaderBorders(m,w,E,-E,null,0,!0),this.insertShaderBorders(m,w,E,-E,null,0,!1),this.insertShaderBorders(m,w,E,null,-E,0,!0),this.insertShaderBorders(m,w,E,null,-E,0,!1),this.insertShaderBorders(m,E,w+E,-E,null,-E,!0),this.insertShaderBorders(m,E,w+E,null,-E,-E,!0),this.insertShaderBorders(m,E,w+E,-E,null,-E,!1),this.insertShaderBorders(m,E,w+E,null,-E,-E,!1),this.hasBorderShaders=!0}e.append(m)}},r.prototype.insertShaderBorders=function(e,i,o,f,m,x,v){var E=document.createElement("div");E.style.position="absolute",E.style.backgroundColor=Ui.BORDER_SHADER_DEFAULT_COLOR,E.style.width="".concat(i,"px"),E.style.height="".concat(o,"px"),f!==null&&(E.style.top="".concat(f,"px")),m!==null&&(E.style.bottom="".concat(m,"px")),v?E.style.left="".concat(x,"px"):E.style.right="".concat(x,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(E),e.appendChild(E)},r.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},r.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},r.prototype.getTimeoutFps=function(e){return 1e3/e},r})(),F2;(function(r){r[r.STATUS_DEFAULT=0]="STATUS_DEFAULT",r[r.STATUS_SUCCESS=1]="STATUS_SUCCESS",r[r.STATUS_WARNING=2]="STATUS_WARNING",r[r.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(F2||(F2={}));var u0={exports:{}},z2;function ov(){return z2||(z2=1,(function(r){var e=(function(){var i=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",m={};function x(E,w){if(!m[E]){m[E]={};for(var T=0;T<E.length;T++)m[E][E.charAt(T)]=T}return m[E][w]}var v={compressToBase64:function(E){if(E==null)return"";var w=v._compress(E,6,function(T){return o.charAt(T)});switch(w.length%4){default:case 0:return w;case 1:return w+"===";case 2:return w+"==";case 3:return w+"="}},decompressFromBase64:function(E){return E==null?"":E==""?null:v._decompress(E.length,32,function(w){return x(o,E.charAt(w))})},compressToUTF16:function(E){return E==null?"":v._compress(E,15,function(w){return i(w+32)})+" "},decompressFromUTF16:function(E){return E==null?"":E==""?null:v._decompress(E.length,16384,function(w){return E.charCodeAt(w)-32})},compressToUint8Array:function(E){for(var w=v.compress(E),T=new Uint8Array(w.length*2),N=0,D=w.length;N<D;N++){var P=w.charCodeAt(N);T[N*2]=P>>>8,T[N*2+1]=P%256}return T},decompressFromUint8Array:function(E){if(E==null)return v.decompress(E);for(var w=new Array(E.length/2),T=0,N=w.length;T<N;T++)w[T]=E[T*2]*256+E[T*2+1];var D=[];return w.forEach(function(P){D.push(i(P))}),v.decompress(D.join(""))},compressToEncodedURIComponent:function(E){return E==null?"":v._compress(E,6,function(w){return f.charAt(w)})},decompressFromEncodedURIComponent:function(E){return E==null?"":E==""?null:(E=E.replace(/ /g,"+"),v._decompress(E.length,32,function(w){return x(f,E.charAt(w))}))},compress:function(E){return v._compress(E,16,function(w){return i(w)})},_compress:function(E,w,T){if(E==null)return"";var N,D,P={},G={},H="",ye="",te="",$=2,F=3,q=2,Z=[],U=0,k=0,Y;for(Y=0;Y<E.length;Y+=1)if(H=E.charAt(Y),Object.prototype.hasOwnProperty.call(P,H)||(P[H]=F++,G[H]=!0),ye=te+H,Object.prototype.hasOwnProperty.call(P,ye))te=ye;else{if(Object.prototype.hasOwnProperty.call(G,te)){if(te.charCodeAt(0)<256){for(N=0;N<q;N++)U=U<<1,k==w-1?(k=0,Z.push(T(U)),U=0):k++;for(D=te.charCodeAt(0),N=0;N<8;N++)U=U<<1|D&1,k==w-1?(k=0,Z.push(T(U)),U=0):k++,D=D>>1}else{for(D=1,N=0;N<q;N++)U=U<<1|D,k==w-1?(k=0,Z.push(T(U)),U=0):k++,D=0;for(D=te.charCodeAt(0),N=0;N<16;N++)U=U<<1|D&1,k==w-1?(k=0,Z.push(T(U)),U=0):k++,D=D>>1}$--,$==0&&($=Math.pow(2,q),q++),delete G[te]}else for(D=P[te],N=0;N<q;N++)U=U<<1|D&1,k==w-1?(k=0,Z.push(T(U)),U=0):k++,D=D>>1;$--,$==0&&($=Math.pow(2,q),q++),P[ye]=F++,te=String(H)}if(te!==""){if(Object.prototype.hasOwnProperty.call(G,te)){if(te.charCodeAt(0)<256){for(N=0;N<q;N++)U=U<<1,k==w-1?(k=0,Z.push(T(U)),U=0):k++;for(D=te.charCodeAt(0),N=0;N<8;N++)U=U<<1|D&1,k==w-1?(k=0,Z.push(T(U)),U=0):k++,D=D>>1}else{for(D=1,N=0;N<q;N++)U=U<<1|D,k==w-1?(k=0,Z.push(T(U)),U=0):k++,D=0;for(D=te.charCodeAt(0),N=0;N<16;N++)U=U<<1|D&1,k==w-1?(k=0,Z.push(T(U)),U=0):k++,D=D>>1}$--,$==0&&($=Math.pow(2,q),q++),delete G[te]}else for(D=P[te],N=0;N<q;N++)U=U<<1|D&1,k==w-1?(k=0,Z.push(T(U)),U=0):k++,D=D>>1;$--,$==0&&($=Math.pow(2,q),q++)}for(D=2,N=0;N<q;N++)U=U<<1|D&1,k==w-1?(k=0,Z.push(T(U)),U=0):k++,D=D>>1;for(;;)if(U=U<<1,k==w-1){Z.push(T(U));break}else k++;return Z.join("")},decompress:function(E){return E==null?"":E==""?null:v._decompress(E.length,32768,function(w){return E.charCodeAt(w)})},_decompress:function(E,w,T){var N=[],D=4,P=4,G=3,H="",ye=[],te,$,F,q,Z,U,k,Y={val:T(0),position:w,index:1};for(te=0;te<3;te+=1)N[te]=te;for(F=0,Z=Math.pow(2,2),U=1;U!=Z;)q=Y.val&Y.position,Y.position>>=1,Y.position==0&&(Y.position=w,Y.val=T(Y.index++)),F|=(q>0?1:0)*U,U<<=1;switch(F){case 0:for(F=0,Z=Math.pow(2,8),U=1;U!=Z;)q=Y.val&Y.position,Y.position>>=1,Y.position==0&&(Y.position=w,Y.val=T(Y.index++)),F|=(q>0?1:0)*U,U<<=1;k=i(F);break;case 1:for(F=0,Z=Math.pow(2,16),U=1;U!=Z;)q=Y.val&Y.position,Y.position>>=1,Y.position==0&&(Y.position=w,Y.val=T(Y.index++)),F|=(q>0?1:0)*U,U<<=1;k=i(F);break;case 2:return""}for(N[3]=k,$=k,ye.push(k);;){if(Y.index>E)return"";for(F=0,Z=Math.pow(2,G),U=1;U!=Z;)q=Y.val&Y.position,Y.position>>=1,Y.position==0&&(Y.position=w,Y.val=T(Y.index++)),F|=(q>0?1:0)*U,U<<=1;switch(k=F){case 0:for(F=0,Z=Math.pow(2,8),U=1;U!=Z;)q=Y.val&Y.position,Y.position>>=1,Y.position==0&&(Y.position=w,Y.val=T(Y.index++)),F|=(q>0?1:0)*U,U<<=1;N[P++]=i(F),k=P-1,D--;break;case 1:for(F=0,Z=Math.pow(2,16),U=1;U!=Z;)q=Y.val&Y.position,Y.position>>=1,Y.position==0&&(Y.position=w,Y.val=T(Y.index++)),F|=(q>0?1:0)*U,U<<=1;N[P++]=i(F),k=P-1,D--;break;case 2:return ye.join("")}if(D==0&&(D=Math.pow(2,G),G++),N[k])H=N[k];else if(k===P)H=$+$.charAt(0);else return null;ye.push(H),N[P++]=$+H.charAt(0),D--,$=H,D==0&&(D=Math.pow(2,G),G++)}}};return v})();r!=null?r.exports=e:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return e})})(u0)),u0.exports}var lv=ov();const ky=Bc(lv),df=380,By="VIT^",J0=r=>{if(Array.isArray(r))return r.map(J0);if(r!==null&&typeof r=="object"){const e={};for(const i in r)i!=="id"&&(e[i]=J0(r[i]));return e}return r},cv=r=>{try{const e=J0(r),i=JSON.stringify(e),o=ky.compressToBase64(i);if(o.length<=df)return[o];const f=[],m=o.length,x=Math.floor(Math.random()*1e4).toString(36),v=Math.ceil(m/df);for(let E=0;E<v;E++){const w=E*df,T=Math.min(w+df,m),N=o.substring(w,T),D=`${By}${x}^${E}^${v}^${N}`;f.push(D)}return f}catch(e){return console.error("QR Encode Error",e),[]}},$0=r=>{try{if(r.startsWith(By)){const o=r.split("^");if(o.length>=5)return{status:"partial",id:o[1],index:parseInt(o[2]),total:parseInt(o[3]),chunkData:o.slice(4).join("^")}}const e=ky.decompressFromBase64(r);if(!e)try{return{status:"complete",data:JSON.parse(r)}}catch{throw new Error("LZ fail")}return{status:"complete",data:JSON.parse(e)}}catch{return{status:"error"}}},uv=r=>{try{const e=r.join("");return $0(e)}catch{return{status:"error"}}},e1=r=>{if(Array.isArray(r))return r.map(e1);if(r!==null&&typeof r=="object"){const e={};for(const i in r)i!=="description"&&(e[i]=e1(r[i]));return e}return r},fv=()=>{};var H2={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oe=function(r,e){if(!r)throw il(e)},il=function(r){return new Error("Firebase Database ("+Py.SDK_VERSION+") INTERNAL ASSERT FAILED: "+r)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy=function(r){const e=[];let i=0;for(let o=0;o<r.length;o++){let f=r.charCodeAt(o);f<128?e[i++]=f:f<2048?(e[i++]=f>>6|192,e[i++]=f&63|128):(f&64512)===55296&&o+1<r.length&&(r.charCodeAt(o+1)&64512)===56320?(f=65536+((f&1023)<<10)+(r.charCodeAt(++o)&1023),e[i++]=f>>18|240,e[i++]=f>>12&63|128,e[i++]=f>>6&63|128,e[i++]=f&63|128):(e[i++]=f>>12|224,e[i++]=f>>6&63|128,e[i++]=f&63|128)}return e},hv=function(r){const e=[];let i=0,o=0;for(;i<r.length;){const f=r[i++];if(f<128)e[o++]=String.fromCharCode(f);else if(f>191&&f<224){const m=r[i++];e[o++]=String.fromCharCode((f&31)<<6|m&63)}else if(f>239&&f<365){const m=r[i++],x=r[i++],v=r[i++],E=((f&7)<<18|(m&63)<<12|(x&63)<<6|v&63)-65536;e[o++]=String.fromCharCode(55296+(E>>10)),e[o++]=String.fromCharCode(56320+(E&1023))}else{const m=r[i++],x=r[i++];e[o++]=String.fromCharCode((f&15)<<12|(m&63)<<6|x&63)}}return e.join("")},v1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const i=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let f=0;f<r.length;f+=3){const m=r[f],x=f+1<r.length,v=x?r[f+1]:0,E=f+2<r.length,w=E?r[f+2]:0,T=m>>2,N=(m&3)<<4|v>>4;let D=(v&15)<<2|w>>6,P=w&63;E||(P=64,x||(D=64)),o.push(i[T],i[N],i[D],i[P])}return o.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(jy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):hv(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const i=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let f=0;f<r.length;){const m=i[r.charAt(f++)],v=f<r.length?i[r.charAt(f)]:0;++f;const w=f<r.length?i[r.charAt(f)]:64;++f;const N=f<r.length?i[r.charAt(f)]:64;if(++f,m==null||v==null||w==null||N==null)throw new dv;const D=m<<2|v>>4;if(o.push(D),w!==64){const P=v<<4&240|w>>2;if(o.push(P),N!==64){const G=w<<6&192|N;o.push(G)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class dv extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Uy=function(r){const e=jy(r);return v1.encodeByteArray(e,!0)},Tf=function(r){return Uy(r).replace(/\./g,"")},Nf=function(r){try{return v1.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(r){return Fy(void 0,r)}function Fy(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const i=e;return new Date(i.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const i in e)!e.hasOwnProperty(i)||!mv(i)||(r[i]=Fy(r[i],e[i]));return r}function mv(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pv(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=()=>pv().__FIREBASE_DEFAULTS__,yv=()=>{if(typeof process>"u"||typeof H2>"u")return;const r=H2.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},_v=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&Nf(r[1]);return e&&JSON.parse(e)},C1=()=>{try{return fv()||xv()||yv()||_v()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},zy=r=>{var e,i;return(i=(e=C1())==null?void 0:e.emulatorHosts)==null?void 0:i[r]},wv=r=>{const e=zy(r);if(!e)return;const i=e.lastIndexOf(":");if(i<=0||i+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(i+1),10);return e[0]==="["?[e.substring(1,i-1),o]:[e.substring(0,i),o]},Hy=()=>{var r;return(r=C1())==null?void 0:r.config},Vy=r=>{var e;return(e=C1())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,i)=>{this.resolve=e,this.reject=i})}wrapCallback(e){return(i,o)=>{i?this.reject(i):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(i):e(i,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sl(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Gy(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bv(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const i={alg:"none",type:"JWT"},o=e||"demo-project",f=r.iat||0,m=r.sub||r.user_id;if(!m)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const x={iss:`https://securetoken.google.com/${o}`,aud:o,iat:f,exp:f+3600,auth_time:f,sub:m,user_id:m,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Tf(JSON.stringify(i)),Tf(JSON.stringify(x)),""].join(".")}const mc={};function Ev(){const r={prod:[],emulator:[]};for(const e of Object.keys(mc))mc[e]?r.emulator.push(e):r.prod.push(e);return r}function vv(r){let e=document.getElementById(r),i=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),i=!0),{created:i,element:e}}let V2=!1;function qy(r,e){if(typeof window>"u"||typeof document>"u"||!sl(window.location.host)||mc[r]===e||mc[r]||V2)return;mc[r]=e;function i(D){return`__firebase__banner__${D}`}const o="__firebase__banner",m=Ev().prod.length>0;function x(){const D=document.getElementById(o);D&&D.remove()}function v(D){D.style.display="flex",D.style.background="#7faaf0",D.style.position="fixed",D.style.bottom="5px",D.style.left="5px",D.style.padding=".5em",D.style.borderRadius="5px",D.style.alignItems="center"}function E(D,P){D.setAttribute("width","24"),D.setAttribute("id",P),D.setAttribute("height","24"),D.setAttribute("viewBox","0 0 24 24"),D.setAttribute("fill","none"),D.style.marginLeft="-6px"}function w(){const D=document.createElement("span");return D.style.cursor="pointer",D.style.marginLeft="16px",D.style.fontSize="24px",D.innerHTML=" &times;",D.onclick=()=>{V2=!0,x()},D}function T(D,P){D.setAttribute("id",P),D.innerText="Learn more",D.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",D.setAttribute("target","__blank"),D.style.paddingLeft="5px",D.style.textDecoration="underline"}function N(){const D=vv(o),P=i("text"),G=document.getElementById(P)||document.createElement("span"),H=i("learnmore"),ye=document.getElementById(H)||document.createElement("a"),te=i("preprendIcon"),$=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(D.created){const F=D.element;v(F),T(ye,H);const q=w();E($,te),F.append($,G,ye,q),document.body.appendChild(F)}m?(G.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,G.innerText="Preview backend running in this workspace."),G.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",N):N()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function A1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ci())}function Cv(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Av(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function Xy(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Sv(){const r=ci();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function Tv(){return Py.NODE_ADMIN===!0}function Nv(){try{return typeof indexedDB=="object"}catch{return!1}}function Iv(){return new Promise((r,e)=>{try{let i=!0;const o="validate-browser-context-for-indexeddb-analytics-module",f=self.indexedDB.open(o);f.onsuccess=()=>{f.result.close(),i||self.indexedDB.deleteDatabase(o),r(!0)},f.onupgradeneeded=()=>{i=!1},f.onerror=()=>{var m;e(((m=f.error)==null?void 0:m.message)||"")}}catch(i){e(i)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="FirebaseError";class ha extends Error{constructor(e,i,o){super(i),this.code=e,this.customData=o,this.name=Rv,Object.setPrototypeOf(this,ha.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pc.prototype.create)}}class Pc{constructor(e,i,o){this.service=e,this.serviceName=i,this.errors=o}create(e,...i){const o=i[0]||{},f=`${this.service}/${e}`,m=this.errors[e],x=m?Ov(m,o):"Error",v=`${this.serviceName}: ${x} (${f}).`;return new ha(f,v,o)}}function Ov(r,e){return r.replace(Dv,(i,o)=>{const f=e[o];return f!=null?String(f):`<${o}?>`})}const Dv=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vc(r){return JSON.parse(r)}function jn(r){return JSON.stringify(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=function(r){let e={},i={},o={},f="";try{const m=r.split(".");e=vc(Nf(m[0])||""),i=vc(Nf(m[1])||""),f=m[2],o=i.d||{},delete i.d}catch{}return{header:e,claims:i,data:o,signature:f}},Mv=function(r){const e=Yy(r),i=e.claims;return!!i&&typeof i=="object"&&i.hasOwnProperty("iat")},Lv=function(r){const e=Yy(r).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dr(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function Jo(r,e){if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}function t1(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function If(r,e,i){const o={};for(const f in r)Object.prototype.hasOwnProperty.call(r,f)&&(o[f]=e.call(i,r[f],f,r));return o}function Ya(r,e){if(r===e)return!0;const i=Object.keys(r),o=Object.keys(e);for(const f of i){if(!o.includes(f))return!1;const m=r[f],x=e[f];if(G2(m)&&G2(x)){if(!Ya(m,x))return!1}else if(m!==x)return!1}for(const f of o)if(!i.includes(f))return!1;return!0}function G2(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(r){const e=[];for(const[i,o]of Object.entries(r))Array.isArray(o)?o.forEach(f=>{e.push(encodeURIComponent(i)+"="+encodeURIComponent(f))}):e.push(encodeURIComponent(i)+"="+encodeURIComponent(o));return e.length?"&"+e.join("&"):""}function dc(r){const e={};return r.replace(/^\?/,"").split("&").forEach(o=>{if(o){const[f,m]=o.split("=");e[decodeURIComponent(f)]=decodeURIComponent(m)}}),e}function gc(r){const e=r.indexOf("?");if(!e)return"";const i=r.indexOf("#",e);return r.substring(e,i>0?i:void 0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kv{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,i){i||(i=0);const o=this.W_;if(typeof e=="string")for(let N=0;N<16;N++)o[N]=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3),i+=4;else for(let N=0;N<16;N++)o[N]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i+=4;for(let N=16;N<80;N++){const D=o[N-3]^o[N-8]^o[N-14]^o[N-16];o[N]=(D<<1|D>>>31)&4294967295}let f=this.chain_[0],m=this.chain_[1],x=this.chain_[2],v=this.chain_[3],E=this.chain_[4],w,T;for(let N=0;N<80;N++){N<40?N<20?(w=v^m&(x^v),T=1518500249):(w=m^x^v,T=1859775393):N<60?(w=m&x|v&(m|x),T=2400959708):(w=m^x^v,T=3395469782);const D=(f<<5|f>>>27)+w+E+T+o[N]&4294967295;E=v,v=x,x=(m<<30|m>>>2)&4294967295,m=f,f=D}this.chain_[0]=this.chain_[0]+f&4294967295,this.chain_[1]=this.chain_[1]+m&4294967295,this.chain_[2]=this.chain_[2]+x&4294967295,this.chain_[3]=this.chain_[3]+v&4294967295,this.chain_[4]=this.chain_[4]+E&4294967295}update(e,i){if(e==null)return;i===void 0&&(i=e.length);const o=i-this.blockSize;let f=0;const m=this.buf_;let x=this.inbuf_;for(;f<i;){if(x===0)for(;f<=o;)this.compress_(e,f),f+=this.blockSize;if(typeof e=="string"){for(;f<i;)if(m[x]=e.charCodeAt(f),++x,++f,x===this.blockSize){this.compress_(m),x=0;break}}else for(;f<i;)if(m[x]=e[f],++x,++f,x===this.blockSize){this.compress_(m),x=0;break}}this.inbuf_=x,this.total_+=i}digest(){const e=[];let i=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let f=this.blockSize-1;f>=56;f--)this.buf_[f]=i&255,i/=256;this.compress_(this.buf_);let o=0;for(let f=0;f<5;f++)for(let m=24;m>=0;m-=8)e[o]=this.chain_[f]>>m&255,++o;return e}}function Bv(r,e){const i=new Pv(r,e);return i.subscribe.bind(i)}class Pv{constructor(e,i){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=i,this.task.then(()=>{e(this)}).catch(o=>{this.error(o)})}next(e){this.forEachObserver(i=>{i.next(e)})}error(e){this.forEachObserver(i=>{i.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,i,o){let f;if(e===void 0&&i===void 0&&o===void 0)throw new Error("Missing Observer.");jv(e,["next","error","complete"])?f=e:f={next:e,error:i,complete:o},f.next===void 0&&(f.next=f0),f.error===void 0&&(f.error=f0),f.complete===void 0&&(f.complete=f0);const m=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?f.error(this.finalError):f.complete()}catch{}}),this.observers.push(f),m}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let i=0;i<this.observers.length;i++)this.sendOne(i,e)}sendOne(e,i){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{i(this.observers[e])}catch(o){typeof console<"u"&&console.error&&console.error(o)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jv(r,e){if(typeof r!="object"||r===null)return!1;for(const i of e)if(i in r&&typeof r[i]=="function")return!0;return!1}function f0(){}function S1(r,e){return`${r} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv=function(r){const e=[];let i=0;for(let o=0;o<r.length;o++){let f=r.charCodeAt(o);if(f>=55296&&f<=56319){const m=f-55296;o++,Oe(o<r.length,"Surrogate pair missing trail surrogate.");const x=r.charCodeAt(o)-56320;f=65536+(m<<10)+x}f<128?e[i++]=f:f<2048?(e[i++]=f>>6|192,e[i++]=f&63|128):f<65536?(e[i++]=f>>12|224,e[i++]=f>>6&63|128,e[i++]=f&63|128):(e[i++]=f>>18|240,e[i++]=f>>12&63|128,e[i++]=f>>6&63|128,e[i++]=f&63|128)}return e},Zf=function(r){let e=0;for(let i=0;i<r.length;i++){const o=r.charCodeAt(i);o<128?e++:o<2048?e+=2:o>=55296&&o<=56319?(e+=4,i++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(r){return r&&r._delegate?r._delegate:r}class Wa{constructor(e,i,o){this.name=e,this.instanceFactory=i,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,i){this.name=e,this.container=i,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const i=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(i)){const o=new Kf;if(this.instancesDeferred.set(i,o),this.isInitialized(i)||this.shouldAutoInitialize())try{const f=this.getOrInitializeService({instanceIdentifier:i});f&&o.resolve(f)}catch{}}return this.instancesDeferred.get(i).promise}getImmediate(e){const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(f){if(o)return null;throw f}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Hv(e))try{this.getOrInitializeService({instanceIdentifier:Ha})}catch{}for(const[i,o]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(i);try{const m=this.getOrInitializeService({instanceIdentifier:f});o.resolve(m)}catch{}}}}clearInstance(e=Ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(i=>"INTERNAL"in i).map(i=>i.INTERNAL.delete()),...e.filter(i=>"_delete"in i).map(i=>i._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ha){return this.instances.has(e)}getOptions(e=Ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:i={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const f=this.getOrInitializeService({instanceIdentifier:o,options:i});for(const[m,x]of this.instancesDeferred.entries()){const v=this.normalizeInstanceIdentifier(m);o===v&&x.resolve(f)}return f}onInit(e,i){const o=this.normalizeInstanceIdentifier(i),f=this.onInitCallbacks.get(o)??new Set;f.add(e),this.onInitCallbacks.set(o,f);const m=this.instances.get(o);return m&&e(m,o),()=>{f.delete(e)}}invokeOnInitCallbacks(e,i){const o=this.onInitCallbacks.get(i);if(o)for(const f of o)try{f(e,i)}catch{}}getOrInitializeService({instanceIdentifier:e,options:i={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:zv(e),options:i}),this.instances.set(e,o),this.instancesOptions.set(e,i),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Ha){return this.component?this.component.multipleInstances?e:Ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function zv(r){return r===Ha?void 0:r}function Hv(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const i=this.getProvider(e.name);if(i.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);i.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const i=new Fv(e,this);return this.providers.set(e,i),i}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Yt||(Yt={}));const Gv={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},qv=Yt.INFO,Xv={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},Yv=(r,e,...i)=>{if(e<r.logLevel)return;const o=new Date().toISOString(),f=Xv[e];if(f)console[f](`[${o}]  ${r.name}:`,...i);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class T1{constructor(e){this.name=e,this._logLevel=qv,this._logHandler=Yv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Gv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...e),this._logHandler(this,Yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...e),this._logHandler(this,Yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...e),this._logHandler(this,Yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...e),this._logHandler(this,Yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...e),this._logHandler(this,Yt.ERROR,...e)}}const Wv=(r,e)=>e.some(i=>r instanceof i);let q2,X2;function Kv(){return q2||(q2=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Zv(){return X2||(X2=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wy=new WeakMap,n1=new WeakMap,Ky=new WeakMap,h0=new WeakMap,N1=new WeakMap;function Qv(r){const e=new Promise((i,o)=>{const f=()=>{r.removeEventListener("success",m),r.removeEventListener("error",x)},m=()=>{i(sa(r.result)),f()},x=()=>{o(r.error),f()};r.addEventListener("success",m),r.addEventListener("error",x)});return e.then(i=>{i instanceof IDBCursor&&Wy.set(i,r)}).catch(()=>{}),N1.set(e,r),e}function Jv(r){if(n1.has(r))return;const e=new Promise((i,o)=>{const f=()=>{r.removeEventListener("complete",m),r.removeEventListener("error",x),r.removeEventListener("abort",x)},m=()=>{i(),f()},x=()=>{o(r.error||new DOMException("AbortError","AbortError")),f()};r.addEventListener("complete",m),r.addEventListener("error",x),r.addEventListener("abort",x)});n1.set(r,e)}let i1={get(r,e,i){if(r instanceof IDBTransaction){if(e==="done")return n1.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Ky.get(r);if(e==="store")return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return sa(r[e])},set(r,e,i){return r[e]=i,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function $v(r){i1=r(i1)}function e3(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...i){const o=r.call(d0(this),e,...i);return Ky.set(o,e.sort?e.sort():[e]),sa(o)}:Zv().includes(r)?function(...e){return r.apply(d0(this),e),sa(Wy.get(this))}:function(...e){return sa(r.apply(d0(this),e))}}function t3(r){return typeof r=="function"?e3(r):(r instanceof IDBTransaction&&Jv(r),Wv(r,Kv())?new Proxy(r,i1):r)}function sa(r){if(r instanceof IDBRequest)return Qv(r);if(h0.has(r))return h0.get(r);const e=t3(r);return e!==r&&(h0.set(r,e),N1.set(e,r)),e}const d0=r=>N1.get(r);function n3(r,e,{blocked:i,upgrade:o,blocking:f,terminated:m}={}){const x=indexedDB.open(r,e),v=sa(x);return o&&x.addEventListener("upgradeneeded",E=>{o(sa(x.result),E.oldVersion,E.newVersion,sa(x.transaction),E)}),i&&x.addEventListener("blocked",E=>i(E.oldVersion,E.newVersion,E)),v.then(E=>{m&&E.addEventListener("close",()=>m()),f&&E.addEventListener("versionchange",w=>f(w.oldVersion,w.newVersion,w))}).catch(()=>{}),v}const i3=["get","getKey","getAll","getAllKeys","count"],s3=["put","add","delete","clear"],g0=new Map;function Y2(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(g0.get(e))return g0.get(e);const i=e.replace(/FromIndex$/,""),o=e!==i,f=s3.includes(i);if(!(i in(o?IDBIndex:IDBObjectStore).prototype)||!(f||i3.includes(i)))return;const m=async function(x,...v){const E=this.transaction(x,f?"readwrite":"readonly");let w=E.store;return o&&(w=w.index(v.shift())),(await Promise.all([w[i](...v),f&&E.done]))[0]};return g0.set(e,m),m}$v(r=>({...r,get:(e,i,o)=>Y2(e,i)||r.get(e,i,o),has:(e,i)=>!!Y2(e,i)||r.has(e,i)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(i=>{if(a3(i)){const o=i.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(i=>i).join(" ")}}function a3(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const s1="@firebase/app",W2="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new T1("@firebase/app"),o3="@firebase/app-compat",l3="@firebase/analytics-compat",c3="@firebase/analytics",u3="@firebase/app-check-compat",f3="@firebase/app-check",h3="@firebase/auth",d3="@firebase/auth-compat",g3="@firebase/database",m3="@firebase/data-connect",p3="@firebase/database-compat",x3="@firebase/functions",y3="@firebase/functions-compat",_3="@firebase/installations",w3="@firebase/installations-compat",b3="@firebase/messaging",E3="@firebase/messaging-compat",v3="@firebase/performance",C3="@firebase/performance-compat",A3="@firebase/remote-config",S3="@firebase/remote-config-compat",T3="@firebase/storage",N3="@firebase/storage-compat",I3="@firebase/firestore",R3="@firebase/ai",O3="@firebase/firestore-compat",D3="firebase",M3="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="[DEFAULT]",L3={[s1]:"fire-core",[o3]:"fire-core-compat",[c3]:"fire-analytics",[l3]:"fire-analytics-compat",[f3]:"fire-app-check",[u3]:"fire-app-check-compat",[h3]:"fire-auth",[d3]:"fire-auth-compat",[g3]:"fire-rtdb",[m3]:"fire-data-connect",[p3]:"fire-rtdb-compat",[x3]:"fire-fn",[y3]:"fire-fn-compat",[_3]:"fire-iid",[w3]:"fire-iid-compat",[b3]:"fire-fcm",[E3]:"fire-fcm-compat",[v3]:"fire-perf",[C3]:"fire-perf-compat",[A3]:"fire-rc",[S3]:"fire-rc-compat",[T3]:"fire-gcs",[N3]:"fire-gcs-compat",[I3]:"fire-fst",[O3]:"fire-fst-compat",[R3]:"fire-vertex","fire-js":"fire-js",[D3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rf=new Map,k3=new Map,a1=new Map;function K2(r,e){try{r.container.addComponent(e)}catch(i){ur.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,i)}}function $o(r){const e=r.name;if(a1.has(e))return ur.debug(`There were multiple attempts to register component ${e}.`),!1;a1.set(e,r);for(const i of Rf.values())K2(i,r);for(const i of k3.values())K2(i,r);return!0}function I1(r,e){const i=r.container.getProvider("heartbeat").getImmediate({optional:!0});return i&&i.triggerHeartbeat(),r.container.getProvider(e)}function Fi(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ra=new Pc("app","Firebase",B3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,i,o){this._isDeleted=!1,this._options={...e},this._config={...i},this._name=i.name,this._automaticDataCollectionEnabled=i.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Wa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ra.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al=M3;function Zy(r,e={}){let i=r;typeof e!="object"&&(e={name:e});const o={name:r1,automaticDataCollectionEnabled:!0,...e},f=o.name;if(typeof f!="string"||!f)throw ra.create("bad-app-name",{appName:String(f)});if(i||(i=Hy()),!i)throw ra.create("no-options");const m=Rf.get(f);if(m){if(Ya(i,m.options)&&Ya(o,m.config))return m;throw ra.create("duplicate-app",{appName:f})}const x=new Vv(f);for(const E of a1.values())x.addComponent(E);const v=new P3(i,o,x);return Rf.set(f,v),v}function Qy(r=r1){const e=Rf.get(r);if(!e&&r===r1&&Hy())return Zy();if(!e)throw ra.create("no-app",{appName:r});return e}function aa(r,e,i){let o=L3[r]??r;i&&(o+=`-${i}`);const f=o.match(/\s|\//),m=e.match(/\s|\//);if(f||m){const x=[`Unable to register library "${o}" with version "${e}":`];f&&x.push(`library name "${o}" contains illegal characters (whitespace or "/")`),f&&m&&x.push("and"),m&&x.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ur.warn(x.join(" "));return}$o(new Wa(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j3="firebase-heartbeat-database",U3=1,Cc="firebase-heartbeat-store";let m0=null;function Jy(){return m0||(m0=n3(j3,U3,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Cc)}catch(i){console.warn(i)}}}}).catch(r=>{throw ra.create("idb-open",{originalErrorMessage:r.message})})),m0}async function F3(r){try{const i=(await Jy()).transaction(Cc),o=await i.objectStore(Cc).get($y(r));return await i.done,o}catch(e){if(e instanceof ha)ur.warn(e.message);else{const i=ra.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ur.warn(i.message)}}}async function Z2(r,e){try{const o=(await Jy()).transaction(Cc,"readwrite");await o.objectStore(Cc).put(e,$y(r)),await o.done}catch(i){if(i instanceof ha)ur.warn(i.message);else{const o=ra.create("idb-set",{originalErrorMessage:i==null?void 0:i.message});ur.warn(o.message)}}}function $y(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=1024,H3=30;class V3{constructor(e){this.container=e,this._heartbeatsCache=null;const i=this.container.getProvider("app").getImmediate();this._storage=new q3(i),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,i;try{const f=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),m=Q2();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((i=this._heartbeatsCache)==null?void 0:i.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===m||this._heartbeatsCache.heartbeats.some(x=>x.date===m))return;if(this._heartbeatsCache.heartbeats.push({date:m,agent:f}),this._heartbeatsCache.heartbeats.length>H3){const x=X3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(x,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){ur.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const i=Q2(),{heartbeatsToSend:o,unsentEntries:f}=G3(this._heartbeatsCache.heartbeats),m=Tf(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=i,f.length>0?(this._heartbeatsCache.heartbeats=f,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),m}catch(i){return ur.warn(i),""}}}function Q2(){return new Date().toISOString().substring(0,10)}function G3(r,e=z3){const i=[];let o=r.slice();for(const f of r){const m=i.find(x=>x.agent===f.agent);if(m){if(m.dates.push(f.date),J2(i)>e){m.dates.pop();break}}else if(i.push({agent:f.agent,dates:[f.date]}),J2(i)>e){i.pop();break}o=o.slice(1)}return{heartbeatsToSend:i,unsentEntries:o}}class q3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Nv()?Iv().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const i=await F3(this.app);return i!=null&&i.heartbeats?i:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return Z2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return Z2(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function J2(r){return Tf(JSON.stringify({version:2,heartbeats:r})).length}function X3(r){if(r.length===0)return-1;let e=0,i=r[0].date;for(let o=1;o<r.length;o++)r[o].date<i&&(i=r[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(r){$o(new Wa("platform-logger",e=>new r3(e),"PRIVATE")),$o(new Wa("heartbeat",e=>new V3(e),"PRIVATE")),aa(s1,W2,r),aa(s1,W2,"esm2020"),aa("fire-js","")}Y3("");function e_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const W3=e_,t_=new Pc("auth","Firebase",e_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of=new T1("@firebase/auth");function K3(r,...e){Of.logLevel<=Yt.WARN&&Of.warn(`Auth (${al}): ${r}`,...e)}function yf(r,...e){Of.logLevel<=Yt.ERROR&&Of.error(`Auth (${al}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(r,...e){throw O1(r,...e)}function xs(r,...e){return O1(r,...e)}function R1(r,e,i){const o={...W3(),[e]:i};return new Pc("auth","Firebase",o).create(e,{appName:r.name})}function lr(r){return R1(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Z3(r,e,i){const o=i;if(!(e instanceof o))throw o.name!==e.constructor.name&&ts(r,"argument-error"),R1(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function O1(r,...e){if(typeof r!="string"){const i=e[0],o=[...e.slice(1)];return o[0]&&(o[0].appName=r.name),r._errorFactory.create(i,...o)}return t_.create(r,...e)}function et(r,e,...i){if(!r)throw O1(e,...i)}function rr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw yf(e),new Error(e)}function fr(r,e){r||rr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function Q3(){return $2()==="http:"||$2()==="https:"}function $2(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Q3()||Av()||"connection"in navigator)?navigator.onLine:!0}function $3(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,i){this.shortDelay=e,this.longDelay=i,fr(i>e,"Short delay should be less than long delay!"),this.isMobile=A1()||Xy()}get(){return J3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D1(r,e){fr(r.emulator,"Emulator should always be set here");const{url:i}=r.emulator;return e?`${i}${e.startsWith("/")?e.slice(1):e}`:i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{static initialize(e,i,o){this.fetchImpl=e,i&&(this.headersImpl=i),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;rr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;rr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;rr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],nC=new jc(3e4,6e4);function da(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ga(r,e,i,o,f={}){return i_(r,f,async()=>{let m={},x={};o&&(e==="GET"?x=o:m={body:JSON.stringify(o)});const v=rl({key:r.config.apiKey,...x}).slice(1),E=await r._getAdditionalHeaders();E["Content-Type"]="application/json",r.languageCode&&(E["X-Firebase-Locale"]=r.languageCode);const w={method:e,headers:E,...m};return Cv()||(w.referrerPolicy="no-referrer"),r.emulatorConfig&&sl(r.emulatorConfig.host)&&(w.credentials="include"),n_.fetch()(await s_(r,r.config.apiHost,i,v),w)})}async function i_(r,e,i){r._canInitEmulator=!1;const o={...eC,...e};try{const f=new sC(r),m=await Promise.race([i(),f.promise]);f.clearNetworkTimeout();const x=await m.json();if("needConfirmation"in x)throw gf(r,"account-exists-with-different-credential",x);if(m.ok&&!("errorMessage"in x))return x;{const v=m.ok?x.errorMessage:x.error.message,[E,w]=v.split(" : ");if(E==="FEDERATED_USER_ID_ALREADY_LINKED")throw gf(r,"credential-already-in-use",x);if(E==="EMAIL_EXISTS")throw gf(r,"email-already-in-use",x);if(E==="USER_DISABLED")throw gf(r,"user-disabled",x);const T=o[E]||E.toLowerCase().replace(/[_\s]+/g,"-");if(w)throw R1(r,T,w);ts(r,T)}}catch(f){if(f instanceof ha)throw f;ts(r,"network-request-failed",{message:String(f)})}}async function Uc(r,e,i,o,f={}){const m=await ga(r,e,i,o,f);return"mfaPendingCredential"in m&&ts(r,"multi-factor-auth-required",{_serverResponse:m}),m}async function s_(r,e,i,o){const f=`${e}${i}?${o}`,m=r,x=m.config.emulator?D1(r.config,f):`${r.config.apiScheme}://${f}`;return tC.includes(i)&&(await m._persistenceManagerAvailable,m._getPersistenceType()==="COOKIE")?m._getPersistence()._getFinalTarget(x).toString():x}function iC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((i,o)=>{this.timer=setTimeout(()=>o(xs(this.auth,"network-request-failed")),nC.get())})}}function gf(r,e,i){const o={appName:r.name};i.email&&(o.email=i.email),i.phoneNumber&&(o.phoneNumber=i.phoneNumber);const f=xs(r,e,o);return f.customData._tokenResponse=i,f}function ex(r){return r!==void 0&&r.enterprise!==void 0}class rC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const i of this.recaptchaEnforcementState)if(i.provider&&i.provider===e)return iC(i.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function aC(r,e){return ga(r,"GET","/v2/recaptchaConfig",da(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oC(r,e){return ga(r,"POST","/v1/accounts:delete",e)}async function Df(r,e){return ga(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lC(r,e=!1){const i=Ai(r),o=await i.getIdToken(e),f=M1(o);et(f&&f.exp&&f.auth_time&&f.iat,i.auth,"internal-error");const m=typeof f.firebase=="object"?f.firebase:void 0,x=m==null?void 0:m.sign_in_provider;return{claims:f,token:o,authTime:pc(p0(f.auth_time)),issuedAtTime:pc(p0(f.iat)),expirationTime:pc(p0(f.exp)),signInProvider:x||null,signInSecondFactor:(m==null?void 0:m.sign_in_second_factor)||null}}function p0(r){return Number(r)*1e3}function M1(r){const[e,i,o]=r.split(".");if(e===void 0||i===void 0||o===void 0)return yf("JWT malformed, contained fewer than 3 sections"),null;try{const f=Nf(i);return f?JSON.parse(f):(yf("Failed to decode base64 JWT payload"),null)}catch(f){return yf("Caught error parsing JWT payload as JSON",f==null?void 0:f.toString()),null}}function tx(r){const e=M1(r);return et(e,"internal-error"),et(typeof e.exp<"u","internal-error"),et(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ac(r,e,i=!1){if(i)return e;try{return await e}catch(o){throw o instanceof ha&&cC(o)&&r.auth.currentUser===r&&await r.auth.signOut(),o}}function cC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const o=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const i=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},i)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,i){this.createdAt=e,this.lastLoginAt=i,this._initializeTime()}_initializeTime(){this.lastSignInTime=pc(this.lastLoginAt),this.creationTime=pc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mf(r){var N;const e=r.auth,i=await r.getIdToken(),o=await Ac(r,Df(e,{idToken:i}));et(o==null?void 0:o.users.length,e,"internal-error");const f=o.users[0];r._notifyReloadListener(f);const m=(N=f.providerUserInfo)!=null&&N.length?r_(f.providerUserInfo):[],x=hC(r.providerData,m),v=r.isAnonymous,E=!(r.email&&f.passwordHash)&&!(x!=null&&x.length),w=v?E:!1,T={uid:f.localId,displayName:f.displayName||null,photoURL:f.photoUrl||null,email:f.email||null,emailVerified:f.emailVerified||!1,phoneNumber:f.phoneNumber||null,tenantId:f.tenantId||null,providerData:x,metadata:new l1(f.createdAt,f.lastLoginAt),isAnonymous:w};Object.assign(r,T)}async function fC(r){const e=Ai(r);await Mf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hC(r,e){return[...r.filter(o=>!e.some(f=>f.providerId===o.providerId)),...e]}function r_(r){return r.map(({providerId:e,...i})=>({providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(r,e){const i=await i_(r,{},async()=>{const o=rl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:f,apiKey:m}=r.config,x=await s_(r,f,"/v1/token",`key=${m}`),v=await r._getAdditionalHeaders();v["Content-Type"]="application/x-www-form-urlencoded";const E={method:"POST",headers:v,body:o};return r.emulatorConfig&&sl(r.emulatorConfig.host)&&(E.credentials="include"),n_.fetch()(x,E)});return{accessToken:i.access_token,expiresIn:i.expires_in,refreshToken:i.refresh_token}}async function gC(r,e){return ga(r,"POST","/v2/accounts:revokeToken",da(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){et(e.idToken,"internal-error"),et(typeof e.idToken<"u","internal-error"),et(typeof e.refreshToken<"u","internal-error");const i="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,i)}updateFromIdToken(e){et(e.length!==0,"internal-error");const i=tx(e);this.updateTokensAndExpiration(e,null,i)}async getToken(e,i=!1){return!i&&this.accessToken&&!this.isExpired?this.accessToken:(et(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,i){const{accessToken:o,refreshToken:f,expiresIn:m}=await dC(e,i);this.updateTokensAndExpiration(o,f,Number(m))}updateTokensAndExpiration(e,i,o){this.refreshToken=i||null,this.accessToken=e||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(e,i){const{refreshToken:o,accessToken:f,expirationTime:m}=i,x=new Yo;return o&&(et(typeof o=="string","internal-error",{appName:e}),x.refreshToken=o),f&&(et(typeof f=="string","internal-error",{appName:e}),x.accessToken=f),m&&(et(typeof m=="number","internal-error",{appName:e}),x.expirationTime=m),x}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Yo,this.toJSON())}_performRefresh(){return rr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(r,e){et(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class gs{constructor({uid:e,auth:i,stsTokenManager:o,...f}){this.providerId="firebase",this.proactiveRefresh=new uC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=f.displayName||null,this.email=f.email||null,this.emailVerified=f.emailVerified||!1,this.phoneNumber=f.phoneNumber||null,this.photoURL=f.photoURL||null,this.isAnonymous=f.isAnonymous||!1,this.tenantId=f.tenantId||null,this.providerData=f.providerData?[...f.providerData]:[],this.metadata=new l1(f.createdAt||void 0,f.lastLoginAt||void 0)}async getIdToken(e){const i=await Ac(this,this.stsTokenManager.getToken(this.auth,e));return et(i,this.auth,"internal-error"),this.accessToken!==i&&(this.accessToken=i,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),i}getIdTokenResult(e){return lC(this,e)}reload(){return fC(this)}_assign(e){this!==e&&(et(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(i=>({...i})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const i=new gs({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return i.metadata._copy(this.metadata),i}_onReload(e){et(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,i=!1){let o=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),o=!0),i&&await Mf(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fi(this.auth.app))return Promise.reject(lr(this.auth));const e=await this.getIdToken();return await Ac(this,oC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,i){const o=i.displayName??void 0,f=i.email??void 0,m=i.phoneNumber??void 0,x=i.photoURL??void 0,v=i.tenantId??void 0,E=i._redirectEventId??void 0,w=i.createdAt??void 0,T=i.lastLoginAt??void 0,{uid:N,emailVerified:D,isAnonymous:P,providerData:G,stsTokenManager:H}=i;et(N&&H,e,"internal-error");const ye=Yo.fromJSON(this.name,H);et(typeof N=="string",e,"internal-error"),Qr(o,e.name),Qr(f,e.name),et(typeof D=="boolean",e,"internal-error"),et(typeof P=="boolean",e,"internal-error"),Qr(m,e.name),Qr(x,e.name),Qr(v,e.name),Qr(E,e.name),Qr(w,e.name),Qr(T,e.name);const te=new gs({uid:N,auth:e,email:f,emailVerified:D,displayName:o,isAnonymous:P,photoURL:x,phoneNumber:m,tenantId:v,stsTokenManager:ye,createdAt:w,lastLoginAt:T});return G&&Array.isArray(G)&&(te.providerData=G.map($=>({...$}))),E&&(te._redirectEventId=E),te}static async _fromIdTokenResponse(e,i,o=!1){const f=new Yo;f.updateFromServerResponse(i);const m=new gs({uid:i.localId,auth:e,stsTokenManager:f,isAnonymous:o});return await Mf(m),m}static async _fromGetAccountInfoResponse(e,i,o){const f=i.users[0];et(f.localId!==void 0,"internal-error");const m=f.providerUserInfo!==void 0?r_(f.providerUserInfo):[],x=!(f.email&&f.passwordHash)&&!(m!=null&&m.length),v=new Yo;v.updateFromIdToken(o);const E=new gs({uid:f.localId,auth:e,stsTokenManager:v,isAnonymous:x}),w={uid:f.localId,displayName:f.displayName||null,photoURL:f.photoUrl||null,email:f.email||null,emailVerified:f.emailVerified||!1,phoneNumber:f.phoneNumber||null,tenantId:f.tenantId||null,providerData:m,metadata:new l1(f.createdAt,f.lastLoginAt),isAnonymous:!(f.email&&f.passwordHash)&&!(m!=null&&m.length)};return Object.assign(E,w),E}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=new Map;function ar(r){fr(r instanceof Function,"Expected a class definition");let e=nx.get(r);return e?(fr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,nx.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,i){this.storage[e]=i}async _get(e){const i=this.storage[e];return i===void 0?null:i}async _remove(e){delete this.storage[e]}_addListener(e,i){}_removeListener(e,i){}}a_.type="NONE";const ix=a_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _f(r,e,i){return`firebase:${r}:${e}:${i}`}class Wo{constructor(e,i,o){this.persistence=e,this.auth=i,this.userKey=o;const{config:f,name:m}=this.auth;this.fullUserKey=_f(this.userKey,f.apiKey,m),this.fullPersistenceKey=_f("persistence",f.apiKey,m),this.boundEventHandler=i._onStorageEvent.bind(i),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const i=await Df(this.auth,{idToken:e}).catch(()=>{});return i?gs._fromGetAccountInfoResponse(this.auth,i,e):null}return gs._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const i=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,i)return this.setCurrentUser(i)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,i,o="authUser"){if(!i.length)return new Wo(ar(ix),e,o);const f=(await Promise.all(i.map(async w=>{if(await w._isAvailable())return w}))).filter(w=>w);let m=f[0]||ar(ix);const x=_f(o,e.config.apiKey,e.name);let v=null;for(const w of i)try{const T=await w._get(x);if(T){let N;if(typeof T=="string"){const D=await Df(e,{idToken:T}).catch(()=>{});if(!D)break;N=await gs._fromGetAccountInfoResponse(e,D,T)}else N=gs._fromJSON(e,T);w!==m&&(v=N),m=w;break}}catch{}const E=f.filter(w=>w._shouldAllowMigration);return!m._shouldAllowMigration||!E.length?new Wo(m,e,o):(m=E[0],v&&await m._set(x,v.toJSON()),await Promise.all(i.map(async w=>{if(w!==m)try{await w._remove(x)}catch{}})),new Wo(m,e,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(u_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(o_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(h_(e))return"Blackberry";if(d_(e))return"Webos";if(l_(e))return"Safari";if((e.includes("chrome/")||c_(e))&&!e.includes("edge/"))return"Chrome";if(f_(e))return"Android";{const i=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=r.match(i);if((o==null?void 0:o.length)===2)return o[1]}return"Other"}function o_(r=ci()){return/firefox\//i.test(r)}function l_(r=ci()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function c_(r=ci()){return/crios\//i.test(r)}function u_(r=ci()){return/iemobile/i.test(r)}function f_(r=ci()){return/android/i.test(r)}function h_(r=ci()){return/blackberry/i.test(r)}function d_(r=ci()){return/webos/i.test(r)}function L1(r=ci()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function mC(r=ci()){var e;return L1(r)&&!!((e=window.navigator)!=null&&e.standalone)}function pC(){return Sv()&&document.documentMode===10}function g_(r=ci()){return L1(r)||f_(r)||d_(r)||h_(r)||/windows phone/i.test(r)||u_(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m_(r,e=[]){let i;switch(r){case"Browser":i=sx(ci());break;case"Worker":i=`${sx(ci())}-${r}`;break;default:i=r}const o=e.length?e.join(","):"FirebaseCore-web";return`${i}/JsCore/${al}/${o}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,i){const o=m=>new Promise((x,v)=>{try{const E=e(m);x(E)}catch(E){v(E)}});o.onAbort=i,this.queue.push(o);const f=this.queue.length-1;return()=>{this.queue[f]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const i=[];try{for(const o of this.queue)await o(e),o.onAbort&&i.push(o.onAbort)}catch(o){i.reverse();for(const f of i)try{f()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o==null?void 0:o.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yC(r,e={}){return ga(r,"GET","/v2/passwordPolicy",da(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=6;class wC{constructor(e){var o;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=i.minPasswordLength??_C,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((o=e.allowedNonAlphanumericCharacters)==null?void 0:o.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const i={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,i),this.validatePasswordCharacterOptions(e,i),i.isValid&&(i.isValid=i.meetsMinPasswordLength??!0),i.isValid&&(i.isValid=i.meetsMaxPasswordLength??!0),i.isValid&&(i.isValid=i.containsLowercaseLetter??!0),i.isValid&&(i.isValid=i.containsUppercaseLetter??!0),i.isValid&&(i.isValid=i.containsNumericCharacter??!0),i.isValid&&(i.isValid=i.containsNonAlphanumericCharacter??!0),i}validatePasswordLengthOptions(e,i){const o=this.customStrengthOptions.minPasswordLength,f=this.customStrengthOptions.maxPasswordLength;o&&(i.meetsMinPasswordLength=e.length>=o),f&&(i.meetsMaxPasswordLength=e.length<=f)}validatePasswordCharacterOptions(e,i){this.updatePasswordCharacterOptionsStatuses(i,!1,!1,!1,!1);let o;for(let f=0;f<e.length;f++)o=e.charAt(f),this.updatePasswordCharacterOptionsStatuses(i,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(e,i,o,f,m){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=i)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=f)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,i,o,f){this.app=e,this.heartbeatServiceProvider=i,this.appCheckServiceProvider=o,this.config=f,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new rx(this),this.idTokenSubscription=new rx(this),this.beforeStateQueue=new xC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=f.sdkClientVersion,this._persistenceManagerAvailable=new Promise(m=>this._resolvePersistenceManagerAvailable=m)}_initializeWithPersistence(e,i){return i&&(this._popupRedirectResolver=ar(i)),this._initializationPromise=this.queue(async()=>{var o,f,m;if(!this._deleted&&(this.persistenceManager=await Wo.create(this,e),(o=this._resolvePersistenceManagerAvailable)==null||o.call(this),!this._deleted)){if((f=this._popupRedirectResolver)!=null&&f._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(i),this.lastNotifiedUid=((m=this.currentUser)==null?void 0:m.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const i=await Df(this,{idToken:e}),o=await gs._fromGetAccountInfoResponse(this,i,e);await this.directlySetCurrentUser(o)}catch(i){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",i),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var m;if(Fi(this.app)){const x=this.app.settings.authIdToken;return x?new Promise(v=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(x).then(v,v))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let o=i,f=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const x=(m=this.redirectUser)==null?void 0:m._redirectEventId,v=o==null?void 0:o._redirectEventId,E=await this.tryRedirectSignIn(e);(!x||x===v)&&(E!=null&&E.user)&&(o=E.user,f=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(f)try{await this.beforeStateQueue.runMiddleware(o)}catch(x){o=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(x))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return et(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let i=null;try{i=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return i}async reloadAndSetCurrentUserOrClear(e){try{await Mf(e)}catch(i){if((i==null?void 0:i.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fi(this.app))return Promise.reject(lr(this));const i=e?Ai(e):null;return i&&et(i.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(i&&i._clone(this))}async _updateCurrentUser(e,i=!1){if(!this._deleted)return e&&et(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),i||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fi(this.app)?Promise.reject(lr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fi(this.app)?Promise.reject(lr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ar(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const i=this._getPasswordPolicyInternal();return i.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):i.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await yC(this),i=new wC(e);this.tenantId===null?this._projectPasswordPolicy=i:this._tenantPasswordPolicies[this.tenantId]=i}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Pc("auth","Firebase",e())}onAuthStateChanged(e,i,o){return this.registerStateListener(this.authStateSubscription,e,i,o)}beforeAuthStateChanged(e,i){return this.beforeStateQueue.pushCallback(e,i)}onIdTokenChanged(e,i,o){return this.registerStateListener(this.idTokenSubscription,e,i,o)}authStateReady(){return new Promise((e,i)=>{if(this.currentUser)e();else{const o=this.onAuthStateChanged(()=>{o(),e()},i)}})}async revokeAccessToken(e){if(this.currentUser){const i=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:i};this.tenantId!=null&&(o.tenantId=this.tenantId),await gC(this,o)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,i){const o=await this.getOrInitRedirectPersistenceManager(i);return e===null?o.removeCurrentUser():o.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const i=e&&ar(e)||this._popupRedirectResolver;et(i,this,"argument-error"),this.redirectPersistenceManager=await Wo.create(this,[ar(i._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var i,o;return this._isInitialized&&await this.queue(async()=>{}),((i=this._currentUser)==null?void 0:i._redirectEventId)===e?this._currentUser:((o=this.redirectUser)==null?void 0:o._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var i;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((i=this.currentUser)==null?void 0:i.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,i,o,f){if(this._deleted)return()=>{};const m=typeof i=="function"?i:i.next.bind(i);let x=!1;const v=this._isInitialized?Promise.resolve():this._initializationPromise;if(et(v,this,"internal-error"),v.then(()=>{x||m(this.currentUser)}),typeof i=="function"){const E=e.addObserver(i,o,f);return()=>{x=!0,E()}}else{const E=e.addObserver(i);return()=>{x=!0,E()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return et(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var f;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const i=await((f=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:f.getHeartbeatsHeader());i&&(e["X-Firebase-Client"]=i);const o=await this._getAppCheckToken();return o&&(e["X-Firebase-AppCheck"]=o),e}async _getAppCheckToken(){var i;if(Fi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((i=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getToken());return e!=null&&e.error&&K3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function ma(r){return Ai(r)}class rx{constructor(e){this.auth=e,this.observer=null,this.addObserver=Bv(i=>this.observer=i)}get next(){return et(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EC(r){Qf=r}function p_(r){return Qf.loadJS(r)}function vC(){return Qf.recaptchaEnterpriseScript}function CC(){return Qf.gapiScript}function AC(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class SC{constructor(){this.enterprise=new TC}ready(e){e()}execute(e,i){return Promise.resolve("token")}render(e,i){return""}}class TC{ready(e){e()}execute(e,i){return Promise.resolve("token")}render(e,i){return""}}const NC="recaptcha-enterprise",x_="NO_RECAPTCHA";class IC{constructor(e){this.type=NC,this.auth=ma(e)}async verify(e="verify",i=!1){async function o(m){if(!i){if(m.tenantId==null&&m._agentRecaptchaConfig!=null)return m._agentRecaptchaConfig.siteKey;if(m.tenantId!=null&&m._tenantRecaptchaConfigs[m.tenantId]!==void 0)return m._tenantRecaptchaConfigs[m.tenantId].siteKey}return new Promise(async(x,v)=>{aC(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(E=>{if(E.recaptchaKey===void 0)v(new Error("recaptcha Enterprise site key undefined"));else{const w=new rC(E);return m.tenantId==null?m._agentRecaptchaConfig=w:m._tenantRecaptchaConfigs[m.tenantId]=w,x(w.siteKey)}}).catch(E=>{v(E)})})}function f(m,x,v){const E=window.grecaptcha;ex(E)?E.enterprise.ready(()=>{E.enterprise.execute(m,{action:e}).then(w=>{x(w)}).catch(()=>{x(x_)})}):v(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new SC().execute("siteKey",{action:"verify"}):new Promise((m,x)=>{o(this.auth).then(v=>{if(!i&&ex(window.grecaptcha))f(v,m,x);else{if(typeof window>"u"){x(new Error("RecaptchaVerifier is only supported in browser"));return}let E=vC();E.length!==0&&(E+=v),p_(E).then(()=>{f(v,m,x)}).catch(w=>{x(w)})}}).catch(v=>{x(v)})})}}async function ax(r,e,i,o=!1,f=!1){const m=new IC(r);let x;if(f)x=x_;else try{x=await m.verify(i)}catch{x=await m.verify(i,!0)}const v={...e};if(i==="mfaSmsEnrollment"||i==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in v){const E=v.phoneEnrollmentInfo.phoneNumber,w=v.phoneEnrollmentInfo.recaptchaToken;Object.assign(v,{phoneEnrollmentInfo:{phoneNumber:E,recaptchaToken:w,captchaResponse:x,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in v){const E=v.phoneSignInInfo.recaptchaToken;Object.assign(v,{phoneSignInInfo:{recaptchaToken:E,captchaResponse:x,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return v}return o?Object.assign(v,{captchaResp:x}):Object.assign(v,{captchaResponse:x}),Object.assign(v,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(v,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),v}async function c1(r,e,i,o,f){var m;if((m=r._getRecaptchaConfig())!=null&&m.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const x=await ax(r,e,i,i==="getOobCode");return o(r,x)}else return o(r,e).catch(async x=>{if(x.code==="auth/missing-recaptcha-token"){console.log(`${i} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const v=await ax(r,e,i,i==="getOobCode");return o(r,v)}else return Promise.reject(x)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(r,e){const i=I1(r,"auth");if(i.isInitialized()){const f=i.getImmediate(),m=i.getOptions();if(Ya(m,e??{}))return f;ts(f,"already-initialized")}return i.initialize({options:e})}function OC(r,e){const i=(e==null?void 0:e.persistence)||[],o=(Array.isArray(i)?i:[i]).map(ar);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(o,e==null?void 0:e.popupRedirectResolver)}function DC(r,e,i){const o=ma(r);et(/^https?:\/\//.test(e),o,"invalid-emulator-scheme");const f=!1,m=y_(e),{host:x,port:v}=MC(e),E=v===null?"":`:${v}`,w={url:`${m}//${x}${E}/`},T=Object.freeze({host:x,port:v,protocol:m.replace(":",""),options:Object.freeze({disableWarnings:f})});if(!o._canInitEmulator){et(o.config.emulator&&o.emulatorConfig,o,"emulator-config-failed"),et(Ya(w,o.config.emulator)&&Ya(T,o.emulatorConfig),o,"emulator-config-failed");return}o.config.emulator=w,o.emulatorConfig=T,o.settings.appVerificationDisabledForTesting=!0,sl(x)?(Gy(`${m}//${x}${E}`),qy("Auth",!0)):LC()}function y_(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function MC(r){const e=y_(r),i=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!i)return{host:"",port:null};const o=i[2].split("@").pop()||"",f=/^(\[[^\]]+\])(:|$)/.exec(o);if(f){const m=f[1];return{host:m,port:ox(o.substr(m.length+1))}}else{const[m,x]=o.split(":");return{host:m,port:ox(x)}}}function ox(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function LC(){function r(){const e=document.createElement("p"),i=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",i.position="fixed",i.width="100%",i.backgroundColor="#ffffff",i.border=".1em solid #000000",i.color="#b50000",i.bottom="0px",i.left="0px",i.margin="0px",i.zIndex="10000",i.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,i){this.providerId=e,this.signInMethod=i}toJSON(){return rr("not implemented")}_getIdTokenResponse(e){return rr("not implemented")}_linkToIdToken(e,i){return rr("not implemented")}_getReauthenticationResolver(e){return rr("not implemented")}}async function kC(r,e){return ga(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BC(r,e){return Uc(r,"POST","/v1/accounts:signInWithPassword",da(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PC(r,e){return Uc(r,"POST","/v1/accounts:signInWithEmailLink",da(r,e))}async function jC(r,e){return Uc(r,"POST","/v1/accounts:signInWithEmailLink",da(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends k1{constructor(e,i,o,f=null){super("password",o),this._email=e,this._password=i,this._tenantId=f}static _fromEmailAndPassword(e,i){return new Sc(e,i,"password")}static _fromEmailAndCode(e,i,o=null){return new Sc(e,i,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e;if(i!=null&&i.email&&(i!=null&&i.password)){if(i.signInMethod==="password")return this._fromEmailAndPassword(i.email,i.password);if(i.signInMethod==="emailLink")return this._fromEmailAndCode(i.email,i.password,i.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const i={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return c1(e,i,"signInWithPassword",BC);case"emailLink":return PC(e,{email:this._email,oobCode:this._password});default:ts(e,"internal-error")}}async _linkToIdToken(e,i){switch(this.signInMethod){case"password":const o={idToken:i,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return c1(e,o,"signUpPassword",kC);case"emailLink":return jC(e,{idToken:i,email:this._email,oobCode:this._password});default:ts(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(r,e){return Uc(r,"POST","/v1/accounts:signInWithIdp",da(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="http://localhost";class Ka extends k1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const i=new Ka(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(i.idToken=e.idToken),e.accessToken&&(i.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(i.nonce=e.nonce),e.pendingToken&&(i.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(i.accessToken=e.oauthToken,i.secret=e.oauthTokenSecret):ts("argument-error"),i}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const i=typeof e=="string"?JSON.parse(e):e,{providerId:o,signInMethod:f,...m}=i;if(!o||!f)return null;const x=new Ka(o,f);return x.idToken=m.idToken||void 0,x.accessToken=m.accessToken||void 0,x.secret=m.secret,x.nonce=m.nonce,x.pendingToken=m.pendingToken||null,x}_getIdTokenResponse(e){const i=this.buildRequest();return Ko(e,i)}_linkToIdToken(e,i){const o=this.buildRequest();return o.idToken=i,Ko(e,o)}_getReauthenticationResolver(e){const i=this.buildRequest();return i.autoCreate=!1,Ko(e,i)}buildRequest(){const e={requestUri:UC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const i={};this.idToken&&(i.id_token=this.idToken),this.accessToken&&(i.access_token=this.accessToken),this.secret&&(i.oauth_token_secret=this.secret),i.providerId=this.providerId,this.nonce&&!this.pendingToken&&(i.nonce=this.nonce),e.postBody=rl(i)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function zC(r){const e=dc(gc(r)).link,i=e?dc(gc(e)).deep_link_id:null,o=dc(gc(r)).deep_link_id;return(o?dc(gc(o)).link:null)||o||i||e||r}class B1{constructor(e){const i=dc(gc(e)),o=i.apiKey??null,f=i.oobCode??null,m=FC(i.mode??null);et(o&&f&&m,"argument-error"),this.apiKey=o,this.operation=m,this.code=f,this.continueUrl=i.continueUrl??null,this.languageCode=i.lang??null,this.tenantId=i.tenantId??null}static parseLink(e){const i=zC(e);try{return new B1(i)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(){this.providerId=ol.PROVIDER_ID}static credential(e,i){return Sc._fromEmailAndPassword(e,i)}static credentialWithLink(e,i){const o=B1.parseLink(i);return et(o,"argument-error"),Sc._fromEmailAndCode(e,o.code,o.tenantId)}}ol.PROVIDER_ID="password";ol.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ol.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends P1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta extends Fc{constructor(){super("facebook.com")}static credential(e){return Ka._fromParams({providerId:ta.PROVIDER_ID,signInMethod:ta.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ta.credentialFromTaggedObject(e)}static credentialFromError(e){return ta.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ta.credential(e.oauthAccessToken)}catch{return null}}}ta.FACEBOOK_SIGN_IN_METHOD="facebook.com";ta.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr extends Fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,i){return Ka._fromParams({providerId:sr.PROVIDER_ID,signInMethod:sr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:i})}static credentialFromResult(e){return sr.credentialFromTaggedObject(e)}static credentialFromError(e){return sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:i,oauthAccessToken:o}=e;if(!i&&!o)return null;try{return sr.credential(i,o)}catch{return null}}}sr.GOOGLE_SIGN_IN_METHOD="google.com";sr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends Fc{constructor(){super("github.com")}static credential(e){return Ka._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return na.credential(e.oauthAccessToken)}catch{return null}}}na.GITHUB_SIGN_IN_METHOD="github.com";na.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends Fc{constructor(){super("twitter.com")}static credential(e,i){return Ka._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:i})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:i,oauthTokenSecret:o}=e;if(!i||!o)return null;try{return ia.credential(i,o)}catch{return null}}}ia.TWITTER_SIGN_IN_METHOD="twitter.com";ia.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HC(r,e){return Uc(r,"POST","/v1/accounts:signUp",da(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,i,o,f=!1){const m=await gs._fromIdTokenResponse(e,o,f),x=lx(o);return new Za({user:m,providerId:x,_tokenResponse:o,operationType:i})}static async _forOperation(e,i,o){await e._updateTokensIfNecessary(o,!0);const f=lx(o);return new Za({user:e,providerId:f,_tokenResponse:o,operationType:i})}}function lx(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf extends ha{constructor(e,i,o,f){super(i.code,i.message),this.operationType=o,this.user=f,Object.setPrototypeOf(this,Lf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:i.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(e,i,o,f){return new Lf(e,i,o,f)}}function __(r,e,i,o){return(e==="reauthenticate"?i._getReauthenticationResolver(r):i._getIdTokenResponse(r)).catch(m=>{throw m.code==="auth/multi-factor-auth-required"?Lf._fromErrorAndOperation(r,m,e,o):m})}async function VC(r,e,i=!1){const o=await Ac(r,e._linkToIdToken(r.auth,await r.getIdToken()),i);return Za._forOperation(r,"link",o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(r,e,i=!1){const{auth:o}=r;if(Fi(o.app))return Promise.reject(lr(o));const f="reauthenticate";try{const m=await Ac(r,__(o,f,e,r),i);et(m.idToken,o,"internal-error");const x=M1(m.idToken);et(x,o,"internal-error");const{sub:v}=x;return et(r.uid===v,o,"user-mismatch"),Za._forOperation(r,f,m)}catch(m){throw(m==null?void 0:m.code)==="auth/user-not-found"&&ts(o,"user-mismatch"),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w_(r,e,i=!1){if(Fi(r.app))return Promise.reject(lr(r));const o="signIn",f=await __(r,o,e),m=await Za._fromIdTokenResponse(r,o,f);return i||await r._updateCurrentUser(m.user),m}async function qC(r,e){return w_(ma(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b_(r){const e=ma(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function XC(r,e,i){if(Fi(r.app))return Promise.reject(lr(r));const o=ma(r),x=await c1(o,{returnSecureToken:!0,email:e,password:i,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",HC).catch(E=>{throw E.code==="auth/password-does-not-meet-requirements"&&b_(r),E}),v=await Za._fromIdTokenResponse(o,"signIn",x);return await o._updateCurrentUser(v.user),v}function YC(r,e,i){return Fi(r.app)?Promise.reject(lr(r)):qC(Ai(r),ol.credential(e,i)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&b_(r),o})}function WC(r,e,i,o){return Ai(r).onIdTokenChanged(e,i,o)}function KC(r,e,i){return Ai(r).beforeAuthStateChanged(e,i)}function ZC(r,e,i,o){return Ai(r).onAuthStateChanged(e,i,o)}const kf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,i){this.storageRetriever=e,this.type=i}_isAvailable(){try{return this.storage?(this.storage.setItem(kf,"1"),this.storage.removeItem(kf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,i){return this.storage.setItem(e,JSON.stringify(i)),Promise.resolve()}_get(e){const i=this.storage.getItem(e);return Promise.resolve(i?JSON.parse(i):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=1e3,JC=10;class v_ extends E_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=g_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const i of Object.keys(this.listeners)){const o=this.storage.getItem(i),f=this.localCache[i];o!==f&&e(i,f,o)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((x,v,E)=>{this.notifyListeners(x,E)});return}const o=e.key;i?this.detachListener():this.stopPolling();const f=()=>{const x=this.storage.getItem(o);!i&&this.localCache[o]===x||this.notifyListeners(o,x)},m=this.storage.getItem(o);pC()&&m!==e.newValue&&e.newValue!==e.oldValue?setTimeout(f,JC):f()}notifyListeners(e,i){this.localCache[e]=i;const o=this.listeners[e];if(o)for(const f of Array.from(o))f(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:o}),!0)})},QC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,i){await super._set(e,i),this.localCache[e]=JSON.stringify(i)}async _get(e){const i=await super._get(e);return this.localCache[e]=JSON.stringify(i),i}async _remove(e){await super._remove(e),delete this.localCache[e]}}v_.type="LOCAL";const $C=v_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_ extends E_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}C_.type="SESSION";const A_=C_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(i){return{fulfilled:!1,reason:i}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const i=this.receivers.find(f=>f.isListeningto(e));if(i)return i;const o=new Jf(e);return this.receivers.push(o),o}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const i=e,{eventId:o,eventType:f,data:m}=i.data,x=this.handlersMap[f];if(!(x!=null&&x.size))return;i.ports[0].postMessage({status:"ack",eventId:o,eventType:f});const v=Array.from(x).map(async w=>w(i.origin,m)),E=await eA(v);i.ports[0].postMessage({status:"done",eventId:o,eventType:f,response:E})}_subscribe(e,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),(!i||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(r="",e=10){let i="";for(let o=0;o<e;o++)i+=Math.floor(Math.random()*10);return r+i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,i,o=50){const f=typeof MessageChannel<"u"?new MessageChannel:null;if(!f)throw new Error("connection_unavailable");let m,x;return new Promise((v,E)=>{const w=j1("",20);f.port1.start();const T=setTimeout(()=>{E(new Error("unsupported_event"))},o);x={messageChannel:f,onMessage(N){const D=N;if(D.data.eventId===w)switch(D.data.status){case"ack":clearTimeout(T),m=setTimeout(()=>{E(new Error("timeout"))},3e3);break;case"done":clearTimeout(m),v(D.data.response);break;default:clearTimeout(T),clearTimeout(m),E(new Error("invalid_response"));break}}},this.handlers.add(x),f.port1.addEventListener("message",x.onMessage),this.target.postMessage({eventType:e,eventId:w,data:i},[f.port2])}).finally(()=>{x&&this.removeMessageHandler(x)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(){return window}function nA(r){Ms().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S_(){return typeof Ms().WorkerGlobalScope<"u"&&typeof Ms().importScripts=="function"}async function iA(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function sA(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function rA(){return S_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="firebaseLocalStorageDb",aA=1,Bf="firebaseLocalStorage",N_="fbase_key";class zc{constructor(e){this.request=e}toPromise(){return new Promise((e,i)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{i(this.request.error)})})}}function $f(r,e){return r.transaction([Bf],e?"readwrite":"readonly").objectStore(Bf)}function oA(){const r=indexedDB.deleteDatabase(T_);return new zc(r).toPromise()}function u1(){const r=indexedDB.open(T_,aA);return new Promise((e,i)=>{r.addEventListener("error",()=>{i(r.error)}),r.addEventListener("upgradeneeded",()=>{const o=r.result;try{o.createObjectStore(Bf,{keyPath:N_})}catch(f){i(f)}}),r.addEventListener("success",async()=>{const o=r.result;o.objectStoreNames.contains(Bf)?e(o):(o.close(),await oA(),e(await u1()))})})}async function cx(r,e,i){const o=$f(r,!0).put({[N_]:e,value:i});return new zc(o).toPromise()}async function lA(r,e){const i=$f(r,!1).get(e),o=await new zc(i).toPromise();return o===void 0?null:o.value}function ux(r,e){const i=$f(r,!0).delete(e);return new zc(i).toPromise()}const cA=800,uA=3;class I_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await u1(),this.db)}async _withRetries(e){let i=0;for(;;)try{const o=await this._openDb();return await e(o)}catch(o){if(i++>uA)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return S_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jf._getInstance(rA()),this.receiver._subscribe("keyChanged",async(e,i)=>({keyProcessed:(await this._poll()).includes(i.key)})),this.receiver._subscribe("ping",async(e,i)=>["keyChanged"])}async initializeSender(){var i,o;if(this.activeServiceWorker=await iA(),!this.activeServiceWorker)return;this.sender=new tA(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(i=e[0])!=null&&i.fulfilled&&(o=e[0])!=null&&o.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||sA()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await u1();return await cx(e,kf,"1"),await ux(e,kf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,i){return this._withPendingWrite(async()=>(await this._withRetries(o=>cx(o,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)))}async _get(e){const i=await this._withRetries(o=>lA(o,e));return this.localCache[e]=i,i}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(i=>ux(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(f=>{const m=$f(f,!1).getAll();return new zc(m).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const i=[],o=new Set;if(e.length!==0)for(const{fbase_key:f,value:m}of e)o.add(f),JSON.stringify(this.localCache[f])!==JSON.stringify(m)&&(this.notifyListeners(f,m),i.push(f));for(const f of Object.keys(this.localCache))this.localCache[f]&&!o.has(f)&&(this.notifyListeners(f,null),i.push(f));return i}notifyListeners(e,i){this.localCache[e]=i;const o=this.listeners[e];if(o)for(const f of Array.from(o))f(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),cA)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}I_.type="LOCAL";const fA=I_;new jc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R_(r,e){return e?ar(e):(et(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1 extends k1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ko(e,this._buildIdpRequest())}_linkToIdToken(e,i){return Ko(e,this._buildIdpRequest(i))}_getReauthenticationResolver(e){return Ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const i={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(i.idToken=e),i}}function hA(r){return w_(r.auth,new U1(r),r.bypassAuthState)}function dA(r){const{auth:e,user:i}=r;return et(i,e,"internal-error"),GC(i,new U1(r),r.bypassAuthState)}async function gA(r){const{auth:e,user:i}=r;return et(i,e,"internal-error"),VC(i,new U1(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e,i,o,f,m=!1){this.auth=e,this.resolver=o,this.user=f,this.bypassAuthState=m,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(i)?i:[i]}execute(){return new Promise(async(e,i)=>{this.pendingPromise={resolve:e,reject:i};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(e){const{urlResponse:i,sessionId:o,postBody:f,tenantId:m,error:x,type:v}=e;if(x){this.reject(x);return}const E={auth:this.auth,requestUri:i,sessionId:o,tenantId:m||void 0,postBody:f||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(v)(E))}catch(w){this.reject(w)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return hA;case"linkViaPopup":case"linkViaRedirect":return gA;case"reauthViaPopup":case"reauthViaRedirect":return dA;default:ts(this.auth,"internal-error")}}resolve(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mA=new jc(2e3,1e4);async function pA(r,e,i){if(Fi(r.app))return Promise.reject(xs(r,"operation-not-supported-in-this-environment"));const o=ma(r);Z3(r,e,P1);const f=R_(o,i);return new Ga(o,"signInViaPopup",e,f).executeNotNull()}class Ga extends O_{constructor(e,i,o,f,m){super(e,i,f,m),this.provider=o,this.authWindow=null,this.pollId=null,Ga.currentPopupAction&&Ga.currentPopupAction.cancel(),Ga.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return et(e,this.auth,"internal-error"),e}async onExecution(){fr(this.filter.length===1,"Popup operations only handle one event");const e=j1();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(xs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(xs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ga.currentPopupAction=null}pollUserCancellation(){const e=()=>{var i,o;if((o=(i=this.authWindow)==null?void 0:i.window)!=null&&o.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,mA.get())};e()}}Ga.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="pendingRedirect",wf=new Map;class yA extends O_{constructor(e,i,o=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],i,void 0,o),this.eventId=null}async execute(){let e=wf.get(this.auth._key());if(!e){try{const o=await _A(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(o)}catch(i){e=()=>Promise.reject(i)}wf.set(this.auth._key(),e)}return this.bypassAuthState||wf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const i=await this.auth._redirectUserForId(e.eventId);if(i)return this.user=i,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _A(r,e){const i=EA(e),o=bA(r);if(!await o._isAvailable())return!1;const f=await o._get(i)==="true";return await o._remove(i),f}function wA(r,e){wf.set(r._key(),e)}function bA(r){return ar(r._redirectPersistence)}function EA(r){return _f(xA,r.config.apiKey,r.name)}async function vA(r,e,i=!1){if(Fi(r.app))return Promise.reject(lr(r));const o=ma(r),f=R_(o,e),x=await new yA(o,f,i).execute();return x&&!i&&(delete x.user._redirectEventId,await o._persistUserIfCurrent(x.user),await o._setRedirectUser(null,e)),x}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA=600*1e3;class AA{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let i=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(e,o)&&(i=!0,this.sendToConsumer(e,o),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SA(e)||(this.hasHandledPotentialRedirect=!0,i||(this.queuedRedirectEvent=e,i=!0)),i}sendToConsumer(e,i){var o;if(e.error&&!D_(e)){const f=((o=e.error.code)==null?void 0:o.split("auth/")[1])||"internal-error";i.onError(xs(this.auth,f))}else i.onAuthEvent(e)}isEventForConsumer(e,i){const o=i.eventId===null||!!e.eventId&&e.eventId===i.eventId;return i.filter.includes(e.type)&&o}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=CA&&this.cachedEventUids.clear(),this.cachedEventUids.has(fx(e))}saveEventToCache(e){this.cachedEventUids.add(fx(e)),this.lastProcessedEventTime=Date.now()}}function fx(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function D_({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SA(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return D_(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TA(r,e={}){return ga(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IA=/^https?/;async function RA(r){if(r.config.emulator)return;const{authorizedDomains:e}=await TA(r);for(const i of e)try{if(OA(i))return}catch{}ts(r,"unauthorized-domain")}function OA(r){const e=o1(),{protocol:i,hostname:o}=new URL(e);if(r.startsWith("chrome-extension://")){const x=new URL(r);return x.hostname===""&&o===""?i==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):i==="chrome-extension:"&&x.hostname===o}if(!IA.test(i))return!1;if(NA.test(r))return o===r;const f=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+f+"|"+f+")$","i").test(o)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA=new jc(3e4,6e4);function hx(){const r=Ms().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let i=0;i<r.CP.length;i++)r.CP[i]=null}}function MA(r){return new Promise((e,i)=>{var f,m,x;function o(){hx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hx(),i(xs(r,"network-request-failed"))},timeout:DA.get()})}if((m=(f=Ms().gapi)==null?void 0:f.iframes)!=null&&m.Iframe)e(gapi.iframes.getContext());else if((x=Ms().gapi)!=null&&x.load)o();else{const v=AC("iframefcb");return Ms()[v]=()=>{gapi.load?o():i(xs(r,"network-request-failed"))},p_(`${CC()}?onload=${v}`).catch(E=>i(E))}}).catch(e=>{throw bf=null,e})}let bf=null;function LA(r){return bf=bf||MA(r),bf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=new jc(5e3,15e3),BA="__/auth/iframe",PA="emulator/auth/iframe",jA={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},UA=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FA(r){const e=r.config;et(e.authDomain,r,"auth-domain-config-required");const i=e.emulator?D1(e,PA):`https://${r.config.authDomain}/${BA}`,o={apiKey:e.apiKey,appName:r.name,v:al},f=UA.get(r.config.apiHost);f&&(o.eid=f);const m=r._getFrameworks();return m.length&&(o.fw=m.join(",")),`${i}?${rl(o).slice(1)}`}async function zA(r){const e=await LA(r),i=Ms().gapi;return et(i,r,"internal-error"),e.open({where:document.body,url:FA(r),messageHandlersFilter:i.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:jA,dontclear:!0},o=>new Promise(async(f,m)=>{await o.restyle({setHideOnLeave:!1});const x=xs(r,"network-request-failed"),v=Ms().setTimeout(()=>{m(x)},kA.get());function E(){Ms().clearTimeout(v),f(o)}o.ping(E).then(E,()=>{m(x)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},VA=500,GA=600,qA="_blank",XA="http://localhost";class dx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function YA(r,e,i,o=VA,f=GA){const m=Math.max((window.screen.availHeight-f)/2,0).toString(),x=Math.max((window.screen.availWidth-o)/2,0).toString();let v="";const E={...HA,width:o.toString(),height:f.toString(),top:m,left:x},w=ci().toLowerCase();i&&(v=c_(w)?qA:i),o_(w)&&(e=e||XA,E.scrollbars="yes");const T=Object.entries(E).reduce((D,[P,G])=>`${D}${P}=${G},`,"");if(mC(w)&&v!=="_self")return WA(e||"",v),new dx(null);const N=window.open(e||"",v,T);et(N,r,"popup-blocked");try{N.focus()}catch{}return new dx(N)}function WA(r,e){const i=document.createElement("a");i.href=r,i.target=e;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),i.dispatchEvent(o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA="__/auth/handler",ZA="emulator/auth/handler",QA=encodeURIComponent("fac");async function gx(r,e,i,o,f,m){et(r.config.authDomain,r,"auth-domain-config-required"),et(r.config.apiKey,r,"invalid-api-key");const x={apiKey:r.config.apiKey,appName:r.name,authType:i,redirectUrl:o,v:al,eventId:f};if(e instanceof P1){e.setDefaultLanguage(r.languageCode),x.providerId=e.providerId||"",t1(e.getCustomParameters())||(x.customParameters=JSON.stringify(e.getCustomParameters()));for(const[T,N]of Object.entries({}))x[T]=N}if(e instanceof Fc){const T=e.getScopes().filter(N=>N!=="");T.length>0&&(x.scopes=T.join(","))}r.tenantId&&(x.tid=r.tenantId);const v=x;for(const T of Object.keys(v))v[T]===void 0&&delete v[T];const E=await r._getAppCheckToken(),w=E?`#${QA}=${encodeURIComponent(E)}`:"";return`${JA(r)}?${rl(v).slice(1)}${w}`}function JA({config:r}){return r.emulator?D1(r,ZA):`https://${r.authDomain}/${KA}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0="webStorageSupport";class $A{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=A_,this._completeRedirectFn=vA,this._overrideRedirectResult=wA}async _openPopup(e,i,o,f){var x;fr((x=this.eventManagers[e._key()])==null?void 0:x.manager,"_initialize() not called before _openPopup()");const m=await gx(e,i,o,o1(),f);return YA(e,m,j1())}async _openRedirect(e,i,o,f){await this._originValidation(e);const m=await gx(e,i,o,o1(),f);return nA(m),new Promise(()=>{})}_initialize(e){const i=e._key();if(this.eventManagers[i]){const{manager:f,promise:m}=this.eventManagers[i];return f?Promise.resolve(f):(fr(m,"If manager is not set, promise should be"),m)}const o=this.initAndGetManager(e);return this.eventManagers[i]={promise:o},o.catch(()=>{delete this.eventManagers[i]}),o}async initAndGetManager(e){const i=await zA(e),o=new AA(e);return i.register("authEvent",f=>(et(f==null?void 0:f.authEvent,e,"invalid-auth-event"),{status:o.onEvent(f.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:o},this.iframes[e._key()]=i,o}_isIframeWebStorageSupported(e,i){this.iframes[e._key()].send(x0,{type:x0},f=>{var x;const m=(x=f==null?void 0:f[0])==null?void 0:x[x0];m!==void 0&&i(!!m),ts(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const i=e._key();return this.originValidationPromises[i]||(this.originValidationPromises[i]=RA(e)),this.originValidationPromises[i]}get _shouldInitProactively(){return g_()||l_()||L1()}}const e4=$A;var mx="@firebase/auth",px="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const i=this.auth.onIdTokenChanged(o=>{e((o==null?void 0:o.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,i),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const i=this.internalListeners.get(e);i&&(this.internalListeners.delete(e),i(),this.updateProactiveRefresh())}assertAuthConfigured(){et(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function i4(r){$o(new Wa("auth",(e,{options:i})=>{const o=e.getProvider("app").getImmediate(),f=e.getProvider("heartbeat"),m=e.getProvider("app-check-internal"),{apiKey:x,authDomain:v}=o.options;et(x&&!x.includes(":"),"invalid-api-key",{appName:o.name});const E={apiKey:x,authDomain:v,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m_(r)},w=new bC(o,f,m,E);return OC(w,i),w},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,i,o)=>{e.getProvider("auth-internal").initialize()})),$o(new Wa("auth-internal",e=>{const i=ma(e.getProvider("auth").getImmediate());return(o=>new t4(o))(i)},"PRIVATE").setInstantiationMode("EXPLICIT")),aa(mx,px,n4(r)),aa(mx,px,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4=300,r4=Vy("authIdTokenMaxAge")||s4;let xx=null;const a4=r=>async e=>{const i=e&&await e.getIdTokenResult(),o=i&&(new Date().getTime()-Date.parse(i.issuedAtTime))/1e3;if(o&&o>r4)return;const f=i==null?void 0:i.token;xx!==f&&(xx=f,await fetch(r,{method:f?"POST":"DELETE",headers:f?{Authorization:`Bearer ${f}`}:{}}))};function o4(r=Qy()){const e=I1(r,"auth");if(e.isInitialized())return e.getImmediate();const i=RC(r,{popupRedirectResolver:e4,persistence:[fA,$C,A_]}),o=Vy("authTokenSyncURL");if(o&&typeof isSecureContext=="boolean"&&isSecureContext){const m=new URL(o,location.origin);if(location.origin===m.origin){const x=a4(m.toString());KC(i,x,()=>x(i.currentUser)),WC(i,v=>x(v))}}const f=zy("auth");return f&&DC(i,`http://${f}`),i}function l4(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}EC({loadJS(r){return new Promise((e,i)=>{const o=document.createElement("script");o.setAttribute("src",r),o.onload=e,o.onerror=f=>{const m=xs("internal-error");m.customData=f,i(m)},o.type="text/javascript",o.charset="UTF-8",l4().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});i4("Browser");var yx={};const _x="@firebase/database",wx="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M_="";function c4(r){M_=r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,i){i==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),jn(i))}get(e){const i=this.domStorage_.getItem(this.prefixedName_(e));return i==null?null:vc(i)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f4{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,i){i==null?delete this.cache_[e]:this.cache_[e]=i}get(e){return dr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L_=function(r){try{if(typeof window<"u"&&typeof window[r]<"u"){const e=window[r];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u4(e)}}catch{}return new f4},qa=L_("localStorage"),h4=L_("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=new T1("@firebase/database"),d4=(function(){let r=1;return function(){return r++}})(),k_=function(r){const e=Uv(r),i=new kv;i.update(e);const o=i.digest();return v1.encodeByteArray(o)},Hc=function(...r){let e="";for(let i=0;i<r.length;i++){const o=r[i];Array.isArray(o)||o&&typeof o=="object"&&typeof o.length=="number"?e+=Hc.apply(null,o):typeof o=="object"?e+=jn(o):e+=o,e+=" "}return e};let xc=null,bx=!0;const g4=function(r,e){Oe(!0,"Can't turn on custom loggers persistently."),Zo.logLevel=Yt.VERBOSE,xc=Zo.log.bind(Zo)},$n=function(...r){if(bx===!0&&(bx=!1,xc===null&&h4.get("logging_enabled")===!0&&g4()),xc){const e=Hc.apply(null,r);xc(e)}},Vc=function(r){return function(...e){$n(r,...e)}},f1=function(...r){const e="FIREBASE INTERNAL ERROR: "+Hc(...r);Zo.error(e)},hr=function(...r){const e=`FIREBASE FATAL ERROR: ${Hc(...r)}`;throw Zo.error(e),new Error(e)},vi=function(...r){const e="FIREBASE WARNING: "+Hc(...r);Zo.warn(e)},m4=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&vi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},B_=function(r){return typeof r=="number"&&(r!==r||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY)},p4=function(r){if(document.readyState==="complete")r();else{let e=!1;const i=function(){if(!document.body){setTimeout(i,Math.floor(10));return}e||(e=!0,r())};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&i()}),window.attachEvent("onload",i))}},el="[MIN_NAME]",Qa="[MAX_NAME]",ll=function(r,e){if(r===e)return 0;if(r===el||e===Qa)return-1;if(e===el||r===Qa)return 1;{const i=Ex(r),o=Ex(e);return i!==null?o!==null?i-o===0?r.length-e.length:i-o:-1:o!==null?1:r<e?-1:1}},x4=function(r,e){return r===e?0:r<e?-1:1},rc=function(r,e){if(e&&r in e)return e[r];throw new Error("Missing required key ("+r+") in object: "+jn(e))},F1=function(r){if(typeof r!="object"||r===null)return jn(r);const e=[];for(const o in r)e.push(o);e.sort();let i="{";for(let o=0;o<e.length;o++)o!==0&&(i+=","),i+=jn(e[o]),i+=":",i+=F1(r[e[o]]);return i+="}",i},P_=function(r,e){const i=r.length;if(i<=e)return[r];const o=[];for(let f=0;f<i;f+=e)f+e>i?o.push(r.substring(f,i)):o.push(r.substring(f,f+e));return o};function Ci(r,e){for(const i in r)r.hasOwnProperty(i)&&e(i,r[i])}const j_=function(r){Oe(!B_(r),"Invalid JSON number");const e=11,i=52,o=(1<<e-1)-1;let f,m,x,v,E;r===0?(m=0,x=0,f=1/r===-1/0?1:0):(f=r<0,r=Math.abs(r),r>=Math.pow(2,1-o)?(v=Math.min(Math.floor(Math.log(r)/Math.LN2),o),m=v+o,x=Math.round(r*Math.pow(2,i-v)-Math.pow(2,i))):(m=0,x=Math.round(r/Math.pow(2,1-o-i))));const w=[];for(E=i;E;E-=1)w.push(x%2?1:0),x=Math.floor(x/2);for(E=e;E;E-=1)w.push(m%2?1:0),m=Math.floor(m/2);w.push(f?1:0),w.reverse();const T=w.join("");let N="";for(E=0;E<64;E+=8){let D=parseInt(T.substr(E,8),2).toString(16);D.length===1&&(D="0"+D),N=N+D}return N.toLowerCase()},y4=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},_4=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function w4(r,e){let i="Unknown Error";r==="too_big"?i="The data requested exceeds the maximum size that can be accessed with a single request.":r==="permission_denied"?i="Client doesn't have permission to access the desired data.":r==="unavailable"&&(i="The service is unavailable");const o=new Error(r+" at "+e._path.toString()+": "+i);return o.code=r.toUpperCase(),o}const b4=new RegExp("^-?(0*)\\d{1,10}$"),E4=-2147483648,v4=2147483647,Ex=function(r){if(b4.test(r)){const e=Number(r);if(e>=E4&&e<=v4)return e}return null},cl=function(r){try{r()}catch(e){setTimeout(()=>{const i=e.stack||"";throw vi("Exception was thrown by user callback.",i),e},Math.floor(0))}},C4=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},yc=function(r,e){const i=setTimeout(r,e);return typeof i=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(i):typeof i=="object"&&i.unref&&i.unref(),i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(e,i){this.appCheckProvider=i,this.appName=e.name,Fi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=i==null?void 0:i.getImmediate({optional:!0}),this.appCheck||i==null||i.get().then(o=>this.appCheck=o)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((i,o)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(i,o):i(null)},0)})}addTokenChangeListener(e){var i;(i=this.appCheckProvider)==null||i.get().then(o=>o.addTokenListener(e))}notifyForInvalidToken(){vi(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(e,i,o){this.appName_=e,this.firebaseOptions_=i,this.authProvider_=o,this.auth_=null,this.auth_=o.getImmediate({optional:!0}),this.auth_||o.onInit(f=>this.auth_=f)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(i=>i&&i.code==="auth/token-not-initialized"?($n("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(i)):new Promise((i,o)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(i,o):i(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(i=>i.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(i=>i.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',vi(e)}}class Ef{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Ef.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1="5",U_="v",F_="s",z_="r",H_="f",V_=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,G_="ls",q_="p",h1="ac",X_="websocket",Y_="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,i,o,f,m=!1,x="",v=!1,E=!1,w=null){this.secure=i,this.namespace=o,this.webSocketOnly=f,this.nodeAdmin=m,this.persistenceKey=x,this.includeNamespaceInQueryParams=v,this.isUsingEmulator=E,this.emulatorOptions=w,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=qa.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&qa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",i=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${i}`}}function T4(r){return r.host!==r.internalHost||r.isCustomHost()||r.includeNamespaceInQueryParams}function K_(r,e,i){Oe(typeof e=="string","typeof type must == string"),Oe(typeof i=="object","typeof params must == object");let o;if(e===X_)o=(r.secure?"wss://":"ws://")+r.internalHost+"/.ws?";else if(e===Y_)o=(r.secure?"https://":"http://")+r.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);T4(r)&&(i.ns=r.namespace);const f=[];return Ci(i,(m,x)=>{f.push(m+"="+x)}),o+f.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(){this.counters_={}}incrementCounter(e,i=1){dr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=i}get(){return gv(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0={},_0={};function H1(r){const e=r.toString();return y0[e]||(y0[e]=new N4),y0[e]}function I4(r,e){const i=r.toString();return _0[i]||(_0[i]=e()),_0[i]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,i){this.closeAfterResponse=e,this.onClose=i,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,i){for(this.pendingResponses[e]=i;this.pendingResponses[this.currentResponseNum];){const o=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let f=0;f<o.length;++f)o[f]&&cl(()=>{this.onMessage_(o[f])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="start",O4="close",D4="pLPCommand",M4="pRTLPCB",Z_="id",Q_="pw",J_="ser",L4="cb",k4="seg",B4="ts",P4="d",j4="dframe",$_=1870,ew=30,U4=$_-ew,F4=25e3,z4=3e4;class Xo{constructor(e,i,o,f,m,x,v){this.connId=e,this.repoInfo=i,this.applicationId=o,this.appCheckToken=f,this.authToken=m,this.transportSessionId=x,this.lastSessionId=v,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vc(e),this.stats_=H1(i),this.urlFn=E=>(this.appCheckToken&&(E[h1]=this.appCheckToken),K_(i,Y_,E))}open(e,i){this.curSegmentNum=0,this.onDisconnect_=i,this.myPacketOrderer=new R4(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(z4)),p4(()=>{if(this.isClosed_)return;this.scriptTagHolder=new V1((...m)=>{const[x,v,E,w,T]=m;if(this.incrementIncomingBytes_(m),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,x===vx)this.id=v,this.password=E;else if(x===O4)v?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(v,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+x)},(...m)=>{const[x,v]=m;this.incrementIncomingBytes_(m),this.myPacketOrderer.handleResponse(x,v)},()=>{this.onClosed_()},this.urlFn);const o={};o[vx]="t",o[J_]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(o[L4]=this.scriptTagHolder.uniqueCallbackIdentifier),o[U_]=z1,this.transportSessionId&&(o[F_]=this.transportSessionId),this.lastSessionId&&(o[G_]=this.lastSessionId),this.applicationId&&(o[q_]=this.applicationId),this.appCheckToken&&(o[h1]=this.appCheckToken),typeof location<"u"&&location.hostname&&V_.test(location.hostname)&&(o[z_]=H_);const f=this.urlFn(o);this.log_("Connecting via long-poll to "+f),this.scriptTagHolder.addTag(f,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Xo.forceAllow_=!0}static forceDisallow(){Xo.forceDisallow_=!0}static isAvailable(){return Xo.forceAllow_?!0:!Xo.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!y4()&&!_4()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const i=jn(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const o=Uy(i),f=P_(o,U4);for(let m=0;m<f.length;m++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,f.length,f[m]),this.curSegmentNum++}addDisconnectPingFrame(e,i){this.myDisconnFrame=document.createElement("iframe");const o={};o[j4]="t",o[Z_]=e,o[Q_]=i,this.myDisconnFrame.src=this.urlFn(o),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const i=jn(e).length;this.bytesReceived+=i,this.stats_.incrementCounter("bytes_received",i)}}class V1{constructor(e,i,o,f){this.onDisconnect=o,this.urlFn=f,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=d4(),window[D4+this.uniqueCallbackIdentifier]=e,window[M4+this.uniqueCallbackIdentifier]=i,this.myIFrame=V1.createIFrame_();let m="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(m='<script>document.domain="'+document.domain+'";<\/script>');const x="<html><body>"+m+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(x),this.myIFrame.doc.close()}catch(v){$n("frame writing exception"),v.stack&&$n(v.stack),$n(v)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||$n("No IE domain setting required")}catch{const o=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+o+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,i){for(this.myID=e,this.myPW=i,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[Z_]=this.myID,e[Q_]=this.myPW,e[J_]=this.currentSerial;let i=this.urlFn(e),o="",f=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+ew+o.length<=$_;){const x=this.pendingSegs.shift();o=o+"&"+k4+f+"="+x.seg+"&"+B4+f+"="+x.ts+"&"+P4+f+"="+x.d,f++}return i=i+o,this.addLongPollTag_(i,this.currentSerial),!0}else return!1}enqueueSegment(e,i,o){this.pendingSegs.push({seg:e,ts:i,d:o}),this.alive&&this.newRequest_()}addLongPollTag_(e,i){this.outstandingRequests.add(i);const o=()=>{this.outstandingRequests.delete(i),this.newRequest_()},f=setTimeout(o,Math.floor(F4)),m=()=>{clearTimeout(f),o()};this.addTag(e,m)}addTag(e,i){setTimeout(()=>{try{if(!this.sendNewPolls)return;const o=this.myIFrame.doc.createElement("script");o.type="text/javascript",o.async=!0,o.src=e,o.onload=o.onreadystatechange=function(){const f=o.readyState;(!f||f==="loaded"||f==="complete")&&(o.onload=o.onreadystatechange=null,o.parentNode&&o.parentNode.removeChild(o),i())},o.onerror=()=>{$n("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(o)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4=16384,V4=45e3;let Pf=null;typeof MozWebSocket<"u"?Pf=MozWebSocket:typeof WebSocket<"u"&&(Pf=WebSocket);class ds{constructor(e,i,o,f,m,x,v){this.connId=e,this.applicationId=o,this.appCheckToken=f,this.authToken=m,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vc(this.connId),this.stats_=H1(i),this.connURL=ds.connectionURL_(i,x,v,f,o),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,o,f,m){const x={};return x[U_]=z1,typeof location<"u"&&location.hostname&&V_.test(location.hostname)&&(x[z_]=H_),i&&(x[F_]=i),o&&(x[G_]=o),f&&(x[h1]=f),m&&(x[q_]=m),K_(e,X_,x)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,qa.set("previous_websocket_failure",!0);try{let o;Tv(),this.mySock=new Pf(this.connURL,[],o)}catch(o){this.log_("Error instantiating WebSocket.");const f=o.message||o.data;f&&this.log_(f),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const f=o.message||o.data;f&&this.log_(f),this.onClosed_()}}start(){}static forceDisallow(){ds.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=/Android ([0-9]{0,}\.[0-9]{0,})/,o=navigator.userAgent.match(i);o&&o.length>1&&parseFloat(o[1])<4.4&&(e=!0)}return!e&&Pf!==null&&!ds.forceDisallow_}static previouslyFailed(){return qa.isInMemoryStorage||qa.get("previous_websocket_failure")===!0}markConnectionHealthy(){qa.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const o=vc(i);this.onMessage(o)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Oe(this.frames===null,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{const o=this.extractFrameCount_(i);o!==null&&this.appendFrame_(o)}}send(e){this.resetKeepAlive();const i=jn(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const o=P_(i,H4);o.length>1&&this.sendString_(String(o.length));for(let f=0;f<o.length;f++)this.sendString_(o[f])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(V4))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ds.responsesRequiredToBeHealthy=2;ds.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{static get ALL_TRANSPORTS(){return[Xo,ds]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const i=ds&&ds.isAvailable();let o=i&&!ds.previouslyFailed();if(e.webSocketOnly&&(i||vi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[ds];else{const f=this.transports_=[];for(const m of Tc.ALL_TRANSPORTS)m&&m.isAvailable()&&f.push(m);Tc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Tc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=6e4,q4=5e3,X4=10*1024,Y4=100*1024,w0="t",Cx="d",W4="s",Ax="r",K4="e",Sx="o",Tx="a",Nx="n",Ix="p",Z4="h";class Q4{constructor(e,i,o,f,m,x,v,E,w,T){this.id=e,this.repoInfo_=i,this.applicationId_=o,this.appCheckToken_=f,this.authToken_=m,this.onMessage_=x,this.onReady_=v,this.onDisconnect_=E,this.onKill_=w,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vc("c:"+this.id+":"),this.transportManager_=new Tc(i),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.conn_),o=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(i,o)},Math.floor(0));const f=e.healthyTimeout||0;f>0&&(this.healthyTimeout_=yc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Y4?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>X4?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(f)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return i=>{e===this.conn_?this.onConnectionLost_(i):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return i=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(i):e===this.secondaryConn_?this.onSecondaryMessageReceived_(i):this.log_("message on old connection"))}}sendRequest(e){const i={t:"d",d:e};this.sendData_(i)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(w0 in e){const i=e[w0];i===Tx?this.upgradeIfSecondaryHealthy_():i===Ax?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):i===Sx&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const i=rc("t",e),o=rc("d",e);if(i==="c")this.onSecondaryControl_(o);else if(i==="d")this.pendingDataMessages.push(o);else throw new Error("Unknown protocol layer: "+i)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Ix,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Tx,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Nx,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const i=rc("t",e),o=rc("d",e);i==="c"?this.onControl_(o):i==="d"&&this.onDataMessage_(o)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const i=rc(w0,e);if(Cx in e){const o=e[Cx];if(i===Z4){const f={...o};this.repoInfo_.isUsingEmulator&&(f.h=this.repoInfo_.host),this.onHandshake_(f)}else if(i===Nx){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let f=0;f<this.pendingDataMessages.length;++f)this.onDataMessage_(this.pendingDataMessages[f]);this.pendingDataMessages=[],this.tryCleanupConnection()}else i===W4?this.onConnectionShutdown_(o):i===Ax?this.onReset_(o):i===K4?f1("Server Error: "+o):i===Sx?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):f1("Unknown control packet command: "+i)}}onHandshake_(e){const i=e.ts,o=e.v,f=e.h;this.sessionId=e.s,this.repoInfo_.host=f,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,i),z1!==o&&vi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const i=this.connReceiver_(this.secondaryConn_),o=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(i,o),yc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(G4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,i){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(i,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):yc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(q4))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Ix,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(qa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{put(e,i,o,f){}merge(e,i,o,f){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,i,o){}onDisconnectMerge(e,i,o){}onDisconnectCancel(e,i){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e){this.allowedEvents_=e,this.listeners_={},Oe(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...i){if(Array.isArray(this.listeners_[e])){const o=[...this.listeners_[e]];for(let f=0;f<o.length;f++)o[f].callback.apply(o[f].context,i)}}on(e,i,o){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:i,context:o});const f=this.getInitialEvent(e);f&&i.apply(o,f)}off(e,i,o){this.validateEventType_(e);const f=this.listeners_[e]||[];for(let m=0;m<f.length;m++)if(f[m].callback===i&&(!o||o===f[m].context)){f.splice(m,1);return}}validateEventType_(e){Oe(this.allowedEvents_.find(i=>i===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf extends nw{static getInstance(){return new jf}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!A1()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Oe(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rx=32,Ox=768;class $t{constructor(e,i){if(i===void 0){this.pieces_=e.split("/");let o=0;for(let f=0;f<this.pieces_.length;f++)this.pieces_[f].length>0&&(this.pieces_[o]=this.pieces_[f],o++);this.pieces_.length=o,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=i}toString(){let e="";for(let i=this.pieceNum_;i<this.pieces_.length;i++)this.pieces_[i]!==""&&(e+="/"+this.pieces_[i]);return e||"/"}}function Dt(){return new $t("")}function At(r){return r.pieceNum_>=r.pieces_.length?null:r.pieces_[r.pieceNum_]}function ca(r){return r.pieces_.length-r.pieceNum_}function tn(r){let e=r.pieceNum_;return e<r.pieces_.length&&e++,new $t(r.pieces_,e)}function iw(r){return r.pieceNum_<r.pieces_.length?r.pieces_[r.pieces_.length-1]:null}function J4(r){let e="";for(let i=r.pieceNum_;i<r.pieces_.length;i++)r.pieces_[i]!==""&&(e+="/"+encodeURIComponent(String(r.pieces_[i])));return e||"/"}function sw(r,e=0){return r.pieces_.slice(r.pieceNum_+e)}function rw(r){if(r.pieceNum_>=r.pieces_.length)return null;const e=[];for(let i=r.pieceNum_;i<r.pieces_.length-1;i++)e.push(r.pieces_[i]);return new $t(e,0)}function Un(r,e){const i=[];for(let o=r.pieceNum_;o<r.pieces_.length;o++)i.push(r.pieces_[o]);if(e instanceof $t)for(let o=e.pieceNum_;o<e.pieces_.length;o++)i.push(e.pieces_[o]);else{const o=e.split("/");for(let f=0;f<o.length;f++)o[f].length>0&&i.push(o[f])}return new $t(i,0)}function _t(r){return r.pieceNum_>=r.pieces_.length}function oi(r,e){const i=At(r),o=At(e);if(i===null)return e;if(i===o)return oi(tn(r),tn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+r+")")}function aw(r,e){if(ca(r)!==ca(e))return!1;for(let i=r.pieceNum_,o=e.pieceNum_;i<=r.pieces_.length;i++,o++)if(r.pieces_[i]!==e.pieces_[o])return!1;return!0}function ms(r,e){let i=r.pieceNum_,o=e.pieceNum_;if(ca(r)>ca(e))return!1;for(;i<r.pieces_.length;){if(r.pieces_[i]!==e.pieces_[o])return!1;++i,++o}return!0}class $4{constructor(e,i){this.errorPrefix_=i,this.parts_=sw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let o=0;o<this.parts_.length;o++)this.byteLength_+=Zf(this.parts_[o]);ow(this)}}function eS(r,e){r.parts_.length>0&&(r.byteLength_+=1),r.parts_.push(e),r.byteLength_+=Zf(e),ow(r)}function tS(r){const e=r.parts_.pop();r.byteLength_-=Zf(e),r.parts_.length>0&&(r.byteLength_-=1)}function ow(r){if(r.byteLength_>Ox)throw new Error(r.errorPrefix_+"has a key path longer than "+Ox+" bytes ("+r.byteLength_+").");if(r.parts_.length>Rx)throw new Error(r.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Rx+") or object contains a cycle "+Va(r))}function Va(r){return r.parts_.length===0?"":"in property '"+r.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1 extends nw{static getInstance(){return new G1}constructor(){super(["visible"]);let e,i;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(i="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(i="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(i="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(i="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,i&&document.addEventListener(i,()=>{const o=!document[e];o!==this.visible_&&(this.visible_=o,this.trigger("visible",o))},!1)}getInitialEvent(e){return Oe(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=1e3,nS=300*1e3,Dx=30*1e3,iS=1.3,sS=3e4,rS="server_kill",Mx=3;class cr extends tw{constructor(e,i,o,f,m,x,v,E){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=o,this.onConnectStatus_=f,this.onServerInfoUpdate_=m,this.authTokenProvider_=x,this.appCheckTokenProvider_=v,this.authOverride_=E,this.id=cr.nextPersistentConnectionId_++,this.log_=Vc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ac,this.maxReconnectDelay_=nS,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");G1.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&jf.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,o){const f=++this.requestNumber_,m={r:f,a:e,b:i};this.log_(jn(m)),Oe(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(m),o&&(this.requestCBHash_[f]=o)}get(e){this.initConnection_();const i=new Kf,f={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:x=>{const v=x.d;x.s==="ok"?i.resolve(v):i.reject(v)}};this.outstandingGets_.push(f),this.outstandingGetCount_++;const m=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(m),i.promise}listen(e,i,o,f){this.initConnection_();const m=e._queryIdentifier,x=e._path.toString();this.log_("Listen called for "+x+" "+m),this.listens.has(x)||this.listens.set(x,new Map),Oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Oe(!this.listens.get(x).has(m),"listen() called twice for same path/queryId.");const v={onComplete:f,hashFn:i,query:e,tag:o};this.listens.get(x).set(m,v),this.connected_&&this.sendListen_(v)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,o=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(o)})}sendListen_(e){const i=e.query,o=i._path.toString(),f=i._queryIdentifier;this.log_("Listen on "+o+" for "+f);const m={p:o},x="q";e.tag&&(m.q=i._queryObject,m.t=e.tag),m.h=e.hashFn(),this.sendRequest(x,m,v=>{const E=v.d,w=v.s;cr.warnOnListenWarnings_(E,i),(this.listens.get(o)&&this.listens.get(o).get(f))===e&&(this.log_("listen response",v),w!=="ok"&&this.removeListen_(o,f),e.onComplete&&e.onComplete(w,E))})}static warnOnListenWarnings_(e,i){if(e&&typeof e=="object"&&dr(e,"w")){const o=Jo(e,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const f='".indexOn": "'+i._queryParams.getIndex().toString()+'"',m=i._path.toString();vi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${f} at ${m} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Lv(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Dx)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=Mv(e)?"auth":"gauth",o={cred:e};this.authOverride_===null?o.noauth=!0:typeof this.authOverride_=="object"&&(o.authvar=this.authOverride_),this.sendRequest(i,o,f=>{const m=f.s,x=f.d||"error";this.authToken_===e&&(m==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(m,x))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,o=e.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,o)})}unlisten(e,i){const o=e._path.toString(),f=e._queryIdentifier;this.log_("Unlisten called for "+o+" "+f),Oe(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,f)&&this.connected_&&this.sendUnlisten_(o,f,e._queryObject,i)}sendUnlisten_(e,i,o,f){this.log_("Unlisten on "+e+" for "+i);const m={p:e},x="n";f&&(m.q=o,m.t=f),this.sendRequest(x,m)}onDisconnectPut(e,i,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:o})}onDisconnectMerge(e,i,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,o):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:o})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,o,f){const m={p:i,d:o};this.log_("onDisconnect "+e,m),this.sendRequest(e,m,x=>{f&&setTimeout(()=>{f(x.s,x.d)},Math.floor(0))})}put(e,i,o,f){this.putInternal("p",e,i,o,f)}merge(e,i,o,f){this.putInternal("m",e,i,o,f)}putInternal(e,i,o,f,m){this.initConnection_();const x={p:i,d:o};m!==void 0&&(x.h=m),this.outstandingPuts_.push({action:e,request:x,onComplete:f}),this.outstandingPutCount_++;const v=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(v):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,o=this.outstandingPuts_[e].request,f=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,o,m=>{this.log_(i+" response",m),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),f&&f(m.s,m.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,o=>{if(o.s!=="ok"){const m=o.d;this.log_("reportStats","Error sending stats: "+m)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+jn(e));const i=e.r,o=this.requestCBHash_[i];o&&(delete this.requestCBHash_[i],o(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),e==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):e==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):e==="c"?this.onListenRevoked_(i.p,i.q):e==="ac"?this.onAuthRevoked_(i.s,i.d):e==="apc"?this.onAppCheckRevoked_(i.s,i.d):e==="sd"?this.onSecurityDebugPacket_(i):f1("Unrecognized action received from server: "+jn(e)+`
Are you using the latest client?`)}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Oe(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ac,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ac,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>sS&&(this.reconnectDelay_=ac),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*iS)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),o=this.onRealtimeDisconnect_.bind(this),f=this.id+":"+cr.nextConnectionId_++,m=this.lastSessionId;let x=!1,v=null;const E=function(){v?v.close():(x=!0,o())},w=function(N){Oe(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(N)};this.realtime_={close:E,sendRequest:w};const T=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[N,D]=await Promise.all([this.authTokenProvider_.getToken(T),this.appCheckTokenProvider_.getToken(T)]);x?$n("getToken() completed but was canceled"):($n("getToken() completed. Creating connection."),this.authToken_=N&&N.accessToken,this.appCheckToken_=D&&D.token,v=new Q4(f,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,i,o,P=>{vi(P+" ("+this.repoInfo_.toString()+")"),this.interrupt(rS)},m))}catch(N){this.log_("Failed to get token: "+N),x||(this.repoInfo_.nodeAdmin&&vi(N),E())}}}interrupt(e){$n("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){$n("Resuming connection for reason: "+e),delete this.interruptReasons_[e],t1(this.interruptReasons_)&&(this.reconnectDelay_=ac,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let o;i?o=i.map(m=>F1(m)).join("$"):o="default";const f=this.removeListen_(e,o);f&&f.onComplete&&f.onComplete("permission_denied")}removeListen_(e,i){const o=new $t(e).toString();let f;if(this.listens.has(o)){const m=this.listens.get(o);f=m.get(i),m.delete(i),m.size===0&&this.listens.delete(o)}else f=void 0;return f}onAuthRevoked_(e,i){$n("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Mx&&(this.reconnectDelay_=Dx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){$n("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Mx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";e["sdk."+i+"."+M_.replace(/\./g,"-")]=1,A1()?e["framework.cordova"]=1:Xy()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=jf.getInstance().currentlyOnline();return t1(this.interruptReasons_)&&e}}cr.nextPersistentConnectionId_=0;cr.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,i){this.name=e,this.node=i}static Wrap(e,i){return new mt(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,i){const o=new mt(el,e),f=new mt(el,i);return this.compare(o,f)!==0}minPost(){return mt.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mf;class lw extends eh{static get __EMPTY_NODE(){return mf}static set __EMPTY_NODE(e){mf=e}compare(e,i){return ll(e.name,i.name)}isDefinedOn(e){throw il("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,i){return!1}minPost(){return mt.MIN}maxPost(){return new mt(Qa,mf)}makePost(e,i){return Oe(typeof e=="string","KeyIndex indexValue must always be a string."),new mt(e,mf)}toString(){return".key"}}const Qo=new lw;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,i,o,f,m=null){this.isReverse_=f,this.resultGenerator_=m,this.nodeStack_=[];let x=1;for(;!e.isEmpty();)if(e=e,x=i?o(e.key,i):1,f&&(x*=-1),x<0)this.isReverse_?e=e.left:e=e.right;else if(x===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),i;if(this.resultGenerator_?i=this.resultGenerator_(e.key,e.value):i={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return i}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Vn{constructor(e,i,o,f,m){this.key=e,this.value=i,this.color=o??Vn.RED,this.left=f??Ei.EMPTY_NODE,this.right=m??Ei.EMPTY_NODE}copy(e,i,o,f,m){return new Vn(e??this.key,i??this.value,o??this.color,f??this.left,m??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,o){let f=this;const m=o(e,f.key);return m<0?f=f.copy(null,null,null,f.left.insert(e,i,o),null):m===0?f=f.copy(null,i,null,null,null):f=f.copy(null,null,null,null,f.right.insert(e,i,o)),f.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ei.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let o,f;if(o=this,i(e,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(e,i),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),i(e,o.key)===0){if(o.right.isEmpty())return Ei.EMPTY_NODE;f=o.right.min_(),o=o.copy(f.key,f.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(e,i))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Vn.RED=!0;Vn.BLACK=!1;class aS{copy(e,i,o,f,m){return this}insert(e,i,o){return new Vn(e,i,null)}remove(e,i){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Ei{constructor(e,i=Ei.EMPTY_NODE){this.comparator_=e,this.root_=i}insert(e,i){return new Ei(this.comparator_,this.root_.insert(e,i,this.comparator_).copy(null,null,Vn.BLACK,null,null))}remove(e){return new Ei(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Vn.BLACK,null,null))}get(e){let i,o=this.root_;for(;!o.isEmpty();){if(i=this.comparator_(e,o.key),i===0)return o.value;i<0?o=o.left:i>0&&(o=o.right)}return null}getPredecessorKey(e){let i,o=this.root_,f=null;for(;!o.isEmpty();)if(i=this.comparator_(e,o.key),i===0){if(o.left.isEmpty())return f?f.key:null;for(o=o.left;!o.right.isEmpty();)o=o.right;return o.key}else i<0?o=o.left:i>0&&(f=o,o=o.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new pf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,i){return new pf(this.root_,e,this.comparator_,!1,i)}getReverseIteratorFrom(e,i){return new pf(this.root_,e,this.comparator_,!0,i)}getReverseIterator(e){return new pf(this.root_,null,this.comparator_,!0,e)}}Ei.EMPTY_NODE=new aS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(r,e){return ll(r.name,e.name)}function q1(r,e){return ll(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d1;function lS(r){d1=r}const cw=function(r){return typeof r=="number"?"number:"+j_(r):"string:"+r},uw=function(r){if(r.isLeafNode()){const e=r.val();Oe(typeof e=="string"||typeof e=="number"||typeof e=="object"&&dr(e,".sv"),"Priority must be a string or number.")}else Oe(r===d1||r.isEmpty(),"priority of unexpected type.");Oe(r===d1||r.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lx;class Hn{static set __childrenNodeConstructor(e){Lx=e}static get __childrenNodeConstructor(){return Lx}constructor(e,i=Hn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,Oe(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),uw(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Hn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Hn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return _t(e)?this:At(e)===".priority"?this.priorityNode_:Hn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return e===".priority"?this.updatePriority(i):i.isEmpty()&&e!==".priority"?this:Hn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const o=At(e);return o===null?i:i.isEmpty()&&o!==".priority"?this:(Oe(o!==".priority"||ca(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(o,Hn.__childrenNodeConstructor.EMPTY_NODE.updateChild(tn(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+cw(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",i==="number"?e+=j_(this.value_):e+=this.value_,this.lazyHash_=k_(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Hn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Hn.__childrenNodeConstructor?-1:(Oe(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,o=typeof this.value_,f=Hn.VALUE_TYPE_ORDER.indexOf(i),m=Hn.VALUE_TYPE_ORDER.indexOf(o);return Oe(f>=0,"Unknown leaf type: "+i),Oe(m>=0,"Unknown leaf type: "+o),f===m?o==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:m-f}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}Hn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fw,hw;function cS(r){fw=r}function uS(r){hw=r}class fS extends eh{compare(e,i){const o=e.node.getPriority(),f=i.node.getPriority(),m=o.compareTo(f);return m===0?ll(e.name,i.name):m}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,i){return!e.getPriority().equals(i.getPriority())}minPost(){return mt.MIN}maxPost(){return new mt(Qa,new Hn("[PRIORITY-POST]",hw))}makePost(e,i){const o=fw(e);return new mt(i,new Hn("[PRIORITY-POST]",o))}toString(){return".priority"}}const yn=new fS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=Math.log(2);class dS{constructor(e){const i=m=>parseInt(Math.log(m)/hS,10),o=m=>parseInt(Array(m+1).join("1"),2);this.count=i(e+1),this.current_=this.count-1;const f=o(this.count);this.bits_=e+1&f}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Uf=function(r,e,i,o){r.sort(e);const f=function(E,w){const T=w-E;let N,D;if(T===0)return null;if(T===1)return N=r[E],D=i?i(N):N,new Vn(D,N.node,Vn.BLACK,null,null);{const P=parseInt(T/2,10)+E,G=f(E,P),H=f(P+1,w);return N=r[P],D=i?i(N):N,new Vn(D,N.node,Vn.BLACK,G,H)}},m=function(E){let w=null,T=null,N=r.length;const D=function(G,H){const ye=N-G,te=N;N-=G;const $=f(ye+1,te),F=r[ye],q=i?i(F):F;P(new Vn(q,F.node,H,null,$))},P=function(G){w?(w.left=G,w=G):(T=G,w=G)};for(let G=0;G<E.count;++G){const H=E.nextBitIsOne(),ye=Math.pow(2,E.count-(G+1));H?D(ye,Vn.BLACK):(D(ye,Vn.BLACK),D(ye,Vn.RED))}return T},x=new dS(r.length),v=m(x);return new Ei(o||e,v)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b0;const Vo={};class or{static get Default(){return Oe(Vo&&yn,"ChildrenNode.ts has not been loaded"),b0=b0||new or({".priority":Vo},{".priority":yn}),b0}constructor(e,i){this.indexes_=e,this.indexSet_=i}get(e){const i=Jo(this.indexes_,e);if(!i)throw new Error("No index defined for "+e);return i instanceof Ei?i:null}hasIndex(e){return dr(this.indexSet_,e.toString())}addIndex(e,i){Oe(e!==Qo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const o=[];let f=!1;const m=i.getIterator(mt.Wrap);let x=m.getNext();for(;x;)f=f||e.isDefinedOn(x.node),o.push(x),x=m.getNext();let v;f?v=Uf(o,e.getCompare()):v=Vo;const E=e.toString(),w={...this.indexSet_};w[E]=e;const T={...this.indexes_};return T[E]=v,new or(T,w)}addToIndexes(e,i){const o=If(this.indexes_,(f,m)=>{const x=Jo(this.indexSet_,m);if(Oe(x,"Missing index implementation for "+m),f===Vo)if(x.isDefinedOn(e.node)){const v=[],E=i.getIterator(mt.Wrap);let w=E.getNext();for(;w;)w.name!==e.name&&v.push(w),w=E.getNext();return v.push(e),Uf(v,x.getCompare())}else return Vo;else{const v=i.get(e.name);let E=f;return v&&(E=E.remove(new mt(e.name,v))),E.insert(e,e.node)}});return new or(o,this.indexSet_)}removeFromIndexes(e,i){const o=If(this.indexes_,f=>{if(f===Vo)return f;{const m=i.get(e.name);return m?f.remove(new mt(e.name,m)):f}});return new or(o,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oc;class tt{static get EMPTY_NODE(){return oc||(oc=new tt(new Ei(q1),null,or.Default))}constructor(e,i,o){this.children_=e,this.priorityNode_=i,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&uw(this.priorityNode_),this.children_.isEmpty()&&Oe(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||oc}updatePriority(e){return this.children_.isEmpty()?this:new tt(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const i=this.children_.get(e);return i===null?oc:i}}getChild(e){const i=At(e);return i===null?this:this.getImmediateChild(i).getChild(tn(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,i){if(Oe(i,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(i);{const o=new mt(e,i);let f,m;i.isEmpty()?(f=this.children_.remove(e),m=this.indexMap_.removeFromIndexes(o,this.children_)):(f=this.children_.insert(e,i),m=this.indexMap_.addToIndexes(o,this.children_));const x=f.isEmpty()?oc:this.priorityNode_;return new tt(f,x,m)}}updateChild(e,i){const o=At(e);if(o===null)return i;{Oe(At(e)!==".priority"||ca(e)===1,".priority must be the last token in a path");const f=this.getImmediateChild(o).updateChild(tn(e),i);return this.updateImmediateChild(o,f)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let o=0,f=0,m=!0;if(this.forEachChild(yn,(x,v)=>{i[x]=v.val(e),o++,m&&tt.INTEGER_REGEXP_.test(x)?f=Math.max(f,Number(x)):m=!1}),!e&&m&&f<2*o){const x=[];for(const v in i)x[v]=i[v];return x}else return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+cw(this.getPriority().val())+":"),this.forEachChild(yn,(i,o)=>{const f=o.hash();f!==""&&(e+=":"+i+":"+f)}),this.lazyHash_=e===""?"":k_(e)}return this.lazyHash_}getPredecessorChildName(e,i,o){const f=this.resolveIndex_(o);if(f){const m=f.getPredecessorKey(new mt(e,i));return m?m.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const o=i.minKey();return o&&o.name}else return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new mt(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const o=i.maxKey();return o&&o.name}else return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new mt(i,this.children_.get(i)):null}forEachChild(e,i){const o=this.resolveIndex_(e);return o?o.inorderTraversal(f=>i(f.name,f.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const o=this.resolveIndex_(i);if(o)return o.getIteratorFrom(e,f=>f);{const f=this.children_.getIteratorFrom(e.name,mt.Wrap);let m=f.peek();for(;m!=null&&i.compare(m,e)<0;)f.getNext(),m=f.peek();return f}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const o=this.resolveIndex_(i);if(o)return o.getReverseIteratorFrom(e,f=>f);{const f=this.children_.getReverseIteratorFrom(e.name,mt.Wrap);let m=f.peek();for(;m!=null&&i.compare(m,e)>0;)f.getNext(),m=f.peek();return f}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Gc?-1:0}withIndex(e){if(e===Qo||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new tt(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Qo||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){const o=this.getIterator(yn),f=i.getIterator(yn);let m=o.getNext(),x=f.getNext();for(;m&&x;){if(m.name!==x.name||!m.node.equals(x.node))return!1;m=o.getNext(),x=f.getNext()}return m===null&&x===null}else return!1;else return!1}}resolveIndex_(e){return e===Qo?null:this.indexMap_.get(e.toString())}}tt.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class gS extends tt{constructor(){super(new Ei(q1),tt.EMPTY_NODE,or.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return tt.EMPTY_NODE}isEmpty(){return!1}}const Gc=new gS;Object.defineProperties(mt,{MIN:{value:new mt(el,tt.EMPTY_NODE)},MAX:{value:new mt(Qa,Gc)}});lw.__EMPTY_NODE=tt.EMPTY_NODE;Hn.__childrenNodeConstructor=tt;lS(Gc);uS(Gc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=!0;function Gn(r,e=null){if(r===null)return tt.EMPTY_NODE;if(typeof r=="object"&&".priority"in r&&(e=r[".priority"]),Oe(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof r=="object"&&".value"in r&&r[".value"]!==null&&(r=r[".value"]),typeof r!="object"||".sv"in r){const i=r;return new Hn(i,Gn(e))}if(!(r instanceof Array)&&mS){const i=[];let o=!1;if(Ci(r,(x,v)=>{if(x.substring(0,1)!=="."){const E=Gn(v);E.isEmpty()||(o=o||!E.getPriority().isEmpty(),i.push(new mt(x,E)))}}),i.length===0)return tt.EMPTY_NODE;const m=Uf(i,oS,x=>x.name,q1);if(o){const x=Uf(i,yn.getCompare());return new tt(m,Gn(e),new or({".priority":x},{".priority":yn}))}else return new tt(m,Gn(e),or.Default)}else{let i=tt.EMPTY_NODE;return Ci(r,(o,f)=>{if(dr(r,o)&&o.substring(0,1)!=="."){const m=Gn(f);(m.isLeafNode()||!m.isEmpty())&&(i=i.updateImmediateChild(o,m))}}),i.updatePriority(Gn(e))}}cS(Gn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS extends eh{constructor(e){super(),this.indexPath_=e,Oe(!_t(e)&&At(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,i){const o=this.extractChild(e.node),f=this.extractChild(i.node),m=o.compareTo(f);return m===0?ll(e.name,i.name):m}makePost(e,i){const o=Gn(e),f=tt.EMPTY_NODE.updateChild(this.indexPath_,o);return new mt(i,f)}maxPost(){const e=tt.EMPTY_NODE.updateChild(this.indexPath_,Gc);return new mt(Qa,e)}toString(){return sw(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS extends eh{compare(e,i){const o=e.node.compareTo(i.node);return o===0?ll(e.name,i.name):o}isDefinedOn(e){return!0}indexedValueChanged(e,i){return!e.equals(i)}minPost(){return mt.MIN}maxPost(){return mt.MAX}makePost(e,i){const o=Gn(e);return new mt(i,o)}toString(){return".value"}}const yS=new xS;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(r){return{type:"value",snapshotNode:r}}function tl(r,e){return{type:"child_added",snapshotNode:e,childName:r}}function Nc(r,e){return{type:"child_removed",snapshotNode:e,childName:r}}function Ic(r,e,i){return{type:"child_changed",snapshotNode:e,childName:r,oldSnap:i}}function _S(r,e){return{type:"child_moved",snapshotNode:e,childName:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e){this.index_=e}updateChild(e,i,o,f,m,x){Oe(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const v=e.getImmediateChild(i);return v.getChild(f).equals(o.getChild(f))&&v.isEmpty()===o.isEmpty()||(x!=null&&(o.isEmpty()?e.hasChild(i)?x.trackChildChange(Nc(i,v)):Oe(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):v.isEmpty()?x.trackChildChange(tl(i,o)):x.trackChildChange(Ic(i,o,v))),e.isLeafNode()&&o.isEmpty())?e:e.updateImmediateChild(i,o).withIndex(this.index_)}updateFullNode(e,i,o){return o!=null&&(e.isLeafNode()||e.forEachChild(yn,(f,m)=>{i.hasChild(f)||o.trackChildChange(Nc(f,m))}),i.isLeafNode()||i.forEachChild(yn,(f,m)=>{if(e.hasChild(f)){const x=e.getImmediateChild(f);x.equals(m)||o.trackChildChange(Ic(f,m,x))}else o.trackChildChange(tl(f,m))})),i.withIndex(this.index_)}updatePriority(e,i){return e.isEmpty()?tt.EMPTY_NODE:e.updatePriority(i)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e){this.indexedFilter_=new X1(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Rc.getStartPost_(e),this.endPost_=Rc.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const i=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,o=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return i&&o}updateChild(e,i,o,f,m,x){return this.matches(new mt(i,o))||(o=tt.EMPTY_NODE),this.indexedFilter_.updateChild(e,i,o,f,m,x)}updateFullNode(e,i,o){i.isLeafNode()&&(i=tt.EMPTY_NODE);let f=i.withIndex(this.index_);f=f.updatePriority(tt.EMPTY_NODE);const m=this;return i.forEachChild(yn,(x,v)=>{m.matches(new mt(x,v))||(f=f.updateImmediateChild(x,tt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,f,o)}updatePriority(e,i){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const i=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),i)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const i=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),i)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wS{constructor(e){this.withinDirectionalStart=i=>this.reverse_?this.withinEndPost(i):this.withinStartPost(i),this.withinDirectionalEnd=i=>this.reverse_?this.withinStartPost(i):this.withinEndPost(i),this.withinStartPost=i=>{const o=this.index_.compare(this.rangedFilter_.getStartPost(),i);return this.startIsInclusive_?o<=0:o<0},this.withinEndPost=i=>{const o=this.index_.compare(i,this.rangedFilter_.getEndPost());return this.endIsInclusive_?o<=0:o<0},this.rangedFilter_=new Rc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,i,o,f,m,x){return this.rangedFilter_.matches(new mt(i,o))||(o=tt.EMPTY_NODE),e.getImmediateChild(i).equals(o)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,i,o,f,m,x):this.fullLimitUpdateChild_(e,i,o,m,x)}updateFullNode(e,i,o){let f;if(i.isLeafNode()||i.isEmpty())f=tt.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<i.numChildren()&&i.isIndexed(this.index_)){f=tt.EMPTY_NODE.withIndex(this.index_);let m;this.reverse_?m=i.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):m=i.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let x=0;for(;m.hasNext()&&x<this.limit_;){const v=m.getNext();if(this.withinDirectionalStart(v))if(this.withinDirectionalEnd(v))f=f.updateImmediateChild(v.name,v.node),x++;else break;else continue}}else{f=i.withIndex(this.index_),f=f.updatePriority(tt.EMPTY_NODE);let m;this.reverse_?m=f.getReverseIterator(this.index_):m=f.getIterator(this.index_);let x=0;for(;m.hasNext();){const v=m.getNext();x<this.limit_&&this.withinDirectionalStart(v)&&this.withinDirectionalEnd(v)?x++:f=f.updateImmediateChild(v.name,tt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,f,o)}updatePriority(e,i){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,i,o,f,m){let x;if(this.reverse_){const N=this.index_.getCompare();x=(D,P)=>N(P,D)}else x=this.index_.getCompare();const v=e;Oe(v.numChildren()===this.limit_,"");const E=new mt(i,o),w=this.reverse_?v.getFirstChild(this.index_):v.getLastChild(this.index_),T=this.rangedFilter_.matches(E);if(v.hasChild(i)){const N=v.getImmediateChild(i);let D=f.getChildAfterChild(this.index_,w,this.reverse_);for(;D!=null&&(D.name===i||v.hasChild(D.name));)D=f.getChildAfterChild(this.index_,D,this.reverse_);const P=D==null?1:x(D,E);if(T&&!o.isEmpty()&&P>=0)return m!=null&&m.trackChildChange(Ic(i,o,N)),v.updateImmediateChild(i,o);{m!=null&&m.trackChildChange(Nc(i,N));const H=v.updateImmediateChild(i,tt.EMPTY_NODE);return D!=null&&this.rangedFilter_.matches(D)?(m!=null&&m.trackChildChange(tl(D.name,D.node)),H.updateImmediateChild(D.name,D.node)):H}}else return o.isEmpty()?e:T&&x(w,E)>=0?(m!=null&&(m.trackChildChange(Nc(w.name,w.node)),m.trackChildChange(tl(i,o))),v.updateImmediateChild(i,o).updateImmediateChild(w.name,tt.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yn}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return Oe(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Oe(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:el}hasEnd(){return this.endSet_}getIndexEndValue(){return Oe(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Oe(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Qa}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return Oe(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===yn}copy(){const e=new Y1;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function bS(r){return r.loadsAllData()?new X1(r.getIndex()):r.hasLimit()?new wS(r):new Rc(r)}function kx(r){const e={};if(r.isDefault())return e;let i;if(r.index_===yn?i="$priority":r.index_===yS?i="$value":r.index_===Qo?i="$key":(Oe(r.index_ instanceof pS,"Unrecognized index type!"),i=r.index_.toString()),e.orderBy=jn(i),r.startSet_){const o=r.startAfterSet_?"startAfter":"startAt";e[o]=jn(r.indexStartValue_),r.startNameSet_&&(e[o]+=","+jn(r.indexStartName_))}if(r.endSet_){const o=r.endBeforeSet_?"endBefore":"endAt";e[o]=jn(r.indexEndValue_),r.endNameSet_&&(e[o]+=","+jn(r.indexEndName_))}return r.limitSet_&&(r.isViewFromLeft()?e.limitToFirst=r.limit_:e.limitToLast=r.limit_),e}function Bx(r){const e={};if(r.startSet_&&(e.sp=r.indexStartValue_,r.startNameSet_&&(e.sn=r.indexStartName_),e.sin=!r.startAfterSet_),r.endSet_&&(e.ep=r.indexEndValue_,r.endNameSet_&&(e.en=r.indexEndName_),e.ein=!r.endBeforeSet_),r.limitSet_){e.l=r.limit_;let i=r.viewFrom_;i===""&&(r.isViewFromLeft()?i="l":i="r"),e.vf=i}return r.index_!==yn&&(e.i=r.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends tw{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,i){return i!==void 0?"tag$"+i:(Oe(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,i,o,f){super(),this.repoInfo_=e,this.onDataUpdate_=i,this.authTokenProvider_=o,this.appCheckTokenProvider_=f,this.log_=Vc("p:rest:"),this.listens_={}}listen(e,i,o,f){const m=e._path.toString();this.log_("Listen called for "+m+" "+e._queryIdentifier);const x=Ff.getListenId_(e,o),v={};this.listens_[x]=v;const E=kx(e._queryParams);this.restRequest_(m+".json",E,(w,T)=>{let N=T;if(w===404&&(N=null,w=null),w===null&&this.onDataUpdate_(m,N,!1,o),Jo(this.listens_,x)===v){let D;w?w===401?D="permission_denied":D="rest_error:"+w:D="ok",f(D,null)}})}unlisten(e,i){const o=Ff.getListenId_(e,i);delete this.listens_[o]}get(e){const i=kx(e._queryParams),o=e._path.toString(),f=new Kf;return this.restRequest_(o+".json",i,(m,x)=>{let v=x;m===404&&(v=null,m=null),m===null?(this.onDataUpdate_(o,v,!1,null),f.resolve(v)):f.reject(new Error(v))}),f.promise}refreshAuthToken(e){}restRequest_(e,i={},o){return i.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([f,m])=>{f&&f.accessToken&&(i.auth=f.accessToken),m&&m.token&&(i.ac=m.token);const x=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+rl(i);this.log_("Sending REST request for "+x);const v=new XMLHttpRequest;v.onreadystatechange=()=>{if(o&&v.readyState===4){this.log_("REST Response for "+x+" received. status:",v.status,"response:",v.responseText);let E=null;if(v.status>=200&&v.status<300){try{E=vc(v.responseText)}catch{vi("Failed to parse JSON response for "+x+": "+v.responseText)}o(null,E)}else v.status!==401&&v.status!==404&&vi("Got unsuccessful REST response for "+x+" Status: "+v.status),o(v.status);o=null}},v.open("GET",x,!0),v.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(){this.rootNode_=tt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,i){this.rootNode_=this.rootNode_.updateChild(e,i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zf(){return{value:null,children:new Map}}function gw(r,e,i){if(_t(e))r.value=i,r.children.clear();else if(r.value!==null)r.value=r.value.updateChild(e,i);else{const o=At(e);r.children.has(o)||r.children.set(o,zf());const f=r.children.get(o);e=tn(e),gw(f,e,i)}}function g1(r,e,i){r.value!==null?i(e,r.value):vS(r,(o,f)=>{const m=new $t(e.toString()+"/"+o);g1(f,m,i)})}function vS(r,e){r.children.forEach((i,o)=>{e(o,i)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),i={...e};return this.last_&&Ci(this.last_,(o,f)=>{i[o]=i[o]-f}),this.last_=e,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Px=10*1e3,AS=30*1e3,SS=300*1e3;class TS{constructor(e,i){this.server_=i,this.statsToReport_={},this.statsListener_=new CS(e);const o=Px+(AS-Px)*Math.random();yc(this.reportStats_.bind(this),Math.floor(o))}reportStats_(){const e=this.statsListener_.get(),i={};let o=!1;Ci(e,(f,m)=>{m>0&&dr(this.statsToReport_,f)&&(i[f]=m,o=!0)}),o&&this.server_.reportStats(i),yc(this.reportStats_.bind(this),Math.floor(Math.random()*2*SS))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ps;(function(r){r[r.OVERWRITE=0]="OVERWRITE",r[r.MERGE=1]="MERGE",r[r.ACK_USER_WRITE=2]="ACK_USER_WRITE",r[r.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(ps||(ps={}));function mw(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function W1(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function K1(r){return{fromUser:!1,fromServer:!0,queryId:r,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,i,o){this.path=e,this.affectedTree=i,this.revert=o,this.type=ps.ACK_USER_WRITE,this.source=mw()}operationForChild(e){if(_t(this.path)){if(this.affectedTree.value!=null)return Oe(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const i=this.affectedTree.subtree(new $t(e));return new Hf(Dt(),i,this.revert)}}else return Oe(At(this.path)===e,"operationForChild called for unrelated child."),new Hf(tn(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,i){this.source=e,this.path=i,this.type=ps.LISTEN_COMPLETE}operationForChild(e){return _t(this.path)?new Oc(this.source,Dt()):new Oc(this.source,tn(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,i,o){this.source=e,this.path=i,this.snap=o,this.type=ps.OVERWRITE}operationForChild(e){return _t(this.path)?new Ja(this.source,Dt(),this.snap.getImmediateChild(e)):new Ja(this.source,tn(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,i,o){this.source=e,this.path=i,this.children=o,this.type=ps.MERGE}operationForChild(e){if(_t(this.path)){const i=this.children.subtree(new $t(e));return i.isEmpty()?null:i.value?new Ja(this.source,Dt(),i.value):new Dc(this.source,Dt(),i)}else return Oe(At(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Dc(this.source,tn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,i,o){this.node_=e,this.fullyInitialized_=i,this.filtered_=o}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(_t(e))return this.isFullyInitialized()&&!this.filtered_;const i=At(e);return this.isCompleteForChild(i)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function IS(r,e,i,o){const f=[],m=[];return e.forEach(x=>{x.type==="child_changed"&&r.index_.indexedValueChanged(x.oldSnap,x.snapshotNode)&&m.push(_S(x.childName,x.snapshotNode))}),lc(r,f,"child_removed",e,o,i),lc(r,f,"child_added",e,o,i),lc(r,f,"child_moved",m,o,i),lc(r,f,"child_changed",e,o,i),lc(r,f,"value",e,o,i),f}function lc(r,e,i,o,f,m){const x=o.filter(v=>v.type===i);x.sort((v,E)=>OS(r,v,E)),x.forEach(v=>{const E=RS(r,v,m);f.forEach(w=>{w.respondsTo(v.type)&&e.push(w.createEvent(E,r.query_))})})}function RS(r,e,i){return e.type==="value"||e.type==="child_removed"||(e.prevName=i.getPredecessorChildName(e.childName,e.snapshotNode,r.index_)),e}function OS(r,e,i){if(e.childName==null||i.childName==null)throw il("Should only compare child_ events.");const o=new mt(e.childName,e.snapshotNode),f=new mt(i.childName,i.snapshotNode);return r.index_.compare(o,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(r,e){return{eventCache:r,serverCache:e}}function _c(r,e,i,o){return th(new ua(e,i,o),r.serverCache)}function pw(r,e,i,o){return th(r.eventCache,new ua(e,i,o))}function Vf(r){return r.eventCache.isFullyInitialized()?r.eventCache.getNode():null}function $a(r){return r.serverCache.isFullyInitialized()?r.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let E0;const DS=()=>(E0||(E0=new Ei(x4)),E0);class ln{static fromObject(e){let i=new ln(null);return Ci(e,(o,f)=>{i=i.set(new $t(o),f)}),i}constructor(e,i=DS()){this.value=e,this.children=i}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,i){if(this.value!=null&&i(this.value))return{path:Dt(),value:this.value};if(_t(e))return null;{const o=At(e),f=this.children.get(o);if(f!==null){const m=f.findRootMostMatchingPathAndValue(tn(e),i);return m!=null?{path:Un(new $t(o),m.path),value:m.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(_t(e))return this;{const i=At(e),o=this.children.get(i);return o!==null?o.subtree(tn(e)):new ln(null)}}set(e,i){if(_t(e))return new ln(i,this.children);{const o=At(e),m=(this.children.get(o)||new ln(null)).set(tn(e),i),x=this.children.insert(o,m);return new ln(this.value,x)}}remove(e){if(_t(e))return this.children.isEmpty()?new ln(null):new ln(null,this.children);{const i=At(e),o=this.children.get(i);if(o){const f=o.remove(tn(e));let m;return f.isEmpty()?m=this.children.remove(i):m=this.children.insert(i,f),this.value===null&&m.isEmpty()?new ln(null):new ln(this.value,m)}else return this}}get(e){if(_t(e))return this.value;{const i=At(e),o=this.children.get(i);return o?o.get(tn(e)):null}}setTree(e,i){if(_t(e))return i;{const o=At(e),m=(this.children.get(o)||new ln(null)).setTree(tn(e),i);let x;return m.isEmpty()?x=this.children.remove(o):x=this.children.insert(o,m),new ln(this.value,x)}}fold(e){return this.fold_(Dt(),e)}fold_(e,i){const o={};return this.children.inorderTraversal((f,m)=>{o[f]=m.fold_(Un(e,f),i)}),i(e,this.value,o)}findOnPath(e,i){return this.findOnPath_(e,Dt(),i)}findOnPath_(e,i,o){const f=this.value?o(i,this.value):!1;if(f)return f;if(_t(e))return null;{const m=At(e),x=this.children.get(m);return x?x.findOnPath_(tn(e),Un(i,m),o):null}}foreachOnPath(e,i){return this.foreachOnPath_(e,Dt(),i)}foreachOnPath_(e,i,o){if(_t(e))return this;{this.value&&o(i,this.value);const f=At(e),m=this.children.get(f);return m?m.foreachOnPath_(tn(e),Un(i,f),o):new ln(null)}}foreach(e){this.foreach_(Dt(),e)}foreach_(e,i){this.children.inorderTraversal((o,f)=>{f.foreach_(Un(e,o),i)}),this.value&&i(e,this.value)}foreachChild(e){this.children.inorderTraversal((i,o)=>{o.value&&e(i,o.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.writeTree_=e}static empty(){return new ys(new ln(null))}}function wc(r,e,i){if(_t(e))return new ys(new ln(i));{const o=r.writeTree_.findRootMostValueAndPath(e);if(o!=null){const f=o.path;let m=o.value;const x=oi(f,e);return m=m.updateChild(x,i),new ys(r.writeTree_.set(f,m))}else{const f=new ln(i),m=r.writeTree_.setTree(e,f);return new ys(m)}}}function jx(r,e,i){let o=r;return Ci(i,(f,m)=>{o=wc(o,Un(e,f),m)}),o}function Ux(r,e){if(_t(e))return ys.empty();{const i=r.writeTree_.setTree(e,new ln(null));return new ys(i)}}function m1(r,e){return eo(r,e)!=null}function eo(r,e){const i=r.writeTree_.findRootMostValueAndPath(e);return i!=null?r.writeTree_.get(i.path).getChild(oi(i.path,e)):null}function Fx(r){const e=[],i=r.writeTree_.value;return i!=null?i.isLeafNode()||i.forEachChild(yn,(o,f)=>{e.push(new mt(o,f))}):r.writeTree_.children.inorderTraversal((o,f)=>{f.value!=null&&e.push(new mt(o,f.value))}),e}function oa(r,e){if(_t(e))return r;{const i=eo(r,e);return i!=null?new ys(new ln(i)):new ys(r.writeTree_.subtree(e))}}function p1(r){return r.writeTree_.isEmpty()}function nl(r,e){return xw(Dt(),r.writeTree_,e)}function xw(r,e,i){if(e.value!=null)return i.updateChild(r,e.value);{let o=null;return e.children.inorderTraversal((f,m)=>{f===".priority"?(Oe(m.value!==null,"Priority writes must always be leaf nodes"),o=m.value):i=xw(Un(r,f),m,i)}),!i.getChild(r).isEmpty()&&o!==null&&(i=i.updateChild(Un(r,".priority"),o)),i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(r,e){return bw(e,r)}function MS(r,e,i,o,f){Oe(o>r.lastWriteId,"Stacking an older write on top of newer ones"),f===void 0&&(f=!0),r.allWrites.push({path:e,snap:i,writeId:o,visible:f}),f&&(r.visibleWrites=wc(r.visibleWrites,e,i)),r.lastWriteId=o}function LS(r,e){for(let i=0;i<r.allWrites.length;i++){const o=r.allWrites[i];if(o.writeId===e)return o}return null}function kS(r,e){const i=r.allWrites.findIndex(v=>v.writeId===e);Oe(i>=0,"removeWrite called with nonexistent writeId.");const o=r.allWrites[i];r.allWrites.splice(i,1);let f=o.visible,m=!1,x=r.allWrites.length-1;for(;f&&x>=0;){const v=r.allWrites[x];v.visible&&(x>=i&&BS(v,o.path)?f=!1:ms(o.path,v.path)&&(m=!0)),x--}if(f){if(m)return PS(r),!0;if(o.snap)r.visibleWrites=Ux(r.visibleWrites,o.path);else{const v=o.children;Ci(v,E=>{r.visibleWrites=Ux(r.visibleWrites,Un(o.path,E))})}return!0}else return!1}function BS(r,e){if(r.snap)return ms(r.path,e);for(const i in r.children)if(r.children.hasOwnProperty(i)&&ms(Un(r.path,i),e))return!0;return!1}function PS(r){r.visibleWrites=yw(r.allWrites,jS,Dt()),r.allWrites.length>0?r.lastWriteId=r.allWrites[r.allWrites.length-1].writeId:r.lastWriteId=-1}function jS(r){return r.visible}function yw(r,e,i){let o=ys.empty();for(let f=0;f<r.length;++f){const m=r[f];if(e(m)){const x=m.path;let v;if(m.snap)ms(i,x)?(v=oi(i,x),o=wc(o,v,m.snap)):ms(x,i)&&(v=oi(x,i),o=wc(o,Dt(),m.snap.getChild(v)));else if(m.children){if(ms(i,x))v=oi(i,x),o=jx(o,v,m.children);else if(ms(x,i))if(v=oi(x,i),_t(v))o=jx(o,Dt(),m.children);else{const E=Jo(m.children,At(v));if(E){const w=E.getChild(tn(v));o=wc(o,Dt(),w)}}}else throw il("WriteRecord should have .snap or .children")}}return o}function _w(r,e,i,o,f){if(!o&&!f){const m=eo(r.visibleWrites,e);if(m!=null)return m;{const x=oa(r.visibleWrites,e);if(p1(x))return i;if(i==null&&!m1(x,Dt()))return null;{const v=i||tt.EMPTY_NODE;return nl(x,v)}}}else{const m=oa(r.visibleWrites,e);if(!f&&p1(m))return i;if(!f&&i==null&&!m1(m,Dt()))return null;{const x=function(w){return(w.visible||f)&&(!o||!~o.indexOf(w.writeId))&&(ms(w.path,e)||ms(e,w.path))},v=yw(r.allWrites,x,e),E=i||tt.EMPTY_NODE;return nl(v,E)}}}function US(r,e,i){let o=tt.EMPTY_NODE;const f=eo(r.visibleWrites,e);if(f)return f.isLeafNode()||f.forEachChild(yn,(m,x)=>{o=o.updateImmediateChild(m,x)}),o;if(i){const m=oa(r.visibleWrites,e);return i.forEachChild(yn,(x,v)=>{const E=nl(oa(m,new $t(x)),v);o=o.updateImmediateChild(x,E)}),Fx(m).forEach(x=>{o=o.updateImmediateChild(x.name,x.node)}),o}else{const m=oa(r.visibleWrites,e);return Fx(m).forEach(x=>{o=o.updateImmediateChild(x.name,x.node)}),o}}function FS(r,e,i,o,f){Oe(o||f,"Either existingEventSnap or existingServerSnap must exist");const m=Un(e,i);if(m1(r.visibleWrites,m))return null;{const x=oa(r.visibleWrites,m);return p1(x)?f.getChild(i):nl(x,f.getChild(i))}}function zS(r,e,i,o){const f=Un(e,i),m=eo(r.visibleWrites,f);if(m!=null)return m;if(o.isCompleteForChild(i)){const x=oa(r.visibleWrites,f);return nl(x,o.getNode().getImmediateChild(i))}else return null}function HS(r,e){return eo(r.visibleWrites,e)}function VS(r,e,i,o,f,m,x){let v;const E=oa(r.visibleWrites,e),w=eo(E,Dt());if(w!=null)v=w;else if(i!=null)v=nl(E,i);else return[];if(v=v.withIndex(x),!v.isEmpty()&&!v.isLeafNode()){const T=[],N=x.getCompare(),D=m?v.getReverseIteratorFrom(o,x):v.getIteratorFrom(o,x);let P=D.getNext();for(;P&&T.length<f;)N(P,o)!==0&&T.push(P),P=D.getNext();return T}else return[]}function GS(){return{visibleWrites:ys.empty(),allWrites:[],lastWriteId:-1}}function Gf(r,e,i,o){return _w(r.writeTree,r.treePath,e,i,o)}function Z1(r,e){return US(r.writeTree,r.treePath,e)}function zx(r,e,i,o){return FS(r.writeTree,r.treePath,e,i,o)}function qf(r,e){return HS(r.writeTree,Un(r.treePath,e))}function qS(r,e,i,o,f,m){return VS(r.writeTree,r.treePath,e,i,o,f,m)}function Q1(r,e,i){return zS(r.writeTree,r.treePath,e,i)}function ww(r,e){return bw(Un(r.treePath,e),r.writeTree)}function bw(r,e){return{treePath:r,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS{constructor(){this.changeMap=new Map}trackChildChange(e){const i=e.type,o=e.childName;Oe(i==="child_added"||i==="child_changed"||i==="child_removed","Only child changes supported for tracking"),Oe(o!==".priority","Only non-priority child changes can be tracked.");const f=this.changeMap.get(o);if(f){const m=f.type;if(i==="child_added"&&m==="child_removed")this.changeMap.set(o,Ic(o,e.snapshotNode,f.snapshotNode));else if(i==="child_removed"&&m==="child_added")this.changeMap.delete(o);else if(i==="child_removed"&&m==="child_changed")this.changeMap.set(o,Nc(o,f.oldSnap));else if(i==="child_changed"&&m==="child_added")this.changeMap.set(o,tl(o,e.snapshotNode));else if(i==="child_changed"&&m==="child_changed")this.changeMap.set(o,Ic(o,e.snapshotNode,f.oldSnap));else throw il("Illegal combination of changes: "+e+" occurred after "+f)}else this.changeMap.set(o,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YS{getCompleteChild(e){return null}getChildAfterChild(e,i,o){return null}}const Ew=new YS;class J1{constructor(e,i,o=null){this.writes_=e,this.viewCache_=i,this.optCompleteServerCache_=o}getCompleteChild(e){const i=this.viewCache_.eventCache;if(i.isCompleteForChild(e))return i.getNode().getImmediateChild(e);{const o=this.optCompleteServerCache_!=null?new ua(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Q1(this.writes_,e,o)}}getChildAfterChild(e,i,o){const f=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:$a(this.viewCache_),m=qS(this.writes_,f,i,1,o,e);return m.length===0?null:m[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(r){return{filter:r}}function KS(r,e){Oe(e.eventCache.getNode().isIndexed(r.filter.getIndex()),"Event snap not indexed"),Oe(e.serverCache.getNode().isIndexed(r.filter.getIndex()),"Server snap not indexed")}function ZS(r,e,i,o,f){const m=new XS;let x,v;if(i.type===ps.OVERWRITE){const w=i;w.source.fromUser?x=x1(r,e,w.path,w.snap,o,f,m):(Oe(w.source.fromServer,"Unknown source."),v=w.source.tagged||e.serverCache.isFiltered()&&!_t(w.path),x=Xf(r,e,w.path,w.snap,o,f,v,m))}else if(i.type===ps.MERGE){const w=i;w.source.fromUser?x=JS(r,e,w.path,w.children,o,f,m):(Oe(w.source.fromServer,"Unknown source."),v=w.source.tagged||e.serverCache.isFiltered(),x=y1(r,e,w.path,w.children,o,f,v,m))}else if(i.type===ps.ACK_USER_WRITE){const w=i;w.revert?x=t8(r,e,w.path,o,f,m):x=$S(r,e,w.path,w.affectedTree,o,f,m)}else if(i.type===ps.LISTEN_COMPLETE)x=e8(r,e,i.path,o,m);else throw il("Unknown operation type: "+i.type);const E=m.getChanges();return QS(e,x,E),{viewCache:x,changes:E}}function QS(r,e,i){const o=e.eventCache;if(o.isFullyInitialized()){const f=o.getNode().isLeafNode()||o.getNode().isEmpty(),m=Vf(r);(i.length>0||!r.eventCache.isFullyInitialized()||f&&!o.getNode().equals(m)||!o.getNode().getPriority().equals(m.getPriority()))&&i.push(dw(Vf(e)))}}function vw(r,e,i,o,f,m){const x=e.eventCache;if(qf(o,i)!=null)return e;{let v,E;if(_t(i))if(Oe(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=$a(e),T=w instanceof tt?w:tt.EMPTY_NODE,N=Z1(o,T);v=r.filter.updateFullNode(e.eventCache.getNode(),N,m)}else{const w=Gf(o,$a(e));v=r.filter.updateFullNode(e.eventCache.getNode(),w,m)}else{const w=At(i);if(w===".priority"){Oe(ca(i)===1,"Can't have a priority with additional path components");const T=x.getNode();E=e.serverCache.getNode();const N=zx(o,i,T,E);N!=null?v=r.filter.updatePriority(T,N):v=x.getNode()}else{const T=tn(i);let N;if(x.isCompleteForChild(w)){E=e.serverCache.getNode();const D=zx(o,i,x.getNode(),E);D!=null?N=x.getNode().getImmediateChild(w).updateChild(T,D):N=x.getNode().getImmediateChild(w)}else N=Q1(o,w,e.serverCache);N!=null?v=r.filter.updateChild(x.getNode(),w,N,T,f,m):v=x.getNode()}}return _c(e,v,x.isFullyInitialized()||_t(i),r.filter.filtersNodes())}}function Xf(r,e,i,o,f,m,x,v){const E=e.serverCache;let w;const T=x?r.filter:r.filter.getIndexedFilter();if(_t(i))w=T.updateFullNode(E.getNode(),o,null);else if(T.filtersNodes()&&!E.isFiltered()){const P=E.getNode().updateChild(i,o);w=T.updateFullNode(E.getNode(),P,null)}else{const P=At(i);if(!E.isCompleteForPath(i)&&ca(i)>1)return e;const G=tn(i),ye=E.getNode().getImmediateChild(P).updateChild(G,o);P===".priority"?w=T.updatePriority(E.getNode(),ye):w=T.updateChild(E.getNode(),P,ye,G,Ew,null)}const N=pw(e,w,E.isFullyInitialized()||_t(i),T.filtersNodes()),D=new J1(f,N,m);return vw(r,N,i,f,D,v)}function x1(r,e,i,o,f,m,x){const v=e.eventCache;let E,w;const T=new J1(f,e,m);if(_t(i))w=r.filter.updateFullNode(e.eventCache.getNode(),o,x),E=_c(e,w,!0,r.filter.filtersNodes());else{const N=At(i);if(N===".priority")w=r.filter.updatePriority(e.eventCache.getNode(),o),E=_c(e,w,v.isFullyInitialized(),v.isFiltered());else{const D=tn(i),P=v.getNode().getImmediateChild(N);let G;if(_t(D))G=o;else{const H=T.getCompleteChild(N);H!=null?iw(D)===".priority"&&H.getChild(rw(D)).isEmpty()?G=H:G=H.updateChild(D,o):G=tt.EMPTY_NODE}if(P.equals(G))E=e;else{const H=r.filter.updateChild(v.getNode(),N,G,D,T,x);E=_c(e,H,v.isFullyInitialized(),r.filter.filtersNodes())}}}return E}function Hx(r,e){return r.eventCache.isCompleteForChild(e)}function JS(r,e,i,o,f,m,x){let v=e;return o.foreach((E,w)=>{const T=Un(i,E);Hx(e,At(T))&&(v=x1(r,v,T,w,f,m,x))}),o.foreach((E,w)=>{const T=Un(i,E);Hx(e,At(T))||(v=x1(r,v,T,w,f,m,x))}),v}function Vx(r,e,i){return i.foreach((o,f)=>{e=e.updateChild(o,f)}),e}function y1(r,e,i,o,f,m,x,v){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E=e,w;_t(i)?w=o:w=new ln(null).setTree(i,o);const T=e.serverCache.getNode();return w.children.inorderTraversal((N,D)=>{if(T.hasChild(N)){const P=e.serverCache.getNode().getImmediateChild(N),G=Vx(r,P,D);E=Xf(r,E,new $t(N),G,f,m,x,v)}}),w.children.inorderTraversal((N,D)=>{const P=!e.serverCache.isCompleteForChild(N)&&D.value===null;if(!T.hasChild(N)&&!P){const G=e.serverCache.getNode().getImmediateChild(N),H=Vx(r,G,D);E=Xf(r,E,new $t(N),H,f,m,x,v)}}),E}function $S(r,e,i,o,f,m,x){if(qf(f,i)!=null)return e;const v=e.serverCache.isFiltered(),E=e.serverCache;if(o.value!=null){if(_t(i)&&E.isFullyInitialized()||E.isCompleteForPath(i))return Xf(r,e,i,E.getNode().getChild(i),f,m,v,x);if(_t(i)){let w=new ln(null);return E.getNode().forEachChild(Qo,(T,N)=>{w=w.set(new $t(T),N)}),y1(r,e,i,w,f,m,v,x)}else return e}else{let w=new ln(null);return o.foreach((T,N)=>{const D=Un(i,T);E.isCompleteForPath(D)&&(w=w.set(T,E.getNode().getChild(D)))}),y1(r,e,i,w,f,m,v,x)}}function e8(r,e,i,o,f){const m=e.serverCache,x=pw(e,m.getNode(),m.isFullyInitialized()||_t(i),m.isFiltered());return vw(r,x,i,o,Ew,f)}function t8(r,e,i,o,f,m){let x;if(qf(o,i)!=null)return e;{const v=new J1(o,e,f),E=e.eventCache.getNode();let w;if(_t(i)||At(i)===".priority"){let T;if(e.serverCache.isFullyInitialized())T=Gf(o,$a(e));else{const N=e.serverCache.getNode();Oe(N instanceof tt,"serverChildren would be complete if leaf node"),T=Z1(o,N)}T=T,w=r.filter.updateFullNode(E,T,m)}else{const T=At(i);let N=Q1(o,T,e.serverCache);N==null&&e.serverCache.isCompleteForChild(T)&&(N=E.getImmediateChild(T)),N!=null?w=r.filter.updateChild(E,T,N,tn(i),v,m):e.eventCache.getNode().hasChild(T)?w=r.filter.updateChild(E,T,tt.EMPTY_NODE,tn(i),v,m):w=E,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(x=Gf(o,$a(e)),x.isLeafNode()&&(w=r.filter.updateFullNode(w,x,m)))}return x=e.serverCache.isFullyInitialized()||qf(o,Dt())!=null,_c(e,w,x,r.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,i){this.query_=e,this.eventRegistrations_=[];const o=this.query_._queryParams,f=new X1(o.getIndex()),m=bS(o);this.processor_=WS(m);const x=i.serverCache,v=i.eventCache,E=f.updateFullNode(tt.EMPTY_NODE,x.getNode(),null),w=m.updateFullNode(tt.EMPTY_NODE,v.getNode(),null),T=new ua(E,x.isFullyInitialized(),f.filtersNodes()),N=new ua(w,v.isFullyInitialized(),m.filtersNodes());this.viewCache_=th(N,T),this.eventGenerator_=new NS(this.query_)}get query(){return this.query_}}function i8(r){return r.viewCache_.serverCache.getNode()}function s8(r){return Vf(r.viewCache_)}function r8(r,e){const i=$a(r.viewCache_);return i&&(r.query._queryParams.loadsAllData()||!_t(e)&&!i.getImmediateChild(At(e)).isEmpty())?i.getChild(e):null}function Gx(r){return r.eventRegistrations_.length===0}function a8(r,e){r.eventRegistrations_.push(e)}function qx(r,e,i){const o=[];if(i){Oe(e==null,"A cancel should cancel all event registrations.");const f=r.query._path;r.eventRegistrations_.forEach(m=>{const x=m.createCancelEvent(i,f);x&&o.push(x)})}if(e){let f=[];for(let m=0;m<r.eventRegistrations_.length;++m){const x=r.eventRegistrations_[m];if(!x.matches(e))f.push(x);else if(e.hasAnyCallback()){f=f.concat(r.eventRegistrations_.slice(m+1));break}}r.eventRegistrations_=f}else r.eventRegistrations_=[];return o}function Xx(r,e,i,o){e.type===ps.MERGE&&e.source.queryId!==null&&(Oe($a(r.viewCache_),"We should always have a full cache before handling merges"),Oe(Vf(r.viewCache_),"Missing event cache, even though we have a server cache"));const f=r.viewCache_,m=ZS(r.processor_,f,e,i,o);return KS(r.processor_,m.viewCache),Oe(m.viewCache.serverCache.isFullyInitialized()||!f.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),r.viewCache_=m.viewCache,Cw(r,m.changes,m.viewCache.eventCache.getNode(),null)}function o8(r,e){const i=r.viewCache_.eventCache,o=[];return i.getNode().isLeafNode()||i.getNode().forEachChild(yn,(m,x)=>{o.push(tl(m,x))}),i.isFullyInitialized()&&o.push(dw(i.getNode())),Cw(r,o,i.getNode(),e)}function Cw(r,e,i,o){const f=o?[o]:r.eventRegistrations_;return IS(r.eventGenerator_,e,i,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yf;class Aw{constructor(){this.views=new Map}}function l8(r){Oe(!Yf,"__referenceConstructor has already been defined"),Yf=r}function c8(){return Oe(Yf,"Reference.ts has not been loaded"),Yf}function u8(r){return r.views.size===0}function $1(r,e,i,o){const f=e.source.queryId;if(f!==null){const m=r.views.get(f);return Oe(m!=null,"SyncTree gave us an op for an invalid query."),Xx(m,e,i,o)}else{let m=[];for(const x of r.views.values())m=m.concat(Xx(x,e,i,o));return m}}function Sw(r,e,i,o,f){const m=e._queryIdentifier,x=r.views.get(m);if(!x){let v=Gf(i,f?o:null),E=!1;v?E=!0:o instanceof tt?(v=Z1(i,o),E=!1):(v=tt.EMPTY_NODE,E=!1);const w=th(new ua(v,E,!1),new ua(o,f,!1));return new n8(e,w)}return x}function f8(r,e,i,o,f,m){const x=Sw(r,e,o,f,m);return r.views.has(e._queryIdentifier)||r.views.set(e._queryIdentifier,x),a8(x,i),o8(x,i)}function h8(r,e,i,o){const f=e._queryIdentifier,m=[];let x=[];const v=fa(r);if(f==="default")for(const[E,w]of r.views.entries())x=x.concat(qx(w,i,o)),Gx(w)&&(r.views.delete(E),w.query._queryParams.loadsAllData()||m.push(w.query));else{const E=r.views.get(f);E&&(x=x.concat(qx(E,i,o)),Gx(E)&&(r.views.delete(f),E.query._queryParams.loadsAllData()||m.push(E.query)))}return v&&!fa(r)&&m.push(new(c8())(e._repo,e._path)),{removed:m,events:x}}function Tw(r){const e=[];for(const i of r.views.values())i.query._queryParams.loadsAllData()||e.push(i);return e}function la(r,e){let i=null;for(const o of r.views.values())i=i||r8(o,e);return i}function Nw(r,e){if(e._queryParams.loadsAllData())return ih(r);{const o=e._queryIdentifier;return r.views.get(o)}}function Iw(r,e){return Nw(r,e)!=null}function fa(r){return ih(r)!=null}function ih(r){for(const e of r.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wf;function d8(r){Oe(!Wf,"__referenceConstructor has already been defined"),Wf=r}function g8(){return Oe(Wf,"Reference.ts has not been loaded"),Wf}let m8=1;class Yx{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ln(null),this.pendingWriteTree_=GS(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Rw(r,e,i,o,f){return MS(r.pendingWriteTree_,e,i,o,f),f?Xc(r,new Ja(mw(),e,i)):[]}function Xa(r,e,i=!1){const o=LS(r.pendingWriteTree_,e);if(kS(r.pendingWriteTree_,e)){let m=new ln(null);return o.snap!=null?m=m.set(Dt(),!0):Ci(o.children,x=>{m=m.set(new $t(x),!0)}),Xc(r,new Hf(o.path,m,i))}else return[]}function qc(r,e,i){return Xc(r,new Ja(W1(),e,i))}function p8(r,e,i){const o=ln.fromObject(i);return Xc(r,new Dc(W1(),e,o))}function x8(r,e){return Xc(r,new Oc(W1(),e))}function y8(r,e,i){const o=tg(r,i);if(o){const f=ng(o),m=f.path,x=f.queryId,v=oi(m,e),E=new Oc(K1(x),v);return ig(r,m,E)}else return[]}function Ow(r,e,i,o,f=!1){const m=e._path,x=r.syncPointTree_.get(m);let v=[];if(x&&(e._queryIdentifier==="default"||Iw(x,e))){const E=h8(x,e,i,o);u8(x)&&(r.syncPointTree_=r.syncPointTree_.remove(m));const w=E.removed;if(v=E.events,!f){const T=w.findIndex(D=>D._queryParams.loadsAllData())!==-1,N=r.syncPointTree_.findOnPath(m,(D,P)=>fa(P));if(T&&!N){const D=r.syncPointTree_.subtree(m);if(!D.isEmpty()){const P=E8(D);for(let G=0;G<P.length;++G){const H=P[G],ye=H.query,te=kw(r,H);r.listenProvider_.startListening(bc(ye),Mc(r,ye),te.hashFn,te.onComplete)}}}!N&&w.length>0&&!o&&(T?r.listenProvider_.stopListening(bc(e),null):w.forEach(D=>{const P=r.queryToTagMap.get(sh(D));r.listenProvider_.stopListening(bc(D),P)}))}v8(r,w)}return v}function Dw(r,e,i,o){const f=tg(r,o);if(f!=null){const m=ng(f),x=m.path,v=m.queryId,E=oi(x,e),w=new Ja(K1(v),E,i);return ig(r,x,w)}else return[]}function _8(r,e,i,o){const f=tg(r,o);if(f){const m=ng(f),x=m.path,v=m.queryId,E=oi(x,e),w=ln.fromObject(i),T=new Dc(K1(v),E,w);return ig(r,x,T)}else return[]}function w8(r,e,i,o=!1){const f=e._path;let m=null,x=!1;r.syncPointTree_.foreachOnPath(f,(D,P)=>{const G=oi(D,f);m=m||la(P,G),x=x||fa(P)});let v=r.syncPointTree_.get(f);v?(x=x||fa(v),m=m||la(v,Dt())):(v=new Aw,r.syncPointTree_=r.syncPointTree_.set(f,v));let E;m!=null?E=!0:(E=!1,m=tt.EMPTY_NODE,r.syncPointTree_.subtree(f).foreachChild((P,G)=>{const H=la(G,Dt());H&&(m=m.updateImmediateChild(P,H))}));const w=Iw(v,e);if(!w&&!e._queryParams.loadsAllData()){const D=sh(e);Oe(!r.queryToTagMap.has(D),"View does not exist, but we have a tag");const P=C8();r.queryToTagMap.set(D,P),r.tagToQueryMap.set(P,D)}const T=nh(r.pendingWriteTree_,f);let N=f8(v,e,i,T,m,E);if(!w&&!x&&!o){const D=Nw(v,e);N=N.concat(A8(r,e,D))}return N}function eg(r,e,i){const f=r.pendingWriteTree_,m=r.syncPointTree_.findOnPath(e,(x,v)=>{const E=oi(x,e),w=la(v,E);if(w)return w});return _w(f,e,m,i,!0)}function b8(r,e){const i=e._path;let o=null;r.syncPointTree_.foreachOnPath(i,(w,T)=>{const N=oi(w,i);o=o||la(T,N)});let f=r.syncPointTree_.get(i);f?o=o||la(f,Dt()):(f=new Aw,r.syncPointTree_=r.syncPointTree_.set(i,f));const m=o!=null,x=m?new ua(o,!0,!1):null,v=nh(r.pendingWriteTree_,e._path),E=Sw(f,e,v,m?x.getNode():tt.EMPTY_NODE,m);return s8(E)}function Xc(r,e){return Mw(e,r.syncPointTree_,null,nh(r.pendingWriteTree_,Dt()))}function Mw(r,e,i,o){if(_t(r.path))return Lw(r,e,i,o);{const f=e.get(Dt());i==null&&f!=null&&(i=la(f,Dt()));let m=[];const x=At(r.path),v=r.operationForChild(x),E=e.children.get(x);if(E&&v){const w=i?i.getImmediateChild(x):null,T=ww(o,x);m=m.concat(Mw(v,E,w,T))}return f&&(m=m.concat($1(f,r,o,i))),m}}function Lw(r,e,i,o){const f=e.get(Dt());i==null&&f!=null&&(i=la(f,Dt()));let m=[];return e.children.inorderTraversal((x,v)=>{const E=i?i.getImmediateChild(x):null,w=ww(o,x),T=r.operationForChild(x);T&&(m=m.concat(Lw(T,v,E,w)))}),f&&(m=m.concat($1(f,r,o,i))),m}function kw(r,e){const i=e.query,o=Mc(r,i);return{hashFn:()=>(i8(e)||tt.EMPTY_NODE).hash(),onComplete:f=>{if(f==="ok")return o?y8(r,i._path,o):x8(r,i._path);{const m=w4(f,i);return Ow(r,i,null,m)}}}}function Mc(r,e){const i=sh(e);return r.queryToTagMap.get(i)}function sh(r){return r._path.toString()+"$"+r._queryIdentifier}function tg(r,e){return r.tagToQueryMap.get(e)}function ng(r){const e=r.indexOf("$");return Oe(e!==-1&&e<r.length-1,"Bad queryKey."),{queryId:r.substr(e+1),path:new $t(r.substr(0,e))}}function ig(r,e,i){const o=r.syncPointTree_.get(e);Oe(o,"Missing sync point for query tag that we're tracking");const f=nh(r.pendingWriteTree_,e);return $1(o,i,f,null)}function E8(r){return r.fold((e,i,o)=>{if(i&&fa(i))return[ih(i)];{let f=[];return i&&(f=Tw(i)),Ci(o,(m,x)=>{f=f.concat(x)}),f}})}function bc(r){return r._queryParams.loadsAllData()&&!r._queryParams.isDefault()?new(g8())(r._repo,r._path):r}function v8(r,e){for(let i=0;i<e.length;++i){const o=e[i];if(!o._queryParams.loadsAllData()){const f=sh(o),m=r.queryToTagMap.get(f);r.queryToTagMap.delete(f),r.tagToQueryMap.delete(m)}}}function C8(){return m8++}function A8(r,e,i){const o=e._path,f=Mc(r,e),m=kw(r,i),x=r.listenProvider_.startListening(bc(e),f,m.hashFn,m.onComplete),v=r.syncPointTree_.subtree(o);if(f)Oe(!fa(v.value),"If we're adding a query, it shouldn't be shadowed");else{const E=v.fold((w,T,N)=>{if(!_t(w)&&T&&fa(T))return[ih(T).query];{let D=[];return T&&(D=D.concat(Tw(T).map(P=>P.query))),Ci(N,(P,G)=>{D=D.concat(G)}),D}});for(let w=0;w<E.length;++w){const T=E[w];r.listenProvider_.stopListening(bc(T),Mc(r,T))}}return x}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(e){this.node_=e}getImmediateChild(e){const i=this.node_.getImmediateChild(e);return new sg(i)}node(){return this.node_}}class rg{constructor(e,i){this.syncTree_=e,this.path_=i}getImmediateChild(e){const i=Un(this.path_,e);return new rg(this.syncTree_,i)}node(){return eg(this.syncTree_,this.path_)}}const S8=function(r){return r=r||{},r.timestamp=r.timestamp||new Date().getTime(),r},Wx=function(r,e,i){if(!r||typeof r!="object")return r;if(Oe(".sv"in r,"Unexpected leaf node or priority contents"),typeof r[".sv"]=="string")return T8(r[".sv"],e,i);if(typeof r[".sv"]=="object")return N8(r[".sv"],e);Oe(!1,"Unexpected server value: "+JSON.stringify(r,null,2))},T8=function(r,e,i){switch(r){case"timestamp":return i.timestamp;default:Oe(!1,"Unexpected server value: "+r)}},N8=function(r,e,i){r.hasOwnProperty("increment")||Oe(!1,"Unexpected server value: "+JSON.stringify(r,null,2));const o=r.increment;typeof o!="number"&&Oe(!1,"Unexpected increment value: "+o);const f=e.node();if(Oe(f!==null&&typeof f<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!f.isLeafNode())return o;const x=f.getValue();return typeof x!="number"?o:x+o},I8=function(r,e,i,o){return ag(e,new rg(i,r),o)},Bw=function(r,e,i){return ag(r,new sg(e),i)};function ag(r,e,i){const o=r.getPriority().val(),f=Wx(o,e.getImmediateChild(".priority"),i);let m;if(r.isLeafNode()){const x=r,v=Wx(x.getValue(),e,i);return v!==x.getValue()||f!==x.getPriority().val()?new Hn(v,Gn(f)):r}else{const x=r;return m=x,f!==x.getPriority().val()&&(m=m.updatePriority(new Hn(f))),x.forEachChild(yn,(v,E)=>{const w=ag(E,e.getImmediateChild(v),i);w!==E&&(m=m.updateImmediateChild(v,w))}),m}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e="",i=null,o={children:{},childCount:0}){this.name=e,this.parent=i,this.node=o}}function lg(r,e){let i=e instanceof $t?e:new $t(e),o=r,f=At(i);for(;f!==null;){const m=Jo(o.node.children,f)||{children:{},childCount:0};o=new og(f,o,m),i=tn(i),f=At(i)}return o}function ul(r){return r.node.value}function Pw(r,e){r.node.value=e,_1(r)}function jw(r){return r.node.childCount>0}function R8(r){return ul(r)===void 0&&!jw(r)}function rh(r,e){Ci(r.node.children,(i,o)=>{e(new og(i,r,o))})}function Uw(r,e,i,o){i&&e(r),rh(r,f=>{Uw(f,e,!0)})}function O8(r,e,i){let o=r.parent;for(;o!==null;){if(e(o))return!0;o=o.parent}return!1}function Yc(r){return new $t(r.parent===null?r.name:Yc(r.parent)+"/"+r.name)}function _1(r){r.parent!==null&&D8(r.parent,r.name,r)}function D8(r,e,i){const o=R8(i),f=dr(r.node.children,e);o&&f?(delete r.node.children[e],r.node.childCount--,_1(r)):!o&&!f&&(r.node.children[e]=i.node,r.node.childCount++,_1(r))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M8=/[\[\].#$\/\u0000-\u001F\u007F]/,L8=/[\[\].#$\u0000-\u001F\u007F]/,v0=10*1024*1024,Fw=function(r){return typeof r=="string"&&r.length!==0&&!M8.test(r)},zw=function(r){return typeof r=="string"&&r.length!==0&&!L8.test(r)},k8=function(r){return r&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),zw(r)},B8=function(r,e,i,o){cg(S1(r,"value"),e,i)},cg=function(r,e,i){const o=i instanceof $t?new $4(i,r):i;if(e===void 0)throw new Error(r+"contains undefined "+Va(o));if(typeof e=="function")throw new Error(r+"contains a function "+Va(o)+" with contents = "+e.toString());if(B_(e))throw new Error(r+"contains "+e.toString()+" "+Va(o));if(typeof e=="string"&&e.length>v0/3&&Zf(e)>v0)throw new Error(r+"contains a string greater than "+v0+" utf8 bytes "+Va(o)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let f=!1,m=!1;if(Ci(e,(x,v)=>{if(x===".value")f=!0;else if(x!==".priority"&&x!==".sv"&&(m=!0,!Fw(x)))throw new Error(r+" contains an invalid key ("+x+") "+Va(o)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);eS(o,x),cg(r,v,o),tS(o)}),f&&m)throw new Error(r+' contains ".value" child '+Va(o)+" in addition to actual children.")}},Hw=function(r,e,i,o){if(!zw(i))throw new Error(S1(r,e)+'was an invalid path = "'+i+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},P8=function(r,e,i,o){i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Hw(r,e,i)},j8=function(r,e){if(At(e)===".info")throw new Error(r+" failed = Can't modify data under /.info/")},U8=function(r,e){const i=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Fw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||i.length!==0&&!k8(i))throw new Error(S1(r,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Vw(r,e){let i=null;for(let o=0;o<e.length;o++){const f=e[o],m=f.getPath();i!==null&&!aw(m,i.path)&&(r.eventLists_.push(i),i=null),i===null&&(i={events:[],path:m}),i.events.push(f)}i&&r.eventLists_.push(i)}function Ls(r,e,i){Vw(r,i),z8(r,o=>ms(o,e)||ms(e,o))}function z8(r,e){r.recursionDepth_++;let i=!0;for(let o=0;o<r.eventLists_.length;o++){const f=r.eventLists_[o];if(f){const m=f.path;e(m)?(H8(r.eventLists_[o]),r.eventLists_[o]=null):i=!1}}i&&(r.eventLists_=[]),r.recursionDepth_--}function H8(r){for(let e=0;e<r.events.length;e++){const i=r.events[e];if(i!==null){r.events[e]=null;const o=i.getEventRunner();xc&&$n("event: "+i.toString()),cl(o)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8="repo_interrupt",G8=25;class q8{constructor(e,i,o,f){this.repoInfo_=e,this.forceRestClient_=i,this.authTokenProvider_=o,this.appCheckProvider_=f,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new F8,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zf(),this.transactionQueueTree_=new og,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function X8(r,e,i){if(r.stats_=H1(r.repoInfo_),r.forceRestClient_||C4())r.server_=new Ff(r.repoInfo_,(o,f,m,x)=>{Kx(r,o,f,m,x)},r.authTokenProvider_,r.appCheckProvider_),setTimeout(()=>Zx(r,!0),0);else{if(typeof i<"u"&&i!==null){if(typeof i!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{jn(i)}catch(o){throw new Error("Invalid authOverride provided: "+o)}}r.persistentConnection_=new cr(r.repoInfo_,e,(o,f,m,x)=>{Kx(r,o,f,m,x)},o=>{Zx(r,o)},o=>{W8(r,o)},r.authTokenProvider_,r.appCheckProvider_,i),r.server_=r.persistentConnection_}r.authTokenProvider_.addTokenChangeListener(o=>{r.server_.refreshAuthToken(o)}),r.appCheckProvider_.addTokenChangeListener(o=>{r.server_.refreshAppCheckToken(o.token)}),r.statsReporter_=I4(r.repoInfo_,()=>new TS(r.stats_,r.server_)),r.infoData_=new ES,r.infoSyncTree_=new Yx({startListening:(o,f,m,x)=>{let v=[];const E=r.infoData_.getNode(o._path);return E.isEmpty()||(v=qc(r.infoSyncTree_,o._path,E),setTimeout(()=>{x("ok")},0)),v},stopListening:()=>{}}),fg(r,"connected",!1),r.serverSyncTree_=new Yx({startListening:(o,f,m,x)=>(r.server_.listen(o,m,f,(v,E)=>{const w=x(v,E);Ls(r.eventQueue_,o._path,w)}),[]),stopListening:(o,f)=>{r.server_.unlisten(o,f)}})}function Y8(r){const i=r.infoData_.getNode(new $t(".info/serverTimeOffset")).val()||0;return new Date().getTime()+i}function ug(r){return S8({timestamp:Y8(r)})}function Kx(r,e,i,o,f){r.dataUpdateCount++;const m=new $t(e);i=r.interceptServerDataCallback_?r.interceptServerDataCallback_(e,i):i;let x=[];if(f)if(o){const E=If(i,w=>Gn(w));x=_8(r.serverSyncTree_,m,E,f)}else{const E=Gn(i);x=Dw(r.serverSyncTree_,m,E,f)}else if(o){const E=If(i,w=>Gn(w));x=p8(r.serverSyncTree_,m,E)}else{const E=Gn(i);x=qc(r.serverSyncTree_,m,E)}let v=m;x.length>0&&(v=oh(r,m)),Ls(r.eventQueue_,v,x)}function Zx(r,e){fg(r,"connected",e),e===!1&&Q8(r)}function W8(r,e){Ci(e,(i,o)=>{fg(r,i,o)})}function fg(r,e,i){const o=new $t("/.info/"+e),f=Gn(i);r.infoData_.updateSnapshot(o,f);const m=qc(r.infoSyncTree_,o,f);Ls(r.eventQueue_,o,m)}function Gw(r){return r.nextWriteId_++}function K8(r,e,i){const o=b8(r.serverSyncTree_,e);return o!=null?Promise.resolve(o):r.server_.get(e).then(f=>{const m=Gn(f).withIndex(e._queryParams.getIndex());w8(r.serverSyncTree_,e,i,!0);let x;if(e._queryParams.loadsAllData())x=qc(r.serverSyncTree_,e._path,m);else{const v=Mc(r.serverSyncTree_,e);x=Dw(r.serverSyncTree_,e._path,m,v)}return Ls(r.eventQueue_,e._path,x),Ow(r.serverSyncTree_,e,i,null,!0),m},f=>(ah(r,"get for query "+jn(e)+" failed: "+f),Promise.reject(new Error(f))))}function Z8(r,e,i,o,f){ah(r,"set",{path:e.toString(),value:i,priority:o});const m=ug(r),x=Gn(i,o),v=eg(r.serverSyncTree_,e),E=Bw(x,v,m),w=Gw(r),T=Rw(r.serverSyncTree_,e,E,w,!0);Vw(r.eventQueue_,T),r.server_.put(e.toString(),x.val(!0),(D,P)=>{const G=D==="ok";G||vi("set at "+e+" failed: "+D);const H=Xa(r.serverSyncTree_,w,!G);Ls(r.eventQueue_,e,H),$8(r,f,D,P)});const N=Kw(r,e);oh(r,N),Ls(r.eventQueue_,N,[])}function Q8(r){ah(r,"onDisconnectEvents");const e=ug(r),i=zf();g1(r.onDisconnect_,Dt(),(f,m)=>{const x=I8(f,m,r.serverSyncTree_,e);gw(i,f,x)});let o=[];g1(i,Dt(),(f,m)=>{o=o.concat(qc(r.serverSyncTree_,f,m));const x=Kw(r,f);oh(r,x)}),r.onDisconnect_=zf(),Ls(r.eventQueue_,Dt(),o)}function J8(r){r.persistentConnection_&&r.persistentConnection_.interrupt(V8)}function ah(r,...e){let i="";r.persistentConnection_&&(i=r.persistentConnection_.id+":"),$n(i,...e)}function $8(r,e,i,o){e&&cl(()=>{if(i==="ok")e(null);else{const f=(i||"error").toUpperCase();let m=f;o&&(m+=": "+o);const x=new Error(m);x.code=f,e(x)}})}function qw(r,e,i){return eg(r.serverSyncTree_,e,i)||tt.EMPTY_NODE}function hg(r,e=r.transactionQueueTree_){if(e||lh(r,e),ul(e)){const i=Yw(r,e);Oe(i.length>0,"Sending zero length transaction queue"),i.every(f=>f.status===0)&&eT(r,Yc(e),i)}else jw(e)&&rh(e,i=>{hg(r,i)})}function eT(r,e,i){const o=i.map(w=>w.currentWriteId),f=qw(r,e,o);let m=f;const x=f.hash();for(let w=0;w<i.length;w++){const T=i[w];Oe(T.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const N=oi(e,T.path);m=m.updateChild(N,T.currentOutputSnapshotRaw)}const v=m.val(!0),E=e;r.server_.put(E.toString(),v,w=>{ah(r,"transaction put response",{path:E.toString(),status:w});let T=[];if(w==="ok"){const N=[];for(let D=0;D<i.length;D++)i[D].status=2,T=T.concat(Xa(r.serverSyncTree_,i[D].currentWriteId)),i[D].onComplete&&N.push(()=>i[D].onComplete(null,!0,i[D].currentOutputSnapshotResolved)),i[D].unwatcher();lh(r,lg(r.transactionQueueTree_,e)),hg(r,r.transactionQueueTree_),Ls(r.eventQueue_,e,T);for(let D=0;D<N.length;D++)cl(N[D])}else{if(w==="datastale")for(let N=0;N<i.length;N++)i[N].status===3?i[N].status=4:i[N].status=0;else{vi("transaction at "+E.toString()+" failed: "+w);for(let N=0;N<i.length;N++)i[N].status=4,i[N].abortReason=w}oh(r,e)}},x)}function oh(r,e){const i=Xw(r,e),o=Yc(i),f=Yw(r,i);return tT(r,f,o),o}function tT(r,e,i){if(e.length===0)return;const o=[];let f=[];const x=e.filter(v=>v.status===0).map(v=>v.currentWriteId);for(let v=0;v<e.length;v++){const E=e[v],w=oi(i,E.path);let T=!1,N;if(Oe(w!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),E.status===4)T=!0,N=E.abortReason,f=f.concat(Xa(r.serverSyncTree_,E.currentWriteId,!0));else if(E.status===0)if(E.retryCount>=G8)T=!0,N="maxretry",f=f.concat(Xa(r.serverSyncTree_,E.currentWriteId,!0));else{const D=qw(r,E.path,x);E.currentInputSnapshot=D;const P=e[v].update(D.val());if(P!==void 0){cg("transaction failed: Data returned ",P,E.path);let G=Gn(P);typeof P=="object"&&P!=null&&dr(P,".priority")||(G=G.updatePriority(D.getPriority()));const ye=E.currentWriteId,te=ug(r),$=Bw(G,D,te);E.currentOutputSnapshotRaw=G,E.currentOutputSnapshotResolved=$,E.currentWriteId=Gw(r),x.splice(x.indexOf(ye),1),f=f.concat(Rw(r.serverSyncTree_,E.path,$,E.currentWriteId,E.applyLocally)),f=f.concat(Xa(r.serverSyncTree_,ye,!0))}else T=!0,N="nodata",f=f.concat(Xa(r.serverSyncTree_,E.currentWriteId,!0))}Ls(r.eventQueue_,i,f),f=[],T&&(e[v].status=2,(function(D){setTimeout(D,Math.floor(0))})(e[v].unwatcher),e[v].onComplete&&(N==="nodata"?o.push(()=>e[v].onComplete(null,!1,e[v].currentInputSnapshot)):o.push(()=>e[v].onComplete(new Error(N),!1,null))))}lh(r,r.transactionQueueTree_);for(let v=0;v<o.length;v++)cl(o[v]);hg(r,r.transactionQueueTree_)}function Xw(r,e){let i,o=r.transactionQueueTree_;for(i=At(e);i!==null&&ul(o)===void 0;)o=lg(o,i),e=tn(e),i=At(e);return o}function Yw(r,e){const i=[];return Ww(r,e,i),i.sort((o,f)=>o.order-f.order),i}function Ww(r,e,i){const o=ul(e);if(o)for(let f=0;f<o.length;f++)i.push(o[f]);rh(e,f=>{Ww(r,f,i)})}function lh(r,e){const i=ul(e);if(i){let o=0;for(let f=0;f<i.length;f++)i[f].status!==2&&(i[o]=i[f],o++);i.length=o,Pw(e,i.length>0?i:void 0)}rh(e,o=>{lh(r,o)})}function Kw(r,e){const i=Yc(Xw(r,e)),o=lg(r.transactionQueueTree_,e);return O8(o,f=>{C0(r,f)}),C0(r,o),Uw(o,f=>{C0(r,f)}),i}function C0(r,e){const i=ul(e);if(i){const o=[];let f=[],m=-1;for(let x=0;x<i.length;x++)i[x].status===3||(i[x].status===1?(Oe(m===x-1,"All SENT items should be at beginning of queue."),m=x,i[x].status=3,i[x].abortReason="set"):(Oe(i[x].status===0,"Unexpected transaction status in abort"),i[x].unwatcher(),f=f.concat(Xa(r.serverSyncTree_,i[x].currentWriteId,!0)),i[x].onComplete&&o.push(i[x].onComplete.bind(null,new Error("set"),!1,null))));m===-1?Pw(e,void 0):i.length=m+1,Ls(r.eventQueue_,Yc(e),f);for(let x=0;x<o.length;x++)cl(o[x])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(r){let e="";const i=r.split("/");for(let o=0;o<i.length;o++)if(i[o].length>0){let f=i[o];try{f=decodeURIComponent(f.replace(/\+/g," "))}catch{}e+="/"+f}return e}function iT(r){const e={};r.charAt(0)==="?"&&(r=r.substring(1));for(const i of r.split("&")){if(i.length===0)continue;const o=i.split("=");o.length===2?e[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):vi(`Invalid query segment '${i}' in query '${r}'`)}return e}const Qx=function(r,e){const i=sT(r),o=i.namespace;i.domain==="firebase.com"&&hr(i.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!o||o==="undefined")&&i.domain!=="localhost"&&hr("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),i.secure||m4();const f=i.scheme==="ws"||i.scheme==="wss";return{repoInfo:new W_(i.host,i.secure,o,f,e,"",o!==i.subdomain),path:new $t(i.pathString)}},sT=function(r){let e="",i="",o="",f="",m="",x=!0,v="https",E=443;if(typeof r=="string"){let w=r.indexOf("//");w>=0&&(v=r.substring(0,w-1),r=r.substring(w+2));let T=r.indexOf("/");T===-1&&(T=r.length);let N=r.indexOf("?");N===-1&&(N=r.length),e=r.substring(0,Math.min(T,N)),T<N&&(f=nT(r.substring(T,N)));const D=iT(r.substring(Math.min(r.length,N)));w=e.indexOf(":"),w>=0?(x=v==="https"||v==="wss",E=parseInt(e.substring(w+1),10)):w=e.length;const P=e.slice(0,w);if(P.toLowerCase()==="localhost")i="localhost";else if(P.split(".").length<=2)i=P;else{const G=e.indexOf(".");o=e.substring(0,G).toLowerCase(),i=e.substring(G+1),m=o}"ns"in D&&(m=D.ns)}return{host:e,port:E,domain:i,subdomain:o,secure:x,scheme:v,pathString:f,namespace:m}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,i,o,f){this.eventType=e,this.eventRegistration=i,this.snapshot=o,this.prevName=f}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+jn(this.snapshot.exportVal())}}class aT{constructor(e,i,o){this.eventRegistration=e,this.error=i,this.path=o}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,i){this.snapshotCallback=e,this.cancelCallback=i}onValue(e,i){this.snapshotCallback.call(null,e,i)}onCancel(e){return Oe(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,i,o,f){this._repo=e,this._path=i,this._queryParams=o,this._orderByCalled=f}get key(){return _t(this._path)?null:iw(this._path)}get ref(){return new gr(this._repo,this._path)}get _queryIdentifier(){const e=Bx(this._queryParams),i=F1(e);return i==="{}"?"default":i}get _queryObject(){return Bx(this._queryParams)}isEqual(e){if(e=Ai(e),!(e instanceof dg))return!1;const i=this._repo===e._repo,o=aw(this._path,e._path),f=this._queryIdentifier===e._queryIdentifier;return i&&o&&f}toJSON(){return this.toString()}toString(){return this._repo.toString()+J4(this._path)}}class gr extends dg{constructor(e,i){super(e,i,new Y1,!1)}get parent(){const e=rw(this._path);return e===null?null:new gr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Lc{constructor(e,i,o){this._node=e,this.ref=i,this._index=o}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const i=new $t(e),o=kc(this.ref,e);return new Lc(this._node.getChild(i),o,yn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(o,f)=>e(new Lc(f,kc(this.ref,o),yn)))}hasChild(e){const i=new $t(e);return!this._node.getChild(i).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function fs(r,e){return r=Ai(r),r._checkNotDeleted("ref"),e!==void 0?kc(r._root,e):r._root}function kc(r,e){return r=Ai(r),At(r._path)===null?P8("child","path",e):Hw("child","path",e),new gr(r._repo,Un(r._path,e))}function Jr(r,e){r=Ai(r),j8("set",r._path),B8("set",e,r._path);const i=new Kf;return Z8(r._repo,r._path,e,null,i.wrapCallback(()=>{})),i.promise}function A0(r){r=Ai(r);const e=new oT(()=>{}),i=new gg(e);return K8(r._repo,r,i).then(o=>new Lc(o,new gr(r._repo,r._path),r._queryParams.getIndex()))}class gg{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,i){const o=i._queryParams.getIndex();return new rT("value",this,new Lc(e.snapshotNode,new gr(i._repo,i._path),o))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,i){return this.callbackContext.hasCancelCallback?new aT(this,e,i):null}matches(e){return e instanceof gg?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}l8(gr);d8(gr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT="FIREBASE_DATABASE_EMULATOR_HOST",w1={};let cT=!1;function uT(r,e,i,o){const f=e.lastIndexOf(":"),m=e.substring(0,f),x=sl(m);r.repoInfo_=new W_(e,x,r.repoInfo_.namespace,r.repoInfo_.webSocketOnly,r.repoInfo_.nodeAdmin,r.repoInfo_.persistenceKey,r.repoInfo_.includeNamespaceInQueryParams,!0,i),o&&(r.authTokenProvider_=o)}function fT(r,e,i,o,f){let m=o||r.options.databaseURL;m===void 0&&(r.options.projectId||hr("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$n("Using default host for project ",r.options.projectId),m=`${r.options.projectId}-default-rtdb.firebaseio.com`);let x=Qx(m,f),v=x.repoInfo,E;typeof process<"u"&&yx&&(E=yx[lT]),E?(m=`http://${E}?ns=${v.namespace}`,x=Qx(m,f),v=x.repoInfo):x.repoInfo.secure;const w=new S4(r.name,r.options,e);U8("Invalid Firebase Database URL",x),_t(x.path)||hr("Database URL must point to the root of a Firebase Database (not including a child path).");const T=dT(v,r,w,new A4(r,i));return new gT(T,r)}function hT(r,e){const i=w1[e];(!i||i[r.key]!==r)&&hr(`Database ${e}(${r.repoInfo_}) has already been deleted.`),J8(r),delete i[r.key]}function dT(r,e,i,o){let f=w1[e.name];f||(f={},w1[e.name]=f);let m=f[r.toURLString()];return m&&hr("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),m=new q8(r,cT,i,o),f[r.toURLString()]=m,m}class gT{constructor(e,i){this._repoInternal=e,this.app=i,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(X8(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gr(this._repo,Dt())),this._rootInternal}_delete(){return this._rootInternal!==null&&(hT(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&hr("Cannot call "+e+" on a deleted database.")}}function mT(r=Qy(),e){const i=I1(r,"database").getImmediate({identifier:e});if(!i._instanceStarted){const o=wv("database");o&&pT(i,...o)}return i}function pT(r,e,i,o={}){r=Ai(r),r._checkNotDeleted("useEmulator");const f=`${e}:${i}`,m=r._repoInternal;if(r._instanceStarted){if(f===r._repoInternal.repoInfo_.host&&Ya(o,m.repoInfo_.emulatorOptions))return;hr("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let x;if(m.repoInfo_.nodeAdmin)o.mockUserToken&&hr('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),x=new Ef(Ef.OWNER);else if(o.mockUserToken){const v=typeof o.mockUserToken=="string"?o.mockUserToken:bv(o.mockUserToken,r.app.options.projectId);x=new Ef(v)}sl(e)&&(Gy(e),qy("Database",!0)),uT(m,f,o,x)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(r){c4(al),$o(new Wa("database",(e,{instanceIdentifier:i})=>{const o=e.getProvider("app").getImmediate(),f=e.getProvider("auth-internal"),m=e.getProvider("app-check-internal");return fT(o,f,m,i)},"PUBLIC").setMultipleInstances(!0)),aa(_x,wx,r),aa(_x,wx,"esm2020")}cr.prototype.simpleListen=function(r,e){this.sendRequest("q",{p:r},e)};cr.prototype.echo=function(r,e){this.sendRequest("echo",{d:r},e)};xT();var yT="firebase",_T="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */aa(yT,_T,"app");const wT={apiKey:"AIzaSyB2sMtaG1z3S3DoKzjoQku-nkr9nL3r_4w",authDomain:"ttrpg-base.firebaseapp.com",databaseURL:"https://ttrpg-base-default-rtdb.europe-west1.firebasedatabase.app",projectId:"ttrpg-base",storageBucket:"ttrpg-base.firebasestorage.app",messagingSenderId:"273595911052",appId:"1:273595911052:web:067b1507ee9fe96b95a4a9",measurementId:"G-V7D4FWS76S"},Zw=Zy(wT),Ec=o4(Zw),hs=mT(Zw),bT=new sr,Ve={qr:'<path d="M3 3h6v6H3z"/><path d="M15 3h6v6h-6z"/><path d="M3 15h6v6H3z"/><path d="M15 15h1v1h-1z"/><path d="M17 15h1v1h-1z"/><path d="M19 15h2v1h-2z"/><path d="M15 17h1v1h-1z"/><path d="M17 17h1v1h-1z"/><path d="M19 17h2v1h-2z"/><path d="M15 21h1v1h-1z"/><path d="M17 21h1v1h-1z"/><path d="M19 21h2v1h-2z"/>',scan:'<path d="M3 7V5a2 2 0 0 1 2-2h2"/><path d="M17 3h2a2 2 0 0 1 2 2v2"/><path d="M21 17v2a2 2 0 0 1-2 2h-2"/><path d="M7 21H5a2 2 0 0 1-2-2v-2"/>',trash:'<polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>',knowledge:'<path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>',trait:'<path d="M12 2l9 4.5-3.5 10.5L12 22 4.5 17 1 6.5z"/><circle cx="12" cy="12" r="3"/>',mastery:'<circle cx="12" cy="8" r="7"/><polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"/>',skill:'<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>',source:'<path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>',technique:'<path d="M12 20.5c-4.6 0-8.5-3.8-8.5-8.5s3.8-8.5 8.5-8.5c2.3 0 4.5 1 6 2.5"/><path d="M12 16c-2.2 0-4-1.8-4-4s1.8-4 4-4c1.1 0 2.2.5 3 1.2"/>',item:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/>',char:'<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle>',domains:'<path d="M12 2l10 5-10 5-10-5 10-5z"></path><path d="M2 17l10 5 10-5"></path><path d="M2 12l10 5 10-5"></path>',journal:'<path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/>',download:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line>',upload:'<path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1="12" y1="3" x2="12" y2="15"></line>',gm:'<path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>',identity:'<path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14 2z"/>',lock:'<path d="M12 17h.01M10 21h4a2 2 0 0 0 2-2v-6a2 2 0 0 0-2-2H10a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2zm2-10V7a4 4 0 1 0-8 0v4" />',heart:'<path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z" />',monster:'<path d="M12 2c-4 0-8 3-8 8 0 3 2 5 2 8h12c0-3 2-5 2-8 0-5-4-8-8-8z"/><circle cx="9" cy="10" r="1.5"/><circle cx="15" cy="10" r="1.5"/><path d="M10 16a2 2 0 0 0 4 0"/>',adventure:'<path d="M2 22l2.5-10 2.5 10 2.5-10 2.5 10 2.5-10 2.5 10 2.5-10 2.5 10"/><path d="M12 2L2 22"/><path d="M12 2l10 20"/>',xp:'<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>',party:'<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>',image:'<rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><circle cx="8.5" cy="8.5" r="1.5"/><polyline points="21 15 16 10 5 21"/>',video:'<polygon points="23 7 16 12 23 17 23 7"/><rect x="1" y="5" width="15" height="14" rx="2" ry="2"/>',users:'<path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/>',npc:'<path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle><line x1="12" y1="11" x2="12" y2="13"></line><line x1="8" y1="11" x2="16" y2="11"></line>',d20:'<path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>'},li={knowledge:{label:"",icon:Ve.knowledge,color:"#4a4a4a",subColor:"#78716c"},trait:{label:"",icon:Ve.trait,color:"#064e3b",subColor:"#065f46"},mastery:{label:"",icon:Ve.mastery,color:"#713f12",subColor:"#854d0e"},skill:{label:"",icon:Ve.skill,color:"#1c1917",subColor:"#44403c"},source:{label:"",icon:Ve.source,color:"#581c87",subColor:"#6b21a8"},technique:{label:"",icon:Ve.technique,color:"#be185d",subColor:"#db2777"},item:{label:"",icon:Ve.item,color:"#0f172a",subColor:"#334155"},monster:{label:"",icon:Ve.monster,color:"#7f1d1d",subColor:"#991b1b"},npc:{label:"NPC",icon:Ve.npc,color:"#1e3a8a",subColor:"#3b82f6"}},Qw={physique:"",attention:"",movement:"",thinking:"",influence:"",will:""},vf=[0,4,4,8,12,16,20],cc={characterId:"default",tab:"sheet",gmMode:!1,xp:{total:0,spent:0},stats:{physique:1,attention:1,movement:1,thinking:1,influence:1,will:1},trackers:{hp:6,inspiration:6},info:{name:"",class:"",race:"",desc:"",avatar:""},background:{character:"",aesthetic:"",feature:"",motivation:"",conflict:"",secret:"",conscious:"",unconscious:"",weakness:""},abilities:[],domains:[],inventory:[],inventoryText:"",journal:"",scannedIds:[]},Jx={adventures:[],currentAdventureId:null},S0="53ded55dce3c74e974b0c7aecfd1b2a16e13fdf3dcb6e0e5660e8d861e274613",T0="4d695dc1df2188ea3c0f82aef729ae8e11cc683e3e86a1b9e97233c380cd2fbf",Qe=({path:r,size:e=24,className:i=""})=>A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,dangerouslySetInnerHTML:{__html:r}}),Pn=Pe.memo(({value:r,onCommit:e,className:i,placeholder:o,isTextarea:f=!1})=>{const[m,x]=Pe.useState(r),v=Pe.useRef(null);Pe.useEffect(()=>{x(r)},[r]);const E=()=>{f&&v.current&&(v.current.style.height="auto",v.current.style.height=v.current.scrollHeight+"px")};Pe.useLayoutEffect(()=>{E()},[m,f]),Pe.useEffect(()=>{if(f){const N=setTimeout(E,100);return window.addEventListener("resize",E),()=>{clearTimeout(N),window.removeEventListener("resize",E)}}},[f]);const w=N=>x(N.target.value),T=()=>{m!==r&&e(String(m))};return f?A.jsx("textarea",{ref:v,value:m,onChange:w,onBlur:T,placeholder:o,className:`resize-none overflow-hidden ${i}`}):A.jsx("input",{type:"text",value:m,onChange:w,onBlur:T,placeholder:o,className:i})}),mg=Pe.memo(({value:r,onChange:e,placeholder:i,className:o,minRows:f=1})=>{const m=Pe.useRef(null),x=()=>{m.current&&(m.current.style.height="auto",m.current.style.height=m.current.scrollHeight+"px")};return Pe.useEffect(()=>{x()},[r]),Pe.useEffect(()=>{const v=setTimeout(x,100);return()=>clearTimeout(v)},[]),A.jsx("textarea",{ref:m,value:r,onChange:e,placeholder:i,rows:f,className:`resize-none overflow-hidden ${o}`})}),Os=({onClick:r,iconPath:e,label:i,active:o,colorClass:f="bg-white",activeClass:m="bg-stone-800 text-white"})=>A.jsxs("button",{onClick:r,className:`p-3 flex justify-center items-center rounded-xl shadow-md transition-all active:scale-95 group relative border border-stone-200 ${o?m:f+" text-stone-600 hover:text-stone-900"}`,children:[A.jsx(Qe,{path:e,size:20}),A.jsxs("span",{className:"hidden lg:block absolute right-full mr-4 px-3 py-1.5 bg-stone-900 text-white text-xs font-bold rounded shadow-lg opacity-0 group-hover:opacity-100 whitespace-nowrap pointer-events-none z-[100] transition-opacity duration-200 border border-stone-700",children:[i,A.jsx("span",{className:"absolute top-1/2 right-[-4px] -mt-1 border-4 border-transparent border-l-stone-900"})]})]}),ET=({label:r,val:e,onInc:i,onDec:o})=>A.jsxs("div",{className:"flex flex-col items-center justify-center p-2 bg-stone-50 rounded-lg border border-stone-200 h-24",children:[A.jsx("span",{className:"text-[10px] uppercase font-bold text-stone-500 mb-1",children:r}),A.jsxs("div",{className:"flex items-center gap-3",children:[e>1&&A.jsx("button",{onClick:o,className:"w-8 h-8 rounded-full bg-stone-200 hover:bg-red-100 text-stone-600 hover:text-red-600 flex items-center justify-center transition-colors shadow-sm",children:A.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:A.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})}),e<=1&&A.jsx("div",{className:"w-8 h-8"})," ",A.jsx("div",{className:"text-4xl font-header font-bold text-stone-800 w-8 text-center",children:e}),e<6&&A.jsx("button",{onClick:i,className:"w-8 h-8 rounded-full bg-stone-200 hover:bg-emerald-100 text-stone-600 hover:text-emerald-600 flex items-center justify-center transition-colors shadow-sm",children:A.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[A.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),A.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})}),e>=6&&A.jsx("div",{className:"w-8 h-8"})," "]})]}),vT=({info:r,updateState:e,onQrExport:i,onJsonExport:o})=>A.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end border-b-4 border-stone-800 pb-4 mb-6",children:[A.jsxs("div",{className:"w-full md:w-1/2",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[A.jsx("label",{className:"text-[10px] font-bold text-stone-400 uppercase",children:""}),A.jsxs("div",{className:"flex gap-1",children:[o&&A.jsx("button",{onClick:o,className:"bg-stone-100 hover:bg-stone-200 text-stone-500 hover:text-stone-800 p-1 rounded-md transition-colors",title:" JSON ",children:A.jsx(Qe,{path:Ve.download,size:14})}),i&&A.jsx("button",{onClick:i,className:"bg-stone-100 hover:bg-stone-200 text-stone-500 hover:text-stone-800 p-1 rounded-md transition-colors",title:"QR  ",children:A.jsx(Qe,{path:Ve.qr,size:14})})]})]}),A.jsx(Pn,{value:r.name,onCommit:f=>e("info.name",f),className:"w-full text-3xl md:text-4xl font-header font-bold ghost-input",placeholder:""})]}),A.jsxs("div",{className:"flex gap-4 w-full md:w-1/2 mt-4 md:mt-0 items-end",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"text-[10px] font-bold text-stone-400 uppercase",children:""}),A.jsx(Pn,{value:r.class,onCommit:f=>e("info.class",f),className:"w-full font-header font-bold ghost-input"})]}),A.jsxs("div",{className:"flex-1",children:[A.jsx("label",{className:"text-[10px] font-bold text-stone-400 uppercase",children:""}),A.jsx(Pn,{value:r.race,onCommit:f=>e("info.race",f),className:"w-full font-header font-bold ghost-input"})]})]})]}),CT=({image:r,onImageChange:e})=>{const i=Pe.useRef(null),o=v=>new Promise(E=>{const w=new FileReader;w.onload=T=>{var D;const N=new Image;N.onload=()=>{const P=document.createElement("canvas"),G=P.getContext("2d"),H=500;let ye=N.width,te=N.height;ye>te?ye>H&&(te*=H/ye,ye=H):te>H&&(ye*=H/te,te=H),P.width=ye,P.height=te,G==null||G.drawImage(N,0,0,ye,te),E(P.toDataURL("image/jpeg",.7))},N.src=(D=T.target)==null?void 0:D.result},w.readAsDataURL(v)}),f=async v=>{var w;const E=(w=v.target.files)==null?void 0:w[0];if(E)try{const T=await o(E);e(T)}catch(T){console.error(T),alert("  ")}},m=()=>{var v;(v=i.current)==null||v.click()},x=v=>{v.stopPropagation(),e("")};return A.jsxs("div",{className:"w-full aspect-square relative group mb-4",children:[A.jsx("input",{type:"file",ref:i,onChange:f,accept:"image/*",style:{display:"none"}}),A.jsx("div",{onClick:m,className:`
          w-full h-full rounded-xl border-2 overflow-hidden cursor-pointer transition-all
          ${r?"border-stone-800":"border-dashed border-stone-300 hover:border-stone-400 hover:bg-stone-50"}
          flex items-center justify-center relative
        `,children:r?A.jsxs(A.Fragment,{children:[A.jsx("img",{src:r,alt:"Avatar",className:"w-full h-full object-cover"}),A.jsx("div",{className:"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:A.jsx("span",{className:"text-white text-xs font-bold uppercase tracking-widest bg-black/50 px-2 py-1 rounded",children:""})})]}):A.jsxs("div",{className:"flex flex-col items-center gap-2 text-stone-400",children:[A.jsx(Qe,{path:Ve.image,size:32}),A.jsx("span",{className:"text-xs font-bold uppercase",children:" "})]})}),r&&A.jsx("button",{onClick:x,className:"absolute -top-2 -right-2 bg-white text-stone-400 hover:text-red-500 rounded-full p-1 shadow border border-stone-200 z-10",title:" ",children:A.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:[A.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),A.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]})},$x=({label:r,value:e,maxValue:i,colorClass:o,textClass:f,onInc:m,onDec:x,suffix:v})=>A.jsxs("div",{className:`p-2 rounded-lg border ${o} text-center flex flex-col justify-center h-full`,children:[A.jsx("span",{className:`text-[10px] uppercase font-bold opacity-70 mb-1 ${f.replace("text-","text-opacity-70 text-")}`,children:r}),A.jsxs("div",{className:"flex justify-center items-center gap-2 md:gap-3",children:[x&&A.jsx("button",{onClick:x,className:`w-6 h-6 rounded hover:bg-black/10 flex items-center justify-center ${f}`,children:A.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:A.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})}),A.jsxs("div",{className:`text-2xl font-header font-black ${f}`,children:[e," ",i!==void 0&&A.jsxs("span",{className:"text-sm font-normal opacity-60",children:["/ ",i]})," ",v]}),m&&A.jsx("button",{onClick:m,className:`w-6 h-6 rounded hover:bg-black/10 flex items-center justify-center ${f}`,children:A.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",children:[A.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),A.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})]})]}),AT=({state:r,updateState:e,notify:i})=>{const o=r.xp.total-r.xp.spent,f=(E,w)=>{const T=r.stats[E],N=T+w;if(N<1||N>6)return;const D=()=>{if(e(`stats.${E}`,N),E==="physique"){const P=N*6;e("trackers.hp",P)}};if(r.gmMode){D();return}if(w>0){const P=T*4;o>=P?(e("xp.spent",r.xp.spent+P),D()):i&&i("error"," ",` ${P} `)}else{const P=(T-1)*4;e("xp.spent",Math.max(0,r.xp.spent-P)),D()}},m=E=>{const w=r.stats.physique*6,T=r.trackers.hp+E;T<0||T>w||e("trackers.hp",T)},x=E=>{const T=r.trackers.inspiration+E;T<0||T>6||e("trackers.inspiration",T)},v=r.stats.physique*20;return A.jsxs("div",{className:"w-full md:w-[35%] flex flex-col gap-4",children:[A.jsx(CT,{image:r.info.avatar,onImageChange:E=>e("info.avatar",E)}),A.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[A.jsx("div",{className:"col-span-2",children:A.jsx($x,{label:"",value:r.trackers.hp,maxValue:r.stats.physique*6,colorClass:"bg-red-50 border-red-200",textClass:"text-red-900",onDec:()=>m(-1),onInc:()=>m(1)})}),A.jsx($x,{label:"",value:r.trackers.inspiration,maxValue:6,colorClass:"bg-amber-50 border-amber-200",textClass:"text-amber-900",onDec:()=>x(-1),onInc:()=>x(1)}),A.jsxs("div",{className:"p-2 rounded-lg border bg-blue-50 border-blue-200 text-center flex flex-col justify-center",children:[A.jsx("span",{className:"text-[10px] uppercase font-bold text-blue-800/70",children:""}),A.jsxs("div",{className:"text-2xl font-header font-black text-blue-900",children:[r.stats.movement*2,""]})]}),A.jsxs("div",{className:"col-span-2 p-2 rounded-lg border bg-stone-100 border-stone-200 text-center flex justify-between items-center px-4",children:[A.jsx("span",{className:"text-[10px] uppercase font-bold text-stone-500",children:""}),A.jsxs("div",{className:"text-xl font-header font-bold text-stone-700",children:[v," ",A.jsx("span",{className:"text-sm font-sans font-normal text-stone-400",children:""})]})]})]}),A.jsxs("div",{className:"bg-stone-800 text-white rounded-lg p-3 shadow-lg",children:[A.jsxs("div",{className:"flex justify-between items-center mb-1",children:[A.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-stone-400",children:" "}),A.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-stone-500",children:""})]}),A.jsxs("div",{className:"flex justify-between items-baseline",children:[A.jsx("span",{className:"text-3xl font-header font-bold text-white",children:r.xp.total-r.xp.spent}),r.gmMode?A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsx("button",{onClick:()=>e("xp.total",Math.max(0,r.xp.total-1)),className:"text-stone-500 hover:text-white px-1",children:"-"}),A.jsx(Pn,{value:r.xp.total,onCommit:E=>e("xp.total",parseInt(E)||0),className:"text-xl font-header font-bold text-stone-500 w-12 text-center bg-transparent border-b border-stone-600 focus:text-white"}),A.jsx("button",{onClick:()=>e("xp.total",r.xp.total+1),className:"text-stone-500 hover:text-white px-1",children:"+"})]}):A.jsx("span",{className:"text-xl font-header font-bold text-stone-500",children:r.xp.total})]})]}),A.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(r.stats).map(E=>A.jsx(ET,{label:Qw[E]||E,val:r.stats[E],onInc:()=>f(E,1),onDec:()=>f(E,-1)},E))})]})},ST=({abilities:r})=>{const e=r.filter(f=>f.trim()!==""),i=f=>{const m=f.match(/^\[(.*?)\]/);if(m){const x=m[1],v=Object.values(li).find(E=>E.label===x);if(v)return v.color}return"#1c1917"},o=f=>{const m=f.match(/^\[(.*?)\]\s*(.*?)((\s*\[OD:.*?\]|\s*\[VDH:.*?\])*):\s*(.*)$/s);if(m){const v=m[3],E=v?v.match(/\[OD:(.*?)\]/):null,w=v?v.match(/\[VDH:(.*?)\]/):null;return{type:m[1],name:m[2],ap:E?E[1]:null,insp:w?w[1]:null,desc:m[5]}}const x=f.match(/^\[(.*?)\]\s*(.*?):\s*(.*)$/s);return x?{type:x[1],name:x[2],ap:null,insp:null,desc:x[3]}:{type:"?",name:"",ap:null,insp:null,desc:f}};return A.jsx("div",{className:"w-full md:w-[65%] flex flex-col gap-6 pl-0 md:pl-6 md:border-l border-stone-200 border-dashed",children:A.jsxs("div",{className:"min-h-[400px]",children:[A.jsx("div",{className:"flex justify-between items-center border-b-2 border-stone-200 pb-1 mb-4",children:A.jsx("h3",{className:"font-header font-bold uppercase text-stone-800",children:""})}),A.jsxs("div",{className:"flex flex-col gap-1",children:[e.map((f,m)=>{const x=i(f),v=o(f);return A.jsxs("div",{className:"flex gap-3 items-start group border-b border-stone-200 pb-2 mb-1 last:border-0",children:[A.jsx("span",{className:"mt-2.5 w-2 h-2 rounded-full shrink-0 shadow-sm",style:{backgroundColor:x}}),A.jsx("div",{className:"w-full text-sm font-hand p-1 leading-relaxed text-stone-900 select-text whitespace-pre-wrap",children:v.name?A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"flex flex-wrap items-baseline gap-2 mb-1",children:[A.jsxs("span",{className:"font-bold text-stone-800",children:["[",v.type,"] ",v.name]}),v.ap&&A.jsxs("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-stone-100 border border-stone-300 text-stone-600",children:[": ",v.ap]}),v.insp&&A.jsxs("span",{className:"text-[10px] font-bold px-1.5 py-0.5 rounded bg-amber-50 border border-amber-200 text-amber-700",children:[": ",v.insp]}),A.jsx("span",{className:"font-bold text-stone-800",children:":"})]}),A.jsx("span",{className:"text-stone-700",children:v.desc})]}):A.jsx("span",{className:"text-stone-700",children:v.desc})})]},m)}),e.length===0&&A.jsxs("div",{className:"text-center text-stone-400 text-sm italic py-12 bg-stone-50 rounded border border-dashed border-stone-200",children:[" . ",A.jsx("br",{}),'    "".']})]})]})})},TT=({info:r,background:e,updateState:i})=>A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"mb-8 p-4 border border-stone-200 rounded-lg bg-stone-50",children:[A.jsx("div",{className:"flex items-center gap-2 mb-1",children:A.jsx("label",{className:"text-[10px] font-bold text-stone-400 uppercase",children:"  "})}),A.jsx(Pn,{isTextarea:!0,value:r.desc,onCommit:o=>i("info.desc",o),className:"w-full text-stone-800 text-sm font-hand ghost-input min-h-[80px] p-2 resize-none leading-relaxed",placeholder:"   ..."})]}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[{l:"",k:"character",ph:",  ..."},{l:"",k:"aesthetic",ph:" ,  ..."},{l:"",k:"feature",ph:"  ..."}].map(o=>A.jsxs("div",{className:"border-t-2 border-stone-200 pt-2",children:[A.jsx("label",{className:"block text-[10px] font-bold text-stone-400 uppercase tracking-wider mb-1",children:o.l}),A.jsx(Pn,{isTextarea:!0,value:e[o.k],onCommit:f=>i(`background.${o.k}`,f),className:"w-full font-hand text-sm ghost-input p-2 resize-none",placeholder:o.ph})]},o.k))})]}),NT=({background:r,updateState:e})=>A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-12",children:[A.jsxs("div",{className:"space-y-6",children:[A.jsx("h3",{className:"font-header font-bold text-stone-800 text-lg border-b border-stone-200 pb-1",children:""}),A.jsxs("div",{className:"pl-4 border-l-4 border-blue-500",children:[A.jsx("div",{className:"flex items-center gap-2 mb-1",children:A.jsx("label",{className:"text-xs font-bold text-stone-500 uppercase",children:""})}),A.jsx(Pn,{isTextarea:!0,value:r.motivation,onCommit:i=>e("background.motivation",i),className:"w-full text-stone-800 text-sm font-hand ghost-input p-2 resize-none",placeholder:"  ?"})]}),A.jsxs("div",{className:"pl-4 border-l-4 border-amber-500",children:[A.jsx("div",{className:"flex items-center gap-2 mb-1",children:A.jsx("label",{className:"text-xs font-bold text-stone-500 uppercase",children:""})}),A.jsx(Pn,{isTextarea:!0,value:r.conflict,onCommit:i=>e("background.conflict",i),className:"w-full text-stone-800 text-sm font-hand ghost-input p-2 resize-none",placeholder:"   ?"})]}),A.jsx("div",{className:"pt-4",children:A.jsxs("div",{className:"p-4 border border-stone-300 rounded-xl bg-stone-50/30",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-1 text-stone-800",children:[A.jsx(Qe,{path:Ve.lock,size:14}),A.jsx("label",{className:"text-xs font-bold uppercase",children:""})]}),A.jsx(Pn,{isTextarea:!0,value:r.secret,onCommit:i=>e("background.secret",i),className:"w-full text-stone-800 text-sm font-hand ghost-input p-2 resize-none",placeholder:" ..."})]})})]}),A.jsxs("div",{className:"bg-stone-800 text-stone-200 p-6 rounded-xl shadow-inner h-full flex flex-col",children:[A.jsx("h3",{className:"font-header font-bold text-white/90 text-lg border-b border-stone-600 pb-1 mb-6",children:" "}),A.jsxs("div",{className:"mb-6",children:[A.jsx("label",{className:"block text-[10px] font-bold text-stone-400 uppercase mb-1",children:" "}),A.jsx(Pn,{isTextarea:!0,value:r.conscious,onCommit:i=>e("background.conscious",i),className:"w-full text-sm font-hand p-2 resize-none rounded border border-transparent bg-transparent text-stone-100 placeholder-stone-500 transition-all hover:bg-white/5 hover:border-white/20 focus:bg-white/10 focus:border-white/40 focus:outline-none",placeholder:" ..."})]}),A.jsxs("div",{className:"mb-8",children:[A.jsx("label",{className:"block text-[10px] font-bold text-stone-400 uppercase mb-1",children:" "}),A.jsx(Pn,{isTextarea:!0,value:r.unconscious,onCommit:i=>e("background.unconscious",i),className:"w-full text-sm font-hand p-2 resize-none rounded border border-transparent bg-transparent text-stone-100 placeholder-stone-500 transition-all hover:bg-white/5 hover:border-white/20 focus:bg-white/10 focus:border-white/40 focus:outline-none",placeholder:" ..."})]}),A.jsxs("div",{className:"border-t border-stone-600 pt-4 mt-auto",children:[A.jsxs("div",{className:"flex items-center gap-2 text-red-400 mb-2",children:[A.jsx(Qe,{path:Ve.heart,size:16}),A.jsx("label",{className:"text-xs font-bold uppercase",children:""})]}),A.jsx(Pn,{isTextarea:!0,value:r.weakness,onCommit:i=>e("background.weakness",i),className:"w-full text-sm font-hand p-2 resize-none rounded border border-transparent bg-transparent text-red-100 placeholder-red-500/50 transition-all hover:bg-red-900/20 hover:border-red-500/30 focus:bg-red-900/30 focus:border-red-500/50 focus:outline-none",placeholder:"..."})]})]})]}),IT=({state:r,updateState:e,notify:i,onQrExport:o,onJsonExport:f})=>A.jsxs("div",{className:"bg-white shadow-2xl p-4 md:p-12 min-h-[297mm] rounded-none md:rounded-lg mb-8 relative",children:[A.jsx(vT,{info:r.info,updateState:e,onQrExport:o,onJsonExport:f}),A.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[A.jsx(AT,{state:r,updateState:e,notify:i}),A.jsx(ST,{abilities:r.abilities,updateState:e})]})]}),RT=({state:r,updateState:e})=>A.jsxs("div",{className:"sheet-page bg-white shadow-2xl p-4 md:p-12 min-h-[auto] md:min-h-[297mm] rounded-none md:rounded-lg",children:[A.jsxs("div",{className:"flex items-center gap-4 mb-8 pb-2 border-b-4 border-stone-800",children:[A.jsx("div",{className:"bg-stone-800 text-white p-2 rounded",children:A.jsx(Qe,{path:Ve.identity,size:24})}),A.jsx("h2",{className:"font-header font-black text-2xl md:text-3xl text-stone-800 uppercase",children:" "}),A.jsx("div",{className:"hidden md:block ml-auto text-sm text-stone-400 font-header uppercase tracking-widest",children:""})]}),A.jsx(TT,{info:r.info,background:r.background,updateState:e}),A.jsx(NT,{background:r.background,updateState:e})]}),Jw=({text:r})=>{Pe.useMemo(()=>{if(!r)return null;const i=/(?:^|\s)((?:\d+\s+)?(?:||||||[]|)[-]*(?:\s+\d+)?)(?=$|[\s.,!?;:])/gi;return r.split(/(\s+|[.,!?;:])/g).map((f,m)=>i.test(f)?(i.lastIndex=0,A.jsx("b",{className:"text-stone-800",children:f},m)):f)},[r]);const e=i=>{let o=[{text:i,type:"normal"}];const f=(E,w)=>{const T=[];o.forEach(N=>{if(N.type!=="normal"){T.push(N);return}let D=N.text,P;E.lastIndex=0;let G=0;for(;(P=E.exec(D))!==null;){P[1];const H=P[0],ye=P.index;ye+H.length;let te=H,$="";/^\s/.test(H)&&ye>0&&($=H.charAt(0),te=H.slice(1)),ye>G&&T.push({text:D.slice(G,ye),type:"normal"}),$&&T.push({text:$,type:"normal"}),T.push({text:te,type:w}),G=ye+H.length}G<D.length&&T.push({text:D.slice(G),type:"normal"})}),o=T},m="||||||[]|",x=new RegExp(`(?:\\d+\\s+(?:${m})[-]*)|(?:(?:${m})[-]*\\s+\\d+)|(?:(?:${m})[-]*)`,"gi");return f(x,"bold"),f(/(?:|||)[-]*/gi,"underline"),o.map((E,w)=>E.type==="bold"?A.jsx("b",{className:"text-stone-900 font-black",children:E.text},w):E.type==="underline"?A.jsx("span",{className:"border-b-2 border-stone-800 font-bold",children:E.text},w):A.jsx("span",{children:E.text},w))};return A.jsx(A.Fragment,{children:e(r)})},to=Pe.memo(({data:r,styleData:e,isLocked:i,isPurchased:o,onBuy:f,onEdit:m,onDelete:x,canQR:v,qrType:E,gmMode:w,mode:T,customCost:N,originalCost:D})=>{const P=Pe.useRef(null),G=Pe.useRef(null),H=T==="inventory"?["item"]:Object.keys(li).filter(ne=>ne!=="item"&&ne!=="monster"&&ne!=="npc"),ye=(ne,ge)=>{if(!ne)return;const Ie=ge?16:9,oe=ge?10:7;ne.style.fontSize=`${Ie}px`;const me=parseFloat(window.getComputedStyle(ne).lineHeight||"1.2")*2+2,Ge=()=>ne.scrollWidth>ne.clientWidth||ne.scrollHeight>me;let rt=Ie;for(;Ge()&&rt>oe;)rt--,ne.style.fontSize=`${rt}px`};Pe.useLayoutEffect(()=>{P.current&&(document.activeElement!==P.current&&(P.current.innerText=r.name),ye(P.current,!0)),G.current&&ye(G.current,!1)},[r.name,e.label,w]);const te=ne=>{ye(ne.currentTarget,!0)},$=ne=>{const ge=ne.currentTarget.innerText;ge!==r.name&&m("name",ge)},F=r.type,q=F==="technique"||F==="monster"||F==="npc",Z=F==="mastery"||F==="technique"||F==="monster"||F==="npc",U=q||Z,k=r.level===0?"-":r.level===1?2:r.level===2?4:r.level===3?8:r.level===4?14:r.level===5?22:32,Y=N!==void 0?N:k,Q=D!==void 0&&N!==void 0&&D>N,Ee=F==="monster"||F==="npc"?"ATK":"",we=F==="monster"||F==="npc"?"HP":"";return A.jsxs("div",{onClick:f,className:`rpg-card w-[220px] shrink-0 cursor-pointer relative ${o?"purchased":""} ${i&&!w?"locked":""}`,children:[A.jsxs("div",{className:"card-header",style:{backgroundColor:e.color,borderColor:"#1c1917"},children:[A.jsx("div",{ref:P,className:`card-title outline-none min-w-[50px] ${w?"cursor-text border-b border-white/30 hover:bg-white/10":""}`,contentEditable:w,onInput:te,onBlur:$,suppressContentEditableWarning:!0,spellCheck:!1,children:r.name}),A.jsx("div",{className:"card-icon",children:A.jsx(Qe,{path:e.icon,size:18})})]}),A.jsxs("div",{className:"card-subtitle flex justify-between items-center",style:{backgroundColor:e.subColor,borderColor:"#1c1917"},children:[w&&T!=="inventory"?A.jsx("select",{className:"bg-transparent text-white w-24 text-[9px] border border-white/30 rounded",value:r.type,onClick:ne=>ne.stopPropagation(),onChange:ne=>m("type",ne.target.value),children:H.map(ne=>A.jsx("option",{value:ne,className:"text-black",children:li[ne].label},ne))}):A.jsx("span",{ref:G,children:e.label}),(w||o)&&A.jsx("button",{onClick:ne=>{ne.stopPropagation(),v(E,r)},className:"ml-auto text-white/80 hover:text-white",title:"QR ",children:A.jsx(Qe,{path:Ve.qr,size:14})})]}),U&&A.jsxs("div",{className:"bg-stone-100 text-[9px] px-2 py-1 flex justify-between items-center text-stone-600 border-b border-stone-200",children:[q&&A.jsxs("div",{className:"flex items-center gap-1",children:[A.jsxs("span",{children:[Ee,":"]}),w?A.jsx(Pn,{className:"w-6 std-input text-[9px] text-center p-0",placeholder:"-",value:r.apCost||"",onCommit:ne=>m("apCost",ne)}):A.jsx("span",{children:r.apCost||"-"})]}),Z&&A.jsxs("div",{className:"flex items-center gap-1 ml-auto",children:[A.jsxs("span",{children:[we,":"]}),w?A.jsx(Pn,{className:"w-6 std-input text-[9px] text-center p-0",placeholder:"-",value:r.inspCost||"",onCommit:ne=>m("inspCost",ne)}):A.jsx("span",{children:r.inspCost||"-"})]})]}),A.jsxs("div",{className:"card-content",children:[w?A.jsxs(A.Fragment,{children:[A.jsx(Pn,{isTextarea:!0,className:"w-full text-[10px] bg-white p-1 std-input min-h-[100px]",value:r.description,onCommit:ne=>m("description",ne)}),A.jsx("div",{className:"flex justify-end mt-2 pt-2 border-t border-stone-100",children:A.jsx("button",{className:"text-red-500 hover:text-red-700 p-1 bg-red-50 rounded border border-red-200",onClick:ne=>{ne.stopPropagation(),x()},title:"",children:A.jsx(Qe,{path:Ve.trash,size:16})})})]}):A.jsx("div",{className:"whitespace-pre-wrap flex-1",children:A.jsx(Jw,{text:r.description})}),!w&&T==="inventory"&&A.jsx("div",{className:"mt-auto pt-2 flex justify-end border-t border-stone-100",children:A.jsx("button",{className:"text-stone-400 hover:text-red-500 p-1",onClick:ne=>{ne.stopPropagation(),x()},title:"",children:A.jsx(Qe,{path:Ve.trash,size:14})})}),!w&&!o&&!i&&T!=="inventory"&&r.level!==void 0&&A.jsxs("div",{className:"mt-auto pt-2 text-center text-xs font-bold text-stone-400 uppercase border-t border-stone-100",children:[": ",Q?A.jsxs(A.Fragment,{children:[A.jsx("span",{className:"line-through decoration-red-400 opacity-50 mr-2",children:D}),A.jsx("span",{className:"text-emerald-600 font-black",children:Y})]}):Y," "]})]})]})}),OT=({state:r,setState:e,updateState:i,handleQR:o,notify:f})=>{const m=(T,N,D)=>e(P=>({...P,inventory:P.inventory.map(G=>G.id===T?{...G,[N]:D}:G)})),x=T=>{const N=r.inventory.find(P=>P.id===T),D=(N==null?void 0:N.name)||"";f("confirm"," ?",` ,    ${D}?`,0,()=>{e(P=>({...P,inventory:P.inventory.filter(G=>G.id!==T)}))})},v=()=>{const T="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(r.inventory,null,2)),N=document.createElement("a");N.setAttribute("href",T),N.setAttribute("download","inventory.json"),document.body.appendChild(N),N.click(),N.remove()},E=(T,N)=>{const D=r.gmMode?void 0:{actionType:"delete_item",id:N.id};o(T,N,D)},w=()=>{const T=r.gmMode?void 0:{actionType:"clear_inventory"};o("inventory",r.inventory,T)};return A.jsxs("div",{className:"space-y-6",children:[A.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center print:hidden gap-4",children:[A.jsx("h2",{className:"text-2xl font-header font-bold uppercase text-stone-800",children:""}),A.jsxs("div",{className:"flex flex-wrap gap-2",children:[A.jsxs("button",{onClick:v,className:"bg-stone-200 text-stone-700 hover:bg-stone-300 px-3 py-1 rounded text-sm font-bold flex items-center gap-2",children:[A.jsx(Qe,{path:Ve.download,size:16})," JSON"]}),A.jsx("div",{className:"w-px bg-stone-300 mx-1"}),A.jsxs("button",{onClick:w,className:"bg-stone-800 text-white px-3 py-1 rounded text-sm font-bold flex items-center gap-2",children:[A.jsx(Qe,{path:Ve.qr,size:16})," QR "]})]})]}),A.jsxs("div",{className:"bg-stone-50 p-4 rounded border border-stone-200",children:[A.jsx("label",{className:"text-[10px] font-bold text-stone-400 uppercase",children:" ()"}),A.jsx(mg,{value:r.inventoryText,onChange:T=>i("inventoryText",T.target.value),className:"w-full text-sm font-hand min-h-[100px] ghost-input p-2",placeholder:", ..."})]}),A.jsx("div",{className:"flex flex-wrap gap-6 justify-center",children:r.inventory.map(T=>A.jsx(to,{data:T,styleData:li.item,isLocked:!1,isPurchased:!0,onBuy:()=>{},onEdit:(N,D)=>m(T.id,N,D),onDelete:()=>x(T.id),canQR:E,qrType:"item",gmMode:r.gmMode,mode:"inventory"},T.id))})]})},DT=({level:r,abilities:e,isLocked:i,gmMode:o,domainId:f,addAb:m,toggleBuy:x,updAb:v,delAb:E,handleQR:w,allowAdd:T=!0,calculateCost:N})=>{if(e.length===0&&!o)return null;const D=i&&!o?"filter blur-[3px] grayscale pointer-events-none select-none opacity-60":"";return A.jsxs("div",{className:`mb-8 transition-all duration-300 ${D}`,children:[A.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[A.jsx("div",{className:"h-px bg-stone-300 flex-1"}),A.jsxs("span",{className:"font-header font-bold text-stone-400 text-sm uppercase tracking-widest",children:["LVL ",r]}),A.jsx("div",{className:"h-px bg-stone-300 flex-1"}),o&&T&&A.jsx("button",{onClick:()=>m(f,r),className:"text-xs bg-stone-200 px-2 rounded hover:bg-stone-300 pointer-events-auto",children:"+"})]}),A.jsxs("div",{className:`
          flex items-center gap-6 py-6 px-4 -mx-4 md:mx-0 md:px-1 
          overflow-x-auto snap-x snap-mandatory [&::-webkit-scrollbar]:hidden
          lg:flex-wrap lg:overflow-visible lg:justify-center lg:mx-0 lg:px-0 lg:snap-none
        `,style:{scrollbarWidth:"none"},children:[e.map(P=>{const H=!i&&!P.purchased&&!o?"opacity-50 hover:opacity-100 transition-opacity":"",ye=N?N(P):void 0;return A.jsx("div",{className:`snap-center shrink-0 ${H}`,children:A.jsx(to,{data:P,styleData:li[P.type]||li.skill,isLocked:i,isPurchased:P.purchased,onBuy:()=>x(f,P.id),onEdit:(te,$)=>v(f,P.id,te,$),onDelete:()=>E(f,P.id),canQR:w,qrType:"ability",gmMode:o,mode:"domain",customCost:ye==null?void 0:ye.cost,originalCost:ye==null?void 0:ye.originalCost})},P.id)}),A.jsx("div",{className:"w-1 shrink-0 lg:hidden"})]})]})},$w=r=>{const{domain:e,gmMode:i,isShopMode:o,updateDomainName:f,updateDomainDesc:m,changeLvl:x,removeDomain:v,handleQR:E,onExport:w,allowAdd:T,party:N,onAssign:D,calculateCost:P}=r,G=e.level<6?vf[e.level+1]:0,H=e.level+1,ye=e.abilities.some($=>$.level===H),te=e.level<6&&(i||ye);return A.jsxs("div",{className:"relative",children:[A.jsxs("div",{className:"flex flex-col border-b-4 border-stone-800 mb-6 pb-2",children:[A.jsxs("div",{className:"flex justify-between items-end mb-2 gap-4 relative",children:[i?A.jsx(Pn,{className:"text-3xl font-header font-black uppercase bg-transparent flex-1 min-w-0 ghost-input relative z-0",value:e.name,onCommit:f}):A.jsx("h3",{className:"text-3xl font-header font-black uppercase text-stone-800",children:e.name}),A.jsxs("div",{className:"flex items-center gap-2 shrink-0 relative z-10",children:[o&&A.jsx("button",{onClick:w,className:"text-stone-400 hover:text-stone-600",title:"Export JSON",children:A.jsx(Qe,{path:Ve.download,size:20})}),A.jsx("button",{onClick:()=>E("domain",e),className:"text-stone-400 hover:text-stone-800",title:"QR ",children:A.jsx(Qe,{path:Ve.qr,size:24})}),(i||o)&&A.jsx("button",{type:"button",onClick:$=>{$.preventDefault(),$.stopPropagation(),v()},className:"bg-white hover:bg-red-50 text-stone-400 hover:text-red-500 border border-stone-200 px-2 py-1 rounded shadow-sm transition-colors cursor-pointer",title:" ",children:A.jsx(Qe,{path:Ve.trash,size:20})})]})]}),i&&N&&D&&A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx("span",{className:"text-[10px] font-bold text-stone-400 uppercase",children:":"}),A.jsxs("select",{value:e.assignedTo===void 0||e.assignedTo===null?"":e.assignedTo,onChange:$=>D($.target.value===""?null:Number($.target.value)),className:"text-xs font-bold text-stone-600 border border-stone-200 rounded px-2 py-1 bg-stone-50 focus:outline-none focus:border-stone-400",children:[A.jsx("option",{value:"",children:"--   --"}),N.map($=>A.jsx("option",{value:$.id,children:$.name},$.id))]})]}),i?A.jsx(Pn,{isTextarea:!0,className:"w-full text-sm italic bg-transparent ghost-input mb-4",value:e.description,onCommit:m}):A.jsx("p",{className:"text-stone-500 italic text-sm max-w-2xl mb-4",children:e.description}),A.jsx("div",{className:"flex flex-wrap justify-between items-center bg-stone-100 p-2 rounded-lg border border-stone-200 print:hidden",children:A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("span",{className:"text-[10px] font-bold text-stone-400 uppercase tracking-widest",children:" "}),A.jsxs("div",{className:"flex items-center bg-white rounded shadow-sm border border-stone-200",children:[A.jsx("button",{onClick:()=>x(-1),disabled:e.level<=0,className:"w-8 h-8 flex items-center justify-center text-stone-500 hover:text-red-500 hover:bg-red-50 disabled:opacity-30 disabled:hover:bg-transparent disabled:hover:text-stone-500 border-r border-stone-100 transition-colors",children:A.jsx(Qe,{path:'<line x1="5" y1="12" x2="19" y2="12"></line>',size:16})}),A.jsx("div",{className:"w-10 text-center font-header font-black text-xl text-stone-800 leading-none pt-1",children:e.level}),A.jsx("button",{onClick:()=>x(1),disabled:!te,className:"w-8 h-8 flex items-center justify-center text-stone-500 hover:text-emerald-500 hover:bg-emerald-50 disabled:opacity-30 disabled:hover:bg-transparent disabled:hover:text-stone-500 border-l border-stone-100 transition-colors",children:A.jsx(Qe,{path:'<line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line>',size:16})})]}),e.level<6&&A.jsxs("div",{className:"flex items-center text-xs font-bold text-stone-500 bg-white border border-stone-200 px-2 py-1 rounded shadow-sm",children:[". : ",A.jsxs("span",{className:"text-stone-800 ml-1",children:[G," XP"]})]})]})})]}),[1,2,3,4,5,6].map($=>A.jsx(DT,{level:$,abilities:e.abilities.filter(F=>F.level===$),isLocked:e.level<$,gmMode:i,domainId:e.id,addAb:(F,q)=>r.addAb(q),toggleBuy:(F,q)=>r.toggleBuy(q),updAb:(F,q,Z,U)=>r.updAb(q,Z,U),delAb:(F,q)=>r.delAb(q),handleQR:E,allowAdd:T,calculateCost:P},$))]})},ey=/\s+(I|II|III|IV|V|VI)$/i,ty=r=>{switch(r){case 1:return 2;case 2:return 4;case 3:return 8;case 4:return 14;case 5:return 22;case 6:return 32;default:return 0}},ea=r=>r.match(ey)?r.replace(ey,"").trim().toLowerCase():null,uc=(r,e,i=[])=>{const o=ty(e.level),f=ea(e.name);if(!f)return{cost:o,originalCost:o,isDiscounted:!1};const m=r.abilities.filter(E=>E.id!==e.id&&(E.purchased||i.find(w=>w.id===E.id))&&E.level<e.level&&ea(E.name)===f);if(m.length===0)return{cost:o,originalCost:o,isDiscounted:!1};const x=Math.max(...m.map(E=>ty(E.level)));return{cost:Math.max(0,o-x),originalCost:o,isDiscounted:!0}},MT=({state:r,setState:e,updateState:i,handleQR:o,notify:f})=>{const[m,x]=Pe.useState(!1),[v,E]=Pe.useState(null);Pe.useEffect(()=>{r.domains.length>0?(v===null||!r.domains.find(F=>F.id===v))&&E(r.domains[0].id):E(null)},[r.domains,v]);const w=F=>{const q=[];F.forEach(Z=>{const U=Z.abilities.filter(Ee=>Ee.purchased),k={},Y=[];U.forEach(Ee=>{const we=ea(Ee.name);we?(k[we]||(k[we]=[]),k[we].push(Ee)):Y.push(Ee)});const Q=Ee=>{let we="";const ne=Ee.type;return ne==="technique"&&Ee.apCost&&(we+=` [OD:${Ee.apCost}]`),(ne==="mastery"||ne==="technique")&&Ee.inspCost&&(we+=` [VDH:${Ee.inspCost}]`),`[${li[Ee.type].label}] ${Ee.name}${we}: ${Ee.description}`};Y.forEach(Ee=>{q.push(Q(Ee))}),Object.values(k).forEach(Ee=>{if(Ee.length>0){Ee.sort((ne,ge)=>ge.level-ne.level);const we=Ee[0];q.push(Q(we))}})}),i("abilities",q)},T=F=>{const q=r.domains.find(k=>k.id===F);if(!q)return;let Z=0;if(!r.gmMode){for(let k=1;k<=q.level;k++)Z+=vf[k]||0;q.abilities.forEach(k=>{if(k.purchased){const{cost:Y}=uc(q,k);Z+=Y}})}const U=r.gmMode?` ,    ${q.name}?`:` ,    ${q.name}?   ${Z} .`;f("confirm"," ?",U,0,()=>{!r.gmMode&&Z>0&&i("xp.spent",Math.max(0,r.xp.spent-Z)),e(k=>({...k,domains:k.domains.filter(Y=>Y.id!==F)}))})},N=(F,q)=>{const Z=r.domains.find(Y=>Y.id===F);if(!Z)return;const U=Z.level,k=U+q;if(!(k<0||k>6)){if(r.gmMode){const Y=r.domains.map(Q=>Q.id===F?{...Q,level:k}:Q);e(Q=>({...Q,domains:Y}));return}if(q>0){if(U>0&&!Z.abilities.some(we=>we.level===U&&we.purchased)){f("error","",`  ${k}   ${U}- .`);return}const Y=vf[k];r.xp.total-r.xp.spent>=Y?(i("xp.spent",r.xp.spent+Y),e(Ee=>({...Ee,domains:Ee.domains.map(we=>we.id===F?{...we,level:k}:we)}))):f("error"," ",` ${Y}    ${k}`)}else{const Y=vf[U],Q=Z.abilities.filter(ge=>ge.level===U&&ge.purchased);let Ee=0;Q.forEach(ge=>{const{cost:Ie}=uc(Z,ge);Ee+=Ie});const we=Y+Ee;i("xp.spent",Math.max(0,r.xp.spent-we));const ne=r.domains.map(ge=>ge.id===F?{...ge,level:k,abilities:ge.abilities.map(Ie=>Ie.level===U?{...Ie,purchased:!1}:Ie)}:ge);e(ge=>(w(ne),{...ge,domains:ne}))}}},D=(F,q)=>e(Z=>({...Z,domains:Z.domains.map(U=>U.id===F?{...U,abilities:[...U.abilities,{id:Date.now()+Math.random(),name:"",description:"...",type:"skill",level:q,apCost:"1",inspCost:"0",purchased:!1}]}:U)})),P=(F,q,Z,U)=>e(k=>({...k,domains:k.domains.map(Y=>Y.id===F?{...Y,abilities:Y.abilities.map(Q=>Q.id===q?{...Q,[Z]:U}:Q)}:Y)})),G=(F,q)=>{f("confirm"," ?"," ?",0,()=>{e(Z=>({...Z,domains:Z.domains.map(U=>U.id===F?{...U,abilities:U.abilities.filter(k=>k.id!==q)}:U)}))})},H=(F,q)=>{var k;const Z=r.domains.find(Y=>Y.id===F);if(!Z)return;const U=Z.abilities.find(Y=>Y.id===q);if(U&&!(!m&&!r.gmMode))if(U.purchased){if(!r.gmMode&&Z.level>U.level&&Z.abilities.filter(we=>we.level===U.level&&we.purchased).length<=1){f("error"," ",`  (${Z.level})   .`);return}const Y=ea(U.name);if(Y){const Ee=Z.abilities.find(we=>we.purchased&&we.level>U.level&&ea(we.name)===Y);if(Ee&&!r.gmMode){f("error"," ",`   "${Ee.name}".`);return}}const Q=()=>{const{cost:Ee}=uc(Z,U);r.gmMode||i("xp.spent",Math.max(0,r.xp.spent-Ee));const we=r.domains.map(ne=>ne.id===F?{...ne,abilities:ne.abilities.map(ge=>ge.id===q?{...ge,purchased:!1}:ge)}:ne);e(ne=>(w(we),{...ne,domains:we}))};r.gmMode?Q():f("confirm","  ?",` ${U.name}    ?`,0,Q,"")}else{const Y=ea(U.name);let Q=[U];Y&&(Q=[...Z.abilities.filter(ge=>!ge.purchased&&ge.level<U.level&&ea(ge.name)===Y).sort((ge,Ie)=>ge.level-Ie.level),U]);let Ee=0,we=[];for(const ne of Q){if(Z.level<ne.level&&!r.gmMode){f("error","  ",`  ${ne.level}  "${ne.name}".`);return}const{cost:ge}=uc(Z,ne,we);Ee+=ge,we.push(ne)}if(r.gmMode||r.xp.total-r.xp.spent>=Ee){r.gmMode||i("xp.spent",r.xp.spent+Ee);const ne=Q.map(Ie=>Ie.id),ge=r.domains.map(Ie=>Ie.id===F?{...Ie,abilities:Ie.abilities.map(oe=>ne.includes(oe.id)?{...oe,purchased:!0}:oe)}:Ie);e(Ie=>(w(ge),{...Ie,domains:ge})),r.gmMode||f("ability",U.name,`  ${Ee} `,void 0,void 0,void 0,(k=li[U.type])==null?void 0:k.icon)}else f("error"," ",` ${Ee} .`)}},ye=()=>{const F="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(r.domains,null,2)),q=document.createElement("a");q.href=F,q.download="domains_all.json",q.click()},te=F=>{const q="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(F,null,2)),Z=document.createElement("a");Z.href=q,Z.download=`domain_${F.name.replace(/\s+/g,"_").toLowerCase()}.json`,Z.click()};if(m||r.gmMode){const F=r.domains.find(q=>q.id===v);return A.jsxs("div",{className:"space-y-6 pb-20",children:[A.jsx("div",{className:"sticky top-0 z-40 bg-stone-50/95 backdrop-blur py-4 border-b border-stone-200",children:A.jsxs("div",{className:"flex flex-col gap-4",children:[A.jsxs("div",{className:"flex flex-wrap justify-between items-center print:hidden gap-2",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsxs("button",{onClick:()=>x(!1),className:"bg-stone-200 hover:bg-stone-300 text-stone-800 px-3 py-1 rounded text-sm font-bold flex items-center gap-1",children:[A.jsx(Qe,{path:'<path d="M19 12H5"/><path d="M12 19l-7-7 7-7"/>',size:16})," "]}),A.jsx("h2",{className:"text-xl md:text-2xl font-header font-bold uppercase text-stone-800",children:""})]}),A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsxs("div",{className:"bg-stone-800 text-white px-3 py-1 rounded text-sm font-bold mr-2 whitespace-nowrap",children:[": ",r.xp.total-r.xp.spent]}),A.jsxs("button",{onClick:ye,className:"bg-stone-200 text-stone-600 px-2 py-1 rounded text-xs font-bold hover:bg-stone-300 flex items-center gap-1",title:" JSON",children:[A.jsx(Qe,{path:Ve.download,size:14})," ",A.jsx("span",{className:"hidden sm:inline",children:"JSON"})]})]})]}),A.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 no-scrollbar w-full items-center",children:r.domains.map(q=>A.jsx("button",{onClick:()=>E(q.id),className:`px-4 py-2 rounded-lg font-bold text-sm whitespace-nowrap transition-all shadow-sm border ${v===q.id?"bg-stone-800 text-white border-stone-800 scale-105":"bg-white text-stone-600 border-stone-200 hover:bg-stone-100"}`,children:q.name},q.id))})]})}),F?A.jsx($w,{domain:F,gmMode:r.gmMode,isShopMode:!0,updateDomainName:q=>e(Z=>({...Z,domains:Z.domains.map(U=>U.id===F.id?{...U,name:q}:U)})),updateDomainDesc:q=>e(Z=>({...Z,domains:Z.domains.map(U=>U.id===F.id?{...U,description:q}:U)})),changeLvl:q=>N(F.id,q),removeDomain:()=>T(F.id),handleQR:o,addAb:q=>D(F.id,q),toggleBuy:q=>H(F.id,q),updAb:(q,Z,U)=>P(F.id,q,Z,U),delAb:q=>G(F.id,q),onExport:()=>te(F),allowAdd:!1,calculateCost:q=>uc(F,q)},F.id):A.jsx("div",{className:"text-center py-20 text-stone-400 font-header font-bold uppercase",children:"   "})]})}const $=r.domains.length>0;return A.jsxs("div",{className:"space-y-8",children:[A.jsxs("div",{className:"flex justify-between items-center border-b-4 border-stone-800 pb-4",children:[A.jsx("h2",{className:"text-2xl font-header font-bold uppercase text-stone-800",children:" "}),A.jsxs("button",{onClick:()=>x(!0),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded shadow-lg font-bold flex items-center gap-2",children:[A.jsx(Qe,{path:'<circle cx="9" cy="21" r="1"/><circle cx="20" cy="21" r="1"/><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>',size:20})," / "]})]}),!$&&A.jsxs("div",{className:"text-center py-12 text-stone-400",children:[A.jsx("p",{className:"mb-4",children:"    ."}),A.jsx("button",{onClick:()=>x(!0),className:"underline hover:text-stone-600",children:"  "})]}),r.domains.map(F=>{const q=F.abilities.filter(k=>k.purchased);if(q.length===0)return null;const Z=[],U={};return q.forEach(k=>{const Y=ea(k.name);Y?(U[Y]||(U[Y]=[]),U[Y].push(k)):Z.push(k)}),Object.values(U).forEach(k=>{k.sort((Y,Q)=>Q.level-Y.level),k[0]&&Z.push(k[0])}),Z.sort((k,Y)=>k.level-Y.level),A.jsxs("div",{className:"mb-8",children:[A.jsxs("div",{className:"flex justify-between items-end border-b border-stone-300 pb-2 mb-4",children:[A.jsx("h3",{className:"text-xl font-header font-bold uppercase text-stone-800",children:F.name}),A.jsxs("div",{className:"text-2xl font-header font-black text-stone-300",children:["LVL ",F.level]})]}),A.jsx("div",{className:"flex flex-wrap gap-6 justify-center",children:Z.map(k=>A.jsx(to,{data:k,styleData:li[k.type]||li.skill,isLocked:!1,isPurchased:!0,onBuy:()=>{},onEdit:()=>{},onDelete:()=>{},canQR:o,qrType:"ability",gmMode:!1,mode:"domain"},k.id))})]},F.id)})]})},LT=({state:r,updateState:e})=>A.jsxs("div",{className:"space-y-4 h-full",children:[A.jsx("h2",{className:"text-2xl font-header font-bold uppercase text-stone-800 border-b-4 border-stone-800 pb-2",children:" "}),A.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-inner min-h-[500px] border border-stone-200 flex flex-col",children:[A.jsx("label",{className:"text-[10px] font-bold text-stone-400 uppercase mb-2",children:""}),A.jsx(mg,{value:r.journal,onChange:i=>e("journal",i.target.value),className:"w-full flex-1 text-base font-hand leading-relaxed ghost-input p-2",placeholder:"    ..."})]})]}),kT=({adventures:r,currentId:e,onSelect:i,onCreate:o,onDelete:f,onRename:m,onExport:x,notify:v})=>{const[E,w]=Pe.useState(!1),[T,N]=Pe.useState(""),D=()=>{T.trim()&&(o(T.trim()),N(""),w(!1))},P=H=>{const ye=r.find(te=>te.id===H);v("confirm"," ?",` ,    "${(ye==null?void 0:ye.name)||""}"?`,0,()=>{f(H)})},G=r.find(H=>H.id===e);return A.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-stone-200 mb-6",children:[A.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 justify-between items-start lg:items-center",children:[A.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-3 w-full lg:w-auto flex-1",children:[A.jsx("div",{className:"bg-stone-800 p-2 rounded text-white shrink-0 hidden md:block",children:A.jsx(Qe,{path:Ve.adventure,size:24})}),G?A.jsxs("div",{className:"flex-1 w-full",children:[A.jsx("label",{className:"text-[10px] font-bold text-stone-400 uppercase block mb-1",children:" "}),A.jsx(Pn,{value:G.name,onCommit:H=>m(G.id,H),className:"font-header font-bold text-xl w-full px-2 py-1 bg-white border border-stone-300 rounded focus:border-stone-800 focus:ring-1 focus:ring-stone-800 transition-all shadow-inner text-stone-800"})]}):A.jsx("div",{className:"text-stone-400 font-bold italic py-2",children:"  ..."})]}),A.jsxs("div",{className:"flex flex-col md:flex-row items-stretch md:items-center gap-2 w-full lg:w-auto mt-2 lg:mt-0",children:[A.jsxs("select",{className:"bg-stone-50 border border-stone-300 rounded px-3 py-2 text-sm font-bold w-full md:w-48 text-stone-700 focus:border-stone-500 outline-none h-[42px]",value:e||"",onChange:H=>i(Number(H.target.value)),children:[A.jsx("option",{value:"",disabled:!0,children:"--  --"}),r.map(H=>A.jsx("option",{value:H.id,children:H.name},H.id))]}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:()=>w(!0),className:"flex-1 bg-emerald-600 hover:bg-emerald-700 text-white px-3 h-[42px] flex items-center justify-center rounded shadow-sm transition-colors",title:" ",children:A.jsx(Qe,{path:'<line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line>',size:20})}),e&&A.jsxs(A.Fragment,{children:[A.jsx("button",{onClick:x,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-3 h-[42px] flex items-center justify-center rounded shadow-sm transition-colors",title:" JSON",children:A.jsx(Qe,{path:Ve.download,size:20})}),A.jsx("button",{type:"button",onClick:H=>{H.preventDefault(),H.stopPropagation(),P(e)},className:"flex-1 bg-white hover:bg-red-50 text-red-500 border border-red-200 px-3 h-[42px] flex items-center justify-center rounded shadow-sm transition-colors",title:"",children:A.jsx(Qe,{path:Ve.trash,size:20})})]})]})]})]}),E&&A.jsxs("div",{className:"mt-4 p-4 bg-stone-50 rounded border border-stone-200 flex flex-col md:flex-row gap-3 items-end animate-fade-in shadow-inner",children:[A.jsxs("div",{className:"flex-1 w-full",children:[A.jsx("label",{className:"text-xs font-bold text-stone-500 uppercase mb-1 block",children:"  "}),A.jsx("input",{autoFocus:!0,type:"text",value:T,onChange:H=>N(H.target.value),className:"w-full border border-stone-300 p-2 rounded bg-white focus:border-emerald-500 focus:ring-1 focus:ring-emerald-500 outline-none",placeholder:":  ",onKeyDown:H=>H.key==="Enter"&&D()})]}),A.jsxs("div",{className:"flex gap-2 w-full md:w-auto",children:[A.jsx("button",{onClick:D,className:"flex-1 md:flex-none bg-stone-800 text-white px-6 py-2 rounded font-bold hover:bg-stone-900",children:""}),A.jsx("button",{onClick:()=>w(!1),className:"flex-1 md:flex-none bg-white border border-stone-300 text-stone-600 px-4 py-2 rounded font-bold hover:bg-stone-100",children:""})]})]})]})},BT=({domains:r,party:e,onUpdate:i,handleQR:o,notify:f})=>{const[m,x]=Pe.useState(null),[v,E]=Pe.useState(null),w=Pe.useMemo(()=>r.filter(Z=>v===null?Z.assignedTo===null||Z.assignedTo===void 0:Z.assignedTo===v),[r,v]),T=r.find(Z=>Z.id===m),N=()=>{const Z={id:Date.now(),name:" ",description:"...",level:0,abilities:[],assignedTo:v},U=[...r,Z];i(U),x(Z.id)},D=(Z,U)=>{i(r.map(k=>k.id===Z?U(k):k))},P=Z=>{const U=r.find(k=>k.id===Z);f("confirm"," ?",` ,    ${U==null?void 0:U.name}?`,0,()=>{i(r.filter(k=>String(k.id)!==String(Z))),String(m)===String(Z)&&x(null)})},G=(Z,U)=>{D(Z,k=>({...k,assignedTo:U})),U!==v&&x(null)},H=(Z,U)=>{D(Z,k=>{const Y=Math.max(0,Math.min(6,k.level+U));return{...k,level:Y}})},ye=(Z,U)=>{const k={id:Date.now()+Math.random(),name:"",description:"...",type:"skill",level:U,apCost:"1",inspCost:"0",purchased:!1};D(Z,Y=>({...Y,abilities:[...Y.abilities,k]}))},te=(Z,U,k,Y)=>{D(Z,Q=>({...Q,abilities:Q.abilities.map(Ee=>Ee.id===U?{...Ee,[k]:Y}:Ee)}))},$=(Z,U)=>{f("confirm"," ?"," ?",0,()=>{D(Z,k=>({...k,abilities:k.abilities.filter(Y=>Y.id!==U)}))})},F=()=>{const Z="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(w,null,2)),U=document.createElement("a");U.href=Z,U.download=`gm_domains_${v?"char":"pool"}.json`,U.click(),U.remove()},q=Z=>{const U="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(Z,null,2)),k=document.createElement("a");k.href=U,k.download=`domain_${Z.name.replace(/\s+/g,"_").toLowerCase()}.json`,k.click()};return A.jsxs("div",{className:"flex flex-col h-full",children:[A.jsxs("div",{className:"flex flex-col bg-stone-50 border-b border-stone-200 shrink-0",children:[A.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-4 border-b border-stone-200/50",children:[A.jsxs("button",{onClick:N,className:"px-4 py-2 rounded-lg font-bold text-sm bg-emerald-600 text-white border border-emerald-700 hover:bg-emerald-700 shadow-sm flex items-center gap-2 transition-all",children:[A.jsx("span",{className:"text-lg leading-none",children:"+"})," "]}),A.jsx("div",{className:"h-8 w-px bg-stone-300 mx-2 hidden md:block"}),A.jsxs("button",{onClick:F,className:"bg-white border border-stone-300 text-stone-600 hover:bg-stone-100 px-3 py-2 rounded-lg text-sm font-bold flex items-center gap-2 shadow-sm",children:[A.jsx(Qe,{path:Ve.download,size:16})," JSON"]})]}),A.jsxs("div",{className:"flex gap-2 overflow-x-auto p-2 bg-stone-100 no-scrollbar border-b border-stone-200",children:[A.jsx("button",{onClick:()=>{E(null),x(null)},className:`px-3 py-1 rounded-full text-xs font-bold whitespace-nowrap transition-colors border ${v===null?"bg-stone-800 text-white border-stone-800":"bg-white text-stone-500 border-stone-300 hover:bg-stone-200"}`,children:" "}),e.map(Z=>A.jsx("button",{onClick:()=>{E(Z.id),x(null)},className:`px-3 py-1 rounded-full text-xs font-bold whitespace-nowrap transition-colors border ${v===Z.id?"bg-blue-600 text-white border-blue-600":"bg-white text-stone-500 border-stone-300 hover:bg-blue-50"}`,children:Z.name},Z.id))]}),A.jsxs("div",{className:"flex gap-2 overflow-x-auto p-4 items-center no-scrollbar",children:[w.length===0&&A.jsx("span",{className:"text-stone-400 text-sm font-bold px-2",children:" "}),w.map(Z=>A.jsx("button",{onClick:()=>x(Z.id),className:`shrink-0 px-4 py-2 rounded-lg font-bold text-sm border shadow-sm transition-all whitespace-nowrap ${m===Z.id?"bg-stone-800 text-white border-stone-800 ring-2 ring-stone-300":"bg-white text-stone-600 border-stone-200 hover:bg-white hover:border-stone-400"}`,children:Z.name},Z.id))]})]}),A.jsx("div",{className:"flex-1 overflow-y-auto p-4 bg-stone-100/50",children:T?A.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-stone-200 p-4 lg:p-8 max-w-5xl mx-auto",children:A.jsx($w,{domain:T,gmMode:!0,isShopMode:!0,updateDomainName:Z=>D(T.id,U=>({...U,name:Z})),updateDomainDesc:Z=>D(T.id,U=>({...U,description:Z})),changeLvl:Z=>H(T.id,Z),removeDomain:()=>P(T.id),handleQR:o,addAb:Z=>ye(T.id,Z),toggleBuy:()=>{},updAb:(Z,U,k)=>te(T.id,Z,U,k),delAb:Z=>$(T.id,Z),onExport:()=>q(T),allowAdd:!0,party:e,onAssign:Z=>G(T.id,Z)})}):A.jsx("div",{className:"flex h-full items-center justify-center text-stone-300 font-bold uppercase tracking-widest text-lg",children:" "})})]})},PT=({items:r,onUpdate:e,handleQR:i,notify:o})=>{const f=()=>{const E={id:Date.now(),name:"",description:"...",type:"item",apCost:"1",inspCost:"0"};e([...r,E])},m=(E,w,T)=>{e(r.map(N=>N.id===E?{...N,[w]:T}:N))},x=E=>{const w=r.find(T=>T.id===E);o("confirm"," ?",` ,    ${w==null?void 0:w.name}?`,0,()=>{e(r.filter(T=>T.id!==E))})},v=()=>{const E="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(r,null,2)),w=document.createElement("a");w.href=E,w.download="gm_items_pool.json",w.click(),w.remove()};return A.jsxs("div",{className:"flex flex-col h-full",children:[A.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-stone-50 p-4 border-b border-stone-200 shrink-0",children:[A.jsxs("div",{className:"flex flex-wrap items-center gap-4 w-full md:w-auto",children:[A.jsxs("h3",{className:"font-bold text-stone-600 uppercase text-sm whitespace-nowrap",children:["  (",r.length,")"]}),A.jsx("div",{className:"flex gap-2",children:A.jsxs("button",{onClick:v,className:"bg-white border border-stone-300 text-stone-600 hover:bg-stone-100 px-3 py-1 rounded text-sm font-bold flex items-center gap-2 shadow-sm",children:[A.jsx(Qe,{path:Ve.download,size:14})," JSON"]})})]}),A.jsxs("button",{onClick:f,className:"w-full md:w-auto justify-center bg-stone-800 text-white px-4 py-2 rounded font-bold text-sm hover:bg-stone-700 flex items-center gap-2 shadow-sm transition-colors",children:[A.jsx("span",{children:"+"})," "]})]}),A.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-stone-100/30",children:A.jsxs("div",{className:"flex flex-wrap gap-6 justify-center content-start",children:[r.map(E=>A.jsx(to,{data:E,styleData:li.item,isLocked:!1,isPurchased:!0,onBuy:()=>{},onEdit:(w,T)=>m(E.id,w,T),onDelete:()=>x(E.id),canQR:i,qrType:"item",gmMode:!0,mode:"inventory"},E.id)),r.length===0&&A.jsx("div",{className:"py-20 text-stone-300 font-bold uppercase text-center w-full text-lg",children:" "})]})})]})},jT=({monsters:r,onUpdate:e,handleQR:i,notify:o})=>{const f=()=>{const E={id:Date.now(),name:"",description:`HP: 10 | ATK: 2
: ...`,type:"monster",apCost:"10",inspCost:"1"};e([...r,E])},m=(E,w,T)=>{e(r.map(N=>N.id===E?{...N,[w]:T}:N))},x=E=>{const w=r.find(T=>T.id===E);o("confirm"," ?",` ,    ${w==null?void 0:w.name}?`,0,()=>{e(r.filter(T=>T.id!==E))})},v=()=>{const E="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(r,null,2)),w=document.createElement("a");w.href=E,w.download="gm_monsters_pool.json",w.click(),w.remove()};return A.jsxs("div",{className:"flex flex-col h-full",children:[A.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-stone-50 p-4 border-b border-stone-200 shrink-0",children:[A.jsxs("div",{className:"flex flex-wrap items-center gap-4 w-full md:w-auto",children:[A.jsxs("h3",{className:"font-bold text-stone-600 uppercase text-sm whitespace-nowrap",children:[" (",r.length,")"]}),A.jsx("div",{className:"flex gap-2",children:A.jsxs("button",{onClick:v,className:"bg-white border border-stone-300 text-stone-600 hover:bg-stone-100 px-3 py-1 rounded text-sm font-bold flex items-center gap-2 shadow-sm",children:[A.jsx(Qe,{path:Ve.download,size:14})," JSON"]})})]}),A.jsxs("button",{onClick:f,className:"w-full md:w-auto justify-center bg-red-800 text-white px-4 py-2 rounded font-bold text-sm hover:bg-red-900 flex items-center gap-2 shadow-sm transition-colors",children:[A.jsx("span",{children:"+"})," "]})]}),A.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-stone-100/30",children:A.jsxs("div",{className:"flex flex-wrap gap-6 justify-center content-start",children:[r.map(E=>A.jsx(to,{data:E,styleData:li.monster,isLocked:!1,isPurchased:!0,onBuy:()=>{},onEdit:(w,T)=>m(E.id,w,T),onDelete:()=>x(E.id),canQR:i,qrType:"item",gmMode:!0,mode:"inventory"},E.id)),r.length===0&&A.jsx("div",{className:"py-20 text-stone-300 font-bold uppercase text-center w-full text-lg",children:" "})]})})]})},UT=({npcs:r,onUpdate:e,handleQR:i,notify:o})=>{const f=()=>{const E={id:Date.now(),name:"NPC",description:`: ...
: ...`,type:"npc",apCost:"0",inspCost:"1"};e([...r,E])},m=(E,w,T)=>{e(r.map(N=>N.id===E?{...N,[w]:T}:N))},x=E=>{const w=r.find(T=>T.id===E);o("confirm"," NPC?",` ,    ${w==null?void 0:w.name}?`,0,()=>{e(r.filter(T=>T.id!==E))})},v=()=>{const E="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(r,null,2)),w=document.createElement("a");w.href=E,w.download="gm_npc_pool.json",w.click(),w.remove()};return A.jsxs("div",{className:"flex flex-col h-full",children:[A.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 bg-stone-50 p-4 border-b border-stone-200 shrink-0",children:[A.jsxs("div",{className:"flex flex-wrap items-center gap-4 w-full md:w-auto",children:[A.jsxs("h3",{className:"font-bold text-stone-600 uppercase text-sm whitespace-nowrap",children:["NPC (",r.length,")"]}),A.jsx("div",{className:"flex gap-2",children:A.jsxs("button",{onClick:v,className:"bg-white border border-stone-300 text-stone-600 hover:bg-stone-100 px-3 py-1 rounded text-sm font-bold flex items-center gap-2 shadow-sm",children:[A.jsx(Qe,{path:Ve.download,size:14})," JSON"]})})]}),A.jsxs("button",{onClick:f,className:"w-full md:w-auto justify-center bg-blue-800 text-white px-4 py-2 rounded font-bold text-sm hover:bg-blue-900 flex items-center gap-2 shadow-sm transition-colors",children:[A.jsx("span",{children:"+"})," "]})]}),A.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-stone-100/30",children:A.jsxs("div",{className:"flex flex-wrap gap-6 justify-center content-start",children:[r.map(E=>A.jsx(to,{data:E,styleData:li.npc,isLocked:!1,isPurchased:!0,onBuy:()=>{},onEdit:(w,T)=>m(E.id,w,T),onDelete:()=>x(E.id),canQR:i,qrType:"item",gmMode:!0,mode:"inventory"},E.id)),r.length===0&&A.jsx("div",{className:"py-20 text-stone-300 font-bold uppercase text-center w-full text-lg",children:" NPC "})]})})]})},FT=({party:r,onUpdateParty:e,handleQR:i,notify:o})=>{const[f,m]=Pe.useState("5"),[x,v]=Pe.useState(null),E=()=>{e([...r,{id:Date.now(),name:"",level:1}])},w=(G,H,ye)=>{e(r.map(te=>te.id===G?{...te,[H]:ye}:te))},T=G=>{const H=r.find(ye=>ye.id===G);o("confirm"," ?",` ,    ${H==null?void 0:H.name}?`,0,()=>{e(r.filter(ye=>ye.id!==G))})},N=()=>{const G=parseInt(f);G>0&&i("xp",{amount:G,name:`: ${G}`})},D=()=>{i("start_bonus",{amount:60,name:": "})},P=r.find(G=>G.id===x);return A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[A.jsxs("div",{className:"bg-stone-50 p-6 rounded-xl border border-stone-200 space-y-6",children:[A.jsxs("div",{children:[A.jsxs("div",{className:"flex items-center gap-2 mb-4 border-b border-stone-200 pb-2",children:[A.jsx("div",{className:"bg-amber-500 text-white p-1 rounded",children:A.jsx(Qe,{path:Ve.xp,size:20})}),A.jsx("h3",{className:"font-header font-bold text-lg text-stone-800",children:"  ()"})]}),A.jsxs("div",{className:"flex flex-col gap-4",children:[A.jsxs("div",{children:[A.jsx("label",{className:"text-xs font-bold text-stone-500 uppercase mb-1 block",children:" ()"}),A.jsx("div",{className:"flex gap-2",children:A.jsx("input",{type:"number",value:f,onChange:G=>m(G.target.value),className:"flex-1 bg-white border border-stone-300 rounded p-2 font-header font-bold text-xl text-center text-stone-800 focus:outline-none focus:ring-1 focus:ring-amber-500"})})]}),A.jsxs("button",{onClick:N,className:"w-full bg-stone-800 text-white font-bold py-3 rounded-lg hover:bg-stone-700 flex justify-center items-center gap-2 shadow-lg",children:[A.jsx(Qe,{path:Ve.qr,size:20})," QR"]})]})]}),A.jsxs("div",{className:"pt-6 border-t border-stone-200",children:[A.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[A.jsx("div",{className:"bg-emerald-600 text-white p-1 rounded",children:A.jsx(Qe,{path:'<path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>',size:16})}),A.jsx("h3",{className:"font-header font-bold text-sm text-stone-800 uppercase",children:" "})]}),A.jsxs("button",{onClick:D,className:"w-full bg-emerald-600 text-white font-bold py-2 rounded-lg hover:bg-emerald-700 flex justify-center items-center gap-2 shadow-sm text-sm",children:[A.jsx(Qe,{path:Ve.qr,size:16}),"QR   (60 )"]}),A.jsx("p",{className:"text-[10px] text-stone-400 mt-2 leading-tight",children:" 60 ,            2000 ."})]})]}),A.jsxs("div",{className:"bg-stone-50 p-6 rounded-xl border border-stone-200",children:[A.jsxs("div",{className:"flex items-center justify-between gap-2 mb-4 border-b border-stone-200 pb-2",children:[A.jsxs("div",{className:"flex items-center gap-2",children:[A.jsx("div",{className:"bg-blue-600 text-white p-1 rounded",children:A.jsx(Qe,{path:Ve.party,size:20})}),A.jsx("h3",{className:"font-header font-bold text-lg text-stone-800",children:" "})]}),A.jsx("button",{onClick:E,className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded font-bold hover:bg-blue-200",children:"+ "})]}),A.jsxs("div",{className:"space-y-2",children:[r.length===0&&A.jsx("div",{className:"text-center text-stone-400 text-sm py-4",children:" "}),r.map(G=>A.jsxs("div",{className:"flex items-center gap-2 bg-white p-2 rounded shadow-sm border border-stone-100 hover:border-blue-200 transition-colors group cursor-pointer",onClick:()=>v(G.id),children:[A.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 shrink-0"}),A.jsx(Pn,{value:G.name,onCommit:H=>w(G.id,"name",H),className:"flex-1 font-bold text-stone-700 bg-transparent focus:outline-none cursor-text min-w-0"}),G.importedData&&A.jsx("div",{className:"px-1.5 py-0.5 rounded bg-stone-100 text-[9px] font-bold text-stone-400 uppercase tracking-wider shrink-0",title:" ",children:"DATA"}),A.jsxs("div",{className:"flex items-center gap-1 border-l border-stone-200 pl-2 shrink-0",children:[A.jsx("span",{className:"text-[10px] text-stone-400 font-bold uppercase hidden sm:inline",children:"LVL"}),A.jsx("input",{type:"number",value:G.level,onChange:H=>w(G.id,"level",parseInt(H.target.value)),onClick:H=>H.stopPropagation(),className:"w-8 sm:w-10 text-center font-bold text-stone-800 border-b border-stone-200 focus:border-stone-800 bg-transparent focus:outline-none"})]}),A.jsx("button",{onClick:H=>{H.stopPropagation(),T(G.id)},className:"text-stone-300 hover:text-red-500 ml-1 sm:ml-2 p-1 shrink-0",children:A.jsx(Qe,{path:Ve.trash,size:16})})]},G.id))]}),A.jsx("p",{className:"text-[10px] text-stone-400 mt-4 text-center",children:"   ,    ."})]})]}),P&&A.jsx(zT,{member:P,onClose:()=>v(null)})]})},zT=({member:r,onClose:e})=>{const i=r.importedData,[o,f]=Pe.useState("info");if(!i)return A.jsx("div",{className:"fixed inset-0 bg-black/80 z-[300] flex items-center justify-center p-6",onClick:e,children:A.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-sm w-full text-center",onClick:D=>D.stopPropagation(),children:[A.jsx("div",{className:"text-stone-300 mb-4",children:A.jsx(Qe,{path:Ve.party,size:48,className:"mx-auto"})}),A.jsx("h3",{className:"font-header font-bold text-xl uppercase mb-2",children:r.name}),A.jsxs("p",{className:"text-stone-500 text-sm mb-6",children:["   . ",A.jsx("br",{}),"   QR-   ."]}),A.jsx("button",{onClick:e,className:"bg-stone-800 text-white px-6 py-2 rounded font-bold",children:""})]})});const{info:m,stats:x,background:v,purchasedAbilities:E,inventory:w,trackers:T}=i,N={};return E.forEach(D=>{const P=D.type||"skill";N[P]||(N[P]=[]),N[P].push(D)}),A.jsx("div",{className:"fixed inset-0 bg-black/80 z-[300] flex items-center justify-center p-4 md:p-8",onClick:e,children:A.jsxs("div",{className:"bg-white w-full max-w-4xl h-[90vh] rounded-xl flex flex-col overflow-hidden shadow-2xl",onClick:D=>D.stopPropagation(),children:[A.jsxs("div",{className:"p-6 bg-stone-900 text-white flex justify-between items-start shrink-0",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("div",{className:"w-16 h-16 bg-stone-700 rounded-lg overflow-hidden border border-stone-600 shrink-0",children:m.avatar?A.jsx("img",{src:m.avatar,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center text-stone-500",children:A.jsx(Qe,{path:Ve.char,size:32})})}),A.jsxs("div",{className:"min-w-0",children:[A.jsx("h2",{className:"text-2xl font-header font-black uppercase leading-none truncate",children:r.name}),A.jsxs("div",{className:"text-stone-400 text-sm font-bold mt-1 truncate",children:[m.class,"  ",m.race,"  LVL ",r.level]})]})]}),A.jsx("button",{onClick:e,className:"text-stone-500 hover:text-white shrink-0 ml-2",children:A.jsx(Qe,{path:'<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',size:24})})]}),A.jsx("div",{className:"flex border-b border-stone-200 bg-stone-50 shrink-0 overflow-x-auto no-scrollbar",children:[{id:"info",label:""},{id:"stats",label:""},{id:"abilities",label:""},{id:"inventory",label:""}].map(D=>A.jsx("button",{onClick:()=>f(D.id),className:`flex-1 py-3 px-4 text-sm font-bold uppercase tracking-wider whitespace-nowrap ${o===D.id?"bg-white border-b-2 border-stone-900 text-stone-900":"text-stone-500 hover:bg-stone-100"}`,children:D.label},D.id))}),A.jsxs("div",{className:"flex-1 overflow-y-auto p-6 bg-white",children:[o==="info"&&A.jsxs("div",{className:"space-y-6 max-w-2xl mx-auto",children:[A.jsxs("div",{className:"prose prose-stone text-sm",children:[A.jsx("h4",{className:"uppercase font-bold text-stone-400 text-xs mb-1",children:"  "}),A.jsx("p",{className:"whitespace-pre-wrap italic",children:m.desc||" ."})]}),A.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 border-t border-stone-100 pt-4",children:[A.jsxs("div",{children:[A.jsx("span",{className:"text-xs font-bold text-stone-400 uppercase block",children:""}),v.character]}),A.jsxs("div",{children:[A.jsx("span",{className:"text-xs font-bold text-stone-400 uppercase block",children:""}),v.aesthetic]}),A.jsxs("div",{children:[A.jsx("span",{className:"text-xs font-bold text-stone-400 uppercase block",children:""}),v.motivation]}),A.jsxs("div",{children:[A.jsx("span",{className:"text-xs font-bold text-stone-400 uppercase block",children:""}),v.conflict]})]}),A.jsxs("div",{className:"bg-stone-50 p-4 rounded border border-stone-200",children:[A.jsx("h4",{className:"uppercase font-bold text-stone-400 text-xs mb-2",children:""}),A.jsxs("div",{className:"space-y-2 text-sm",children:[A.jsxs("p",{children:[A.jsx("b",{className:"text-stone-700",children:" ():"})," ",v.conscious]}),A.jsxs("p",{children:[A.jsx("b",{className:"text-stone-700",children:" ():"})," ",v.unconscious]}),A.jsxs("p",{className:"text-red-700",children:[A.jsx("b",{className:"text-red-900",children:":"})," ",v.weakness]}),A.jsxs("p",{className:"text-stone-500 italic mt-2 border-t border-stone-200 pt-2",children:[": ",v.secret]})]})]})]}),o==="stats"&&A.jsxs("div",{className:"max-w-2xl mx-auto",children:[A.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[A.jsxs("div",{className:"bg-red-50 p-4 rounded border border-red-100 text-center",children:[A.jsx("div",{className:"text-xs font-bold text-red-400 uppercase",children:""}),A.jsxs("div",{className:"text-3xl font-header font-black text-red-900",children:[T.hp," / ",x.physique*6]})]}),A.jsxs("div",{className:"bg-amber-50 p-4 rounded border border-amber-100 text-center",children:[A.jsx("div",{className:"text-xs font-bold text-amber-400 uppercase",children:""}),A.jsx("div",{className:"text-3xl font-header font-black text-amber-900",children:T.inspiration})]})]}),A.jsx("h4",{className:"uppercase font-bold text-stone-400 text-xs mb-4 text-center",children:""}),A.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.entries(x).map(([D,P])=>A.jsxs("div",{className:"bg-stone-50 p-3 rounded border border-stone-200 flex flex-col items-center",children:[A.jsx("div",{className:"text-[10px] font-bold text-stone-400 uppercase mb-1",children:Qw[D]||D}),A.jsx("div",{className:"text-2xl font-header font-bold text-stone-800",children:P})]},D))})]}),o==="abilities"&&A.jsxs("div",{className:"space-y-6",children:[Object.entries(N).map(([D,P])=>{var G;return A.jsxs("div",{children:[A.jsx("h4",{className:"uppercase font-bold text-stone-400 text-xs mb-3 border-b border-stone-100 pb-1",children:((G=li[D])==null?void 0:G.label)||D}),A.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:P.map(H=>A.jsxs("div",{className:"border border-stone-200 rounded p-3 bg-stone-50/50",children:[A.jsxs("div",{className:"flex justify-between items-start mb-1",children:[A.jsx("div",{className:"font-bold text-stone-800 text-sm",children:H.name}),H.level>0&&A.jsxs("div",{className:"text-[10px] bg-stone-200 px-1.5 rounded text-stone-600 font-bold",children:["L",H.level]})]}),A.jsx("div",{className:"text-xs text-stone-600 leading-relaxed whitespace-pre-wrap",children:A.jsx(Jw,{text:H.description})}),(H.apCost||H.inspCost)&&A.jsxs("div",{className:"mt-2 flex gap-2 text-[10px] font-bold",children:[H.apCost&&A.jsxs("span",{className:"bg-stone-100 text-stone-500 px-1 rounded border border-stone-200",children:[": ",H.apCost]}),H.inspCost&&A.jsxs("span",{className:"bg-amber-50 text-amber-600 px-1 rounded border border-amber-100",children:[": ",H.inspCost]})]})]},H.id))})]},D)}),E.length===0&&A.jsx("div",{className:"text-center text-stone-400 italic",children:" "})]}),o==="inventory"&&A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4",children:[w.map(D=>A.jsx(to,{data:D,styleData:li.item,isLocked:!1,isPurchased:!0,onBuy:()=>{},onEdit:()=>{},onDelete:()=>{},canQR:()=>{},qrType:"item",gmMode:!1,mode:"inventory"},D.id)),w.length===0&&A.jsx("div",{className:"col-span-full text-center text-stone-400 italic py-12",children:" "})]})]})]})})},ny=[{id:"tools",label:""},{id:"notes",label:""},{id:"domains",label:""},{id:"items",label:""},{id:"monsters",label:""},{id:"npcs",label:"NPC"}],HT=({gmState:r,setGmState:e,updateState:i,handleQR:o,notify:f,onGmLogout:m})=>{const[x,v]=Pe.useState("tools"),{adventures:E,currentAdventureId:w}=r,T=E==null?void 0:E.find(te=>te.id===w),N=te=>{const $={id:Date.now(),name:te,domains:[],items:[],monsters:[],npcs:[],party:[],notes:""};e(F=>({...F,adventures:[...F.adventures||[],$],currentAdventureId:$.id}))},D=te=>{e($=>({...$,adventures:$.adventures.filter(F=>String(F.id)!==String(te)),currentAdventureId:String($.currentAdventureId)===String(te)?null:$.currentAdventureId}))},P=(te,$)=>{H(te,{name:$})},G=te=>{e($=>({...$,currentAdventureId:te}))},H=(te,$)=>{e(F=>({...F,adventures:F.adventures.map(q=>q.id===te?{...q,...$}:q)}))},ye=()=>{if(!T)return;const te="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(T,null,2)),$=document.createElement("a");$.href=te,$.download=`adventure_${T.name.replace(/\s+/g,"_").toLowerCase()}.json`,$.click()};return A.jsxs("div",{className:"flex flex-col h-full min-h-[80vh]",children:[A.jsxs("div",{className:"flex justify-between items-center border-b-4 border-stone-800 pb-2 mb-6",children:[A.jsx("h2",{className:"text-2xl font-header font-bold uppercase text-stone-800",children:" "}),m&&A.jsxs("button",{onClick:m,className:"text-xs font-bold text-red-500 hover:text-red-700 bg-red-50 hover:bg-red-100 border border-red-200 px-3 py-1.5 rounded-lg flex items-center gap-2 transition-colors",title:"   ",children:[A.jsx(Qe,{path:Ve.lock,size:14})," "]})]}),A.jsx(kT,{adventures:E||[],currentId:w,onCreate:N,onDelete:D,onSelect:G,onRename:P,onExport:ye,notify:f}),T?A.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[A.jsx("div",{className:"block md:hidden mb-4",children:A.jsxs("div",{className:"relative",children:[A.jsx("select",{value:x,onChange:te=>v(te.target.value),className:"w-full appearance-none bg-stone-800 text-white font-bold text-sm px-4 py-3 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-stone-500",children:ny.map(te=>A.jsx("option",{value:te.id,children:te.label},te.id))}),A.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-white",children:A.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:A.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})}),A.jsx("div",{className:"hidden md:flex gap-2 mb-4 border-b border-stone-200 overflow-x-auto pb-1 shrink-0 no-scrollbar",children:ny.map(te=>A.jsx("button",{onClick:()=>v(te.id),className:`px-4 py-2 font-bold text-sm rounded-t-lg transition-colors whitespace-nowrap ${x===te.id?"bg-stone-800 text-white shadow-sm":"bg-stone-200 text-stone-600 hover:bg-stone-300"}`,children:te.label},te.id))}),A.jsxs("div",{className:"flex-1 bg-white rounded-lg p-1",children:[x==="tools"&&A.jsx("div",{className:"p-4",children:A.jsx(FT,{party:T.party,onUpdateParty:te=>H(T.id,{party:te}),handleQR:o,notify:f})}),x==="notes"&&A.jsxs("div",{className:"h-full flex flex-col p-4",children:[A.jsx("label",{className:"text-xs font-bold text-stone-400 uppercase mb-2",children:" "}),A.jsx(mg,{value:T.notes,onChange:te=>H(T.id,{notes:te.target.value}),className:"w-full flex-1 p-4 bg-white border border-stone-300 rounded font-hand text-sm focus:border-stone-500 outline-none resize-none shadow-inner",placeholder:"   ..."})]}),x==="domains"&&A.jsx(BT,{domains:T.domains,party:T.party,onUpdate:te=>H(T.id,{domains:te}),handleQR:o,notify:f}),x==="items"&&A.jsx(PT,{items:T.items,onUpdate:te=>H(T.id,{items:te}),handleQR:o,notify:f}),x==="monsters"&&A.jsx(jT,{monsters:T.monsters,onUpdate:te=>H(T.id,{monsters:te}),handleQR:o,notify:f}),x==="npcs"&&A.jsx(UT,{npcs:T.npcs||[],onUpdate:te=>H(T.id,{npcs:te}),handleQR:o,notify:f})]})]}):A.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center bg-stone-50 rounded-lg border-2 border-dashed border-stone-200 text-stone-400 font-bold uppercase p-12 text-center",children:[A.jsx("span",{className:"text-4xl mb-4 opacity-20",children:"?"}),A.jsx("p",{children:"    "})]})]})},VT=({activeTab:r,gmMode:e,onTabChange:i,onGmToggle:o,onScan:f,onDownload:m,onImport:x,onOpenCharManager:v})=>{const E=()=>{confirm("  ?")&&Ec.signOut()};return A.jsxs("div",{className:`
      fixed z-50 transition-opacity 
      bottom-4 left-4 right-4 
      lg:top-4 lg:right-4 lg:left-auto lg:bottom-auto lg:w-auto 
      bg-white/90 backdrop-blur border border-stone-300 rounded-2xl shadow-xl 
      p-2 
      grid grid-cols-5 lg:flex lg:flex-col gap-2 
  `,children:[A.jsx(Os,{iconPath:Ve.char,label:"",active:r==="sheet",onClick:()=>i("sheet")}),A.jsx(Os,{iconPath:Ve.domains,label:"",active:r==="domains",onClick:()=>i("domains")}),A.jsx(Os,{iconPath:Ve.item,label:"",active:r==="inventory",onClick:()=>i("inventory")}),A.jsx(Os,{iconPath:Ve.journal,label:"",active:r==="journal",onClick:()=>i("journal")}),A.jsx(Os,{iconPath:Ve.users,label:"",onClick:v,colorClass:"bg-stone-50"}),e&&A.jsx(Os,{iconPath:Ve.adventure,label:"",active:r==="gm_adventure",onClick:()=>i("gm_adventure"),colorClass:"bg-stone-100"}),A.jsx("div",{className:"hidden lg:block w-full h-px bg-stone-300 mx-1 lg:my-1 flex-shrink-0"}),A.jsxs("div",{className:"col-span-2 lg:col-span-1 flex gap-2 lg:flex-col",children:[A.jsx("div",{className:"flex-1",children:A.jsx(Os,{iconPath:Ve.scan,label:"",onClick:f,colorClass:"bg-blue-50 w-full"})}),A.jsxs("div",{className:"flex flex-row gap-2 w-full",children:[A.jsx("div",{className:"flex-1",children:A.jsx(Os,{iconPath:Ve.download,label:"",onClick:m,colorClass:"w-full"})}),A.jsx("div",{className:"flex-1",children:A.jsx(Os,{iconPath:Ve.upload,label:"",onClick:x,colorClass:"w-full"})})]})]}),A.jsx("div",{className:"hidden lg:block w-full h-px bg-stone-300 mx-1 lg:my-1 flex-shrink-0"}),A.jsxs("div",{className:"col-span-1 lg:col-span-1 flex lg:flex-col gap-2",children:[A.jsx(Os,{iconPath:Ve.gm,label:"GM",active:e,onClick:o,colorClass:"bg-red-50 w-full",activeClass:"bg-red-600 text-white w-full"}),A.jsx("button",{onClick:E,className:"hidden lg:flex p-3 justify-center items-center rounded-xl shadow-md border border-stone-200 bg-stone-100 text-stone-500 hover:bg-stone-200 hover:text-red-500 transition-colors",title:"",children:A.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[A.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),A.jsx("polyline",{points:"16 17 21 12 16 7"}),A.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})};var Go={},N0,iy;function GT(){return iy||(iy=1,N0=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),N0}var I0={},$r={},sy;function no(){if(sy)return $r;sy=1;let r;const e=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return $r.getSymbolSize=function(o){if(!o)throw new Error('"version" cannot be null or undefined');if(o<1||o>40)throw new Error('"version" should be in range from 1 to 40');return o*4+17},$r.getSymbolTotalCodewords=function(o){return e[o]},$r.getBCHDigit=function(i){let o=0;for(;i!==0;)o++,i>>>=1;return o},$r.setToSJISFunction=function(o){if(typeof o!="function")throw new Error('"toSJISFunc" is not a valid function.');r=o},$r.isKanjiModeEnabled=function(){return typeof r<"u"},$r.toSJIS=function(o){return r(o)},$r}var R0={},ry;function pg(){return ry||(ry=1,(function(r){r.L={bit:1},r.M={bit:0},r.Q={bit:3},r.H={bit:2};function e(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"l":case"low":return r.L;case"m":case"medium":return r.M;case"q":case"quartile":return r.Q;case"h":case"high":return r.H;default:throw new Error("Unknown EC Level: "+i)}}r.isValid=function(o){return o&&typeof o.bit<"u"&&o.bit>=0&&o.bit<4},r.from=function(o,f){if(r.isValid(o))return o;try{return e(o)}catch{return f}}})(R0)),R0}var O0,ay;function qT(){if(ay)return O0;ay=1;function r(){this.buffer=[],this.length=0}return r.prototype={get:function(e){const i=Math.floor(e/8);return(this.buffer[i]>>>7-e%8&1)===1},put:function(e,i){for(let o=0;o<i;o++)this.putBit((e>>>i-o-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const i=Math.floor(this.length/8);this.buffer.length<=i&&this.buffer.push(0),e&&(this.buffer[i]|=128>>>this.length%8),this.length++}},O0=r,O0}var D0,oy;function XT(){if(oy)return D0;oy=1;function r(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return r.prototype.set=function(e,i,o,f){const m=e*this.size+i;this.data[m]=o,f&&(this.reservedBit[m]=!0)},r.prototype.get=function(e,i){return this.data[e*this.size+i]},r.prototype.xor=function(e,i,o){this.data[e*this.size+i]^=o},r.prototype.isReserved=function(e,i){return this.reservedBit[e*this.size+i]},D0=r,D0}var M0={},ly;function YT(){return ly||(ly=1,(function(r){const e=no().getSymbolSize;r.getRowColCoords=function(o){if(o===1)return[];const f=Math.floor(o/7)+2,m=e(o),x=m===145?26:Math.ceil((m-13)/(2*f-2))*2,v=[m-7];for(let E=1;E<f-1;E++)v[E]=v[E-1]-x;return v.push(6),v.reverse()},r.getPositions=function(o){const f=[],m=r.getRowColCoords(o),x=m.length;for(let v=0;v<x;v++)for(let E=0;E<x;E++)v===0&&E===0||v===0&&E===x-1||v===x-1&&E===0||f.push([m[v],m[E]]);return f}})(M0)),M0}var L0={},cy;function WT(){if(cy)return L0;cy=1;const r=no().getSymbolSize,e=7;return L0.getPositions=function(o){const f=r(o);return[[0,0],[f-e,0],[0,f-e]]},L0}var k0={},uy;function KT(){return uy||(uy=1,(function(r){r.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};r.isValid=function(f){return f!=null&&f!==""&&!isNaN(f)&&f>=0&&f<=7},r.from=function(f){return r.isValid(f)?parseInt(f,10):void 0},r.getPenaltyN1=function(f){const m=f.size;let x=0,v=0,E=0,w=null,T=null;for(let N=0;N<m;N++){v=E=0,w=T=null;for(let D=0;D<m;D++){let P=f.get(N,D);P===w?v++:(v>=5&&(x+=e.N1+(v-5)),w=P,v=1),P=f.get(D,N),P===T?E++:(E>=5&&(x+=e.N1+(E-5)),T=P,E=1)}v>=5&&(x+=e.N1+(v-5)),E>=5&&(x+=e.N1+(E-5))}return x},r.getPenaltyN2=function(f){const m=f.size;let x=0;for(let v=0;v<m-1;v++)for(let E=0;E<m-1;E++){const w=f.get(v,E)+f.get(v,E+1)+f.get(v+1,E)+f.get(v+1,E+1);(w===4||w===0)&&x++}return x*e.N2},r.getPenaltyN3=function(f){const m=f.size;let x=0,v=0,E=0;for(let w=0;w<m;w++){v=E=0;for(let T=0;T<m;T++)v=v<<1&2047|f.get(w,T),T>=10&&(v===1488||v===93)&&x++,E=E<<1&2047|f.get(T,w),T>=10&&(E===1488||E===93)&&x++}return x*e.N3},r.getPenaltyN4=function(f){let m=0;const x=f.data.length;for(let E=0;E<x;E++)m+=f.data[E];return Math.abs(Math.ceil(m*100/x/5)-10)*e.N4};function i(o,f,m){switch(o){case r.Patterns.PATTERN000:return(f+m)%2===0;case r.Patterns.PATTERN001:return f%2===0;case r.Patterns.PATTERN010:return m%3===0;case r.Patterns.PATTERN011:return(f+m)%3===0;case r.Patterns.PATTERN100:return(Math.floor(f/2)+Math.floor(m/3))%2===0;case r.Patterns.PATTERN101:return f*m%2+f*m%3===0;case r.Patterns.PATTERN110:return(f*m%2+f*m%3)%2===0;case r.Patterns.PATTERN111:return(f*m%3+(f+m)%2)%2===0;default:throw new Error("bad maskPattern:"+o)}}r.applyMask=function(f,m){const x=m.size;for(let v=0;v<x;v++)for(let E=0;E<x;E++)m.isReserved(E,v)||m.xor(E,v,i(f,E,v))},r.getBestMask=function(f,m){const x=Object.keys(r.Patterns).length;let v=0,E=1/0;for(let w=0;w<x;w++){m(w),r.applyMask(w,f);const T=r.getPenaltyN1(f)+r.getPenaltyN2(f)+r.getPenaltyN3(f)+r.getPenaltyN4(f);r.applyMask(w,f),T<E&&(E=T,v=w)}return v}})(k0)),k0}var xf={},fy;function eb(){if(fy)return xf;fy=1;const r=pg(),e=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],i=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return xf.getBlocksCount=function(f,m){switch(m){case r.L:return e[(f-1)*4+0];case r.M:return e[(f-1)*4+1];case r.Q:return e[(f-1)*4+2];case r.H:return e[(f-1)*4+3];default:return}},xf.getTotalCodewordsCount=function(f,m){switch(m){case r.L:return i[(f-1)*4+0];case r.M:return i[(f-1)*4+1];case r.Q:return i[(f-1)*4+2];case r.H:return i[(f-1)*4+3];default:return}},xf}var B0={},fc={},hy;function ZT(){if(hy)return fc;hy=1;const r=new Uint8Array(512),e=new Uint8Array(256);return(function(){let o=1;for(let f=0;f<255;f++)r[f]=o,e[o]=f,o<<=1,o&256&&(o^=285);for(let f=255;f<512;f++)r[f]=r[f-255]})(),fc.log=function(o){if(o<1)throw new Error("log("+o+")");return e[o]},fc.exp=function(o){return r[o]},fc.mul=function(o,f){return o===0||f===0?0:r[e[o]+e[f]]},fc}var dy;function QT(){return dy||(dy=1,(function(r){const e=ZT();r.mul=function(o,f){const m=new Uint8Array(o.length+f.length-1);for(let x=0;x<o.length;x++)for(let v=0;v<f.length;v++)m[x+v]^=e.mul(o[x],f[v]);return m},r.mod=function(o,f){let m=new Uint8Array(o);for(;m.length-f.length>=0;){const x=m[0];for(let E=0;E<f.length;E++)m[E]^=e.mul(f[E],x);let v=0;for(;v<m.length&&m[v]===0;)v++;m=m.slice(v)}return m},r.generateECPolynomial=function(o){let f=new Uint8Array([1]);for(let m=0;m<o;m++)f=r.mul(f,new Uint8Array([1,e.exp(m)]));return f}})(B0)),B0}var P0,gy;function JT(){if(gy)return P0;gy=1;const r=QT();function e(i){this.genPoly=void 0,this.degree=i,this.degree&&this.initialize(this.degree)}return e.prototype.initialize=function(o){this.degree=o,this.genPoly=r.generateECPolynomial(this.degree)},e.prototype.encode=function(o){if(!this.genPoly)throw new Error("Encoder not initialized");const f=new Uint8Array(o.length+this.degree);f.set(o);const m=r.mod(f,this.genPoly),x=this.degree-m.length;if(x>0){const v=new Uint8Array(this.degree);return v.set(m,x),v}return m},P0=e,P0}var j0={},U0={},F0={},my;function tb(){return my||(my=1,F0.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),F0}var Ds={},py;function nb(){if(py)return Ds;py=1;const r="[0-9]+",e="[A-Z $%*+\\-./:]+";let i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i=i.replace(/u/g,"\\u");const o="(?:(?![A-Z0-9 $%*+\\-./:]|"+i+`)(?:.|[\r
]))+`;Ds.KANJI=new RegExp(i,"g"),Ds.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Ds.BYTE=new RegExp(o,"g"),Ds.NUMERIC=new RegExp(r,"g"),Ds.ALPHANUMERIC=new RegExp(e,"g");const f=new RegExp("^"+i+"$"),m=new RegExp("^"+r+"$"),x=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Ds.testKanji=function(E){return f.test(E)},Ds.testNumeric=function(E){return m.test(E)},Ds.testAlphanumeric=function(E){return x.test(E)},Ds}var xy;function io(){return xy||(xy=1,(function(r){const e=tb(),i=nb();r.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},r.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},r.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},r.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},r.MIXED={bit:-1},r.getCharCountIndicator=function(m,x){if(!m.ccBits)throw new Error("Invalid mode: "+m);if(!e.isValid(x))throw new Error("Invalid version: "+x);return x>=1&&x<10?m.ccBits[0]:x<27?m.ccBits[1]:m.ccBits[2]},r.getBestModeForData=function(m){return i.testNumeric(m)?r.NUMERIC:i.testAlphanumeric(m)?r.ALPHANUMERIC:i.testKanji(m)?r.KANJI:r.BYTE},r.toString=function(m){if(m&&m.id)return m.id;throw new Error("Invalid mode")},r.isValid=function(m){return m&&m.bit&&m.ccBits};function o(f){if(typeof f!="string")throw new Error("Param is not a string");switch(f.toLowerCase()){case"numeric":return r.NUMERIC;case"alphanumeric":return r.ALPHANUMERIC;case"kanji":return r.KANJI;case"byte":return r.BYTE;default:throw new Error("Unknown mode: "+f)}}r.from=function(m,x){if(r.isValid(m))return m;try{return o(m)}catch{return x}}})(U0)),U0}var yy;function $T(){return yy||(yy=1,(function(r){const e=no(),i=eb(),o=pg(),f=io(),m=tb(),x=7973,v=e.getBCHDigit(x);function E(D,P,G){for(let H=1;H<=40;H++)if(P<=r.getCapacity(H,G,D))return H}function w(D,P){return f.getCharCountIndicator(D,P)+4}function T(D,P){let G=0;return D.forEach(function(H){const ye=w(H.mode,P);G+=ye+H.getBitsLength()}),G}function N(D,P){for(let G=1;G<=40;G++)if(T(D,G)<=r.getCapacity(G,P,f.MIXED))return G}r.from=function(P,G){return m.isValid(P)?parseInt(P,10):G},r.getCapacity=function(P,G,H){if(!m.isValid(P))throw new Error("Invalid QR Code version");typeof H>"u"&&(H=f.BYTE);const ye=e.getSymbolTotalCodewords(P),te=i.getTotalCodewordsCount(P,G),$=(ye-te)*8;if(H===f.MIXED)return $;const F=$-w(H,P);switch(H){case f.NUMERIC:return Math.floor(F/10*3);case f.ALPHANUMERIC:return Math.floor(F/11*2);case f.KANJI:return Math.floor(F/13);case f.BYTE:default:return Math.floor(F/8)}},r.getBestVersionForData=function(P,G){let H;const ye=o.from(G,o.M);if(Array.isArray(P)){if(P.length>1)return N(P,ye);if(P.length===0)return 1;H=P[0]}else H=P;return E(H.mode,H.getLength(),ye)},r.getEncodedBits=function(P){if(!m.isValid(P)||P<7)throw new Error("Invalid QR Code version");let G=P<<12;for(;e.getBCHDigit(G)-v>=0;)G^=x<<e.getBCHDigit(G)-v;return P<<12|G}})(j0)),j0}var z0={},_y;function e6(){if(_y)return z0;_y=1;const r=no(),e=1335,i=21522,o=r.getBCHDigit(e);return z0.getEncodedBits=function(m,x){const v=m.bit<<3|x;let E=v<<10;for(;r.getBCHDigit(E)-o>=0;)E^=e<<r.getBCHDigit(E)-o;return(v<<10|E)^i},z0}var H0={},V0,wy;function t6(){if(wy)return V0;wy=1;const r=io();function e(i){this.mode=r.NUMERIC,this.data=i.toString()}return e.getBitsLength=function(o){return 10*Math.floor(o/3)+(o%3?o%3*3+1:0)},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(o){let f,m,x;for(f=0;f+3<=this.data.length;f+=3)m=this.data.substr(f,3),x=parseInt(m,10),o.put(x,10);const v=this.data.length-f;v>0&&(m=this.data.substr(f),x=parseInt(m,10),o.put(x,v*3+1))},V0=e,V0}var G0,by;function n6(){if(by)return G0;by=1;const r=io(),e=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function i(o){this.mode=r.ALPHANUMERIC,this.data=o}return i.getBitsLength=function(f){return 11*Math.floor(f/2)+6*(f%2)},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(f){let m;for(m=0;m+2<=this.data.length;m+=2){let x=e.indexOf(this.data[m])*45;x+=e.indexOf(this.data[m+1]),f.put(x,11)}this.data.length%2&&f.put(e.indexOf(this.data[m]),6)},G0=i,G0}var q0,Ey;function i6(){if(Ey)return q0;Ey=1;const r=io();function e(i){this.mode=r.BYTE,typeof i=="string"?this.data=new TextEncoder().encode(i):this.data=new Uint8Array(i)}return e.getBitsLength=function(o){return o*8},e.prototype.getLength=function(){return this.data.length},e.prototype.getBitsLength=function(){return e.getBitsLength(this.data.length)},e.prototype.write=function(i){for(let o=0,f=this.data.length;o<f;o++)i.put(this.data[o],8)},q0=e,q0}var X0,vy;function s6(){if(vy)return X0;vy=1;const r=io(),e=no();function i(o){this.mode=r.KANJI,this.data=o}return i.getBitsLength=function(f){return f*13},i.prototype.getLength=function(){return this.data.length},i.prototype.getBitsLength=function(){return i.getBitsLength(this.data.length)},i.prototype.write=function(o){let f;for(f=0;f<this.data.length;f++){let m=e.toSJIS(this.data[f]);if(m>=33088&&m<=40956)m-=33088;else if(m>=57408&&m<=60351)m-=49472;else throw new Error("Invalid SJIS character: "+this.data[f]+`
Make sure your charset is UTF-8`);m=(m>>>8&255)*192+(m&255),o.put(m,13)}},X0=i,X0}var Y0={exports:{}},Cy;function r6(){return Cy||(Cy=1,(function(r){var e={single_source_shortest_paths:function(i,o,f){var m={},x={};x[o]=0;var v=e.PriorityQueue.make();v.push(o,0);for(var E,w,T,N,D,P,G,H,ye;!v.empty();){E=v.pop(),w=E.value,N=E.cost,D=i[w]||{};for(T in D)D.hasOwnProperty(T)&&(P=D[T],G=N+P,H=x[T],ye=typeof x[T]>"u",(ye||H>G)&&(x[T]=G,v.push(T,G),m[T]=w))}if(typeof f<"u"&&typeof x[f]>"u"){var te=["Could not find a path from ",o," to ",f,"."].join("");throw new Error(te)}return m},extract_shortest_path_from_predecessor_list:function(i,o){for(var f=[],m=o;m;)f.push(m),i[m],m=i[m];return f.reverse(),f},find_path:function(i,o,f){var m=e.single_source_shortest_paths(i,o,f);return e.extract_shortest_path_from_predecessor_list(m,f)},PriorityQueue:{make:function(i){var o=e.PriorityQueue,f={},m;i=i||{};for(m in o)o.hasOwnProperty(m)&&(f[m]=o[m]);return f.queue=[],f.sorter=i.sorter||o.default_sorter,f},default_sorter:function(i,o){return i.cost-o.cost},push:function(i,o){var f={value:i,cost:o};this.queue.push(f),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};r.exports=e})(Y0)),Y0.exports}var Ay;function a6(){return Ay||(Ay=1,(function(r){const e=io(),i=t6(),o=n6(),f=i6(),m=s6(),x=nb(),v=no(),E=r6();function w(te){return unescape(encodeURIComponent(te)).length}function T(te,$,F){const q=[];let Z;for(;(Z=te.exec(F))!==null;)q.push({data:Z[0],index:Z.index,mode:$,length:Z[0].length});return q}function N(te){const $=T(x.NUMERIC,e.NUMERIC,te),F=T(x.ALPHANUMERIC,e.ALPHANUMERIC,te);let q,Z;return v.isKanjiModeEnabled()?(q=T(x.BYTE,e.BYTE,te),Z=T(x.KANJI,e.KANJI,te)):(q=T(x.BYTE_KANJI,e.BYTE,te),Z=[]),$.concat(F,q,Z).sort(function(k,Y){return k.index-Y.index}).map(function(k){return{data:k.data,mode:k.mode,length:k.length}})}function D(te,$){switch($){case e.NUMERIC:return i.getBitsLength(te);case e.ALPHANUMERIC:return o.getBitsLength(te);case e.KANJI:return m.getBitsLength(te);case e.BYTE:return f.getBitsLength(te)}}function P(te){return te.reduce(function($,F){const q=$.length-1>=0?$[$.length-1]:null;return q&&q.mode===F.mode?($[$.length-1].data+=F.data,$):($.push(F),$)},[])}function G(te){const $=[];for(let F=0;F<te.length;F++){const q=te[F];switch(q.mode){case e.NUMERIC:$.push([q,{data:q.data,mode:e.ALPHANUMERIC,length:q.length},{data:q.data,mode:e.BYTE,length:q.length}]);break;case e.ALPHANUMERIC:$.push([q,{data:q.data,mode:e.BYTE,length:q.length}]);break;case e.KANJI:$.push([q,{data:q.data,mode:e.BYTE,length:w(q.data)}]);break;case e.BYTE:$.push([{data:q.data,mode:e.BYTE,length:w(q.data)}])}}return $}function H(te,$){const F={},q={start:{}};let Z=["start"];for(let U=0;U<te.length;U++){const k=te[U],Y=[];for(let Q=0;Q<k.length;Q++){const Ee=k[Q],we=""+U+Q;Y.push(we),F[we]={node:Ee,lastCount:0},q[we]={};for(let ne=0;ne<Z.length;ne++){const ge=Z[ne];F[ge]&&F[ge].node.mode===Ee.mode?(q[ge][we]=D(F[ge].lastCount+Ee.length,Ee.mode)-D(F[ge].lastCount,Ee.mode),F[ge].lastCount+=Ee.length):(F[ge]&&(F[ge].lastCount=Ee.length),q[ge][we]=D(Ee.length,Ee.mode)+4+e.getCharCountIndicator(Ee.mode,$))}}Z=Y}for(let U=0;U<Z.length;U++)q[Z[U]].end=0;return{map:q,table:F}}function ye(te,$){let F;const q=e.getBestModeForData(te);if(F=e.from($,q),F!==e.BYTE&&F.bit<q.bit)throw new Error('"'+te+'" cannot be encoded with mode '+e.toString(F)+`.
 Suggested mode is: `+e.toString(q));switch(F===e.KANJI&&!v.isKanjiModeEnabled()&&(F=e.BYTE),F){case e.NUMERIC:return new i(te);case e.ALPHANUMERIC:return new o(te);case e.KANJI:return new m(te);case e.BYTE:return new f(te)}}r.fromArray=function($){return $.reduce(function(F,q){return typeof q=="string"?F.push(ye(q,null)):q.data&&F.push(ye(q.data,q.mode)),F},[])},r.fromString=function($,F){const q=N($,v.isKanjiModeEnabled()),Z=G(q),U=H(Z,F),k=E.find_path(U.map,"start","end"),Y=[];for(let Q=1;Q<k.length-1;Q++)Y.push(U.table[k[Q]].node);return r.fromArray(P(Y))},r.rawSplit=function($){return r.fromArray(N($,v.isKanjiModeEnabled()))}})(H0)),H0}var Sy;function o6(){if(Sy)return I0;Sy=1;const r=no(),e=pg(),i=qT(),o=XT(),f=YT(),m=WT(),x=KT(),v=eb(),E=JT(),w=$T(),T=e6(),N=io(),D=a6();function P(U,k){const Y=U.size,Q=m.getPositions(k);for(let Ee=0;Ee<Q.length;Ee++){const we=Q[Ee][0],ne=Q[Ee][1];for(let ge=-1;ge<=7;ge++)if(!(we+ge<=-1||Y<=we+ge))for(let Ie=-1;Ie<=7;Ie++)ne+Ie<=-1||Y<=ne+Ie||(ge>=0&&ge<=6&&(Ie===0||Ie===6)||Ie>=0&&Ie<=6&&(ge===0||ge===6)||ge>=2&&ge<=4&&Ie>=2&&Ie<=4?U.set(we+ge,ne+Ie,!0,!0):U.set(we+ge,ne+Ie,!1,!0))}}function G(U){const k=U.size;for(let Y=8;Y<k-8;Y++){const Q=Y%2===0;U.set(Y,6,Q,!0),U.set(6,Y,Q,!0)}}function H(U,k){const Y=f.getPositions(k);for(let Q=0;Q<Y.length;Q++){const Ee=Y[Q][0],we=Y[Q][1];for(let ne=-2;ne<=2;ne++)for(let ge=-2;ge<=2;ge++)ne===-2||ne===2||ge===-2||ge===2||ne===0&&ge===0?U.set(Ee+ne,we+ge,!0,!0):U.set(Ee+ne,we+ge,!1,!0)}}function ye(U,k){const Y=U.size,Q=w.getEncodedBits(k);let Ee,we,ne;for(let ge=0;ge<18;ge++)Ee=Math.floor(ge/3),we=ge%3+Y-8-3,ne=(Q>>ge&1)===1,U.set(Ee,we,ne,!0),U.set(we,Ee,ne,!0)}function te(U,k,Y){const Q=U.size,Ee=T.getEncodedBits(k,Y);let we,ne;for(we=0;we<15;we++)ne=(Ee>>we&1)===1,we<6?U.set(we,8,ne,!0):we<8?U.set(we+1,8,ne,!0):U.set(Q-15+we,8,ne,!0),we<8?U.set(8,Q-we-1,ne,!0):we<9?U.set(8,15-we-1+1,ne,!0):U.set(8,15-we-1,ne,!0);U.set(Q-8,8,1,!0)}function $(U,k){const Y=U.size;let Q=-1,Ee=Y-1,we=7,ne=0;for(let ge=Y-1;ge>0;ge-=2)for(ge===6&&ge--;;){for(let Ie=0;Ie<2;Ie++)if(!U.isReserved(Ee,ge-Ie)){let oe=!1;ne<k.length&&(oe=(k[ne]>>>we&1)===1),U.set(Ee,ge-Ie,oe),we--,we===-1&&(ne++,we=7)}if(Ee+=Q,Ee<0||Y<=Ee){Ee-=Q,Q=-Q;break}}}function F(U,k,Y){const Q=new i;Y.forEach(function(Ie){Q.put(Ie.mode.bit,4),Q.put(Ie.getLength(),N.getCharCountIndicator(Ie.mode,U)),Ie.write(Q)});const Ee=r.getSymbolTotalCodewords(U),we=v.getTotalCodewordsCount(U,k),ne=(Ee-we)*8;for(Q.getLengthInBits()+4<=ne&&Q.put(0,4);Q.getLengthInBits()%8!==0;)Q.putBit(0);const ge=(ne-Q.getLengthInBits())/8;for(let Ie=0;Ie<ge;Ie++)Q.put(Ie%2?17:236,8);return q(Q,U,k)}function q(U,k,Y){const Q=r.getSymbolTotalCodewords(k),Ee=v.getTotalCodewordsCount(k,Y),we=Q-Ee,ne=v.getBlocksCount(k,Y),ge=Q%ne,Ie=ne-ge,oe=Math.floor(Q/ne),ee=Math.floor(we/ne),me=ee+1,Ge=oe-ee,rt=new E(Ge);let lt=0;const W=new Array(ne),fe=new Array(ne);let Re=0;const De=new Uint8Array(U.buffer);for(let wt=0;wt<ne;wt++){const On=wt<Ie?ee:me;W[wt]=De.slice(lt,lt+On),fe[wt]=rt.encode(W[wt]),lt+=On,Re=Math.max(Re,On)}const Je=new Uint8Array(Q);let Ae=0,nt,it;for(nt=0;nt<Re;nt++)for(it=0;it<ne;it++)nt<W[it].length&&(Je[Ae++]=W[it][nt]);for(nt=0;nt<Ge;nt++)for(it=0;it<ne;it++)Je[Ae++]=fe[it][nt];return Je}function Z(U,k,Y,Q){let Ee;if(Array.isArray(U))Ee=D.fromArray(U);else if(typeof U=="string"){let oe=k;if(!oe){const ee=D.rawSplit(U);oe=w.getBestVersionForData(ee,Y)}Ee=D.fromString(U,oe||40)}else throw new Error("Invalid data");const we=w.getBestVersionForData(Ee,Y);if(!we)throw new Error("The amount of data is too big to be stored in a QR Code");if(!k)k=we;else if(k<we)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+we+`.
`);const ne=F(k,Y,Ee),ge=r.getSymbolSize(k),Ie=new o(ge);return P(Ie,k),G(Ie),H(Ie,k),te(Ie,Y,0),k>=7&&ye(Ie,k),$(Ie,ne),isNaN(Q)&&(Q=x.getBestMask(Ie,te.bind(null,Ie,Y))),x.applyMask(Q,Ie),te(Ie,Y,Q),{modules:Ie,version:k,errorCorrectionLevel:Y,maskPattern:Q,segments:Ee}}return I0.create=function(k,Y){if(typeof k>"u"||k==="")throw new Error("No input text");let Q=e.M,Ee,we;return typeof Y<"u"&&(Q=e.from(Y.errorCorrectionLevel,e.M),Ee=w.from(Y.version),we=x.from(Y.maskPattern),Y.toSJISFunc&&r.setToSJISFunction(Y.toSJISFunc)),Z(k,Ee,Q,we)},I0}var W0={},K0={},Ty;function ib(){return Ty||(Ty=1,(function(r){function e(i){if(typeof i=="number"&&(i=i.toString()),typeof i!="string")throw new Error("Color should be defined as hex string");let o=i.slice().replace("#","").split("");if(o.length<3||o.length===5||o.length>8)throw new Error("Invalid hex color: "+i);(o.length===3||o.length===4)&&(o=Array.prototype.concat.apply([],o.map(function(m){return[m,m]}))),o.length===6&&o.push("F","F");const f=parseInt(o.join(""),16);return{r:f>>24&255,g:f>>16&255,b:f>>8&255,a:f&255,hex:"#"+o.slice(0,6).join("")}}r.getOptions=function(o){o||(o={}),o.color||(o.color={});const f=typeof o.margin>"u"||o.margin===null||o.margin<0?4:o.margin,m=o.width&&o.width>=21?o.width:void 0,x=o.scale||4;return{width:m,scale:m?4:x,margin:f,color:{dark:e(o.color.dark||"#000000ff"),light:e(o.color.light||"#ffffffff")},type:o.type,rendererOpts:o.rendererOpts||{}}},r.getScale=function(o,f){return f.width&&f.width>=o+f.margin*2?f.width/(o+f.margin*2):f.scale},r.getImageWidth=function(o,f){const m=r.getScale(o,f);return Math.floor((o+f.margin*2)*m)},r.qrToImageData=function(o,f,m){const x=f.modules.size,v=f.modules.data,E=r.getScale(x,m),w=Math.floor((x+m.margin*2)*E),T=m.margin*E,N=[m.color.light,m.color.dark];for(let D=0;D<w;D++)for(let P=0;P<w;P++){let G=(D*w+P)*4,H=m.color.light;if(D>=T&&P>=T&&D<w-T&&P<w-T){const ye=Math.floor((D-T)/E),te=Math.floor((P-T)/E);H=N[v[ye*x+te]?1:0]}o[G++]=H.r,o[G++]=H.g,o[G++]=H.b,o[G]=H.a}}})(K0)),K0}var Ny;function l6(){return Ny||(Ny=1,(function(r){const e=ib();function i(f,m,x){f.clearRect(0,0,m.width,m.height),m.style||(m.style={}),m.height=x,m.width=x,m.style.height=x+"px",m.style.width=x+"px"}function o(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}r.render=function(m,x,v){let E=v,w=x;typeof E>"u"&&(!x||!x.getContext)&&(E=x,x=void 0),x||(w=o()),E=e.getOptions(E);const T=e.getImageWidth(m.modules.size,E),N=w.getContext("2d"),D=N.createImageData(T,T);return e.qrToImageData(D.data,m,E),i(N,w,T),N.putImageData(D,0,0),w},r.renderToDataURL=function(m,x,v){let E=v;typeof E>"u"&&(!x||!x.getContext)&&(E=x,x=void 0),E||(E={});const w=r.render(m,x,E),T=E.type||"image/png",N=E.rendererOpts||{};return w.toDataURL(T,N.quality)}})(W0)),W0}var Z0={},Iy;function c6(){if(Iy)return Z0;Iy=1;const r=ib();function e(f,m){const x=f.a/255,v=m+'="'+f.hex+'"';return x<1?v+" "+m+'-opacity="'+x.toFixed(2).slice(1)+'"':v}function i(f,m,x){let v=f+m;return typeof x<"u"&&(v+=" "+x),v}function o(f,m,x){let v="",E=0,w=!1,T=0;for(let N=0;N<f.length;N++){const D=Math.floor(N%m),P=Math.floor(N/m);!D&&!w&&(w=!0),f[N]?(T++,N>0&&D>0&&f[N-1]||(v+=w?i("M",D+x,.5+P+x):i("m",E,0),E=0,w=!1),D+1<m&&f[N+1]||(v+=i("h",T),T=0)):E++}return v}return Z0.render=function(m,x,v){const E=r.getOptions(x),w=m.modules.size,T=m.modules.data,N=w+E.margin*2,D=E.color.light.a?"<path "+e(E.color.light,"fill")+' d="M0 0h'+N+"v"+N+'H0z"/>':"",P="<path "+e(E.color.dark,"stroke")+' d="'+o(T,w,E.margin)+'"/>',G='viewBox="0 0 '+N+" "+N+'"',ye='<svg xmlns="http://www.w3.org/2000/svg" '+(E.width?'width="'+E.width+'" height="'+E.width+'" ':"")+G+' shape-rendering="crispEdges">'+D+P+`</svg>
`;return typeof v=="function"&&v(null,ye),ye},Z0}var Ry;function u6(){if(Ry)return Go;Ry=1;const r=GT(),e=o6(),i=l6(),o=c6();function f(m,x,v,E,w){const T=[].slice.call(arguments,1),N=T.length,D=typeof T[N-1]=="function";if(!D&&!r())throw new Error("Callback required as last argument");if(D){if(N<2)throw new Error("Too few arguments provided");N===2?(w=v,v=x,x=E=void 0):N===3&&(x.getContext&&typeof w>"u"?(w=E,E=void 0):(w=E,E=v,v=x,x=void 0))}else{if(N<1)throw new Error("Too few arguments provided");return N===1?(v=x,x=E=void 0):N===2&&!x.getContext&&(E=v,v=x,x=void 0),new Promise(function(P,G){try{const H=e.create(v,E);P(m(H,x,E))}catch(H){G(H)}})}try{const P=e.create(v,E);w(null,m(P,x,E))}catch(P){w(P)}}return Go.create=e.create,Go.toCanvas=f.bind(null,i.render),Go.toDataURL=f.bind(null,i.renderToDataURL),Go.toString=f.bind(null,function(m,x,v){return o.render(m,v)}),Go}var f6=u6();const Oy=Bc(f6),h6=({data:r,onClose:e,onConfirmAction:i,notify:o})=>{var te;const[f,m]=Pe.useState(null),[x,v]=Pe.useState([]),[E,w]=Pe.useState(0),[T,N]=Pe.useState(!1),[D]=Pe.useState(()=>({...r,uniqueId:`${Date.now()}-${Math.random().toString(36).substring(2,9)}`}));Pe.useEffect(()=>{let $;if(x.length>1){const F=x.length>10?300:x.length>5?500:800;$=setInterval(()=>{w(q=>(q+1)%x.length)},F)}return()=>clearInterval($)},[x]),Pe.useEffect(()=>{const $=(F,q)=>{try{const Z=cv(F);if(Z.length>50&&q){const U=JSON.parse(JSON.stringify(F));U.payload&&(U.payload=e1(U.payload)),m("  .    ."),$(U,!1);return}v(Z)}catch(Z){console.error("Encoding failed",Z),m("  .")}};$(D,!0)},[D]),Pe.useEffect(()=>{const $=document.getElementById("qrcode-container");if(!$||x.length===0)return;const F=x[E];$.innerHTML="";const q=document.createElement("canvas");Oy.toCanvas(q,F,{width:256,margin:1,errorCorrectionLevel:"L"},Z=>{Z||$.appendChild(q)})},[x,E]);const P=!!r.actionContext,G=((te=r.actionContext)==null?void 0:te.actionType)==="clear_inventory",H=()=>{const $=document.getElementById("qrcode-container"),F=$==null?void 0:$.querySelector("canvas");if(F){const q=F.toDataURL("image/png"),Z=document.createElement("a");Z.href=q,Z.download=`qr_code_${r.type}_part${E+1}.png`,Z.click()}},ye=async()=>{if(x.length!==0){N(!0);try{const $=document.createElement("canvas");$.width=256,$.height=256;const F=$.captureStream(25),q=new MediaRecorder(F,{mimeType:"video/webm"}),Z=[];q.ondataavailable=k=>{k.data.size>0&&Z.push(k.data)},q.onstop=()=>{const k=new Blob(Z,{type:"video/webm"}),Y=URL.createObjectURL(k),Q=document.createElement("a");Q.href=Y,Q.download=`qr_code_${r.type}_animated.webm`,Q.click(),N(!1),setTimeout(()=>URL.revokeObjectURL(Y),1e3)},q.start();const U=x.length>10?300:x.length>5?500:800;for(const k of x)await new Promise(Y=>{Oy.toCanvas($,k,{width:256,margin:1,errorCorrectionLevel:"L"},()=>{setTimeout(Y,U)})});q.stop()}catch($){console.error("Video recording error",$),N(!1),o?o("error"," ","    Canvas."):alert("       Canvas.")}}};return A.jsx("div",{className:"fixed inset-0 bg-black/80 z-[200] flex items-center justify-center p-4",onClick:e,children:A.jsxs("div",{className:"bg-white p-6 rounded-xl flex flex-col items-center gap-4 w-full max-w-sm",onClick:$=>$.stopPropagation(),children:[A.jsxs("div",{className:"flex flex-col items-center w-full",children:[A.jsx("div",{id:"qrcode-container",className:"rounded overflow-hidden min-h-[256px] flex items-center justify-center bg-stone-100 transition-all border border-stone-100"}),x.length>1&&A.jsxs("div",{className:"mt-3 bg-stone-800 text-white text-xs font-bold px-4 py-1.5 rounded-full shadow-sm whitespace-nowrap",children:[" ",E+1,"  ",x.length]})]}),f&&A.jsx("div",{className:"bg-amber-100 text-amber-800 text-xs px-2 py-1 rounded border border-amber-200 text-center animate-pulse",children:f}),x.length>1&&!f&&A.jsxs("div",{className:"text-stone-500 text-xs text-center font-bold",children:[",   . ",A.jsx("br",{}),"  ."]}),A.jsx("p",{className:"font-header font-bold uppercase text-center max-w-xs",children:r.payload.name||(G?"":"")}),A.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("button",{onClick:H,className:"flex-1 bg-stone-200 hover:bg-stone-300 text-stone-700 font-bold py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[A.jsx(Qe,{path:Ve.image,size:16}),"PNG"]}),x.length>1&&A.jsxs("button",{onClick:ye,disabled:T,className:"flex-1 bg-emerald-600 hover:bg-emerald-700 disabled:bg-stone-300 text-white font-bold py-2 rounded-lg text-sm flex items-center justify-center gap-2",children:[A.jsx(Qe,{path:Ve.video,size:16}),T?"...":""]})]}),P&&i&&A.jsx("button",{onClick:()=>i(r.actionContext),className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold py-2 rounded-lg text-sm",children:G?"  ":"  "}),A.jsx("button",{onClick:e,className:"w-full bg-stone-100 hover:bg-stone-200 text-stone-600 font-bold py-2 rounded-lg text-sm",children:P?" ":""})]})]})})},d6=({onClose:r,scanProgress:e})=>A.jsx("div",{className:"fixed inset-0 bg-black/90 z-[200] flex items-center justify-center p-4",children:A.jsxs("div",{className:"w-full max-w-md bg-stone-900 p-4 rounded-xl relative",children:[A.jsx("div",{id:"reader",className:"bg-black rounded-lg overflow-hidden min-h-[250px]"}),e&&A.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-3/4 bg-black/80 backdrop-blur rounded-xl p-4 flex flex-col items-center justify-center border border-white/20 shadow-2xl z-10",children:[A.jsxs("div",{className:"text-white font-header font-bold text-2xl mb-2",children:[Math.round(e.current/e.total*100),"%"]}),A.jsx("div",{className:"w-full h-2 bg-stone-700 rounded-full overflow-hidden",children:A.jsx("div",{className:"h-full bg-emerald-500 transition-all duration-300 ease-out",style:{width:`${e.current/e.total*100}%`}})}),A.jsx("div",{className:"text-stone-400 text-xs font-bold mt-2 uppercase tracking-widest",children:" ..."})]}),A.jsx("button",{onClick:r,className:"w-full mt-4 bg-red-600 text-white py-2 rounded font-bold",children:""})]})}),g6=({data:r,onClose:e})=>{const[i,o]=Pe.useState(!1);Pe.useEffect(()=>{if(r){if(requestAnimationFrame(()=>o(!0)),r.type!=="confirm"){const E=setTimeout(()=>{f()},2500);return()=>clearTimeout(E)}}else o(!1)},[r]);const f=()=>{o(!1),setTimeout(()=>{e()},300)},m=()=>{r!=null&&r.onConfirm&&r.onConfirm(),o(!1),setTimeout(()=>{e()},300)};if(!r)return null;const x=`transition-all duration-300 transform ${i?"scale-100 opacity-100":"scale-95 opacity-0"}`,v=()=>{if(r.type==="confirm"){const E=r.confirmLabel==="",w=E?"bg-stone-600 hover:bg-stone-700":"bg-red-600 hover:bg-red-700";return A.jsxs("div",{className:`${x} flex flex-col items-center bg-white p-6 rounded-2xl border-2 border-stone-800 shadow-2xl max-w-sm text-center w-full mx-4`,children:[A.jsx("div",{className:"bg-stone-100 p-4 rounded-full mb-4",children:A.jsx(Qe,{path:Ve.trash,size:48,className:E?"text-stone-500":"text-red-500"})}),A.jsx("h3",{className:"text-xl font-header font-black text-stone-800 uppercase mb-2",children:r.title}),r.subtitle&&A.jsx("p",{className:"text-stone-500 text-sm font-hand mb-6",children:r.subtitle}),A.jsxs("div",{className:"flex gap-3 w-full",children:[A.jsx("button",{onClick:f,className:"flex-1 py-3 rounded-lg font-bold text-stone-600 bg-stone-100 hover:bg-stone-200 transition-colors",children:""}),A.jsx("button",{onClick:m,className:`flex-1 py-3 rounded-lg font-bold text-white transition-colors shadow-lg ${w}`,children:r.confirmLabel||""})]})]})}if(r.type==="error")return A.jsxs("div",{className:`${x} flex flex-col items-center bg-red-900/90 backdrop-blur-md p-6 rounded-2xl border border-red-500 shadow-2xl max-w-sm text-center`,children:[A.jsx("div",{className:"bg-red-800 p-4 rounded-full mb-4 shadow-lg border-2 border-red-400",children:A.jsx(Qe,{path:Ve.lock,size:48,className:"text-white"})}),A.jsx("h3",{className:"text-2xl font-bold text-white mb-1 font-header uppercase drop-shadow-sm",children:r.title}),r.subtitle&&A.jsx("p",{className:"text-red-200 text-sm font-hand italic",children:r.subtitle})]});if(r.type==="xp")return A.jsxs("div",{className:`relative flex flex-col items-center justify-center pointer-events-none transition-all duration-500 transform ${i?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:[A.jsx("div",{className:"absolute inset-0 bg-yellow-400 rounded-full blur-xl opacity-20 anim-burst"}),A.jsxs("div",{className:"text-6xl md:text-8xl font-black text-transparent bg-clip-text bg-gradient-to-b from-yellow-300 to-yellow-600 drop-shadow-lg filter font-header",children:["+",r.amount]}),A.jsx("div",{className:"text-2xl md:text-3xl font-bold text-yellow-100 mt-2 uppercase tracking-widest font-header drop-shadow-md",children:" "})]});if(r.type==="item"||r.type==="ability"||r.type==="gm-event"){const E=r.customIcon||(r.type==="item"?Ve.item:Ve.skill);return A.jsxs("div",{className:`${x} flex flex-col items-center bg-white/10 backdrop-blur-md p-6 rounded-2xl border border-white/30 shadow-2xl max-w-sm text-center`,children:[A.jsx("div",{className:"bg-stone-800 p-4 rounded-full mb-4 shadow-lg border-2 border-stone-600",children:A.jsx(Qe,{path:E,size:48,className:"text-white"})}),A.jsx("h3",{className:"text-2xl font-bold text-white mb-1 font-header uppercase drop-shadow-sm",children:r.title}),r.subtitle&&A.jsx("p",{className:"text-white/80 text-sm font-hand italic",children:r.subtitle}),r.type!=="gm-event"&&A.jsx("div",{className:"mt-3 px-3 py-1 bg-emerald-500 text-white text-xs font-bold rounded-full uppercase tracking-wider shadow-sm",children:r.type==="item"?"  ":" "})]})}return r.type==="item-sent"?A.jsxs("div",{className:`${x} flex flex-col items-center justify-center pointer-events-none`,children:[A.jsx("div",{className:"bg-red-500 p-6 rounded-full shadow-2xl mb-2",children:A.jsx(Qe,{path:Ve.item,size:64,className:"text-white"})}),A.jsx("h3",{className:"text-3xl font-header font-black text-red-500 uppercase tracking-widest drop-shadow-sm",children:""}),A.jsx("p",{className:"text-white font-bold text-lg",children:r.title})]}):r.type==="domain"?A.jsx("div",{className:`${x} w-full max-w-md mx-4`,children:A.jsxs("div",{className:"relative bg-stone-900 p-6 rounded-lg border border-stone-700 shadow-2xl flex flex-col items-center text-center",children:[A.jsx("div",{className:"mb-2 text-purple-400",children:A.jsx(Qe,{path:Ve.domains,size:64})}),A.jsx("div",{className:"text-xs font-bold text-purple-300 uppercase tracking-[0.2em] mb-1",children:"  "}),A.jsx("h2",{className:"text-3xl font-header font-black text-white uppercase mb-2",children:r.title}),A.jsx("div",{className:"h-px w-16 bg-gradient-to-r from-transparent via-purple-500 to-transparent my-2"}),A.jsx("p",{className:"text-stone-400 text-sm italic",children:r.subtitle})]})}):null};return A.jsx("div",{className:`fixed inset-0 z-[50000] flex items-center justify-center transition-all duration-300 
        ${i?"bg-black/60 backdrop-blur-sm opacity-100 pointer-events-auto":"bg-black/0 backdrop-blur-none opacity-0 pointer-events-none"}`,onClick:()=>{(r==null?void 0:r.type)!=="confirm"&&f()},children:v()})},m6=()=>{const[r,e]=Pe.useState(""),[i,o]=Pe.useState(""),[f,m]=Pe.useState(!1),[x,v]=Pe.useState(null),[E,w]=Pe.useState(!1),T=async D=>{D.preventDefault(),w(!0),v(null);try{f?await XC(Ec,r,i):await YC(Ec,r,i)}catch(P){console.error(P);let G=" ";P.code==="auth/invalid-credential"&&(G=" email  "),P.code==="auth/email-already-in-use"&&(G=" email  "),P.code==="auth/weak-password"&&(G="   (. 6 )"),P.code==="auth/invalid-api-key"&&(G="  API Key   (firebase.ts)"),v(G)}finally{w(!1)}},N=async()=>{w(!0),v(null);try{await pA(Ec,bT)}catch(D){console.error(D),v("   Google. ,     Firebase Console.")}finally{w(!1)}};return A.jsx("div",{className:"fixed inset-0 bg-stone-900 flex flex-col items-center justify-center p-6 z-[9999]",children:A.jsxs("div",{className:"w-full max-w-sm bg-stone-800 p-8 rounded-2xl shadow-2xl border border-stone-700",children:[A.jsx("div",{className:"flex justify-center mb-6 text-emerald-500",children:A.jsx(Qe,{path:Ve.d20,size:48})}),A.jsx("h1",{className:"text-2xl font-header font-black text-white text-center uppercase mb-2 tracking-widest",children:"Vitruvium"}),A.jsx("p",{className:"text-center text-stone-400 text-xs font-bold uppercase mb-8",children:" "}),A.jsxs("form",{onSubmit:T,className:"flex flex-col gap-4",children:[A.jsx("input",{type:"email",value:r,onChange:D=>e(D.target.value),placeholder:"Email",className:"w-full bg-stone-900 border border-stone-600 text-white text-lg p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 placeholder-stone-600",required:!0}),A.jsx("input",{type:"password",value:i,onChange:D=>o(D.target.value),placeholder:"",className:"w-full bg-stone-900 border border-stone-600 text-white text-lg p-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-emerald-500 placeholder-stone-600",required:!0}),x&&A.jsx("div",{className:"text-red-400 text-xs font-bold text-center uppercase tracking-wider bg-red-900/20 p-2 rounded border border-red-900/50",children:x}),A.jsx("button",{type:"submit",disabled:E,className:"w-full bg-white text-stone-900 font-bold py-3 rounded-lg hover:bg-stone-200 disabled:opacity-50 transition-colors mt-2",children:E?"...":f?" ":""})]}),A.jsxs("div",{className:"flex items-center gap-4 my-6",children:[A.jsx("div",{className:"h-px bg-stone-600 flex-1"}),A.jsx("span",{className:"text-stone-500 text-xs uppercase font-bold",children:""}),A.jsx("div",{className:"h-px bg-stone-600 flex-1"})]}),A.jsxs("button",{onClick:N,disabled:E,className:"w-full bg-stone-700 hover:bg-stone-600 text-white font-bold py-3 rounded-lg flex items-center justify-center gap-3 transition-colors border border-stone-600",children:[A.jsx("svg",{viewBox:"0 0 24 24",width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",children:A.jsxs("g",{transform:"matrix(1, 0, 0, 1, 27.009001, -39.238998)",children:[A.jsx("path",{fill:"#4285F4",d:"M -3.264 51.509 C -3.264 50.719 -3.334 49.969 -3.454 49.239 L -14.754 49.239 L -14.754 53.749 L -8.284 53.749 C -8.574 55.229 -9.424 56.479 -10.684 57.329 L -10.684 60.329 L -6.824 60.329 C -4.564 58.239 -3.264 55.159 -3.264 51.509 Z"}),A.jsx("path",{fill:"#34A853",d:"M -14.754 63.239 C -11.514 63.239 -8.804 62.159 -6.824 60.329 L -10.684 57.329 C -11.764 58.049 -13.134 58.489 -14.754 58.489 C -17.884 58.489 -20.534 56.379 -21.484 53.529 L -25.464 53.529 L -25.464 56.619 C -23.494 60.539 -19.444 63.239 -14.754 63.239 Z"}),A.jsx("path",{fill:"#FBBC05",d:"M -21.484 53.529 C -21.734 52.809 -21.864 52.039 -21.864 51.239 C -21.864 50.439 -21.724 49.669 -21.484 48.949 L -21.484 45.859 L -25.464 45.859 C -26.284 47.479 -26.754 49.299 -26.754 51.239 C -26.754 53.179 -26.284 54.999 -25.464 56.619 L -21.484 53.529 Z"}),A.jsx("path",{fill:"#EA4335",d:"M -14.754 43.989 C -12.984 43.989 -11.404 44.599 -10.154 45.799 L -6.734 42.379 C -8.804 40.439 -11.514 39.239 -14.754 39.239 C -19.444 39.239 -23.494 41.939 -25.464 45.859 L -21.484 48.949 C -20.534 46.099 -17.884 43.989 -14.754 43.989 Z"})]})}),"  Google"]}),A.jsx("div",{className:"mt-6 text-center",children:A.jsx("button",{onClick:()=>{m(!f),v(null)},className:"text-stone-500 text-xs font-bold uppercase hover:text-white transition-colors",children:f?"  ? ":" ? "})})]})})},p6=({onUnlock:r})=>{const[e,i]=Pe.useState(""),[o,f]=Pe.useState(!1),[m,x]=Pe.useState(!1),v=async E=>{E.preventDefault(),x(!0),f(!1),await new Promise(T=>setTimeout(T,500)),await r(e)||(f(!0),x(!1))};return A.jsx("div",{className:"fixed inset-0 bg-stone-900 flex flex-col items-center justify-center p-6 z-[9999]",children:A.jsxs("div",{className:"w-full max-w-sm bg-stone-800 p-8 rounded-2xl shadow-2xl border border-stone-700",children:[A.jsx("div",{className:"flex justify-center mb-6 text-stone-300",children:A.jsx(Qe,{path:Ve.lock,size:48})}),A.jsx("h1",{className:"text-2xl font-header font-black text-white text-center uppercase mb-8 tracking-widest",children:" "}),A.jsxs("form",{onSubmit:v,className:"flex flex-col gap-4",children:[A.jsx("input",{type:"password",value:e,onChange:E=>i(E.target.value),placeholder:" ",className:`
                    w-full bg-stone-900 border text-center text-white text-lg p-3 rounded-lg focus:outline-none focus:ring-2
                    ${o?"border-red-500 focus:ring-red-500 animate-shake":"border-stone-600 focus:ring-emerald-500"}
                 `,autoFocus:!0}),o&&A.jsx("div",{className:"text-red-400 text-xs font-bold text-center uppercase tracking-wider",children:" "}),A.jsx("button",{type:"submit",disabled:m||!e,className:"w-full bg-white text-stone-900 font-bold py-3 rounded-lg hover:bg-stone-200 disabled:opacity-50 transition-colors",children:m?"...":""})]}),A.jsx("div",{className:"mt-8 text-center text-stone-600 text-xs font-mono",children:"SYS_LOCK_ACTIVE: SECURE_V2"})]})})},x6=({onUnlock:r,onClose:e})=>{const[i,o]=Pe.useState(""),[f,m]=Pe.useState(!1),[x,v]=Pe.useState(!1),E=async w=>{w.preventDefault(),v(!0),m(!1),await r(i)?e():(m(!0),v(!1))};return A.jsx("div",{className:"fixed inset-0 bg-black/80 flex flex-col items-center justify-center p-6 z-[1000]",onClick:e,children:A.jsxs("div",{className:"w-full max-w-sm bg-stone-900 p-8 rounded-2xl shadow-2xl border border-stone-700",onClick:w=>w.stopPropagation(),children:[A.jsx("div",{className:"flex justify-center mb-6 text-red-500",children:A.jsx(Qe,{path:Ve.gm,size:48})}),A.jsx("h2",{className:"text-xl font-header font-black text-white text-center uppercase mb-6 tracking-widest",children:"   "}),A.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[A.jsx("input",{type:"password",value:i,onChange:w=>{o(w.target.value),m(!1)},placeholder:" ",className:`
                    w-full bg-stone-800 border text-center text-white text-lg p-3 rounded-lg focus:outline-none focus:ring-2
                    ${f?"border-red-500 focus:ring-red-500":"border-stone-600 focus:ring-red-600"}
                 `,autoFocus:!0}),f&&A.jsx("div",{className:"text-red-400 text-xs font-bold text-center uppercase tracking-wider animate-pulse",children:" "}),A.jsx("button",{type:"submit",disabled:x||!i,className:"w-full bg-red-700 text-white font-bold py-3 rounded-lg hover:bg-red-800 disabled:opacity-50 transition-colors shadow-lg",children:x?"...":" "}),A.jsx("button",{type:"button",onClick:e,className:"w-full bg-transparent text-stone-500 font-bold py-2 rounded-lg hover:text-white transition-colors",children:""})]})]})})},y6=({characters:r,currentCharacterId:e,onSelect:i,onCreate:o,onDelete:f,onClose:m})=>A.jsx("div",{className:"fixed inset-0 bg-stone-900/90 z-[150] flex items-center justify-center p-4 backdrop-blur-sm",onClick:m,children:A.jsxs("div",{className:"bg-stone-50 w-full max-w-4xl h-[80vh] rounded-2xl shadow-2xl overflow-hidden flex flex-col",onClick:x=>x.stopPropagation(),children:[A.jsxs("div",{className:"bg-white p-6 border-b border-stone-200 flex justify-between items-center shrink-0",children:[A.jsxs("div",{children:[A.jsx("h2",{className:"text-2xl font-header font-black uppercase text-stone-800",children:""}),A.jsx("p",{className:"text-stone-400 text-sm font-bold",children:"    "})]}),A.jsx("button",{onClick:m,className:"p-2 hover:bg-stone-100 rounded-full transition-colors",children:A.jsx(Qe,{path:'<line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>',size:24,className:"text-stone-500"})})]}),A.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-stone-100/50",children:A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6",children:[A.jsxs("button",{onClick:o,className:"group min-h-[220px] rounded-xl border-2 border-dashed border-stone-300 hover:border-emerald-500 hover:bg-emerald-50/50 flex flex-col items-center justify-center gap-4 transition-all",children:[A.jsx("div",{className:"w-16 h-16 rounded-full bg-white border border-stone-200 flex items-center justify-center group-hover:scale-110 transition-transform shadow-sm",children:A.jsx(Qe,{path:'<line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line>',size:32,className:"text-emerald-500"})}),A.jsx("span",{className:"font-header font-bold text-lg text-stone-500 group-hover:text-emerald-700 uppercase",children:" "})]}),r.map(x=>{const v=x.id===e;return A.jsxs("div",{onClick:()=>i(x.id),className:`
                                relative group min-h-[220px] rounded-xl border-2 overflow-hidden flex flex-col cursor-pointer transition-all hover:-translate-y-1 shadow-sm hover:shadow-xl
                                ${v?"border-stone-800 bg-white ring-2 ring-stone-200":"border-stone-200 bg-white hover:border-stone-400"}
                            `,children:[A.jsxs("div",{className:"h-28 bg-stone-200 relative overflow-hidden",children:[x.avatar?A.jsx("img",{src:x.avatar,alt:x.name,className:"w-full h-full object-cover"}):A.jsx("div",{className:"w-full h-full flex items-center justify-center bg-stone-100 text-stone-300",children:A.jsx(Qe,{path:Ve.char,size:48})}),A.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),v&&A.jsx("div",{className:"absolute top-2 right-2 bg-emerald-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full uppercase tracking-wider shadow",children:"Active"})]}),A.jsxs("div",{className:"p-4 flex-1 flex flex-col",children:[A.jsx("h3",{className:"font-header font-black text-lg text-stone-800 uppercase truncate leading-tight mb-1",children:x.name||""}),A.jsxs("div",{className:"text-xs font-bold text-stone-400 uppercase mb-4",children:[x.class||" ","  LVL ",x.level]}),A.jsxs("div",{className:"mt-auto flex justify-between items-center pt-3 border-t border-stone-100",children:[A.jsx("span",{className:"text-[10px] text-stone-300 font-mono",children:new Date(x.lastPlayed).toLocaleDateString()}),A.jsx("button",{onClick:E=>{E.stopPropagation(),f(x.id)},className:"p-1.5 rounded bg-white border border-stone-200 text-stone-300 hover:text-red-500 hover:border-red-200 hover:bg-red-50 transition-colors opacity-100 md:opacity-0 group-hover:opacity-100",title:"",children:A.jsx(Qe,{path:Ve.trash,size:16})})]})]})]},x.id)})]})})]})});function _6(){const[r,e]=Pe.useState(null),[i,o]=Pe.useState(!0),[f,m]=Pe.useState(!1),[x,v]=Pe.useState(!1),[E,w]=Pe.useState(cc),[T,N]=Pe.useState([]),[D,P]=Pe.useState(Jx),[G,H]=Pe.useState(null),[ye,te]=Pe.useState(!1),[$,F]=Pe.useState(null),[q,Z]=Pe.useState(!1),[U,k]=Pe.useState(!1),Y=Pe.useRef({}),[Q,Ee]=Pe.useState(null),we=Pe.useRef(null);Pe.useEffect(()=>{localStorage.getItem("vitruviy_app_unlocked")===S0&&v(!0)},[]);const ne=async(pe,Ne)=>{const Ye=new TextEncoder().encode(pe),Fe=await crypto.subtle.digest("SHA-256",Ye);return Array.from(new Uint8Array(Fe)).map(Ht=>Ht.toString(16).padStart(2,"0")).join("")===Ne},ge=async pe=>{const Ne=await ne(pe,S0);return Ne&&(localStorage.setItem("vitruviy_app_unlocked",S0),v(!0)),Ne};Pe.useEffect(()=>{if(!x)return;const pe=ZC(Ec,async Ne=>{e(Ne),Ne&&(m(!0),await Ie(Ne.uid),m(!1)),o(!1)});return()=>pe()},[x]);const Ie=async pe=>{try{const Ne=fs(hs,`users/${pe}`),Le=await A0(Ne);if(Le.exists()){const Ye=Le.val();Ye.activeState&&w(Ye.activeState),Ye.characterList&&N(Ye.characterList),Ye.gmState&&P(Ye.gmState)}else console.log("No cloud data found. Migrating local data..."),oe(pe)}catch(Ne){console.error("Failed to load data",Ne),ee("error"," ","     ")}},oe=async pe=>{try{const Ne=localStorage.getItem("vitruviy_last_char_id"),Le=localStorage.getItem("vitruviy_characters"),Ye=localStorage.getItem("vitruviy_gm_data");let Fe=cc,Me=[],ke=Jx;if(Le){if(Me=JSON.parse(Le),Ne){const Ht=localStorage.getItem(`vitruviy_data_${Ne}`);Ht&&(Fe=JSON.parse(Ht))}else if(Me.length>0){const Ht=localStorage.getItem(`vitruviy_data_${Me[0].id}`);Ht&&(Fe=JSON.parse(Ht))}}else{const Ht=Date.now().toString();Fe={...cc,characterId:Ht},Me=[{id:Ht,name:" ",class:"",level:0,lastPlayed:Date.now()}]}Ye&&(ke=JSON.parse(Ye)),w(Fe),N(Me),P(ke),await Jr(fs(hs,`users/${pe}`),{activeState:Fe,characterList:Me,gmState:ke}),ee("xp","","    ")}catch(Ne){console.error("Migration failed",Ne)}};if(Pe.useEffect(()=>{if(!r)return;const pe=setTimeout(()=>{Jr(fs(hs,`users/${r.uid}/activeState`),E);const Ne=T.find(Le=>Le.id===E.characterId);if(Ne){const Le=Math.floor(E.xp.total/10);if(Ne.name!==E.info.name||Ne.class!==E.info.class||Ne.level!==Le||Ne.avatar!==E.info.avatar){const Ye=T.map(Fe=>Fe.id===E.characterId?{...Fe,name:E.info.name,class:E.info.class,level:Le,avatar:E.info.avatar,lastPlayed:Date.now()}:Fe);N(Ye)}}},1e3);return()=>clearTimeout(pe)},[E,r]),Pe.useEffect(()=>{if(!r)return;const pe=setTimeout(()=>{Jr(fs(hs,`users/${r.uid}/characterList`),T)},1e3);return()=>clearTimeout(pe)},[T,r]),Pe.useEffect(()=>{if(!r)return;const pe=setTimeout(()=>{Jr(fs(hs,`users/${r.uid}/gmState`),D)},1e3);return()=>clearTimeout(pe)},[D,r]),!x)return A.jsx(p6,{onUnlock:ge});if(i)return A.jsx("div",{className:"fixed inset-0 bg-stone-900 flex items-center justify-center text-white font-bold",children:"..."});if(!r)return A.jsx(m6,{});if(f)return A.jsx("div",{className:"fixed inset-0 bg-stone-900 flex items-center justify-center text-white font-bold",children:"  ..."});const ee=(pe,Ne,Le,Ye,Fe,Me,ke)=>{F({type:pe,title:Ne,subtitle:Le,amount:Ye,onConfirm:Fe,confirmLabel:Me,customIcon:ke})},me=async pe=>{E.characterId&&await Jr(fs(hs,`users/${r.uid}/characters/${E.characterId}`),E);const Ne=await A0(kc(fs(hs),`users/${r.uid}/characters/${pe}`));if(Ne.exists()){const Le=Ne.val();w(Le)}else{const Le=localStorage.getItem(`vitruviy_data_${pe}`);Le?w(JSON.parse(Le)):ee("error","","   ")}Z(!1)},Ge=async()=>{E.characterId&&await Jr(fs(hs,`users/${r.uid}/characters/${E.characterId}`),E);const pe=Date.now().toString(),Ne={...cc,characterId:pe,xp:{total:0,spent:0}},Le={id:pe,name:" ",class:"",level:0,lastPlayed:Date.now()},Ye=[...T,Le];N(Ye),w(Ne),await Jr(fs(hs,`users/${r.uid}/characters/${pe}`),Ne),Z(!1)},rt=async pe=>{if(T.length<=1){ee("error","","   ");return}const Ne=T.find(Ye=>Ye.id===pe),Le=(Ne==null?void 0:Ne.name)||"";ee("confirm"," ?",` ,    ${Le}?`,0,async()=>{await Jr(fs(hs,`users/${r.uid}/characters/${pe}`),null);const Ye=T.filter(Fe=>Fe.id!==pe);if(N(Ye),E.characterId===pe){const Fe=Ye[0].id,Me=await A0(kc(fs(hs),`users/${r.uid}/characters/${Fe}`));Me.exists()&&w(Me.val())}})},lt=()=>{localStorage.getItem("vitruviy_gm_auth")===T0?fe("gmMode",!E.gmMode):E.gmMode?fe("gmMode",!1):k(!0)},W=async pe=>{const Ne=await ne(pe,T0);return Ne&&(localStorage.setItem("vitruviy_gm_auth",T0),fe("gmMode",!0)),Ne},fe=Pe.useCallback((pe,Ne)=>{w(Le=>{const Ye={...Le};let Fe=Ye;const Me=pe.split(".");return Me.slice(0,-1).forEach(ke=>Fe=Fe[ke]),Fe[Me[Me.length-1]]=Ne,Ye})},[]),Re=()=>{const pe={type:"vitruvius_backup",timestamp:Date.now(),activeState:E,characterList:T,gm:D},Ne=new Blob([JSON.stringify(pe,null,2)],{type:"application/json"}),Le=URL.createObjectURL(Ne),Ye=document.createElement("a");Ye.href=Le,Ye.download=`vitruvius_cloud_backup_${new Date().toISOString().slice(0,10)}.json`,Ye.click(),URL.revokeObjectURL(Le)},De=pe=>{var Ye;const Ne=(Ye=pe.target.files)==null?void 0:Ye[0];if(!Ne)return;if(Ne.type.startsWith("video/")){Je(Ne),pe.target.value="";return}if(Ne.type.startsWith("image/")){const Fe="hidden-qr-reader",Me=new U2(Fe);Me.scanFile(Ne,!0).then(ke=>{try{const Ht=$0(ke);!Ae(Ht)&&Ht.status==="partial"?ee("error"," ","    ."):Ht.status==="error"&&ee("error",""," .")}catch{ee("error",""," .")}Me.clear()}).catch(ke=>{ee("error","","QR  ."),Me.clear()}),pe.target.value="";return}const Le=new FileReader;Le.onload=Fe=>{var Me;try{const ke=JSON.parse((Me=Fe.target)==null?void 0:Me.result);if(ke.type==="vitruvius_backup"){ke.gm&&P(ke.gm),ke.activeState&&w(ke.activeState),ke.characterList&&N(ke.characterList),ee("xp"," ");return}if(ke.info&&ke.stats&&ke.characterId){const{adventures:Ht,currentAdventureId:Be,...zi}=ke,fi={...cc,...zi,characterId:Date.now().toString()};w(fi);const Wt={id:fi.characterId,name:fi.info.name||"Imported",class:fi.info.class||"",level:Math.floor((fi.xp.total||0)/10),avatar:fi.info.avatar,lastPlayed:Date.now()};N(pa=>[...pa,Wt]),ee("xp"," ",ke.info.name);return}E.gmMode&&D.currentAdventureId&&ke.info}catch{ee("error"," "," .")}},Le.readAsText(Ne),pe.target.value=""},Je=pe=>{const Ne=new U2("hidden-qr-reader");ee("xp"," ",", ...",0);const Le=document.createElement("video");Le.src=URL.createObjectURL(pe),Le.muted=!0,Le.playsInline=!0,Le.style.display="none",document.body.appendChild(Le);const Ye=document.createElement("canvas"),Fe=Ye.getContext("2d");let Me=!0;const ke=()=>{Me=!1,URL.revokeObjectURL(Le.src),document.body.removeChild(Le),Ne.clear(),Ee(null)},Ht=async()=>{if(!(!Me||!Fe)){if(Le.ended){ke();return}Ye.width=Le.videoWidth,Ye.height=Le.videoHeight,Fe.drawImage(Le,0,0);try{const Be=await new Promise(zi=>Ye.toBlob(zi,"image/jpeg",.8));if(Be){const zi=new File([Be],"frame.jpg",{type:"image/jpeg"});try{const fi=await Ne.scanFile(zi,!1),Wt=$0(fi);Ae(Wt)}catch{}}}catch{}Me&&!Le.ended&&setTimeout(()=>requestAnimationFrame(Ht),150)}};Le.onloadeddata=()=>{Y.current={},Le.play().then(Ht).catch(ke)},Le.onerror=ke},Ae=pe=>{if(pe.status==="partial"){const{id:Ne,index:Le,total:Ye,chunkData:Fe}=pe;Y.current[Ne]||(Y.current[Ne]={total:Ye,chunks:new Array(Ye).fill(null),receivedCount:0});const Me=Y.current[Ne];if(Me.chunks[Le]===null&&(Me.chunks[Le]=Fe,Me.receivedCount++,Ee({current:Me.receivedCount,total:Me.total}),Me.receivedCount===Me.total)){const ke=uv(Me.chunks);if(ke.status==="complete")return nt(ke.data),delete Y.current[Ne],!0;ee("error"," ","",0),Ee(null),delete Y.current[Ne]}}else if(pe.status==="complete")return nt(pe.data),!0;return!1},nt=pe=>{var Ye;if(!pe||!pe.type)return;const Ne=Fe=>w(Me=>Fe(Me)),Le=E.gmMode&&D.currentAdventureId&&["monster","npc","item","domain"].includes(pe.type);if(pe.uniqueId&&!Le){if(E.scannedIds.includes(pe.uniqueId)){ee("error","","   ");return}Ne(Fe=>({...Fe,scannedIds:[...Fe.scannedIds,pe.uniqueId]}))}if(pe.type==="xp"&&typeof pe.payload.amount=="number")Ne(Fe=>({...Fe,xp:{...Fe.xp,total:Fe.xp.total+pe.payload.amount},tab:"sheet"})),ee("xp"," ",void 0,pe.payload.amount);else if(pe.type==="item"){const Fe={...pe.payload,id:Date.now()};Ne(Me=>({...Me,inventory:[...Me.inventory,Fe],tab:"inventory"})),ee("item",Fe.name," ")}else if(pe.type==="domain"){const Fe={...pe.payload,id:Date.now(),level:0,abilities:((Ye=pe.payload.abilities)==null?void 0:Ye.map(Me=>({...Me,purchased:!1,id:Date.now()+Math.random()})))||[]};Ne(Me=>({...Me,domains:[...Me.domains,Fe],tab:"domains"})),ee("domain",Fe.name," ")}},it=()=>{const pe="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(E,null,2)),Ne=document.createElement("a");Ne.href=pe,Ne.download=`character_${E.info.name||"char"}.json`,Ne.click(),Ne.remove()},wt=()=>{const pe=E.domains.flatMap(Le=>Le.abilities.filter(Ye=>Ye.purchased)),Ne={info:E.info,stats:E.stats,trackers:E.trackers,background:E.background,inventory:E.inventory,purchasedAbilities:pe};H({type:"character_import",payload:{id:E.characterId,name:E.info.name,level:Math.floor(E.xp.total/10),class:E.info.class,snapshot:Ne}})},On=(pe,Ne,Le)=>H({type:pe,payload:Ne,actionContext:Le}),_n=pe=>{(pe==null?void 0:pe.actionType)==="delete_item"&&pe.id?(w(Ne=>({...Ne,inventory:Ne.inventory.filter(Le=>Le.id!==pe.id)})),ee("item-sent"," ")):(pe==null?void 0:pe.actionType)==="clear_inventory"&&(w(Ne=>({...Ne,inventory:[]})),ee("item-sent"," ")),H(null)},ui="w-full lg:max-w-6xl transition-all";return A.jsxs("div",{className:"min-h-screen py-4 flex flex-col items-center relative",children:[A.jsx("div",{id:"hidden-qr-reader",style:{display:"none"}}),A.jsx("input",{type:"file",ref:we,style:{display:"none"},accept:".json,image/*,video/*",onChange:De}),A.jsx(g6,{data:$,onClose:()=>F(null)}),U&&A.jsx(x6,{onUnlock:W,onClose:()=>k(!1)}),G&&A.jsx(h6,{data:G,onClose:()=>H(null),onConfirmAction:_n,notify:ee}),ye&&A.jsx(d6,{onClose:()=>te(!1),scanProgress:Q}),q&&A.jsx(y6,{characters:T,currentCharacterId:E.characterId,onSelect:me,onCreate:Ge,onDelete:rt,onClose:()=>Z(!1)}),A.jsx(VT,{activeTab:E.tab,gmMode:E.gmMode,onTabChange:pe=>fe("tab",pe),onGmToggle:lt,onScan:()=>te(!0),onDownload:Re,onImport:()=>{var pe;return(pe=we.current)==null?void 0:pe.click()},onOpenCharManager:()=>Z(!0)}),A.jsxs("div",{className:`${ui} ${E.tab==="sheet"?"block":"hidden"}`,children:[A.jsx(IT,{state:E,updateState:fe,notify:ee,onQrExport:wt,onJsonExport:it}),A.jsx(RT,{state:E,updateState:fe})]}),A.jsx("div",{className:`${ui} ${E.tab==="domains"?"block":"hidden"} bg-stone-50 shadow-2xl p-4 md:p-12 min-h-[80vh] rounded-none md:rounded-lg`,children:A.jsx(MT,{state:E,setState:w,updateState:fe,handleQR:On,notify:ee})}),A.jsx("div",{className:`${ui} ${E.tab==="inventory"?"block":"hidden"} bg-white shadow-2xl p-4 md:p-12 min-h-[80vh] rounded-none md:rounded-lg`,children:A.jsx(OT,{state:E,setState:w,updateState:fe,handleQR:On,notify:ee})}),A.jsx("div",{className:`${ui} ${E.tab==="journal"?"block":"hidden"} bg-stone-50 shadow-2xl p-4 md:p-12 min-h-[80vh] rounded-none md:rounded-lg`,children:A.jsx(LT,{state:E,updateState:fe})}),E.gmMode&&A.jsx("div",{className:`${ui} ${E.tab==="gm_adventure"?"block":"hidden"} bg-stone-100 shadow-2xl p-4 md:p-12 min-h-[80vh] rounded-none md:rounded-lg`,children:A.jsx(HT,{gmState:D,setGmState:P,updateState:fe,handleQR:On,notify:ee,onGmLogout:()=>{localStorage.removeItem("vitruviy_gm_auth"),fe("gmMode",!1)}})})]})}const sb=document.getElementById("root");if(!sb)throw new Error("Could not find root element to mount to");const w6=LE.createRoot(sb);w6.render(A.jsx(SE.StrictMode,{children:A.jsx(_6,{})}));
